/**
 * altgallery, jQuery Plugin
 *
 * @version 0.7.3
 * @copyright 2011-2013 Flash-Gallery.com
 */
if(!JSON){var JSON;JSON||(JSON={});(function(){function c(c){return 10>c?"0"+c:c}function b(c){l.lastIndex=0;return l.test(c)?'"'+c.replace(l,function(c){var b=k[c];return"string"===typeof b?b:"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'}function d(c,e){var l,w,L,y,J=p,k,u=e[c];u&&("object"===typeof u&&"function"===typeof u.toJSON)&&(u=u.toJSON(c));"function"===typeof x&&(u=x.call(e,c,u));switch(typeof u){case "string":return b(u);case "number":return isFinite(u)?String(u):
"null";case "boolean":case "null":return String(u);case "object":if(!u)return"null";p+=t;k=[];if("[object Array]"===Object.prototype.toString.apply(u)){y=u.length;for(l=0;l<y;l+=1)k[l]=d(l,u)||"null";L=0===k.length?"[]":p?"[\n"+p+k.join(",\n"+p)+"\n"+J+"]":"["+k.join(",")+"]";p=J;return L}if(x&&"object"===typeof x){y=x.length;for(l=0;l<y;l+=1)"string"===typeof x[l]&&(w=x[l],(L=d(w,u))&&k.push(b(w)+(p?": ":":")+L))}else for(w in u)Object.prototype.hasOwnProperty.call(u,w)&&(L=d(w,u))&&k.push(b(w)+
(p?": ":":")+L);L=0===k.length?"{}":p?"{\n"+p+k.join(",\n"+p)+"\n"+J+"}":"{"+k.join(",")+"}";p=J;return L}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
l=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,p,t,k={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},x;"function"!==typeof JSON.stringify&&(JSON.stringify=function(c,b,l){var e;t=p="";if("number"===typeof l)for(e=0;e<l;e+=1)t+=" ";else"string"===typeof l&&(t=l);if((x=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return d("",{"":c})});
"function"!==typeof JSON.parse&&(JSON.parse=function(c,b){function l(c,e){var d,p,w=c[e];if(w&&"object"===typeof w)for(d in w)Object.prototype.hasOwnProperty.call(w,d)&&(p=l(w,d),void 0!==p?w[d]=p:delete w[d]);return b.call(c,e,w)}var d,c=String(c);e.lastIndex=0;e.test(c)&&(c=c.replace(e,function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(c.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+c+")"),"function"===typeof b?l({"":d},""):d;throw new SyntaxError("JSON.parse");})})()}jQuery.fn.prop||(jQuery.fn.prop=jQuery.fn.attr);
jQuery.ui||function(c,b){function d(b,d){var t=b.nodeName.toLowerCase();if("area"===t){var t=b.parentNode,k=t.name;if(!b.href||!k||"map"!==t.nodeName.toLowerCase())return!1;t=c("img[usemap=#"+k+"]")[0];return!!t&&e(t)}return(/input|select|textarea|button|object/.test(t)?!b.disabled:"a"==t?b.href||d:d)&&e(b)}function e(b){return!c(b).parents().andSelf().filter(function(){return"hidden"===c.curCSS(this,"visibility")||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};c.ui.version||(c.extend(c.ui,{version:"1.8.24",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),c.fn.extend({propAttr:c.fn.prop||c.fn.attr,_focus:c.fn.focus,focus:function(b,d){return"number"===typeof b?this.each(function(){var e=
this;setTimeout(function(){c(e).focus();d&&d.call(e)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;b=c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,
"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?c(document):b},zIndex:function(d){if(d!==b)return this.css("zIndex",d);if(this.length)for(var d=c(this[0]),e;d.length&&d[0]!==document;){e=d.css("position");if("absolute"===e||"relative"===e||"fixed"===e)if(e=parseInt(d.css("zIndex"),10),!isNaN(e)&&0!==e)return e;d=d.parent()}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(c){c.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),c("<a>").outerWidth(1).jquery||c.each(["Width","Height"],function(d,e){function t(b,d,e,l){c.each(k,function(){d-=parseFloat(c.curCSS(b,"padding"+this,!0))||0;e&&(d-=parseFloat(c.curCSS(b,"border"+this+"Width",!0))||0);l&&(d-=parseFloat(c.curCSS(b,"margin"+this,!0))||0)});return d}var k="Width"===e?["Left","Right"]:["Top","Bottom"],x=e.toLowerCase(),B={innerWidth:c.fn.innerWidth,
innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+e]=function(d){return d===b?B["inner"+e].call(this):this.each(function(){c(this).css(x,t(this,d)+"px")})};c.fn["outer"+e]=function(b,d){return"number"!==typeof b?B["outer"+e].call(this,b):this.each(function(){c(this).css(x,t(this,b,!0,d)+"px")})}}),c.extend(c.expr[":"],{data:c.expr.createPseudo?c.expr.createPseudo(function(b){return function(d){return!!c.data(d,b)}}):function(b,d,e){return!!c.data(b,
e[3])},focusable:function(b){return d(b,!isNaN(c.attr(b,"tabindex")))},tabbable:function(b){var e=c.attr(b,"tabindex"),t=isNaN(e);return(t||0<=e)&&d(b,!t)}}),c(function(){var b=document.body,d=b.appendChild(d=document.createElement("div"));d.offsetHeight;c.extend(d.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=100===d.offsetHeight;c.support.selectstart="onselectstart"in d;b.removeChild(d).style.display="none"}),c.curCSS||(c.curCSS=c.css),c.extend(c.ui,{plugin:{add:function(b,
d,e){var b=c.ui[b].prototype,k;for(k in e)b.plugins[k]=b.plugins[k]||[],b.plugins[k].push([d,e[k]])},call:function(c,b,d){if((b=c.plugins[b])&&c.element[0].parentNode)for(var e=0;e<b.length;e++)c.options[b[e][0]]&&b[e][1].apply(c.element,d)}},contains:function(c,b){return document.compareDocumentPosition?c.compareDocumentPosition(b)&16:c!==b&&c.contains(b)},hasScroll:function(b,d){if("hidden"===c(b).css("overflow"))return!1;var e=d&&"left"===d?"scrollLeft":"scrollTop",k=!1;if(0<b[e])return!0;b[e]=
1;k=0<b[e];b[e]=0;return k},isOverAxis:function(c,b,d){return c>b&&c<b+d},isOver:function(b,d,e,k,x,B){return c.ui.isOverAxis(b,e,x)&&c.ui.isOverAxis(d,k,B)}}))}(jQuery);
jQuery.widget||function(c,b){if(c.cleanData){var d=c.cleanData;c.cleanData=function(b){for(var e=0,t;null!=(t=b[e]);e++)try{c(t).triggerHandler("remove")}catch(k){}d(b)}}else{var e=c.fn.remove;c.fn.remove=function(b,d){return this.each(function(){d||(!b||c.filter(b,[this]).length)&&c("*",this).add([this]).each(function(){try{c(this).triggerHandler("remove")}catch(b){}});return e.call(c(this),b,d)})}}c.widget=function(b,d,e){var k=b.split(".")[0],x,b=b.split(".")[1];x=k+"-"+b;e||(e=d,d=c.Widget);c.expr[":"][x]=
function(d){return!!c.data(d,b)};c[k]=c[k]||{};c[k][b]=function(c,b){arguments.length&&this._createWidget(c,b)};d=new d;d.options=c.extend(!0,{},d.options);c[k][b].prototype=c.extend(!0,d,{namespace:k,widgetName:b,widgetEventPrefix:c[k][b].prototype.widgetEventPrefix||b,widgetBaseClass:x},e);c.widget.bridge(b,c[k][b])};c.widget.bridge=function(d,e){c.fn[d]=function(t){var k="string"===typeof t,x=Array.prototype.slice.call(arguments,1),B=this,t=!k&&x.length?c.extend.apply(null,[!0,t].concat(x)):t;
if(k&&"_"===t.charAt(0))return B;k?this.each(function(){var e=c.data(this,d),p=e&&c.isFunction(e[t])?e[t].apply(e,x):e;if(p!==e&&p!==b)return B=p,!1}):this.each(function(){var b=c.data(this,d);b?b.option(t||{})._init():c.data(this,d,new e(t,this))});return B}};c.Widget=function(c,b){arguments.length&&this._createWidget(c,b)};c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,d){c.data(d,this.widgetName,this);this.element=c(d);this.options=c.extend(!0,
{},this.options,this._getCreateOptions(),b);var e=this;this.element.bind("remove."+this.widgetName,function(){e.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return c.metadata&&c.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(d,e){var t=d;if(0===arguments.length)return c.extend({},this.options);if("string"===typeof d){if(e===b)return this.options[d];t={};t[d]=e}this._setOptions(t);return this},_setOptions:function(b){var d=this;c.each(b,function(c,b){d._setOption(c,b)});return this},_setOption:function(c,b){this.options[c]=b;"disabled"===c&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
b);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,d,e){var k,x=this.options[b],e=e||{},d=c.Event(d);d.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();d.target=this.element[0];if(b=d.originalEvent)for(k in b)k in d||(d[k]=b[k]);this.element.trigger(d,e);return!(c.isFunction(x)&&!1===x.call(this.element[0],d,e)||d.isDefaultPrevented())}}}(jQuery);
jQuery.ui.mouse||function(c){var b=!1;c(document).mouseup(function(){b=!1});c.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(c){return b._mouseDown(c)}).bind("click."+this.widgetName,function(e){if(!0===c.data(e.target,b.widgetName+".preventClickEvent"))return c.removeData(e.target,b.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName);this._mouseMoveDelegate&&c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(d){if(!b){this._mouseStarted&&this._mouseUp(d);this._mouseDownEvent=d;var e=this,l=1==d.which,p="string"==typeof this.options.cancel&&d.target.nodeName?c(d.target).closest(this.options.cancel).length:!1;if(!l||p||!this._mouseCapture(d))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=
setTimeout(function(){e.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=!1!==this._mouseStart(d),!this._mouseStarted))return d.preventDefault(),!0;!0===c.data(d.target,this.widgetName+".preventClickEvent")&&c.removeData(d.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(c){return e._mouseMove(c)};this._mouseUpDelegate=function(c){return e._mouseUp(c)};c(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+
this.widgetName,this._mouseUpDelegate);d.preventDefault();return b=!0}},_mouseMove:function(b){if(c.browser.msie&&!(9<=document.documentMode)&&!b.button)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+
this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&c.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return!1},_mouseDistanceMet:function(c){return Math.max(Math.abs(this._mouseDownEvent.pageX-c.pageX),Math.abs(this._mouseDownEvent.pageY-c.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery);
jQuery.ui.draggable||function(c){c.widget("ui.draggable",c.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&
(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(b){var d=this.options;if(this.helper||d.disabled||c(b.target).is(".ui-resizable-handle"))return!1;
this.handle=this._getHandle(b);if(!this.handle)return!1;d.iframeFix&&c(!0===d.iframeFix?"iframe":d.iframeFix).each(function(){c('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(c(this).offset()).appendTo("body")});return!0},_mouseStart:function(b){var d=this.options;this.helper=this._createHelper(b);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();
c.ui.ddmanager&&(c.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};c.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b);
this.originalPageX=b.pageX;this.originalPageY=b.pageY;d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);d.containment&&this._setContainment();if(!1===this._trigger("start",b))return this._clear(),!1;this._cacheHelperProportions();c.ui.ddmanager&&!d.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,b);this._mouseDrag(b,!0);c.ui.ddmanager&&c.ui.ddmanager.dragStart(this,b);return!0},_mouseDrag:function(b,d){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");
if(!d){var e=this._uiHash();if(!1===this._trigger("drag",b,e))return this._mouseUp({}),!1;this.position=e.position}if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";c.ui.ddmanager&&c.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var d=!1;c.ui.ddmanager&&!this.options.dropBehaviour&&(d=c.ui.ddmanager.drop(this,b));this.dropped&&(d=this.dropped,this.dropped=
!1);for(var e=this.element[0],l=!1;e&&(e=e.parentNode);)e==document&&(l=!0);if(!l&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!d||"valid"==this.options.revert&&d||!0===this.options.revert||c.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)){var p=this;c(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==p._trigger("stop",b)&&p._clear()})}else!1!==this._trigger("stop",b)&&this._clear();return!1},
_mouseUp:function(b){c("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});c.ui.ddmanager&&c.ui.ddmanager.dragStop(this,b);return c.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(b){var d=!this.options.handle||!c(this.options.handle,this.element).length?!0:!1;c(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(d=!0)});
return d},_createHelper:function(b){var d=this.options,b=c.isFunction(d.helper)?c(d.helper.apply(this.element[0],[b])):"clone"==d.helper?this.element.clone().removeAttr("id"):this.element;b.parents("body").length||b.appendTo("parent"==d.appendTo?this.element[0].parentNode:d.appendTo);b[0]!=this.element[0]&&!/(fixed|absolute)/.test(b.css("position"))&&b.css("position","absolute");return b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));c.isArray(b)&&(b={left:+b[0],top:+b[1]||
0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&(this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],
this.offsetParent[0]))&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&c.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var c=this.element.position();return{top:c.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:c.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=["document"==b.containment?0:c(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:c(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:c(window).scrollLeft())+c("document"==b.containment?document:
window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:c(window).scrollTop())+(c("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var b=c(b.containment),d=b[0];if(d){b.offset();var e="hidden"!=c(d).css("overflow");this.containment=[(parseInt(c(d).css("borderLeftWidth"),10)||0)+(parseInt(c(d).css("paddingLeft"),
10)||0),(parseInt(c(d).css("borderTopWidth"),10)||0)+(parseInt(c(d).css("paddingTop"),10)||0),(e?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c(d).css("borderLeftWidth"),10)||0)-(parseInt(c(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c(d).css("borderTopWidth"),10)||0)-(parseInt(c(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];
this.relative_container=b}}else b.containment.constructor==Array&&(this.containment=b.containment)},_convertPositionTo:function(b,d){d||(d=this.position);var e="absolute"==b?1:-1,l="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,p=/(html|body)/i.test(l[0].tagName);return{top:d.top+this.offset.relative.top*e+this.offset.parent.top*e-(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?
0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():p?0:l.scrollTop())*e),left:d.left+this.offset.relative.left*e+this.offset.parent.left*e-(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():p?0:l.scrollLeft())*e)}},_generatePosition:function(b){var d=this.options,e="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,
l=/(html|body)/i.test(e[0].tagName),p=b.pageX,t=b.pageY;if(this.originalPosition){var k;this.containment&&(this.relative_container?(k=this.relative_container.offset(),k=[this.containment[0]+k.left,this.containment[1]+k.top,this.containment[2]+k.left,this.containment[3]+k.top]):k=this.containment,b.pageX-this.offset.click.left<k[0]&&(p=k[0]+this.offset.click.left),b.pageY-this.offset.click.top<k[1]&&(t=k[1]+this.offset.click.top),b.pageX-this.offset.click.left>k[2]&&(p=k[2]+this.offset.click.left),
b.pageY-this.offset.click.top>k[3]&&(t=k[3]+this.offset.click.top));d.grid&&(t=d.grid[1]?this.originalPageY+Math.round((t-this.originalPageY)/d.grid[1])*d.grid[1]:this.originalPageY,t=k?!(t-this.offset.click.top<k[1]||t-this.offset.click.top>k[3])?t:!(t-this.offset.click.top<k[1])?t-d.grid[1]:t+d.grid[1]:t,p=d.grid[0]?this.originalPageX+Math.round((p-this.originalPageX)/d.grid[0])*d.grid[0]:this.originalPageX,p=k?!(p-this.offset.click.left<k[0]||p-this.offset.click.left>k[2])?p:!(p-this.offset.click.left<
k[0])?p-d.grid[0]:p+d.grid[0]:p)}return{top:t-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():l?0:e.scrollTop()),left:p-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():l?0:e.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");
this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(b,d,e){e=e||this._uiHash();c.ui.plugin.call(this,b,[d,e]);"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute"));return c.Widget.prototype._trigger.call(this,b,d,e)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});c.extend(c.ui.draggable,{version:"1.8.24"});
c.ui.plugin.add("draggable","connectToSortable",{start:function(b,d){var e=c(this).data("draggable"),l=e.options,p=c.extend({},d,{item:e.element});e.sortables=[];c(l.connectToSortable).each(function(){var d=c.data(this,"sortable");d&&!d.options.disabled&&(e.sortables.push({instance:d,shouldRevert:d.options.revert}),d.refreshPositions(),d._trigger("activate",b,p))})},stop:function(b,d){var e=c(this).data("draggable"),l=c.extend({},d,{item:e.element});c.each(e.sortables,function(){this.instance.isOver?
(this.instance.isOver=0,e.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==e.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,l))})},drag:function(b,d){var e=c(this).data("draggable"),l=this;c.each(e.sortables,function(){this.instance.positionAbs=
e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=c(l).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return d.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,
!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=e.offset.click.top,this.instance.offset.click.left=e.offset.click.left,this.instance.offset.parent.left-=e.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=e.offset.parent.top-this.instance.offset.parent.top,e._trigger("toSortable",b),e.dropped=this.instance.element,e.currentItem=e.element,this.instance.fromOutside=e),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&
(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),e._trigger("fromSortable",b),e.dropped=!1)})}});c.ui.plugin.add("draggable","cursor",{start:function(){var b=c("body"),d=c(this).data("draggable").options;
b.css("cursor")&&(d._cursor=b.css("cursor"));b.css("cursor",d.cursor)},stop:function(){var b=c(this).data("draggable").options;b._cursor&&c("body").css("cursor",b._cursor)}});c.ui.plugin.add("draggable","opacity",{start:function(b,d){var e=c(d.helper),l=c(this).data("draggable").options;e.css("opacity")&&(l._opacity=e.css("opacity"));e.css("opacity",l.opacity)},stop:function(b,d){var e=c(this).data("draggable").options;e._opacity&&c(d.helper).css("opacity",e._opacity)}});c.ui.plugin.add("draggable",
"scroll",{start:function(){var b=c(this).data("draggable");b.scrollParent[0]!=document&&"HTML"!=b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var d=c(this).data("draggable"),e=d.options,l=!1;if(d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName){if(!e.axis||"x"!=e.axis)d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?d.scrollParent[0].scrollTop=l=d.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<
e.scrollSensitivity&&(d.scrollParent[0].scrollTop=l=d.scrollParent[0].scrollTop-e.scrollSpeed);if(!e.axis||"y"!=e.axis)d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?d.scrollParent[0].scrollLeft=l=d.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(d.scrollParent[0].scrollLeft=l=d.scrollParent[0].scrollLeft-e.scrollSpeed)}else{if(!e.axis||"x"!=e.axis)b.pageY-c(document).scrollTop()<e.scrollSensitivity?l=c(document).scrollTop(c(document).scrollTop()-
e.scrollSpeed):c(window).height()-(b.pageY-c(document).scrollTop())<e.scrollSensitivity&&(l=c(document).scrollTop(c(document).scrollTop()+e.scrollSpeed));if(!e.axis||"y"!=e.axis)b.pageX-c(document).scrollLeft()<e.scrollSensitivity?l=c(document).scrollLeft(c(document).scrollLeft()-e.scrollSpeed):c(window).width()-(b.pageX-c(document).scrollLeft())<e.scrollSensitivity&&(l=c(document).scrollLeft(c(document).scrollLeft()+e.scrollSpeed))}!1!==l&&(c.ui.ddmanager&&!e.dropBehaviour)&&c.ui.ddmanager.prepareOffsets(d,
b)}});c.ui.plugin.add("draggable","snap",{start:function(){var b=c(this).data("draggable"),d=b.options;b.snapElements=[];c(d.snap.constructor!=String?d.snap.items||":data(draggable)":d.snap).each(function(){var d=c(this),l=d.offset();this!=b.element[0]&&b.snapElements.push({item:this,width:d.outerWidth(),height:d.outerHeight(),top:l.top,left:l.left})})},drag:function(b,d){for(var e=c(this).data("draggable"),l=e.options,p=l.snapTolerance,t=d.offset.left,k=t+e.helperProportions.width,x=d.offset.top,
B=x+e.helperProportions.height,v=e.snapElements.length-1;0<=v;v--){var I=e.snapElements[v].left,w=I+e.snapElements[v].width,L=e.snapElements[v].top,y=L+e.snapElements[v].height;if(I-p<t&&t<w+p&&L-p<x&&x<y+p||I-p<t&&t<w+p&&L-p<B&&B<y+p||I-p<k&&k<w+p&&L-p<x&&x<y+p||I-p<k&&k<w+p&&L-p<B&&B<y+p){if("inner"!=l.snapMode){var J=Math.abs(L-B)<=p,T=Math.abs(y-x)<=p,u=Math.abs(I-k)<=p,U=Math.abs(w-t)<=p;J&&(d.position.top=e._convertPositionTo("relative",{top:L-e.helperProportions.height,left:0}).top-e.margins.top);
T&&(d.position.top=e._convertPositionTo("relative",{top:y,left:0}).top-e.margins.top);u&&(d.position.left=e._convertPositionTo("relative",{top:0,left:I-e.helperProportions.width}).left-e.margins.left);U&&(d.position.left=e._convertPositionTo("relative",{top:0,left:w}).left-e.margins.left)}var Y=J||T||u||U;"outer"!=l.snapMode&&(J=Math.abs(L-x)<=p,T=Math.abs(y-B)<=p,u=Math.abs(I-t)<=p,U=Math.abs(w-k)<=p,J&&(d.position.top=e._convertPositionTo("relative",{top:L,left:0}).top-e.margins.top),T&&(d.position.top=
e._convertPositionTo("relative",{top:y-e.helperProportions.height,left:0}).top-e.margins.top),u&&(d.position.left=e._convertPositionTo("relative",{top:0,left:I}).left-e.margins.left),U&&(d.position.left=e._convertPositionTo("relative",{top:0,left:w-e.helperProportions.width}).left-e.margins.left));!e.snapElements[v].snapping&&(J||T||u||U||Y)&&e.options.snap.snap&&e.options.snap.snap.call(e.element,b,c.extend(e._uiHash(),{snapItem:e.snapElements[v].item}));e.snapElements[v].snapping=J||T||u||U||Y}else e.snapElements[v].snapping&&
e.options.snap.release&&e.options.snap.release.call(e.element,b,c.extend(e._uiHash(),{snapItem:e.snapElements[v].item})),e.snapElements[v].snapping=!1}}});c.ui.plugin.add("draggable","stack",{start:function(){var b=c(this).data("draggable").options,b=c.makeArray(c(b.stack)).sort(function(b,d){return(parseInt(c(b).css("zIndex"),10)||0)-(parseInt(c(d).css("zIndex"),10)||0)});if(b.length){var d=parseInt(b[0].style.zIndex)||0;c(b).each(function(c){this.style.zIndex=d+c});this[0].style.zIndex=d+b.length}}});
c.ui.plugin.add("draggable","zIndex",{start:function(b,d){var e=c(d.helper),l=c(this).data("draggable").options;e.css("zIndex")&&(l._zIndex=e.css("zIndex"));e.css("zIndex",l.zIndex)},stop:function(b,d){var e=c(this).data("draggable").options;e._zIndex&&c(d.helper).css("zIndex",e._zIndex)}})}(jQuery);
jQuery.effects||jQuery.effects||function(c,b){function d(b){var d;return b&&b.constructor==Array&&3==b.length?b:(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10)]:(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3])]:(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(d[1],
16),parseInt(d[2],16),parseInt(d[3],16)]:(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(b)?x.transparent:x[c.trim(b).toLowerCase()]}function e(){var c=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},d,e;if(c&&c.length&&c[0]&&c[c[0]])for(var k=c.length;k--;)d=c[k],"string"==typeof c[d]&&(e=d.replace(/\-(\w)/g,function(c,b){return b.toUpperCase()}),b[e]=
c[d]);else for(d in c)"string"===typeof c[d]&&(b[d]=c[d]);return b}function l(b){var d,e;for(d in b)e=b[d],(null==e||c.isFunction(e)||d in v||/scrollbar/.test(d)||!/color/i.test(d)&&isNaN(parseFloat(e)))&&delete b[d];return b}function p(c,b){var d={_:0},e;for(e in b)c[e]!=b[e]&&(d[e]=b[e]);return d}function t(b,d,e,k){"object"==typeof b&&(k=d,e=null,d=b,b=d.effect);c.isFunction(d)&&(k=d,e=null,d={});if("number"==typeof d||c.fx.speeds[d])k=e,e=d,d={};c.isFunction(e)&&(k=e,e=null);d=d||{};e=e||d.duration;
e=c.fx.off?0:"number"==typeof e?e:e in c.fx.speeds?c.fx.speeds[e]:c.fx.speeds._default;k=k||d.complete;return[b,d,e,k]}function k(b){return!b||("number"===typeof b||c.fx.speeds[b])||"string"===typeof b&&!c.effects[b]?!0:!1}c.effects={};c.each("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor borderColor color outlineColor".split(" "),function(b,e){c.fx.step[e]=function(b){if(!b.colorInit){var w;w=b.elem;var k=e,p;do{p=(c.curCSS||c.css)(w,k);if(""!=p&&"transparent"!=
p||c.nodeName(w,"body"))break;k="backgroundColor"}while(w=w.parentNode);w=d(p);b.start=w;b.end=d(b.end);b.colorInit=!0}b.elem.style[e]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var x={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],
cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,
255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},B=["add","remove","toggle"],v={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};c.effects.animateClass=function(b,d,k,t){c.isFunction(k)&&(t=k,k=null);return this.queue(function(){var v=
c(this),u=v.attr("style")||" ",x=l(e.call(this)),I,O=v.attr("class")||"";c.each(B,function(c,d){if(b[d])v[d+"Class"](b[d])});I=l(e.call(this));v.attr("class",O);v.animate(p(x,I),{queue:!1,duration:d,easing:k,complete:function(){c.each(B,function(c,d){if(b[d])v[d+"Class"](b[d])});"object"==typeof v.attr("style")?(v.attr("style").cssText="",v.attr("style").cssText=u):v.attr("style",u);t&&t.apply(this,arguments);c.dequeue(this)}})})};c.fn.extend({_addClass:c.fn.addClass,addClass:function(b,d,e,k){return d?
c.effects.animateClass.apply(this,[{add:b},d,e,k]):this._addClass(b)},_removeClass:c.fn.removeClass,removeClass:function(b,d,e,k){return d?c.effects.animateClass.apply(this,[{remove:b},d,e,k]):this._removeClass(b)},_toggleClass:c.fn.toggleClass,toggleClass:function(d,e,k,p,t){return"boolean"==typeof e||e===b?k?c.effects.animateClass.apply(this,[e?{add:d}:{remove:d},k,p,t]):this._toggleClass(d,e):c.effects.animateClass.apply(this,[{toggle:d},e,k,p])},switchClass:function(b,d,e,k,p){return c.effects.animateClass.apply(this,
[{add:d,remove:b},e,k,p])}});c.extend(c.effects,{version:"1.8.24",save:function(c,b){for(var d=0;d<b.length;d++)null!==b[d]&&c.data("ec.storage."+b[d],c[0].style[b[d]])},restore:function(c,b){for(var d=0;d<b.length;d++)null!==b[d]&&c.css(b[d],c.data("ec.storage."+b[d]))},setMode:function(c,b){"toggle"==b&&(b=c.is(":hidden")?"show":"hide");return b},getBaseline:function(c,b){var d,e;switch(c[0]){case "top":d=0;break;case "middle":d=0.5;break;case "bottom":d=1;break;default:d=c[0]/b.height}switch(c[1]){case "left":e=
0;break;case "center":e=0.5;break;case "right":e=1;break;default:e=c[1]/b.width}return{x:e,y:d}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var d={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},e=c("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),k=document.activeElement;try{k.id}catch(p){k=document.body}b.wrap(e);(b[0]===k||c.contains(b[0],k))&&c(k).focus();
e=b.parent();"static"==b.css("position")?(e.css({position:"relative"}),b.css({position:"relative"})):(c.extend(d,{position:b.css("position"),zIndex:b.css("z-index")}),c.each(["top","left","bottom","right"],function(c,e){d[e]=b.css(e);isNaN(parseInt(d[e],10))&&(d[e]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));return e.css(d).show()},removeWrapper:function(b){var d,e=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(d=b.parent().replaceWith(b),(b[0]===
e||c.contains(b[0],e))&&c(e).focus(),d):b},setTransition:function(b,d,e,k){k=k||{};c.each(d,function(c,d){var p=b.cssUnit(d);0<p[0]&&(k[d]=p[0]*e+p[1])});return k}});c.fn.extend({effect:function(b,d,e,k){var p=t.apply(this,arguments),l={options:p[1],duration:p[2],callback:p[3]},p=l.options.mode,v=c.effects[b];return c.fx.off||!v?p?this[p](l.duration,l.callback):this.each(function(){l.callback&&l.callback.call(this)}):v.call(this,l)},_show:c.fn.show,show:function(c){if(k(c))return this._show.apply(this,
arguments);var b=t.apply(this,arguments);b[1].mode="show";return this.effect.apply(this,b)},_hide:c.fn.hide,hide:function(c){if(k(c))return this._hide.apply(this,arguments);var b=t.apply(this,arguments);b[1].mode="hide";return this.effect.apply(this,b)},__toggle:c.fn.toggle,toggle:function(b){if(k(b)||"boolean"===typeof b||c.isFunction(b))return this.__toggle.apply(this,arguments);var d=t.apply(this,arguments);d[1].mode="toggle";return this.effect.apply(this,d)},cssUnit:function(b){var d=this.css(b),
e=[];c.each(["em","px","%","pt"],function(c,b){0<d.indexOf(b)&&(e=[parseFloat(d),b])});return e}});var I={};c.each(["Quad","Cubic","Quart","Quint","Expo"],function(c,b){I[b]=function(b){return Math.pow(b,c+2)}});c.extend(I,{Sine:function(c){return 1-Math.cos(c*Math.PI/2)},Circ:function(c){return 1-Math.sqrt(1-c*c)},Elastic:function(c){return 0===c||1===c?c:-Math.pow(2,8*(c-1))*Math.sin((80*(c-1)-7.5)*Math.PI/15)},Back:function(c){return c*c*(3*c-2)},Bounce:function(c){for(var b,d=4;c<((b=Math.pow(2,
--d))-1)/11;);return 1/Math.pow(4,3-d)-7.5625*Math.pow((3*b-2)/22-c,2)}});c.each(I,function(b,d){c.easing["easeIn"+b]=d;c.easing["easeOut"+b]=function(c){return 1-d(1-c)};c.easing["easeInOut"+b]=function(c){return 0.5>c?d(2*c)/2:d(-2*c+2)/-2+1}})}(jQuery);var altgallery,altbox;
(function(c,b){function d(a,c){return Math.floor(Math.random()*(c-a+1))+a}function e(a){var c=[],f,b;for(f=0;f<a.length;f++)for(b=0;b<a[f].items.length;b++)c.push(a[f].items[b]);return c}function l(){return navigator.userAgent.match(/(iPhone|iPod|Android 2)/i)?!0:!1}function p(a){return"object"==typeof a&&a.length!==b}function t(a){c(a).css({display:"block",position:"static",cssFloat:"none",clear:"none",left:"auto",right:"auto",top:"auto",bottom:"auto",width:"auto",height:"auto",minWidth:"none",minHeight:"none",
maxWidth:"none",maxHeight:"none",overflow:"visible",margin:0,padding:0,border:"none",background:"none",color:"#000000",fontFamily:"serif",fontSize:"16px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:"normal",lineHeight:"normal",opacity:1,outline:"none",textAlign:"left",textIndent:0,textShadow:"none",visibility:"visible",whiteSpace:"normal",cursor:"inherit"})}function k(a,c){"object"==typeof a&&(c=a.target,a=a.link);c||(c="_blank");switch(c){case "_blank":window.open(a);
break;case "_parent":parent.location.href=a;break;case "_self":location.href=a;break;case "_top":top.location.href=a;break;default:top.frames[c].location.href=a}}function x(){var a=document.getElementsByTagName("script");return a[a.length-1].src||location.href}function B(a){return'url("'+a+'")'}function v(a){if("number"==typeof a)return"#"+sprintf("%06x",a);if("string"==typeof a){var c;return(c=a.match(/[0-9a-f]{3,6}$/i))?3==c[0].length?"#"+c[0]+c[0]+c[1]+c[1]+c[2]+c[2]:"#"+c[0]:(c=a.match(/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i))?
"#"+sprintf("%02x",c[1])+sprintf("%02x",c[2])+sprintf("%02x",c[3]):a}}function I(a,c){var a=v(a),f=a.match(/#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i);if(f){for(var d=[],E=1;3>=E;E++)d.push(parseInt(f[E],16));return c!==b?"rgba("+d[0]+", "+d[1]+", "+d[2]+", "+c+")":"rgb("+d[0]+", "+d[1]+", "+d[2]+")"}return"transparent"}function w(a){for(var c in a)"object"==typeof a[c]?a[c]=w(a[c]):"true"==a[c]?a[c]=!0:"false"==a[c]?a[c]=!1:a[c]==parseInt(a[c])&&(a[c]=parseInt(a[c]));return a}function L(a){var c=
"",f,b=a.length;for(f=0;f<b;f++)c+=a.charCodeAt(f).toString(16);return c}function y(a,r){function f(a,c,f){for(var r in a)r.match("-")?a[c+r]=a[r]:a[f+r.charAt(0).toUpperCase()+r.slice(1)]=a[r]}c.browser.mozilla?f(r,"-moz-","Moz"):c.browser.webkit?f(r,"-webkit-","webkit"):c.browser.opera?f(r,"-o-","O"):c.browser.msie&&f(r,"-ms-","ms");c(a).css(r)}function J(a,r){if(r===b)return r={},c(a).data("transform")||{};c(a).each(function(){var a=[],b;for(b in r)a.push(b+"("+r[b]+")");a=a.join(" ");c(this).data("transform",
r).css({"-moz-transform":a,"-webkit-transform":a,"-khtml-transform":a,"-o-transform":a,"-ms-transform":a,transform:a})});return c(a)}function T(){if(da===b){var a=location.hostname.toString().replace(/^www\./i,"");da=!location.hostname||-1!=c.inArray(L(a),oa)}return da}function u(a,c,f){f===b&&"number"==typeof c&&(f=c,c=b);f=f||10;if(a&&P[a]===b){var d=new Image;P[a]=d;P[a].loaded=!1;P[a].callbacks=[];"function"==typeof c&&P[a].callbacks.push(c);setTimeout(function(){d.onload=function(){P[a].loaded=
!0;for(var c=0;c<P[a].callbacks.length;c++)P[a].callbacks[c](P[a])};d.src=a},f)}else P[a].loaded?"function"==typeof c&&c(P[a]):"function"==typeof c&&P[a].callbacks.push(c)}function U(a,r,f,d){f===b&&"number"==typeof r&&(f=r,r=b);f=f||10;if("string"==typeof a)return u(a,r,f);if(p(a)){var d=d||[],E=a.slice();setTimeout(function(){var a=E.shift(),a="string"==typeof a?a:a.source||a.src||c(a).attr("src");u(a,function(a){E.length?(d.push(a),U(E,r,f,d)):"function"==typeof r&&r(d)})},f)}}function Y(a,r){r=
r||{};c(a).each(function(){var a=!1,b=!1;c(this).mousedown(function(){a=!0;return!1}).mousemove(function(c){a&&(b?"function"==typeof r.touchmove&&r.touchmove(c):(b=!0,"function"==typeof r.touchstart&&r.touchstart(c)));return!1}).mouseup(function(c){a=!1;b&&(b=!1,"function"==typeof r.touchend&&r.touchend(c));return!1}).mouseleave(function(c){a=!1;b&&(b=!1,"function"==typeof r.touchcancel&&r.touchcancel(c))})})}function O(a){function r(a){m||(m=!0,n=a.changedTouches[0],s=window.setTimeout(function(){m=
!1;var a=n,c=document.createEvent("MouseEvent");c.initMouseEvent("mouseup",!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(c);c=document.createEvent("MouseEvent");c.initMouseEvent("mousedown",!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,2,null);a.target.dispatchEvent(c);c=document.createEvent("MouseEvent");c.initMouseEvent("contextmenu",!0,!0,window,1,a.screenX+50,a.screenY+5,a.clientX+50,a.clientY+5,!1,!1,!1,!1,2,null);a.target.dispatchEvent(c);
q=!0;n=null},800))}function f(){m&&(window.clearTimeout(s),m=!1,n=null)}function b(a){var D="";if(!(1<a.touches.length)){switch(a.type){case "touchstart":if(c(a.changedTouches[0].target).is("select"))return;var D=a.changedTouches[0],m="mouseover",n=document.createEvent("MouseEvent");n.initMouseEvent(m,!0,!0,window,1,D.screenX,D.screenY,D.clientX,D.clientY,!1,!1,!1,!1,0,null);D.target.dispatchEvent(n);m="mousedown";n=document.createEvent("MouseEvent");n.initMouseEvent(m,!0,!0,window,1,D.screenX,D.screenY,
D.clientX,D.clientY,!1,!1,!1,!1,0,null);D.target.dispatchEvent(n);e?(window.clearTimeout(h),D.target==d?(d=null,e=!1,m="click",n=document.createEvent("MouseEvent"),n.initMouseEvent(m,!0,!0,window,1,D.screenX,D.screenY,D.clientX,D.clientY,!1,!1,!1,!1,0,null),D.target.dispatchEvent(n),m="dblclick",n=document.createEvent("MouseEvent"),n.initMouseEvent(m,!0,!0,window,1,D.screenX,D.screenY,D.clientX,D.clientY,!1,!1,!1,!1,0,null),D.target.dispatchEvent(n)):(d=D.target,e=!0,h=window.setTimeout(function(){e=
!1},600),r(a))):(d=D.target,e=!0,h=window.setTimeout(function(){e=!1},600),r(a));a.preventDefault();return!1;case "touchmove":f();D="mousemove";a.preventDefault();break;case "touchend":if(q)return q=!1,a.preventDefault(),!1;f();D="mouseup";break;default:return}a=a.changedTouches[0];m=document.createEvent("MouseEvent");m.initMouseEvent(D,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(m);"mouseup"==D&&(e&&a.target==d)&&(m=document.createEvent("MouseEvent"),
m.initMouseEvent("click",!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(m))}}var d=null,e=!1,h=null,m=!1,n=null,s=null,q=!1;c.support.touch&&c(a).each(function(){this.addEventListener("touchstart",b,!1);this.addEventListener("touchmove",b,!1);this.addEventListener("touchend",b,!1);this.addEventListener("touchcancel",b,!1)})}function na(a,r){this.init=function(){var f=c('<div class="altgallery-canvas"></div>');t(f);f.css({display:"block",position:"relative",
width:r.width,height:r.height,cursor:"default"});y(f,{userSelect:"none"});this.element=c("<div></div>");this.element.css({display:"block",position:"relative",width:r.width,height:r.height,overflow:"hidden",margin:0,padding:0,background:r.background});f.append(this.element);var b=c('<a href="http://www.flash-gallery.com/" target="_blank" style="display:block;position:absolute;left:0;top:0;z-index:9999;width:90px;height:20px;overflow:hidden;font-family:Tahoma,Arial,Helvetica,sans-serif;font-size:9px;line-height:12px;text-align:left;text-decoration:none;text-shadow:none;color:#fff;background:rgba(0,0,0,0.7);opacity:0.7;border-radius:4px;"><span style="display:block;padding:4px 10px;text-transform:uppercase;font-size:8px;font-weight:bold;white-space:nowrap;">Photo Gallery</span><span style="display:block;padding:5px 10px 10px;font-size:9px;background:rgba(0,0,0,0.5);border-bottom-left-radius:4px;border-bottom-right-radius:4px;opacity:0;">Download free version of this gallery from Flash-Gallery.com</span></a>');
fa=736;if(!T()){var d=b.width();c.browser.opera&&b.css({width:100}).find("span:first").css({letterSpacing:"-1px"});c.browser.msie&&9>c.browser.version?(b.css({background:"#444"}).find("span:last").css({background:"#222"}),b.hover(function(){c(this).stop().animate({width:120},"fast",function(){c(this).animate({height:70},"fast",function(){c(this).find("span:last").show()})})},function(){c(this).find("span:last").hide();c(this).stop().animate({height:20},"fast",function(){c(this).animate({width:d},
"fast")})})):b.hover(function(){c(this).stop().animate({width:120},"fast",function(){c(this).animate({height:70,opacity:1},"fast",function(){c(this).find("span:last").animate({opacity:1},"slow")})})},function(){c(this).find("span:last").animate({opacity:0},"fast");c(this).stop().animate({height:20},"fast",function(){c(this).animate({width:d,opacity:0.7},"fast")})});f.append(b)}c(a).empty().append(f)};this.init();this.empty=function(){this.element.empty()};this.width=function(a){return a===b?this.element.width():
this.element.width(a)};this.height=function(a){return a===b?this.element.height():this.element.height(a)};this.append=function(a){return this.element.append(a)};this.drawImage=function(a,r,d){var r=c.extend({left:0,top:0,width:120,height:90,scaleMode:"fill",background:"none"},r),d=d===b?this.element:c(d,this.element),e=new Image;e.onload=function(){var b=document.createElement("a");c(b).attr({href:a.source});c(b).css({display:"block",position:"absolute",left:r.x,top:r.y,zIndex:r.z,width:r.width,height:r.height,
overflow:"hidden",background:r.background});c(b).click(r.onclick);c(b).hover(r.onmouseover,r.onmouseout);var m=document.createElement("img");m.src=e.src;var n;"fit"==r.scaleMode?n=G.fit(this.width,this.height,r.width,r.height):"fill"==r.scaleMode&&(n=G.fill(this.width,this.height,r.width,r.height));c(m).css({marginTop:n.top,marginRight:0,marginBottom:0,marginLeft:n.left,width:n.width,height:n.height,padding:0,border:"none",maxWidth:"none",maxHeight:"none",opacity:r.opacity});c(b).append(m);d.append(b)};
e.src=a.thumb}}function X(a,r,f,b){var d=this;d.options=b||{};this.canvas=a;this.albums=r;this.items=e(r);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.onOpen=function(){};d.onOpenItem={};this.settings=c.extend(!0,{image:{scaleMode:"fit",cornerRadius:10,align:"center",transitionEffect:"fade",transitionDuration:1,useShadow:!0},caption:{visibleMode:"onRollOver",position:"bottom",bgColor:0,bgAlpha:30,color:16777215,fontName:"Arial",fontSize:11},thumbBar:{useThumbBar:!0,
position:"bottom",scrollSpeed:10},thumbnail:{width:80,height:60,cornerRadius:10,alpha:70,outlineColor:3355443,outlineColorOnRollOver:6710886,outlineColorOnClick:10066329,useShadow:!0},slideshow:{start:!1,delay:2.5,loop:!0,stopAutoOnClick:!0}},f||{});this.settings=w(this.settings);(new Image).src=d.options.images.loader;d.settings.slideshow.start&&setTimeout(function(){d.slideshowStart()},500*d.settings.image.transitionDuration);this.render()}function M(a,r,f,b){this.options=b||{};this.canvas=a;this.albums=
r;this.items=e(r);this.currentItem=-1;this.getCurrentItem=function(){return this.items[this.currentItem]};this.defaultSettings={image:{scaleMode:"fill",padding:0,bgTintColor:16777215},thumbnail:{width:80,height:60,alpha:70},caption:{showCaption:!0},buttons:{showImageNavigationButtons:!0,showLinkButton:!0,showFacebookButton:!0,showTwitterButton:!0,showSlideshowButton:!0,showFullscreenButton:!0},slideshow:{start:!1,delay:2.5},translation:{image:"Image",clickToView:"Click to view",getLink:"Get link",
shareWithFacebook:"Share with Facebook",tweet:"Tweet",startSlideshow:"Start slideshow",stopSlideshow:"Stop slideshow",fullscreenMode:"Fullscreen mode"}};this.settings=c.extend(!0,this.defaultSettings,f||{});this.settings=w(this.settings);this.init()}function R(a,r,f,b){this.options=b||{};this.canvas=a;this.albums=r;this.items=e(r);this.currentItem=-1;this.getCurrentItem=function(){return this.items[this.currentItem]};this.defaultSettings={thumbnail:{width:120,height:90,alpha:85},colorScheme:{thumbsFrameColor:16777215,
imageBGColor:1118481,useShadow:!0},imageCaption:{position:"top",color:16777215,bgColor:0,bgAlpha:30,fontName:"Arial",fontSize:11,visibleMode:"always"}};this.settings=c.extend(!0,this.defaultSettings,f||{});this.settings=w(this.settings);this.page=0;u(this.options.images.loader,500);this.render()}function K(a,r,f,b){this.options=b||{};this.canvas=a;this.albums=r;this.items=e(r);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.defaultSettings={initialState:"Load Image",
slideshowDelay:2,showCaption:!0,base:{color:4080713,visibleFrame:5},buttons:{showSlideshowButton:!0,showThumbnailsButton:!0,bgColor:15066854}};this.settings=c.extend(!0,this.defaultSettings,f||{});this.settings=w(this.settings);this.enableThumbnailsHover=!0;this.drag=!1;u(this.options.images.loader,500);this.init()}function V(a,r,f,b){var d=this;d.options=b||{};this.canvas=a;this.albums=r;this.settings=c.extend(!0,{imageAngle:30,maxImageWidth:0,useHighlight:!0,useScrollBar:!0,showReflections:!0,solidReflection:!0,
reflectionAlpha:80,slideShow:!1,slideShowDelay:2,flipDuration:1,startPosition:"center",colorScheme:"custom",preloader:{stripesAlpha:45,barColor:0,barAlpha:30,bgColor:0,bgAlpha:20,innerShadow:20,dropShadow:30},scrollbar:{bgColor:0,bgAlpha:40,handleColor:0,handleAlpha:40,arrowsColor:0,arrowsAlpha:40,innerShadow:20,dropShadow:20},caption:{textColor:16777215,bgColor:0,bgAlpha:80,frameColor:16777215,frameAlpha:40,shadowAlpha:50,multilingual:!1,multilingualFontSize:12},background:{bgColor:16777215,transparentBG:!0}},
f||{});this.settings=w(this.settings);this.settings.maxImageWidth||(this.settings.maxImageWidth=parseInt(a.element.width()/2));l()&&(this.settings.useScrollBar=!1);if(f=this.settings.showReflections)f=this.canvas.element.css("backgroundColor"),f=(v(f).match(/[0-9a-f]{6}$/i)?!0:!1)&&!(c.browser.msie&&9>c.browser.version);this.showReflections=f;this.items=e(r);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.getItemX=function(a){return-(this.currentItem-a)};
this.getItemZ=function(a){return parseInt(this.items.length/2)-Math.abs(this.getItemX(a))};this.currentItem="left"==this.settings.startPosition?0:"right"==this.settings.startPosition?this.items.length:Math.floor((this.items.length-1)/2);(new Image).src=d.options.images.loader;this.scene=c('<div class="altgallery-scene"></div>');this.scene.css({position:"relative",width:a.width(),height:a.height()});this.canvas.element.append(this.scene);var g;Y(this.scene,{touchstart:function(a){d.drag=!0;g=a.pageX},
touchend:function(a){var a=a.pageX-g,c=Math.abs(a)>d.canvas.width()/2?2:1;30<a?(setTimeout(function(){d.drag=!1},100),d.prev(c)):-30>a?(setTimeout(function(){d.drag=!1},100),d.next(c)):d.drag=!1},touchcancel:function(){setTimeout(function(){d.drag=!1},100)}});O(this.scene);this.render()}function W(a,r,f,b){this.options=b||{};this.canvas=a;this.albums=r;this.items=e(r);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.getNextItem=function(a){return this.items[(this.currentItem+
(a||1))%this.items.length]};this.defaultSettings={slideshow:!1,frameColor:16777215,useShadow:!0,visibleImages:5,maxAngle:5,image:{width:0,height:0},imageScaleMode:"fill",caption:{color:0,fontName:"Arial"},usePhotoNumbers:!0,translation:{back:"BACK",gotoLink:"GO TO LINK"}};this.settings=c.extend(!0,this.defaultSettings,f||{});this.settings=w(this.settings);3>this.settings.visibleImages&&(this.settings.visibleImages=3);this.settings.visibleImages>this.items.length&&(this.settings.visibleImages=this.items.length);
this.stack=[];this.init()}function N(a,r,f,b){this.options=b||{};this.canvas=a;this.albums=r;this.currentAlbum=0;this.getCurrentAlbum=function(){return this.albums[this.currentAlbum]};this.currentItem=0;this.getCurrentItem=function(){return this.getCurrentAlbum().items[this.currentItem]};this.settings=c.extend(!0,{initialState:"Show Albums",imageScaleMode:"fill",frameSize:5,frameColor:"#ffffff",backgroundColor:"#aac5d8",cornerRadius:7,iconWidth:90,iconHeight:55,iconPadding:10,panelBackgroundAlpha:50,
showCaption:"always",captionBackgroundAlpha:40,showButtons:"always",buttonsBackgroundAlpha:40,showAlbumsButton:!0,showThumbnailsButton:!0,showSlideshowButton:!0,showNavigationButton:!0,useEmbeddedFont:!0,fontName:"Arial",fontSize:11,translation:{Album:"Album",Albums:"Albums",Image:"Image",Images:"Images",Close:"CLOSE",BackToAlbums:"BACK TO ALBUMS",LoadingImage:"Loading Image",Of:"of"}},f||{});this.settings=w(this.settings);this.settings.useEmbeddedFont&&(this.settings.fontName="Tahoma",this.settings.fontSize=
9);u(this.options.images.loader,500);this.cache=function(){if(0<=this.currentItem){var a=this.getCurrentAlbum().items,c=[],f,r;for(r=this.currentItem+1;r<this.currentItem+3;r++)(f=a[(a.length+r)%a.length])&&(f=f.source)&&c.push(f);for(r=this.currentItem-1;r>this.currentItem-2;r--)(f=a[(a.length+r)%a.length])&&(f=f.source)&&c.push(f);c.length&&U(c,100)}};this.render()}window.altgallery_id=window.altgallery_id||0;var oa=["3132372e302e302e31","6c6f63616c686f7374","666c6173682d67616c6c6572792e636f6d"];
sprintfWrapper={init:function(){if("undefined"==typeof arguments||1>arguments.length||"string"!=typeof arguments[0]||"undefined"==typeof RegExp)return null;for(var a=arguments[0],c=RegExp(/(%([%]|(\-)?(\+|\x20)?(0)?(\d+)?(\.(\d)?)?([bcdfosxX])))/g),f=[],b=[],d=0,e=0,h=0,e=0,m="",n=null;n=c.exec(a);)n[9]&&(d+=1),h=c.lastIndex-n[0].length,b[b.length]=a.substring(e,h),e=c.lastIndex,f[f.length]={match:n[0],left:n[3]?!0:!1,sign:n[4]||"",pad:n[5]||" ",min:n[6]||0,precision:n[8],code:n[9]||"%",negative:0>
parseInt(arguments[d])?!0:!1,argument:String(arguments[d])};b[b.length]=a.substring(e);if(0==f.length)return a;if(arguments.length-1<d)return null;a=null;for(a=0;a<f.length;a++)"%"==f[a].code?substitution="%":"b"==f[a].code?(f[a].argument=String(Math.abs(parseInt(f[a].argument)).toString(2)),substitution=sprintfWrapper.convert(f[a],!0)):"c"==f[a].code?(f[a].argument=String(String.fromCharCode(parseInt(Math.abs(parseInt(f[a].argument))))),substitution=sprintfWrapper.convert(f[a],!0)):"d"==f[a].code?
(f[a].argument=String(Math.abs(parseInt(f[a].argument))),substitution=sprintfWrapper.convert(f[a])):"f"==f[a].code?(f[a].argument=String(Math.abs(parseFloat(f[a].argument)).toFixed(f[a].precision?f[a].precision:6)),substitution=sprintfWrapper.convert(f[a])):"o"==f[a].code?(f[a].argument=String(Math.abs(parseInt(f[a].argument)).toString(8)),substitution=sprintfWrapper.convert(f[a])):"s"==f[a].code?(f[a].argument=f[a].argument.substring(0,f[a].precision?f[a].precision:f[a].argument.length),substitution=
sprintfWrapper.convert(f[a],!0)):"x"==f[a].code?(f[a].argument=String(Math.abs(parseInt(f[a].argument)).toString(16)),substitution=sprintfWrapper.convert(f[a])):"X"==f[a].code?(f[a].argument=String(Math.abs(parseInt(f[a].argument)).toString(16)),substitution=sprintfWrapper.convert(f[a]).toUpperCase()):substitution=f[a].match,m+=b[a],m+=substitution;return m+=b[a]},convert:function(a,c){a.sign=c?"":a.negative?"-":a.sign;var f=a.min-a.argument.length+1-a.sign.length,f=Array(0>f?0:f).join(a.pad);return a.left?
"0"==a.pad||c?a.sign+a.argument+f.replace(/0/g," "):a.sign+a.argument+f:"0"==a.pad||c?a.sign+f+a.argument:f+a.sign+a.argument}};sprintf=sprintfWrapper.init;var fa;location.href.match(/#jsgallerydebug$/);var da,P={};c.extend(c.support,{touch:"ontouchstart"in document});x();var ga=x().replace(/[^\/]*$/,""),G={fit:function(a,r,f,b,d){var e,h,m=a/r,d=c.extend({noEnlarge:!1,minWidth:16,minHeight:16},d);e=f;h=f/m;h>b&&(h=b,e=h*m);e<d.minWidth&&(e=d.minWidth,h=e/m);h<d.minHeight&&(h=d.minHeight,e=h*m);if(d.noEnlarge&&
(e>a||h>r))e=a,h=r;a=(b-h)/2;return{left:Math.round((f-e)/2),top:Math.round(a),width:Math.round(e),height:Math.round(h),margin:0}},fill:function(a,c,f,b){var d=a/c,a=f,c=f/d;c<b&&(c=b,a=c*d);b=(b-c)/2;return{left:Math.round((f-a)/2),top:Math.round(b),width:Math.round(a),height:Math.round(c),margin:0}}},C,ha=function(a,c,f){var b=[];null==c&&(c=document);null==f&&(f="*");c=c.getElementsByTagName(f);f=c.length;a=RegExp("(^|\\s)"+a+"(\\s|$)");for(j=i=0;i<f;i++)a.test(c[i].className)&&(b[j]=c[i],j++);
return b},$=function(a,c){if(C.debug)try{switch(c){case "warn":console.warn("Pixastic:",a);break;case "error":console.error("Pixastic:",a);break;default:console.log("Pixastic:",a)}}catch(f){}};if("undefined"!=typeof pixastic_parseonload&&pixastic_parseonload){var ia=!1,aa=function(){if(!ia){ia=!0;for(var a=ha("pixastic",null,"img"),c=ha("pixastic",null,"canvas"),f=a.concat(c),b=0;b<f.length;b++)(function(){for(var a=f[b],c=[],r=a.className.split(" "),d=0;d<r.length;d++){var e=r[d];"pixastic-"==e.substring(0,
9)&&(e=e.substring(9),""!=e&&c.push(e))}if(c.length)if("img"==a.tagName.toLowerCase())if(r=new Image,r.src=a.src,r.complete)for(r=0;r<c.length;r++)(d=C.applyAction(a,a,c[r],null))&&(a=d);else r.onload=function(){for(var f=0;f<c.length;f++){var r=C.applyAction(a,a,c[f],null);r&&(a=r)}};else setTimeout(function(){for(var f=0;f<c.length;f++){var r=C.applyAction(a,a,c[f],null);r&&(a=r)}},1)})()}};document.write('<script defer src="//:" id="__onload_ie_pixastic__"><\/script>');var ba=document.getElementById("__onload_ie_pixastic__");
ba.onreadystatechange=function(){"complete"==ba.readyState&&(ba.parentNode.removeChild(ba),aa())};document.addEventListener&&document.addEventListener("DOMContentLoaded",aa,!1);var S=window;S.addEventListener?S.addEventListener("load",aa,!1):S.attachEvent&&S.attachEvent("onload",aa)}var S=document.createElement("canvas"),ja=!1;try{ja=!!("function"==typeof S.getContext&&S.getContext("2d"))}catch(qa){}var S=function(){return ja},Z,Q=document.createElement("canvas"),ka=!1;try{if("function"==typeof Q.getContext&&
(Z=Q.getContext("2d")))ka="function"==typeof Z.getImageData}catch(ra){}Z=function(){return ka};var la=!1,Q=document.createElement("canvas");if(S()&&Z()){Q.width=Q.height=1;Q=Q.getContext("2d");Q.fillStyle="rgb(255,0,0)";Q.fillRect(0,0,1,1);var ca=document.createElement("canvas");ca.width=ca.height=1;var ma=ca.getContext("2d");ma.fillStyle="rgb(0,0,255)";ma.fillRect(0,0,1,1);Q.globalAlpha=0.5;Q.drawImage(ca,0,0);la=255!=Q.getImageData(0,0,1,1).data[2]}C={parseOnLoad:!1,debug:!1,applyAction:function(a,
c,f,b){var b=b||{},d="canvas"==a.tagName.toLowerCase();if(d&&C.Client.isIE())return C.debug&&$("Tried to process a canvas element but browser is IE."),!1;var e,h,m=!1;C.Client.hasCanvas()&&(m=!!b.resultCanvas,e=b.resultCanvas||document.createElement("canvas"),h=e.getContext("2d"));var n=a.offsetWidth,s=a.offsetHeight;d&&(n=a.width,s=a.height);if(0==n||0==s)if(null==a.parentNode){var q=a.style.position,z=a.style.left;a.style.position="absolute";a.style.left="-9999px";document.body.appendChild(a);n=
a.offsetWidth;s=a.offsetHeight;document.body.removeChild(a);a.style.position=q;a.style.left=z}else{C.debug&&$("Image has 0 width and/or height.");return}if(-1<f.indexOf("(")&&(q=f,f=q.substr(0,q.indexOf("(")),q=q.match(/\((.*?)\)/),q[1])){q=q[1].split(";");for(z=0;z<q.length;z++)if(thisArg=q[z].split("="),2==thisArg.length)if("rect"==thisArg[0]){var H=thisArg[1].split(",");b[thisArg[0]]={left:parseInt(H[0],10)||0,top:parseInt(H[1],10)||0,width:parseInt(H[2],10)||0,height:parseInt(H[3],10)||0}}else b[thisArg[0]]=
thisArg[1]}b.rect?(b.rect.left=Math.round(b.rect.left),b.rect.top=Math.round(b.rect.top),b.rect.width=Math.round(b.rect.width),b.rect.height=Math.round(b.rect.height)):b.rect={left:0,top:0,width:n,height:s};q=!1;C.Actions[f]&&"function"==typeof C.Actions[f].process&&(q=!0);if(!q)return C.debug&&$('Invalid action "'+f+'". Maybe file not included?'),!1;if(!C.Actions[f].checkSupport())return C.debug&&$('Action "'+f+'" not supported by this browser.'),!1;C.Client.hasCanvas()?(e!==a&&(e.width=n,e.height=
s),m||(e.style.width=n+"px",e.style.height=s+"px"),h.drawImage(c,0,0,n,s),a.__pixastic_org_image?(e.__pixastic_org_image=a.__pixastic_org_image,e.__pixastic_org_width=a.__pixastic_org_width,e.__pixastic_org_height=a.__pixastic_org_height):(e.__pixastic_org_image=a,e.__pixastic_org_width=n,e.__pixastic_org_height=s)):C.Client.isIE()&&"undefined"==typeof a.__pixastic_org_style&&(a.__pixastic_org_style=a.style.cssText);c={image:a,canvas:e,width:n,height:s,useData:!0,options:b};return!C.Actions[f].process(c)?
!1:C.Client.hasCanvas()?(c.useData&&C.Client.hasCanvasImageData()&&(e.getContext("2d").putImageData(c.canvasData,b.rect.left,b.rect.top),e.getContext("2d").fillRect(0,0,0,0)),b.leaveDOM||(e.title=a.title,e.imgsrc=a.imgsrc,d||(e.alt=a.alt),d||(e.imgsrc=a.src),e.className=a.className,e.style.cssText=a.style.cssText,e.name=a.name,e.tabIndex=a.tabIndex,e.id=a.id,a.parentNode&&a.parentNode.replaceChild&&a.parentNode.replaceChild(e,a)),b.resultCanvas=e):a},prepareData:function(a,c){var f=a.canvas.getContext("2d"),
b=a.options.rect,f=f.getImageData(b.left,b.top,b.width,b.height),b=f.data;c||(a.canvasData=f);return b},process:function(a,c,f,b){if("img"==a.tagName.toLowerCase()){var d=new Image;d.src=a.src;if(d.complete){var e=C.applyAction(a,d,c,f);b&&b(e);return e}d.onload=function(){var e=C.applyAction(a,d,c,f);b&&b(e)}}if("canvas"==a.tagName.toLowerCase())return e=C.applyAction(a,a,c,f),b&&b(e),e},revert:function(a){if(C.Client.hasCanvas()){if("canvas"==a.tagName.toLowerCase()&&a.__pixastic_org_image)return a.width=
a.__pixastic_org_width,a.height=a.__pixastic_org_height,a.getContext("2d").drawImage(a.__pixastic_org_image,0,0),a.parentNode&&a.parentNode.replaceChild&&a.parentNode.replaceChild(a.__pixastic_org_image,a),a}else C.Client.isIE()&&"undefined"!=typeof a.__pixastic_org_style&&(a.style.cssText=a.__pixastic_org_style)},Client:{hasCanvas:S,hasCanvasImageData:Z,hasGlobalAlpha:function(){return la},isIE:function(){return!!document.all&&!!window.attachEvent&&!window.opera}},Actions:{}};C.Actions.blurfast=
{process:function(a){var c=parseFloat(a.options.amount)||0,f=!!(a.options.clear&&"false"!=a.options.clear),c=Math.max(0,Math.min(5,c));if(C.Client.hasCanvas()){var b=a.options.rect,d=a.canvas.getContext("2d");d.save();d.beginPath();d.rect(b.left,b.top,b.width,b.height);d.clip();var e=Math.round(a.width/2),h=Math.round(a.height/2),m=document.createElement("canvas");m.width=e;m.height=h;for(var f=!1,c=Math.round(20*c),n=m.getContext("2d"),s=0;s<c;s++){var q=Math.max(1,Math.round(e-s)),z=Math.max(1,
Math.round(h-s));n.clearRect(0,0,e,h);n.drawImage(a.canvas,0,0,a.width,a.height,0,0,q,z);f&&d.clearRect(b.left,b.top,b.width,b.height);d.drawImage(m,0,0,q,z,0,0,a.width,a.height)}d.restore();a.useData=!1;return!0}if(C.Client.isIE())return f=10*c,a.image.style.filter+=" progid:DXImageTransform.Microsoft.Blur(pixelradius="+f+")",a.image.style.marginLeft=(parseInt(a.image.style.marginLeft,10)||0)-Math.round(f)+"px",a.image.style.marginTop=(parseInt(a.image.style.marginTop,10)||0)-Math.round(f)+"px",
!0},checkSupport:function(){return C.Client.hasCanvas()||C.Client.isIE()}};var pa=23;X.prototype.render=function(){var a=this,b=this.settings,f=this.canvas,d=this.items,e=c('<div class="altgallery-imageFrame" style="position:absolute;"></div>'),g={},h;if(b.thumbBar.useThumbBar)switch(b.thumbBar.position.toLowerCase()){default:case "bottom":h=!0;g.left=10;g.top=10;g.width=f.width()-20;g.height=f.height()-b.thumbnail.height-30;break;case "top":h=!0;g.left=10;g.bottom=10;g.width=f.width()-20;g.height=
f.height()-b.thumbnail.height-30;break;case "left":h=!1;g.right=10;g.top=10;g.width=f.width()-b.thumbnail.width-30;g.height=f.height()-20;break;case "right":h=!1,g.left=10,g.top=10,g.width=f.width()-b.thumbnail.width-30,g.height=f.height()-20}else g.left=10,g.top=10,g.width=f.width()-20,g.height=f.height()-20;e.css(g);f.element.append(e);var m,n;Y(e,{touchstart:function(c){a.drag=!0;m=c.pageX;n=c.pageY},touchend:function(c){c=h?c.pageX-m:c.pageY-n;30<c?(setTimeout(function(){a.drag=!1},100),a.prev()):
-30>c?(setTimeout(function(){a.drag=!1},100),a.next()):a.drag=!1},touchcancel:function(){a.drag=!1}});O(e);if(b.thumbBar.useThumbBar){var s=a.thumbBar=c('<div class="altgallery-thumbBar"></div>'),q,z,H,k,F,e={};switch(b.thumbBar.position.toLowerCase()){default:case "bottom":q="horizontal";z=f.width()-20;H=b.thumbnail.height+4;k=d.length*(b.thumbnail.width+5)-5;F=H;e.left=10;e.bottom=7;e.width=z;e.height=H;break;case "top":q="horizontal";z=f.width()-20;H=b.thumbnail.height+4;k=d.length*(b.thumbnail.width+
5)-5;F=H;e.left=10;e.top=9;e.width=z;e.height=H;break;case "left":q="vertical";z=b.thumbnail.width+4;H=f.height()-20;k=z;F=d.length*(b.thumbnail.height+5)-5;e.left=9;e.top=10;e.width=z;e.height=H;break;case "right":q="vertical",z=b.thumbnail.width+4,H=f.height()-20,k=z,F=d.length*(b.thumbnail.height+5)-5,e.right=8,e.top=10,e.width=z,e.height=H}e.position="absolute";e.overflow="hidden";s.css(e);var A=c("<div></div>");A.css({position:"relative",width:k,height:F});for(e=0;e<d.length;e++)(function(f){var e=
c('<a href="'+d[f].source+'"></a>');e.css({position:"absolute",left:"horizontal"==q?f*(b.thumbnail.width+5):1,top:"horizontal"==q?1:f*(b.thumbnail.height+5),width:b.thumbnail.width-4,height:b.thumbnail.height-4,overflow:"hidden",border:"2px solid",borderColor:v(b.thumbnail.outlineColor),"-moz-border-radius":b.thumbnail.cornerRadius/2,"-webkit-border-radius":b.thumbnail.cornerRadius/2,"-khtml-border-radius":b.thumbnail.cornerRadius/2,borderRadius:b.thumbnail.cornerRadius/2,opacity:b.thumbnail.alpha/
100});e.hover(function(){var a=c(this);a.hasClass("altgallery-active")||(a.data("style",{opacity:a.css("opacity"),borderColor:a.css("borderTopColor")}),a.css({borderColor:v(b.thumbnail.outlineColorOnRollOver),opacity:1}))},function(){var a=c(this);a.hasClass("altgallery-active")||a.css(a.data("style"))});a.onOpenItem[f]=function(){var a=s.find("a").eq(f);a.parent().find("a").removeClass("altgallery-active").css({opacity:b.thumbnail.alpha/100,borderColor:v(b.thumbnail.outlineColor)});a.addClass("altgallery-active").data("style",
{opacity:1,borderColor:v(b.thumbnail.outlineColorOnClick)}).css(a.data("style"));var c;if("horizontal"==q&&z<k){var d=0-(f*(b.thumbnail.width+5)-z/2+b.thumbnail.width/2),a=0-k+z;0<d&&(d=0);d<a&&(d=a);A.animate({left:d});A.unbind("mouseleave").mouseleave(function(){c=setTimeout(function(){A.animate({left:d},1E3)},1E3)})}else H<F&&(d=0-(f*(b.thumbnail.height+5)-H/2+b.thumbnail.height/2),a=0-F+H,0<d&&(d=0),d<a&&(d=a),A.animate({top:d}),A.unbind("mouseleave").mouseleave(function(){c=setTimeout(function(){A.animate({top:d},
1E3)},1E3)}));A.unbind("mouseenter").mouseenter(function(){clearTimeout(c)})};e.click(function(){a.drag||(a.currentItem=f,c(this).hasClass("altgallery-active")||a.open(d[f]));return!1});A.append(e);var m=new Image;m.onload=function(){var a=c('<img src="'+d[f].thumb+'" alt="" />');t(a);a.css({position:"absolute",border:"none"});a.css(G.fill(this.width,this.height,b.thumbnail.width-4,b.thumbnail.height-4));b.thumbnail.useShadow&&e.css({"-moz-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)",
"-khtml-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.5)"});e.append(a)};m.src=d[f].thumb})(e);s.append(A);var p=function(){clearInterval(l);u=!1},l,u=!1;"horizontal"==q&&z<k?(s.mousemove(function(f){a.drag||(f=f.pageX-c(this).offset().left,30>f?u||(u=!0,A.stop(),l=setInterval(function(){var a=parseInt(A.css("left"))+parseInt(b.thumbBar.scrollSpeed);0<a?(A.css("left",0),p()):A.css("left",a)},25)):f>z-30?u||(u=!0,A.stop(),l=setInterval(function(){var a=parseInt(A.css("left"))-
parseInt(b.thumbBar.scrollSpeed),c=0-k+z;a<c?(A.css("left",c),p()):A.css("left",a)},25)):p())}),A.draggable({axis:"x",start:function(){a.drag=!0},stop:function(c,b){var f=b.position.left,d=0-k+z;0<f?A.animate({left:0},"fast"):f<d&&A.animate({left:d},"fast");setTimeout(function(){a.drag=!1},100)}})):H<F&&(s.mousemove(function(f){a.drag||(f=f.pageY-c(this).offset().top,30>f?u||(u=!0,A.stop(),l=setInterval(function(){var a=parseInt(A.css("top"))+parseInt(b.thumbBar.scrollSpeed);0<a?(A.css("top",0),p()):
A.css("top",a)},25)):f>H-30?u||(u=!0,A.stop(),l=setInterval(function(){var a=parseInt(A.css("top"))-parseInt(b.thumbBar.scrollSpeed),c=0-F+H;a<c?(A.css("top",c),p()):A.css("top",a)},25)):p())}),A.draggable({axis:"y",start:function(){a.drag=!0},stop:function(c,f){var b=f.position.top,d=0-F+H;0<b?A.animate({top:0},"fast"):b<d&&A.animate({top:d},"fast");setTimeout(function(){a.drag=!1},100)}}));O(A);s.mouseleave(function(){p()});f.element.append(s);f.element.find(".altgallery-thumbBar a").eq(a.currentItem).click()}else a.open(a.getCurrentItem())};
X.prototype.open=function(a){var b=this,f=this.settings,d=this.canvas,e=d.element.find(".altgallery-imageFrame"),g=c('<img class="altgallery-preloader" src="'+b.options.images.loader+'" alt="" />');t(g);g.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});u(a.source,function(h){g.hide();d.element.find(".altgallery-preloader").remove();var m=f.image.scaleMode.toLowerCase(),n="fill"==m?G.fill(h.width,h.height,e.width(),e.height()):G.fit(h.width,h.height,e.width(),e.height()),
s;a.link?(s=c("<a></a>"),s.attr("href",a.link),a.target&&s.attr("target",a.target)):s=c("<div></div>");s.click(function(){if(b.drag)return!1});s.css({display:"block",position:"absolute",left:"fill"==m?0:n.left,top:"fill"==m?0:n.top,width:"fill"==m?e.width():n.width,height:"fill"==m?e.height():n.height,overflow:"hidden","-moz-border-radius":f.image.cornerRadius/2,"-webkit-border-radius":f.image.cornerRadius/2,"-khtml-border-radius":f.image.cornerRadius/2,borderRadius:f.image.cornerRadius/2});f.image.useShadow&&
s.css({"-moz-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-khtml-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.5)"});var q=c('<img src="'+h.src+'" alt="" />');t(q);q.css({position:"absolute",left:"fill"==m?n.left:0,top:"fill"==m?n.top:0,width:n.width,height:n.height});s.append(q);if(a.description&&"never"!=f.caption.visibleMode.toLowerCase()){var z=c("<div></div>");z.html(a.description.replace("\n","<br/>"));
z.css({position:"absolute",left:0,width:n.width-20,padding:"9px 10px",fontFamily:f.caption.fontName,fontSize:f.caption.fontSize,lineHeight:1.25,color:v(f.caption.color),background:I(f.caption.bgColor,f.caption.bgAlpha/100)});"top"==f.caption.position.toLowerCase()?(z.css({top:0,borderBottom:"1px solid",borderBottomColor:I("#000000",(f.caption.bgAlpha+10)/100)}),"onrollover"==f.caption.visibleMode.toLowerCase()&&("ontouchstart"in document||z.css({top:-(z.height()+18)}).hide(),s.hover(function(){z.show().stop().animate({top:0},
b.options.animation.duration)},function(){z.stop().animate({top:-(z.height()+18)},b.options.animation.duration,function(){z.hide()})}))):(z.css({bottom:0,borderTop:"1px solid",borderTopColor:I("#000000",(f.caption.bgAlpha+10)/100)}),"onrollover"==f.caption.visibleMode.toLowerCase()&&("ontouchstart"in document||z.css({bottom:-(z.height()+18)}).hide(),s.hover(function(){z.show().stop().animate({bottom:0},b.options.animation.duration)},function(){z.stop().animate({bottom:-(z.height()+18)},b.options.animation.duration,
function(){z.hide()})})));s.append(z)}switch(f.image.transitionEffect.toLowerCase()){default:case "fade":e.animate({opacity:0},{duration:500*f.image.transitionDuration,easing:"linear",complete:function(){e.empty();e.append(s);e.animate({opacity:1},{duration:500*f.image.transitionDuration,easing:"swing",complete:function(){b.onOpen(h)}})}});break;case "xfade":case "crossfade":e.css({opacity:1}),m=e.find("div"),m.size()?(m.animate({opacity:0},{duration:1E3*f.image.transitionDuration,easing:"linear",
complete:function(){c(this).remove();b.onOpen(h)}}),e.append(s),s.css({opacity:0}).animate({opacity:1},{duration:1E3*f.image.transitionDuration,easing:"linear"})):(e.append(s),s.css({opacity:0}).animate({opacity:1},{duration:1E3*f.image.transitionDuration,easing:"linear",complete:function(){b.onOpen(h)}}))}b.onOpenItem[parseInt(a.id)]()});setTimeout(function(){d.element.find(".altgallery-preloader").remove();e.append(g)},500)};X.prototype.prev=function(){0<this.currentItem?this.currentItem--:this.currentItem=
this.items.length-1;this.open(this.getCurrentItem())};X.prototype.next=function(){this.currentItem<this.items.length-1?this.currentItem++:this.currentItem=0;this.open(this.getCurrentItem())};X.prototype.slideshowStart=function(){var a=this;a.slideshow=!0;a.onOpen=function(){a.slideshowTimer&&clearInterval(a.slideshowTimer);a.slideshowTimer=setTimeout(function(){a.next()},1E3*a.settings.slideshow.delay)};if(a.settings.slideshow.stopAutoOnClick){var c=function(){a.slideshowStop();a.canvas.element.unbind("click",
c).find("a").unbind("click",c)};a.canvas.element.bind("click",c).find("a").bind("click",c)}};X.prototype.slideshowStop=function(){this.onOpen=function(){};this.slideshow=!1;clearInterval(this.slideshowTimer)};M.prototype.init=function(){var a=this,c=a.settings;a.initPreloader();a.initImage();a.initNavigation();a.initThumbnails();a.initCaption();a.initButtons();var b,d=0;if((b=location.hash.match(/#galleryPhotoNumber=(\d+)/))||(b=location.href.match(/[?&]galleryPhotoNumber=(\d+)/)))d=b[1]-1;a.open(a.items[d],
function(){c.slideshow.start&&a.slideshowStart()})};M.prototype.initPreloader=function(){var a=this.canvas;u(this.options.images.loader,500);var b=this.preloader=c('<img alt="" />');b.attr({src:this.options.images.loader}).css({position:"absolute",left:"50%",top:"50%",zIndex:100,margin:"-16px 0 0 -16px"});a.append(b)};M.prototype.initImage=function(){var a=this,b=a.canvas,f=a.settings;0==f.image.padding&&(a.zeroPadding=!0,f.image.padding=10);var d=c("<div />");d.css({position:"absolute",left:0,top:0,
width:b.width(),height:b.height()});b.append(d);if(!a.zeroPadding){var e=a.background=c("<div />");e.css({position:"absolute",left:0,top:0,zIndex:0,width:b.width(),height:b.height(),overflow:"hidden",background:v(f.image.bgTintColor)});d.append(e)}e=a.imageFrame=c("<div />");e.css({position:"absolute",left:f.image.padding,top:f.image.padding,zIndex:1,width:b.width()-2*f.image.padding,height:b.height()-2*f.image.padding,overflow:"visible"});d.append(e);var g;Y(d,{touchstart:function(c){a.drag=!0;g=
c.pageX},touchend:function(c){c=c.pageX-g;30<c?(setTimeout(function(){a.drag=!1},100),a.prev()):-30>c?(setTimeout(function(){a.drag=!1},100),a.next()):a.drag=!1},touchcancel:function(){setTimeout(function(){a.drag=!1},100)}});O(d)};M.prototype.initNavigation=function(){this.settings.buttons.showImageNavigationButtons&&(this.initPrevButton(),this.initNextButton())};M.prototype.initPrevButton=function(){var a=this,b=a.canvas,f=a.prevButton=c("<div></div>");f.css({position:"absolute",left:-10,top:(b.height()-
69)/2,zIndex:1,width:72,height:69,background:"no-repeat center 0",backgroundImage:B(a.options.images.folder+"aura-arrows.png"),opacity:0.5,cursor:"pointer"}).hover(function(){c(this).css({opacity:1})},function(){c(this).css({opacity:0.5})}).click(function(){a.prev();return!1});b.append(f)};M.prototype.initNextButton=function(){var a=this,b=a.canvas,f=a.nextButton=c("<div></div>");f.css({position:"absolute",right:-10,top:(b.height()-69)/2,zIndex:1,width:72,height:69,background:"no-repeat center -75px",
backgroundImage:B(a.options.images.folder+"aura-arrows.png"),opacity:0.5,cursor:"pointer"}).hover(function(){c(this).css({opacity:1})},function(){c(this).css({opacity:0.5})}).click(function(){a.next();return!1});b.append(f)};M.prototype.initThumbnails=function(){var a=this,b=a.canvas,f=a.settings,d=a.items,e=b.width(),g=a.thumbBar=c("<div />");g.css({position:"absolute",left:0,bottom:0,zIndex:1,width:e,height:f.thumbnail.height+50,background:"rgba(0,0,0,0.5)"});var h=c("<div />");h.css({position:"absolute",
left:0,top:29,width:b.width(),height:1,background:"#fff",opacity:0.7});y(h,{boxShadow:"0 1px 0 #000"});g.append(h);var m=c('<div class="altgallery-thumbnails" />');m.css({position:"absolute",left:0,bottom:10});var n=d.length*(f.thumbnail.width+10),h=Math.ceil(n/e),e=1<h?0:(e-n)/2-5,s,q=!1;b.element.mouseover(function(){g.stop().animate({opacity:1})});b.element.mouseleave(function(){q=!1;clearInterval(s);g.stop().animate({opacity:0})});1<h&&(g.mousemove(function(a){a=a.pageX-c(this).offset().left;
50>a?q||(q=!0,s=setInterval(function(){var a=parseInt(m.css("left"))+10;0<a&&(a=0);m.css({left:a})},25)):a>b.width()-50?q||(q=!0,s=setInterval(function(){var a=parseInt(m.css("left"))-10,c=-(n-b.width()+10);a<c&&(a=c);m.css({left:a})},25)):(q=!1,clearInterval(s))}).mouseleave(function(){q=!1;clearInterval(s)}),m.draggable({axis:"x",start:function(){a.drag=!0},stop:function(c,f){var d=f.position.left,e=-(n-b.width()+10);0<d?m.animate({left:0},"fast"):d<e&&m.animate({left:e},"fast");setTimeout(function(){a.drag=
!1},100)}}));for(h=0;h<d.length;h++){var z=c("<a></a>");z.attr({href:d[h].source}).css({position:"absolute",left:10+h*(f.thumbnail.width+10)+e,bottom:0,width:f.thumbnail.width,height:f.thumbnail.height,overflow:"hidden",opacity:parseInt(f.thumbnail.alpha)/100});(function(b,r){r.hover(function(){c(this).css({opacity:1});y(this,{boxShadow:"0 0 6px #fff"})},function(){b!=a.currentItem&&(c(this).css({opacity:parseInt(f.thumbnail.alpha)/100}),y(this,{boxShadow:"none"}))}).click(function(){a.drag||a.open(d[b],
function(){});return!1});u(d[b].thumb,function(a){var b=c('<img alt="" />');b.attr({src:a.src});b.css({position:"absolute"});b.css(G.fill(a.width,a.height,f.thumbnail.width,f.thumbnail.height));r.append(b)},50*b)})(h,z);m.append(z)}g.append(m);b.append(g);O(g)};M.prototype.initCaption=function(){var a=this.canvas,b=this.caption=c("<div />");this.settings.caption.showCaption&&(b.css({position:"absolute",left:10,top:8,width:a.width()-100,height:"16px",lineHeight:"16px",overflow:"hidden",fontFamily:'"Times New Roman", Times, serif',
fontSize:"12px",fontWeight:"bold",color:"#fff",textShadow:"0 1px 0 #000"}),this.thumbBar.append(b))};M.prototype.initButtons=function(){function a(){c(this).css({opacity:1})}function b(){c(this).css({opacity:0.5})}var f=this,d=f.settings,e=c("<div />");e.css({position:"absolute",right:5,top:7});var g={cssFloat:"left",width:16,height:16,margin:"0 0 0 4px",backgroundImage:B(f.options.images.folder+"aura-buttons.png"),backgroundRepeat:"no-repeat",opacity:0.5,cursor:"pointer"},h=f.linkButton=c("<div />");
d.buttons.showLinkButton&&(h.prop({title:d.translation.getLink}).css(g).css({backgroundPosition:"0 -40px"}).click(function(){var a=f.getCurrentItem();a.link&&k(a.link,a.target||"_blank")}).hover(a,b),e.append(h));d.buttons.showFacebookButton&&(h=c("<div />"),h.prop({title:d.translation.shareWithFacebook}).css(g).css({backgroundPosition:"0 -60px"}).click(function(){k("http://www.facebook.com/sharer.php?u="+location.href+"%23galleryPhotoNumber="+(f.currentItem+1)+"&t="+f.getCurrentItem().description||
"","_blank")}).hover(a,b),e.append(h));d.buttons.showTwitterButton&&(h=c("<div />"),h.prop({title:d.translation.tweet}).css(g).css({backgroundPosition:"0 -80px"}).click(function(){k("https://twitter.com/intent/tweet?url="+location.href+"%23galleryPhotoNumber="+(f.currentItem+1)+"&text="+f.getCurrentItem().description||"","_blank")}).hover(a,b),e.append(h));if(d.buttons.showLinkButton||d.buttons.showFacebookButton||d.buttons.showTwitterButton)h=c("<div />"),h.css({cssFloat:"left",width:1,height:14,
margin:"0 3px 0 5px",background:"#fff"}),e.append(h);d.buttons.showSlideshowButton&&(h=c("<div />"),h.prop({title:d.translation.startSlideshow}).css(g).css({backgroundPosition:"0 0"}).click(function(){f.slideshow?(f.slideshowStop(),c(this).css({backgroundPosition:"0 0"})):(f.slideshowStart(),c(this).css({backgroundPosition:"0 -20px"}))}).hover(a,b),e.append(h));f.thumbBar.append(e)};M.prototype.update=function(){this.updateThumbnails();this.updateNavigation();this.updateCaption()};M.prototype.updateThumbnails=
function(){var a=this,b=0;a.thumbBar.find(".altgallery-thumbnails a").each(function(){var f=c(this);b==a.currentItem?(f.css({opacity:1}),y(f,{boxShadow:"0 0 6px #fff"})):(f.css({opacity:parseInt(a.settings.thumbnail.alpha)/100}),y(f,{boxShadow:"none"}));b++})};M.prototype.updateNavigation=function(){this.settings.buttons.showImageNavigationButtons&&(0==this.currentItem?this.prevButton.hide():this.prevButton.show(),this.currentItem==this.items.length-1?this.nextButton.hide():this.nextButton.show())};
M.prototype.updateCaption=function(a){a=a||this.getCurrentItem().description||this.settings.translation.image+" "+(this.currentItem+1)+"/"+this.items.length;this.caption.html(a.replace("\n","<br/>"))};M.prototype.open=function(a,b){var f=this,d=f.canvas,e=f.settings;if(f.currentItem!=a.id){f.currentItem=a.id;f.getCurrentItem().link?f.linkButton.show():f.linkButton.hide();var g=setTimeout(function(){f.preloader.show()},500);u(a.source,function(a){clearTimeout(g);f.preloader.hide();var m=c('<img alt="" />');
m.attr({src:a.src}).css({position:"absolute"});var n,s=f.imageFrame.width(),q=f.imageFrame.height();"fill"==e.image.scaleMode?(n=G.fill(a.width,a.height,s,q),n.width>s&&(n.width=s,n.left=0),n.height>q&&(n.height=q,n.top=0)):n=G.fit(a.width,a.height,s,q);m.css(G.fill(a.width,a.height,n.width,n.height));var z=f.imageFrame.find("div"),s=c("<div />");s.css({position:"absolute",overflow:"hidden"}).css(n).hide();y(s,{boxShadow:"0 6px 6px rgba(0,0,0,0.6)"});s.append(m);f.imageFrame.append(s);z.animate({opacity:"hide"},
f.options.animation.duration);s.animate({opacity:"show"},f.options.animation.duration,function(){z.remove()});if(!f.zeroPadding){m=c('<img alt="" />');m.attr({src:a.src}).css({position:"absolute"});m.css(G.fill(a.width,a.height,d.width(),d.height()));var k=f.background.find("div");n=c("<div />");n.css({opacity:0});n.append(m);f.background.append(n);C.process(m.get(0),"blurfast",{amount:1.5});k.animate({opacity:0},2*f.options.animation.duration);n.animate({opacity:0.5},2*f.options.animation.duration,
function(){k.remove()})}"function"==typeof b&&b(a);u(f.items[(f.currentItem+1)%f.items.length].source)});f.update()}};M.prototype.prev=function(a){0<this.currentItem?this.open(this.items[this.currentItem-1],a):this.open(this.items[this.items.length-1],a)};M.prototype.next=function(a){this.currentItem<this.items.length-1?this.open(this.items[this.currentItem+1],a):this.open(this.items[0],a)};M.prototype.slideshowStart=function(){var a=this,c=a.settings;if(!a.slideshow){var b=function(){a.slideshowTimeoutId=
setTimeout(function(){a.next(b)},1E3*c.slideshow.delay+2E3)};a.slideshow=!0;setTimeout(function(){a.next(b)},1E3*c.slideshow.delay)}};M.prototype.slideshowStop=function(){this.slideshow&&(this.slideshow=!1,clearTimeout(this.slideshowTimeoutId))};R.prototype.render=function(a){var d=this,f=this.canvas,e=this.items,E=this.settings;a===b&&(a=d.page);f.element.empty();var g=f.width(),h=f.height(),m=parseInt(E.thumbnail.width),n=parseInt(E.thumbnail.height),s=Math.floor((g-40)/m);1>s&&(s=1);var q=Math.floor((h-
40)/n);1>q&&(q=1);a=Math.ceil(e.length/s);q>a&&(q=a);var z=s*q,k=d.pagesCount=Math.ceil(e.length/z),p=Math.floor(E.thumbnail.width)+2,F=Math.floor(E.thumbnail.height)+2,A=Math.floor((g-p*s)/2-8),l=Math.floor((h-F*q)/2-8),t=d.pageWidth=p*s,a=d.pageHeight=F*q,w=c('<div class="altgallery-frame" />'),h={position:"absolute",left:A,top:l,width:Math.floor(g-2*(A+8))+14,height:Math.floor(h-2*(l+8))+14,background:v(E.colorScheme.thumbsFrameColor),"-moz-border-radius":"4px","-webkit-border-radius":"4px","-khtml-border-radius":"4px",
borderRadius:"4px"};E.colorScheme.useShadow&&(h=c.extend(h,{"-moz-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)","-khtml-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)",boxShadow:"0 0 10px rgba(0, 0, 0, 0.5)"}));w.css(h);f.element.append(w);g=c('<div class="altgallery-frameMask" />');h.background="#000";h.opacity=0.6;h.zIndex=20;h["-moz-box-shadow"]="none";h["-webkit-box-shadow"]="none";h["-khtml-box-shadow"]="none";h.boxShadow="none";g.css(h).hide();f.element.append(g);
f=c("<div />");f.css({position:"absolute",left:8,top:8,width:t-2,height:a-2,overflow:"hidden"});var x=d.imagesContainer=c("<div />");x.css({position:"relative",left:0,top:0,width:p*s*k-2,height:F*q-2});f.append(x);w.append(f);d.drag=!1;var ea=0;x.draggable({axis:"x",distance:30,start:function(a,c){ea=c.position.left;d.drag=!0},stop:function(a,c){30<Math.abs(Math.abs(ea)-Math.abs(c.position.left))?ea<c.position.left?d.prevPage():d.nextPage():d.placePage();setTimeout(function(){d.drag=!1},100)}});O(x);
for(f=0;f<e.length;f++)k=f%s*p+Math.floor(f/z)*t,g=Math.floor(f/s)%q*F,function(a,b,f){var h=c("<img />"),g=c("<a />");g.attr({href:e[a].source}).css({display:"block",position:"absolute",left:Math.floor(b),top:Math.floor(f+0.5*n),width:m,height:n,overflow:"hidden",opacity:0,background:v(E.colorScheme.imageBGColor),border:"none",margin:0,padding:0}).click(function(){return!1});x.append(g);var q=function(){g.click(function(){d.drag||(d.currentItem=a,d.open(e[a],{left:a%s*p+A,top:f+l}));return!1}).mouseover(function(){h.stop().animate({opacity:1},
d.options.animation.duration/2)}).mouseleave(function(){h.stop().animate({opacity:E.thumbnail.alpha/100},d.options.animation.duration/2)})};a<z?setTimeout(function(){g.animate({top:f,opacity:1},{duration:d.options.animation.duration,complete:q})},200*a):(g.css({top:f,opacity:1}),q());u(e[a].thumb,function(a){h.attr({src:a.src}).css({display:"block",position:"absolute",margin:0,padding:0,border:"none",opacity:E.thumbnail.alpha/100}).css(G.fill(a.width,a.height,parseInt(E.thumbnail.width),parseInt(E.thumbnail.height)));
g.append(h)},200*a)}(f,k,g);q=d.prevPageButton=c("<div />");q.css({position:"absolute",left:5,top:a/2-10,width:30,height:30,background:B(d.options.images.folder+"/left.png"),cursor:"pointer"});y(q,{borderRadius:"4px"});q.click(function(){d.prevPage()});w.append(q);q=d.nextPageButton=c("<div />");q.css({position:"absolute",right:5,top:a/2-10,width:30,height:30,background:B(d.options.images.folder+"/right.png"),cursor:"pointer"});y(q,{borderRadius:"4px"});q.click(function(){d.nextPage()});w.append(q);
w.mouseover(function(){d.showControls()});w.mouseleave(function(){d.hideControls()});d.hideControls();d.showControls()};R.prototype.hideControls=function(){this.prevPageButton.hide();this.nextPageButton.hide()};R.prototype.showControls=function(){0<this.page&&this.prevPageButton.show();this.page<this.pagesCount-1&&this.nextPageButton.show()};R.prototype.open=function(a,d){var f=this,e=this.settings,E=c('<img class="altgallery-preloader" src="'+f.options.images.loader+'" alt="" />');t(E);E.css({position:"absolute",
left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});var g=c('<img src="'+a.thumb+'" />');u(a.thumb,function(h){c(".altgallery-imageFrame",f.canvas.element).remove();c(".altgallery-frameMask",f.canvas.element).fadeIn(f.options.animation.duration);var m=document.createElement("div");c(m).addClass("altgallery-imageFrame").css({position:"absolute",padding:8,background:v(e.colorScheme.imageBGColor),zIndex:30});c(m).hide();var n=G.fit(h.width,h.height,f.canvas.width()-48,f.canvas.height()-48),s={left:n.left+
16+n.width/3,top:n.top+16+n.height/3,width:n.width/3,height:n.height/3};d!==b&&(d.left!==b&&(s.left=d.left),d.top!==b&&(s.top=d.top));c(m).css(s);var h=G.fit(h.width,h.height,f.canvas.width()-48,f.canvas.height()-48),q={left:h.left+16+h.width/3,top:h.top+16+h.height/3,width:h.width/3,height:h.height/3,margin:0,padding:0,border:"none",maxWidth:"none",maxHeight:"none",cursor:"pointer"};g.css(q);c(m).append(g);f.canvas.element.append(m);g.animate(h,f.options.animation.duration);c(m).animate({opacity:"show",
left:n.left+16,top:n.top+16,width:n.width,height:n.height},f.options.animation.duration,function(){var b=c('<div class="captionContainer"></div>');b.css({position:"absolute",left:8,top:8,width:n.width,height:n.height,overflow:"hidden",cursor:"pointer"});c(m).append(b);if(a.description){var d=parseInt(e.imageCaption.fontSize),d=d||f.defaultSettings.imageCaption.fontSize,r=c("<div><div>"+a.description.replace("\n","<br/>")+"</div></div>");r.css({position:"absolute",left:0,width:n.width,fontFamily:e.imageCaption.fontName,
fontSize:d+"px",lineHeight:1.25,color:v(e.imageCaption.color),background:I(e.imageCaption.bgColor,e.imageCaption.bgAlpha/100)});b.append(r);"bottom"==e.imageCaption.position.toLowerCase()?(r.css({bottom:"-33px",borderTop:"1px solid "+I(e.imageCaption.bgColor,(e.imageCaption.bgAlpha+10)/100)}),r.children("div").css({padding:"8px 10px 10px"}),r.animate({bottom:0},f.options.animation.duration,"easeOutQuad")):(r.css({top:"-33px",borderBottom:"1px solid "+I(e.imageCaption.bgColor,(e.imageCaption.bgAlpha+
10)/100)}),r.children("div").css({padding:"10px 10px 8px"}),r.animate({top:0},f.options.animation.duration,"easeOutQuad"))}var h=c('<a class="altgallery-close" style="position:absolute; right:-15px; top:-13px; width:30px; height:30px; z-index:40; background:no-repeat center; cursor:pointer;"></a>');h.css({backgroundImage:B(f.options.images.close)});h.click(function(){c(this).remove();r&&r.remove();s.opacity="hide";c(m).animate(s,f.options.animation.duration,function(){c(this).remove()});g.animate(q,
f.options.animation.duration);c(".altgallery-frameMask",f.canvas.element).fadeOut(f.options.animation.duration)});c(m).append(h);b.click(function(){h.remove();r&&r.remove();s.opacity="hide";c(m).animate(s,f.options.animation.duration,function(){c(this).remove();f.next()});g.animate(q,f.options.animation.duration)});setTimeout(function(){c(m).append(E)},500)})});u(a.source,function(){E.hide();f.canvas.element.find(".altgallery-preloader").remove();c(g).attr("src",a.source)})};R.prototype.prev=function(){this.currentItem--;
0>this.currentItem&&(this.currentItem=this.items.length-1);this.open(this.getCurrentItem())};R.prototype.next=function(){this.currentItem++;this.currentItem>=this.items.length&&(this.currentItem=0);this.open(this.getCurrentItem())};R.prototype.placePage=function(){var a=this;a.hideControls();a.imagesContainer.animate({left:-(a.page*a.pageWidth)},{duration:a.options.animation.duration,complete:function(){a.showControls()}})};R.prototype.prevPage=function(){this.page--;0>this.page&&(this.page=0);this.placePage()};
R.prototype.nextPage=function(){this.page++;this.page>=this.pagesCount&&(this.page=this.pagesCount-1);this.placePage()};K.prototype.init=function(){var a=this.settings;this.initFrame();this.initNavigation();this.initCaption();this.initButtons();this.initThumbnails();this.initImage();switch(a.initialState.toLowerCase()){case "show thumbnails":this.showThumbnails();break;default:case "load image":case "show image":this.showImage();break;case "start slideshow":this.showImage(),this.slideshowStart()}};
K.prototype.initFrame=function(){var a=this.canvas,b=this.settings,f=this.frame=c("<div></div>"),d=a.width()-10,e=a.height()-10;f.css({position:"absolute",left:5,top:5,width:d,height:e,overflow:"hidden",background:v(b.buttons.bgColor)});y(f,{borderRadius:"5px",boxShadow:"0 0 4px rgba(0, 0, 0, 0.5)"});var g=this.content=c("<div></div>"),d=this.contentWidth=d-18,e=this.contentHeight=e-43;g.css({position:"absolute",left:9,top:9,width:d,height:e,background:v(b.base.color)});y(g,{borderRadius:"4px"});
f.append(g);b=this.preloader=c('<img alt="" />');b.attr("src",this.options.images.loader);b.css({position:"absolute",left:"50%",top:"50%",zIndex:100,margin:"-16px 0 0 -16px"});g.append(b);a.append(f)};K.prototype.initNavigation=function(){this.initPrevButton();this.initNextButton()};K.prototype.initPrevButton=function(){var a=this.settings,b=c("<div></div>");b.css({position:"absolute",left:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,background:v(a.buttons.bgColor),cursor:"default"});
y(b,{borderRadius:"10px",boxShadow:"5px 0 15px rgba(0, 0, 0, 0.5)"});this.frame.append(b);prevOverlay=c("<div></div>");prevOverlay.css({position:"absolute",left:0,top:this.contentHeight/2-30,zIndex:10,width:9,height:80,background:v(a.buttons.bgColor),cursor:"default"});this.frame.append(prevOverlay);var f=this.prevButton=c('<div><div style="margin:25px 0 0 6px; width:9px; height:9px; background:url('+this.options.images.folder+'cubic-buttons.png) no-repeat -8px -8px;"></div></div>');f.css({position:"absolute",
left:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,cursor:"pointer"});this.frame.append(f);var d;this.canvas.element.hover(function(){clearTimeout(d);b.stop().show().css({opacity:1}).animate({left:0});f.stop().animate({left:0,opacity:1})},function(){d=setTimeout(function(){b.stop().animate({left:-12},function(){b.fadeOut()});f.stop().animate({left:-12,opacity:0})},100)});this.hidePrevButton=function(){b.css({visibility:"hidden"});prevOverlay.css({visibility:"hidden"});f.css({visibility:"hidden"})};
this.showPrevButton=function(){b.css({visibility:"visible"});prevOverlay.css({visibility:"visible"});f.css({visibility:"visible"})}};K.prototype.initNextButton=function(){var a=this.settings,b=c("<div></div>");b.css({position:"absolute",right:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,background:v(a.buttons.bgColor),cursor:"default"});y(b,{borderRadius:"10px",boxShadow:"-5px 0 15px rgba(0, 0, 0, 0.5)"});this.frame.append(b);nextOverlay=c("<div></div>");nextOverlay.css({position:"absolute",
right:0,top:this.contentHeight/2-30,zIndex:10,width:9,height:80,background:v(a.buttons.bgColor),cursor:"default"});this.frame.append(nextOverlay);var f=this.nextButton=c('<div><div style="margin:25px 0 0 6px; width:9px; height:9px; background:url('+this.options.images.folder+'cubic-buttons.png) no-repeat -8px -33px;"></div></div>');f.css({position:"absolute",right:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,cursor:"pointer"});this.frame.append(f);var d;this.canvas.element.hover(function(){clearTimeout(d);
b.stop().show().css({opacity:1}).animate({right:0});f.stop().animate({right:0,opacity:1})},function(){d=setTimeout(function(){b.stop().animate({right:-12},function(){b.fadeOut()});f.stop().animate({right:-12,opacity:0})},100)});this.hideNextButton=function(){b.css({visibility:"hidden"});nextOverlay.css({visibility:"hidden"});f.css({visibility:"hidden"})};this.showNextButton=function(){b.css({visibility:"visible"});nextOverlay.css({visibility:"visible"});f.css({visibility:"visible"})}};K.prototype.initCaption=
function(){var a=this.caption=c("<div></div>");a.css({position:"absolute",left:10,bottom:10,width:this.contentWidth-60,height:"14px",lineHeight:"14px",overflow:"hidden",fontFamily:"Arial, Helvetica, sans-serif",fontSize:"11px",color:"#777"});this.frame.append(a)};K.prototype.initButtons=function(){var a=this,b=a.settings,f=function(){c(this).css({borderColor:"#fff #bbb #bbb #fff"});y(this,{boxShadow:"0 0 2px rgba(0, 0, 0, 0.2)"})},d=function(){c(this).css({borderColor:"transparent"});y(this,{boxShadow:"none"})};
if(b.buttons.showSlideshowButton){var e=a.slideshowButton=c("<div></div>");e.css({position:"absolute",right:b.buttons.showThumbnailsButton?29:5,bottom:5,width:23,height:23,background:B(a.options.images.folder+"cubic-buttons.png")+" no-repeat 0px -51px",border:"1px solid",borderColor:"transparent",cursor:"pointer"});y(e,{borderRadius:"3px 4px 3px 4px"});e.hover(f,d);e.click(function(){a.showImage();a.slideshowStart()});a.frame.append(e)}b.buttons.showThumbnailsButton&&(b=a.showThumbnailsButton=c("<div></div>"),
b.css({position:"absolute",right:5,bottom:5,width:23,height:23,background:B(a.options.images.folder+"cubic-buttons.png")+" no-repeat -1px -126px",border:"1px solid",borderColor:"transparent",cursor:"pointer"}).hide(),y(b,{borderRadius:"3px 4px 3px 4px"}),b.hover(f,d),b.click(function(){a.showThumbnails()}),a.frame.append(b),b=a.showImagesButton=c("<div></div>"),b.css({position:"absolute",right:5,bottom:5,width:23,height:23,background:B(a.options.images.folder+"cubic-buttons.png")+" no-repeat -1px -101px",
border:"1px solid",borderColor:"transparent",cursor:"pointer"}).hide(),y(b,{borderRadius:"3px 4px 3px 4px"}),b.hover(f,d),b.click(function(){a.showImage()}),a.frame.append(b))};K.prototype.initImage=function(){var a=this.imageWidth=this.contentWidth-2*this.settings.base.visibleFrame,b=this.imageHeight=this.contentHeight-2*this.settings.base.visibleFrame,f=this.imagesFrame=c("<div></div>");f.css({position:"absolute",left:this.settings.base.visibleFrame,top:this.settings.base.visibleFrame,width:a,height:b,
overflow:"hidden"}).hide();y(f,{borderRadius:"3px"});this.content.append(f);a=this.imagesContainer=c("<div></div>");a.css({position:"relative",left:0,top:0});f.append(a)};K.prototype.showImage=function(a){var c=this,b=function(){function a(){setTimeout(function(){c.drag=!1},100)}c.cleanup();c.thumbnailsFrame.hide();c.imagesFrame.show();c.showImagesButton.hide();c.showThumbnailsButton.show();c.showPrevButton();c.showNextButton();c.prevButton.unbind("click").click(function(){c.slideshowStop();c.prev()});
c.nextButton.unbind("click").click(function(){c.slideshowStop();c.next()});var b=0;c.imagesContainer.draggable({axis:"x",distance:30,start:function(a,f){c.drag=!0;b=f.position.left},stop:function(f,d){30<Math.abs(Math.abs(b)-Math.abs(d.position.left))?b<d.position.left?c.prev(c.options.animation.duration,a):c.next(c.options.animation.duration,a):c.place(c.options.animation.duration,a)}});c.imagesContainer.unbind("dblclick").dblclick(function(){c.showThumbnails()});O(c.imagesContainer)};!1!==a?(c.hidePrevButton(),
c.hideNextButton(),c.open(c.getCurrentItem(),b)):b()};K.prototype.initThumbnails=function(){function a(){b.cleanup()}var b=this,f=b.canvas,d=b.thumbnailsWidth=b.contentWidth-2*b.settings.base.visibleFrame,e=b.thumbnailsHeight=b.contentHeight-2*b.settings.base.visibleFrame,g=b.thumbnailsFrame=c("<div></div>");g.css({position:"absolute",left:b.settings.base.visibleFrame,top:b.settings.base.visibleFrame,width:d,height:e,overflow:"hidden"}).hide();y(g,{borderRadius:"3px"});b.content.append(g);var h=b.thumbnailsContainer=
c('<div class="thumbnailsContainer"></div>');h.css({position:"relative",left:0,top:0,width:d*Math.ceil(b.items.length/20),height:e});g.append(h);for(var m=Math.round((d-5)/5),n=Math.round((e-4)/4),s=Math.round((d-5*m)/10),q=Math.round((e-4*n)/8),e=0;e<b.items.length;e++)(function(e,g){u(g.thumb,function(k){var E=e%5,p=Math.floor(e%20/5),l=c('<a class="altgallery-thumbnail altgallery-thumbnail-'+e+'"></a>');t(l);l.attr({href:g.source}).css({display:"block",position:"absolute",left:E*m+Math.floor(e/
20)*d+1*E+s,top:p*n+1*p+q,width:m,height:n,overflow:"hidden",cursor:"pointer",zIndex:Math.floor(e%20/5)});y(l,{boxShadow:"0px 3px 3px rgba(0, 0, 0, 0.5)"});l.mouseover(function(){if(b.enableThumbnailsHover&&!b.drag){var q=0;0==E?q=m/8:4==E&&(q=-m/8);var s=0;0==p?s=n/8:3==p&&(s=-n/8);b.updateCaption(g.description||"Image "+(e+1)+" / "+b.items.length);b.cleanup();f.element.find(".altgallery-thumbnail").css({opacity:0.8});var l=c(this).clone();l.addClass("altgallery-clone");l.css({left:c(this).offset().left-
h.offset().left,top:c(this).offset().top-h.offset().top,zIndex:10,opacity:1});y(l,{boxShadow:"5px 15px 13px rgba(0, 0, 0, 0.7)"});h.append(l);var t=l.find("img");l.animate({width:1.25*m,height:1.25*n,marginLeft:-m/8+q,marginTop:-n/8+s},{duration:"fast",easing:"linear",step:function(){t.css(G.fill(k.width,k.height,l.width(),l.height()))}});l.click(function(){b.drag||(b.currentItem=e,l.unbind("mouseleave"),b.canvas.element.unbind("mouseleave",a),y(l,{boxShadow:"none"}),l.animate({left:b.currentPage*
d,top:0,width:b.imageWidth,height:b.imageHeight,marginLeft:0,marginTop:0},{duration:"normal",step:function(){t.css(G.fill(k.width,k.height,l.width(),l.height()))},complete:function(){b.showImage()}}));return!1});l.mouseleave(function(){b.cleanup();b.updateCaption(" ")})}});l.click(function(){b.drag||(b.currentItem=e,b.showImage());return!1});var u=c("<img />");u.attr({src:g.thumb}).css({display:"block",position:"absolute",border:"none"}).css(G.fill(k.width,k.height,m,n));l.append(u);h.append(l)})})(e,
b.items[e]);b.canvas.element.mouseleave(a);b.currentPage=0;b.preloader.hide()};K.prototype.showThumbnails=function(){function a(a,c){e.thumbnailsContainer.stop().animate({left:-e.currentPage*e.thumbnailsWidth},{duration:a||2*e.options.animation.duration,complete:function(){e.enableThumbnailsHover=!0;"function"==typeof c&&c()}})}function c(b,f){0<e.currentPage&&(e.currentPage--,e.enableThumbnailsHover=!1,e.cleanup());a(b,f);e.updateNavigation()}function b(c,f){e.currentPage<Math.ceil(e.items.length/
20)-1&&(e.currentPage++,e.enableThumbnailsHover=!1,e.cleanup());a(c,f);e.updateNavigation()}function d(){setTimeout(function(){e.drag=!1},100)}var e=this;e.slideshow&&e.slideshowStop();e.updateCaption(" ");e.imagesFrame.hide();e.thumbnailsFrame.show();e.showThumbnailsButton.hide();e.showImagesButton.show();e.prevButton.unbind("click").click(function(){c()});e.nextButton.unbind("click").click(function(){b()});e.updateNavigation();var g=0;e.thumbnailsContainer.draggable({axis:"x",distance:30,start:function(a,
c){e.drag=!0;g=c.position.left;e.cleanup()},stop:function(h,m){30<Math.abs(Math.abs(g)-Math.abs(m.position.left))?g<m.position.left?c(e.options.animation.duration,d):b(e.options.animation.duration,d):a(e.options.animation.duration,d)}});O(e.thumbnailsContainer)};K.prototype.updateNavigation=function(){var a=Math.ceil(this.items.length/20);0<this.currentPage?this.showPrevButton():this.hidePrevButton();this.currentPage<a-1?this.showNextButton():this.hideNextButton()};K.prototype.updateCaption=function(a){(a=
a||this.getCurrentItem().description)?this.caption.html(a.replace("\n","<br/>")):this.caption.html("Image "+(this.currentItem+1)+" / "+this.items.length)};K.prototype.loadImage=function(a,d){var f=this,a=a%f.items.length;f.items[a]!==b&&u(f.items[a].source,function(b){var e="altgallery-image-"+a;if(!f.imagesContainer.find("."+e).size()){e=c('<div class="'+e+'"></div>');e.css({position:"absolute",left:f.imageWidth*a,top:0,width:f.imageWidth,height:f.imageHeight,overflow:"hidden"});var g=c('<img style="position:absolute;" />');
g.attr("src",b.src);g.css(G.fill(b.width,b.height,f.imageWidth,f.imageHeight));e.append(g);f.imagesContainer.append(e)}"function"==typeof d&&d(b)})};K.prototype.open=function(a,b){var f=this,d="altgallery-image-"+f.currentItem;f.imagesContainer.find("."+d).size()?"function"==typeof b&&b():(f.preloader.show(),u(a.source,function(a){var e=c('<div class="'+d+'"></div>');e.css({position:"absolute",left:f.imageWidth*f.currentItem,top:0,width:f.imageWidth,height:f.imageHeight,overflow:"hidden"});var h=
c('<img style="position:absolute;" />');h.attr("src",a.src);h.css(G.fill(a.width,a.height,f.imageWidth,f.imageHeight));e.append(h);f.imagesContainer.append(e);f.preloader.hide();"function"==typeof b&&b()}));f.imagesContainer.stop().css({left:-f.imageWidth*f.currentItem});f.updateCaption();f.loadImage(a.id+1);f.loadImage(a.id-1)};K.prototype.place=function(a,c){this.imagesContainer.stop().animate({left:-this.imageWidth*this.currentItem},{duration:a||2*this.options.animation.duration,complete:function(){"function"==
typeof c&&c()}})};K.prototype.prev=function(a,c){var b=this;if(0<b.currentItem){b.currentItem--;var d=setTimeout(function(){b.preloader.show()},500);b.loadImage(b.currentItem,function(){clearTimeout(d);b.preloader.hide();b.place(a,c);b.updateCaption();b.loadImage(b.currentItem-1)})}else b.currentItem=b.items.length-1,b.showImage()};K.prototype.next=function(a,c){var b=this;if(b.currentItem<b.items.length-1){b.currentItem++;var d=setTimeout(function(){b.preloader.show()},500);b.loadImage(b.currentItem,
function(){clearTimeout(d);b.preloader.hide();b.place(a,function(){b.slideshow&&b.slideshowStart();"function"==typeof c&&c()});b.updateCaption();b.loadImage(b.currentItem+1)})}else b.currentItem=0,b.showImage(),b.slideshow&&b.slideshowStart()};K.prototype.slideshowStart=function(){var a=this;a.showImage(!1);clearTimeout(a.slideshowTimer);a.slideshow=!0;a.slideshowButton.css({background:B(a.options.images.folder+"cubic-buttons.png")+" no-repeat 0px -76px"});a.slideshowButton.unbind("click").click(function(){a.slideshowStop()});
a.slideshowTimer=setTimeout(function(){a.next()},1E3*a.settings.slideshowDelay)};K.prototype.slideshowStop=function(){var a=this;a.slideshow=!1;clearTimeout(a.slideshowTimer);a.slideshowButton.css({background:B(a.options.images.folder+"cubic-buttons.png")+" no-repeat 0px -51px"});a.slideshowButton.unbind("click").click(function(){a.slideshowStart()})};K.prototype.cleanup=function(){this.canvas.element.find(".altgallery-clone").remove();c(this.canvas.element).find(".altgallery-thumbnail").css({opacity:1})};
V.prototype.showScrollbar=function(){var a=this,b=this.settings,d=this.canvas,e=c('<div class="altgallery-scrollbar"></div>'),k=Math.round(0.8*d.width())-36;e.css({position:"absolute",zIndex:1E3,left:(d.width()-(k+36))/2,bottom:5,width:k+36,height:17,background:I(b.scrollbar.bgColor,b.scrollbar.bgAlpha/100),"-moz-border-radius":8,"-webkit-border-radius":8,borderRadius:8});if(c.browser.msie&&9>c.browser.version){var g=sprintf("%02x%s",255*b.scrollbar.bgAlpha/100,v(b.scrollbar.bgColor).replace("#",
""));e.css({filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+g+",endColorstr=#"+g+")"})}var h=c('<div class="altgallery-scrollbar-handle"></div>'),m=k/a.items.length;h.css({position:"absolute",left:Math.round(a.currentItem*m),top:-10,width:Math.floor(m),height:30});var n=c("<div />");n.css({position:"relative",top:10,height:13,background:v(b.scrollbar.handleColor),opacity:b.scrollbar.handleAlpha/100,cursor:"ew-resize"});n.hover(function(){n.css({opacity:1})},function(){n.css({opacity:b.scrollbar.handleAlpha/
100})});h.append(n);h.draggable({axis:"x",containment:"parent",stop:function(c,b){a.currentItem=Math.floor(b.position.left/k*a.items.length);h.css({left:Math.round(a.currentItem*m)});a.animate()}});g=c("<div></div>");g.css({position:"relative",top:2,height:13,margin:"0 18px"});g.click(function(b){b=b.pageX-c(this).offset().left;a.currentItem=Math.floor(b/k*a.items.length);h.css({left:Math.round(a.currentItem*m)});a.animate()});var s={position:"absolute",top:2,width:16,height:16,fontFamily:"Arial, Helvetica, sans-serif",
fontSize:"10px",lineHeight:"14px",textAlign:"center",color:v(b.scrollbar.arrowsColor),opacity:b.scrollbar.arrowsAlpha/100,cursor:"pointer"},q=c("<div>&#9668;</div>");q.css(s);q.css({left:1});q.click(function(){a.prev()});e.append(q);q=c("<div>&#9658;</div>");q.css(s);q.css({right:1});q.click(function(){a.next()});e.append(q);g.append(h);e.append(g);d.element.append(e);O(h)};V.prototype.updateScrollbar=function(){var a=this.canvas,c=(Math.round(0.8*a.width())-36)/this.items.length;a.element.find(".altgallery-scrollbar-handle").css({left:Math.round(this.currentItem*
c)})};V.prototype.getItemStyle=function(a,c){var b=this.settings,d=this.canvas,e,g;e=this.getItemX(c);g=this.getItemZ(c);var h;h=Math.abs(e);var m=G.fit(a.width,a.height,b.maxImageWidth*(1>h?1:2>h?0.55:3>h?0.5:0.6-0.05*h),d.height()-60);return{zIndex:10*g,left:(d.width()-m.width)/2+e*d.width()/8+(e?e/h*b.maxImageWidth/3:0),top:(d.height()-m.height)/2-30,width:m.width,height:m.height,opacity:e?0.8:1,transform:{rotateY:-(e?e/h:0)*b.imageAngle+"deg"}}};V.prototype.render=function(){var a=this,b=this.settings,
d=this.canvas,e=this.items,k=!l();a.scene.empty();a.scene.css({"-webkit-perspective":400,"-moz-perspective":400,perspective:400});var g,h,m,n,s,q=0;n=a.currentItem;s=2*Math.max(n,e.length-n);for(h=1;h<=s;h++)g=n+(h%2?parseInt(h/2):-parseInt(h/2)),0<=g&&g<e.length&&function(h){setTimeout(function(){m=a.getItemX(h);u(e[h].source,function(n){var g=a.getItemStyle(n,h),q=c('<a class="altgallery-item-'+h+'"></a>');e[h].link&&(q.attr("href",e[h].link),e[h].target&&q.attr("target",e[h].target));q.css({display:"block",
position:"absolute",zIndex:g.zIndex,left:g.left,top:g.top,width:g.width,height:g.height,overflow:"visible",background:"#000",cursor:"pointer",outline:"none"});k&&J(q,{rotateY:g.transform.rotateY});var s=c('<img src="" alt="" />');s.attr("src",n.src);t(s);s.css({display:"block",width:g.width,height:g.height,opacity:g.opacity});q.append(s);if(a.showReflections){n=s.clone();n.css({position:"absolute",opacity:b.reflectionAlpha/100,"-moz-transform":"scaleY(-1)","-webkit-transform":"scaleY(-1)","-o-transform":"scaleY(-1)",
"-ms-transform":"scaleY(-1)",transform:"scaleY(-1)",zIndex:1});var p=c('<div class="altgallery-overlay"></div>');p.css({position:"absolute",top:g.height,width:g.width,height:g.height,background:d.element.css("backgroundColor"),zIndex:0});var l=c('<div class="altgallery-overlay"></div>');l.css({position:"absolute",top:g.height,width:g.width,height:g.height,zIndex:2});var g=d.element.css("backgroundColor"),u=[I(g,0),I(g,0.5),I(g,1)];c.browser.mozilla?l.css({background:"-moz-linear-gradient(top, "+u[0]+
" 0%, "+u[1]+" 15%, "+u[2]+" 50%)"}):c.browser.webkit?l.css({background:"-webkit-linear-gradient(top, "+u[0]+" 0%, "+u[1]+" 15%, "+u[2]+" 50%)"}):c.browser.opera?l.css({background:"-o-linear-gradient(top, "+u[0]+" 0%, "+u[1]+" 15%, "+u[2]+" 50%)"}):c.browser.msie?(g=v(g).replace("#",""),l.css({filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00"+g+",endColorstr=#ff"+g+",GradientType=0)"})):l.css({background:"linear-gradient(top, "+u[0]+" 0%, "+u[1]+" 15%, "+u[2]+" 50%)"});q.append(n);
q.append(p);q.append(l)}q.click(function(){a.drag||(a.currentItem=h,0>a.currentItem?a.currentItem=0:a.currentItem>=e.length&&(a.currentItem=e.length-1),a.animate());return!1}).hover(function(){s.css({opacity:1})},function(){s.css({opacity:m?0.8:1})});h==a.currentItem&&q.unbind("click").click(function(){if(a.drag)return!1});a.scene.append(q)})},100*q++)}(g);b.useScrollBar&&a.showScrollbar();c.browser.mozilla&&a.showReflections&&a.animate()};V.prototype.animate=function(){function a(a,m,h){u(d[a].source,
function(n){function g(a){function b(c){return k[c]+(l[c]-k[c])*a/1E4}q.css({left:b("left"),top:b("top"),zIndex:parseInt(b("zIndex")),width:b("width"),height:b("height")});s.css({width:b("width"),height:b("height")});c.showReflections&&p.css({top:b("height"),width:b("width"),height:b("height")});e&&J(q,{rotateY:parseFloat(k.transform.rotateY)+(parseFloat(l.transform.rotateY)-parseFloat(k.transform.rotateY))*a/1E4+"deg"})}var q=c.scene.find(".altgallery-item-"+a),s=q.find("img"),k={left:parseInt(q.css("left")),
top:parseInt(q.css("top")),zIndex:parseInt(q.css("z-index")),width:q.width(),height:q.height(),opacity:q.find("img").css("opacity"),transform:J(q)},l=c.getItemStyle(n,a);h||q.show();q.unbind("click").click(function(){c.drag||(c.currentItem=a,0>c.currentItem?c.currentItem=0:c.currentItem>=d.length&&(c.currentItem=d.length-1),c.animate());return!1}).unbind("hover").hover(function(){s.first().css({opacity:1})},function(){s.first().css({opacity:m?0.8:1})});s.first().css({opacity:l.opacity});var p=q.find(".altgallery-overlay");
q.stop().prop("animate",0);h?g(1E4):q.animate({animate:1E4},{duration:500*b.flipDuration,easing:"linear",step:function(a){g(a)},complete:function(){q.prop("animate",0);a==c.currentItem&&q.unbind("click").click(function(){if(c.drag)return!1})}})})}var c=this,b=this.settings,d=this.items,e=!l(),g,h,m,n,s;n=c.currentItem;s=2*Math.max(n,d.length-n);for(h=1;h<=s;h++)if(g=n+(h%2?parseInt(h/2):-parseInt(h/2)),0<=g&&g<d.length){var q=Math.abs(c.currentItem-g);m=c.getItemX(g);4>q?a(g,m):(c.scene.find(".altgallery-item-"+
g).hide(),a(g,m,!0))}b.useScrollBar&&c.updateScrollbar()};V.prototype.open=function(a){this.currentItem=a.id;this.animate()};V.prototype.prev=function(a){a=this.currentItem-(a||1);0>a&&(a=0);this.currentItem!=a&&(this.currentItem=a,this.animate())};V.prototype.next=function(a){a=this.currentItem+(a||1);a>=this.items.length&&(a=this.items.length-1);this.currentItem!=a&&(this.currentItem=a,this.animate())};W.prototype.init=function(){var a=this,b=this.settings,f=this.canvas;a.imageWidth=b.image.width||
Math.round(0.75*f.width());a.imageHeight=b.image.height||Math.round(0.67*f.height());a.stack=[];for(var e=0;e<b.visibleImages;e++){var k=c("<div />");k.css({position:"absolute",left:Math.floor((f.width()-a.imageWidth-20)/2),top:Math.floor((f.height()-a.imageHeight-57)/2),width:a.imageWidth+20,height:a.imageHeight+57,background:v(b.frameColor),zIndex:b.visibleImages-e});b.useShadow&&y(k,{boxShadow:"0 0 10px rgba(0,0,0,0.7)"});e&&J(k,{rotate:(d(10*-b.maxAngle,10*b.maxAngle)/10).toString()+"deg"});var g=
c('<div class="altgallery-imgFrame" />');g.css({position:"absolute",left:10,top:10,width:a.imageWidth,height:a.imageHeight,overflow:"hidden",background:"#999",cursor:"pointer"});g.click(function(){a.next()});k.append(g);g=c('<div class="altgallery-caption" />');g.css({position:"absolute",left:10,top:a.imageHeight+12,width:a.imageWidth,height:42,overflow:"hidden",textAlign:"center",fontFamily:b.caption.fontName,fontSize:"11px",lineHeight:"14px",color:v(b.caption.color)});k.append(g);a.stack.push(k);
f.append(a.stack[e])}a.open(a.getCurrentItem())};W.prototype.preload=function(a,b){var d=this,e=this.settings;u(a.source,function(a){var g=b.find(".altgallery-imgFrame"),h=c("<img />");h.attr({src:a.src});h.css({position:"absolute"});var m="fit"==e.imageScaleMode.toLowerCase()?G.fit:G.fill;h.css(m(a.width,a.height,d.imageWidth,d.imageHeight));g.append(h)})};W.prototype.open=function(a){var b=this,d=this.settings,e=this.stack[0];b.currentItem=a.id;var l=e.find(".altgallery-caption");l.empty();var g=
c("<div />");g.css({display:"inline-block"});d.usePhotoNumbers&&g.append(a.id+1+"/"+b.items.length+" ");g.append(a.description);l.append(g);var h=g.height(),l=Math.floor((l.height()-h)/2);14<h&&g.css({textAlign:"left"});g.css({marginTop:0<l?l:0});var m=parseFloat(J(e).rotate);0!=m&&e.animate({animate:100},{duration:200,easing:"linear",step:function(a){J(e,{rotate:(m-m*a/100).toString()+"deg"})},complete:function(){e.prop({animate:0})}});var n=e.find(".altgallery-imgFrame");n.empty();n.css({backgroundImage:B(b.options.images.loader),
backgroundPosition:"center",backgroundRepeat:"no-repeat"});u(a.source,function(h){var m=c("<img />");m.attr({src:h.src});m.css({position:"absolute"});var g="fit"==d.imageScaleMode.toLowerCase()?G.fit:G.fill;m.css(g(h.width,h.height,b.imageWidth,b.imageHeight));n.css({backgroundImage:""}).append(m);var h={position:"absolute",padding:"3px 5px",fontFamily:"Arial, Helvetica, sans-serif",fontSize:"10px",color:"#fff",background:I("#000000",0.7),cursor:"pointer"},l=c('<div class="altgallery-back" />');l.css(h).css({left:15,
top:15});y(l,{borderRadius:"5px"});l.html(d.translation.back);l.click(function(){b.prev()});e.append(l);e.hover(function(){l.stop().fadeIn("fast")},function(){l.stop().fadeOut("fast")});if(a.link){var p=c('<div class="altgallery-link" />');p.css(h).css({right:15,top:15});y(p,{borderRadius:"5px"});p.html(d.translation.gotoLink);p.click(function(){k(a)});e.append(p);e.hover(function(){p.stop().fadeIn("fast")},function(){p.stop().fadeOut("fast")})}for(h=1;h<d.visibleImages-1;h++)(function(a){setTimeout(function(){b.preload(b.getNextItem(a),
b.stack[a])},500*(a-1))})(h)})};W.prototype.prev=function(){var a=this,b=this.settings,e=this.stack[0],k=e.position();e.find(".altgallery-back, .altgallery-link").remove();var l=d(10*-b.maxAngle,10*b.maxAngle)/10;e.animate({animate:100},{duration:200,easing:"linear",step:function(a){J(c(this),{rotate:(l*a/100).toString()+"deg"})},complete:function(){c(this).prop({animate:0})}});e=this.stack[this.stack.length-1];a.stack.pop();a.stack.unshift(e);var g=d(a.imageWidth,1.5*a.imageWidth),h=d(a.imageHeight/
2,a.imageHeight),m=d(10,60);e.animate({animate:1E3},{duration:0.8*a.options.animation.duration,easing:"easeOutQuint",step:function(a){e.css({left:k.left+g*a/1E3,top:k.top-h*a/1E3});J(e,{rotate:(m*a/1E3).toString()+"deg"})},complete:function(){for(var c=0;c<a.stack.length;c++)a.stack[c].css({zIndex:a.stack.length-c});e.animate({animate:0},{duration:0.8*a.options.animation.duration,easing:"easeOutQuint",step:function(a){e.css({left:k.left+g*a/1E3,top:k.top-h*a/1E3});J(e,{rotate:(0+m*a/1E3).toString()+
"deg"})}})}});a.currentItem--;0>a.currentItem&&(a.currentItem=a.items.length-1);a.open(a.getCurrentItem())};W.prototype.next=function(){var a=this,c=this.settings,b=this.stack[0],e=b.position();b.find(".altgallery-back, .altgallery-link").remove();a.stack.shift();a.stack.push(b);var k=d(a.imageWidth,1.5*a.imageWidth),g=d(a.imageHeight/2,a.imageHeight),h=d(10,60),m=d(10*-c.maxAngle,10*c.maxAngle)/10;b.animate({animate:1E3},{duration:0.8*a.options.animation.duration,easing:"easeOutQuint",step:function(a){b.css({left:e.left+
k*a/1E3,top:e.top-g*a/1E3});J(b,{rotate:(h*a/1E3).toString()+"deg"})},complete:function(){for(var c=0;c<a.stack.length;c++)a.stack[c].css({zIndex:a.stack.length-c});b.animate({animate:0},{duration:0.8*a.options.animation.duration,easing:"easeOutQuint",step:function(a){b.css({left:e.left+k*a/1E3,top:e.top-g*a/1E3});J(b,{rotate:(m+h*a/1E3).toString()+"deg"})}})}});a.currentItem++;a.currentItem>=a.items.length&&(a.currentItem=0);a.open(a.getCurrentItem())};W.prototype.slideshowStart=function(){var a=
this,c=a.settings;if(!a.slideshow){var b=function(){a.slideshowTimeoutId=setTimeout(function(){a.next(b)},1E3*c.slideshow.delay+2E3)};a.slideshow=!0;setTimeout(function(){a.next(b)},1E3*c.slideshow.delay)}};W.prototype.slideshowStop=function(){this.slideshow&&(this.slideshow=!1,clearTimeout(this.slideshowTimeoutId))};N.prototype.render=function(){var a=this,b=this.settings,d=this.canvas;d.element.css({fontFamily:b.fontName,fontSize:parseInt(b.fontSize)+"px",lineHeight:1.2*parseInt(b.fontSize)+"px"});
var e=c('<div class="altgallery-imageFrame"></div>');e.css({width:d.width()-2*b.frameSize,height:d.height()-2*b.frameSize,padding:b.frameSize,background:v(b.frameColor),borderRadius:b.cornerRadius/2});var k=c('<div class="altgallery-image"></div>');k.css({position:"relative",width:d.width()-2*b.frameSize,height:d.height()-2*b.frameSize,overflow:"hidden",background:v(b.backgroundColor),borderRadius:b.cornerRadius/2-b.frameSize/4,cursor:"pointer"});var g=c('<img src="" alt="" />');t(k.children("img"));
g.css({position:"absolute"});e.click(function(){a.next()});k.append(g);e.append(k);d.element.append(e);a.open(a.getCurrentItem());switch(b.initialState.toLowerCase()){default:case "show albums":this.showAlbums();break;case "show thumbnails":this.showThumbnails();case "load image":case "start slideshow":}};N.prototype.showAlbums=function(){var a=this,b=this.canvas,d=this.settings;if(!b.element.find(".altgallery-albums").size()){var e=function(){var c=q*n+1,b=q*n+n;b>a.albums.length&&(b=a.albums.length);
p.html(c+"-"+b+" "+d.translation.Of+" "+a.albums.length);0>=q?(F.css({opacity:0.3,cursor:"default"}),F.unbind("click").click(function(){return!1})):(F.css({opacity:1,cursor:"pointer"}),F.unbind("click").click(A));q>=s-1?(w.css({opacity:0.3,cursor:"default"}),w.unbind("click").click(function(){return!1})):(w.css({opacity:1,cursor:"pointer"}),w.unbind("click").click(x))};a.hideThumbnails();a.hideButtons();a.hideCaption();a.hideNavigation();var k=c('<div class="altgallery-albums"></div>'),g=b.width()-
2*d.frameSize,h=d.iconHeight+115;k.css({position:"absolute",left:d.frameSize,top:(b.height()-h)/2,width:b.width()-2*d.frameSize,height:h,overflow:"hidden",color:"#fff",border:"1px #000",borderStyle:"solid none",zIndex:2});var m=c('<div class="altgallery-albums-overlay"></div>');m.css({position:"absolute",left:d.frameSize,top:(b.height()-h)/2,width:b.width()-2*d.frameSize,height:h+1,background:"#000",opacity:d.panelBackgroundAlpha/100,zIndex:1});b.element.append(m);h=c("<div></div>");h.css({position:"absolute",
top:10,right:20});m=c('<a class="altgallery-close" href="#">'+d.translation.Close+"</a>");m.css({marginRight:0,color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",backgroundImage:B(a.options.images.folder+"zen-close.png"),paddingLeft:12});m.click(function(){a.hideAlbums();a.showButtons();a.showCaption();a.showNavigation();return!1});h.append(m);k.append(h);var n=Math.floor((g-20)/(d.iconWidth+d.iconPadding)),n=n>a.albums.length?
a.albums.length:n,h=(d.iconWidth+d.iconPadding)*n-d.iconPadding,m=(d.iconWidth+d.iconPadding)*a.albums.length-d.iconPadding,s=Math.ceil(a.albums.length/n),q=0,l=c("<div>"+d.translation.Albums+"</div>");l.css({position:"absolute",left:9,top:0,padding:10,paddingLeft:25,textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.5)",fontWeight:"bold",background:"no-repeat left center",backgroundImage:B(a.options.images.folder+"zen-albums.png")});k.append(l);var p=c("<span></span>");p.css({marginLeft:"1em",fontWeight:"normal"});
l.append(p);l=c("<div></div>");l.css({position:"absolute",left:(g-h)/2-4,top:42,width:h+4,height:d.iconHeight+70,overflow:"hidden"});var v=c("<div></div>");v.css({position:"relative",left:0,width:m});l.append(v);g=c("<div></div>");g.css({position:"absolute",right:4,bottom:3,height:20,opacity:0.9});var F=c('<a href="#" style="float:left;"></a>');F.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:B(a.options.images.folder+"zen-prev.png")});
var A=function(){0<q&&q--;var c=(d.iconWidth+d.iconPadding)*n*q;v.stop().animate({left:-c},2*a.options.animation.duration,"easeOutQuart");e();return!1};F.click(A);g.append(F);k.append(l);var w=c('<a href="#" style="float:left;"></a>');w.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:B(a.options.images.folder+"zen-next.png")});var x=function(){q<s-1&&q++;var c=(d.iconWidth+d.iconPadding)*n*q;v.stop().animate({left:-c},2*a.options.animation.duration,
"easeOutQuart");e();return!1};w.click(x);g.append(w);k.append(g);e();for(var y,g=0;g<a.albums.length;g++)(function(b,e){var h=c("<div></div>");h.css({position:"absolute",left:(d.iconWidth+d.iconPadding)*e,top:0,width:d.iconWidth+d.iconPadding+6,overflow:"hidden",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)"});var m=c('<div class="altgallery-thumbnail"></div>');m.css({position:"relative",width:d.iconWidth-2,height:d.iconHeight-2,overflow:"hidden",border:"1px solid",borderColor:a.currentAlbum==e?"#000":"#fff",
margin:"2px",cursor:"pointer"});u(b.items[0].thumb,function(a){var b=c('<img src="" alt="" />');b.attr("src",a.src);t(b);b.css({position:"absolute"});b.css(G.fill(a.width,a.height,d.iconWidth-2,d.iconHeight-2));m.append(b)},50*e);h.append(m);h.append('<div style="padding:7px 2px 2px; font-weight:bold;">'+(b.description||"Album "+(e+1))+"<div>");h.append('<div style="padding:1px 2px;">'+b.items.length+" "+(1==b.items.length?d.translation.Image:d.translation.Images)+"<div>");h.hover(function(){v.find(".altgallery-thumbnail").css({borderWidth:"1px",
margin:"2px"});m.css({borderWidth:"3px",margin:"0px"})},function(){m.css({borderWidth:"1px",margin:"2px"})}).click(function(){y||(a.currentAlbum!=e&&(a.currentItem=-1),a.currentAlbum=e,a.showThumbnails())});v.append(h)})(a.albums[g],g);b.element.append(k);1<s&&(v.draggable({axis:"x",start:function(){y=!0},stop:function(a,c){c.position.left>c.originalPosition.left?A():x();setTimeout(function(){y=!1},100)}}),O(k))}};N.prototype.hideAlbums=function(){this.canvas.element.find(".altgallery-albums, .altgallery-albums-overlay").remove()};
N.prototype.showThumbnails=function(){var a=this,b=this.canvas,d=this.settings,e=this.getCurrentAlbum();if(!b.element.find(".altgallery-images").size()){var k=function(){var a=p*l+1,c=p*l+l;c>e.items.length&&(c=e.items.length);v.html(a+"-"+c+" "+d.translation.Of+" "+e.items.length);0>=p?(A.css({opacity:0.3,cursor:"default"}),A.unbind("click").click(function(){return!1})):(A.css({opacity:1,cursor:"pointer"}),A.unbind("click").click(w));p>=q-1?(x.css({opacity:0.3,cursor:"default"}),x.unbind("click").click(function(){return!1})):
(x.css({opacity:1,cursor:"pointer"}),x.unbind("click").click(y))};a.hideAlbums();a.hideButtons();a.hideCaption();a.hideNavigation();var g=c('<div class="altgallery-images"></div>'),h=b.width()-2*d.frameSize,m=d.iconHeight+75;g.css({position:"absolute",left:d.frameSize,top:(b.height()-m)/2,width:b.width()-2*d.frameSize,height:m,overflow:"hidden",color:"#fff",border:"1px #000",borderStyle:"solid none",zIndex:2});var n=c('<div class="altgallery-images-overlay"></div>');n.css({position:"absolute",left:d.frameSize,
top:(b.height()-m)/2,width:b.width()-2*d.frameSize,height:m+1,background:"#000",opacity:d.panelBackgroundAlpha/100,zIndex:1});b.element.append(n);m=c("<div></div>");m.css({position:"absolute",top:10,right:20});1<a.albums.length&&(n=c('<a class="altgallery-back" href="#">'+d.translation.BackToAlbums+"</a>"),n.css({marginRight:"1.5em",color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",backgroundImage:B(a.options.images.folder+
"zen-backToAlbums.png"),paddingLeft:14}),n.click(function(){a.showAlbums();return!1}),m.append(n));n=c('<a class="altgallery-close" href="#">'+d.translation.Close+"</a>");n.css({marginRight:0,color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",backgroundImage:B(a.options.images.folder+"zen-close.png"),paddingLeft:12});n.click(function(){a.hideThumbnails();a.showButtons();a.showCaption();a.showNavigation();return!1});m.append(n);
g.append(m);var l=Math.floor((h-20)/(d.iconWidth+d.iconPadding)),l=l>e.items.length?e.items.length:l,m=(d.iconWidth+d.iconPadding)*l-d.iconPadding,n=(d.iconWidth+d.iconPadding)*e.items.length-d.iconPadding,q=Math.ceil(e.items.length/l),p=0,H=c("<div>"+d.translation.Images+"</div>");H.css({position:"absolute",left:9,top:0,padding:10,paddingLeft:25,textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.5)",fontWeight:"bold",background:"no-repeat left center",backgroundImage:B(a.options.images.folder+"zen-thumbnails.png")});
g.append(H);var v=c("<span></span>");v.css({marginLeft:"1em",fontWeight:"normal"});H.append(v);H=c("<div></div>");H.css({position:"absolute",left:(h-m)/2-4,top:42,width:m+4,height:d.iconHeight+4,overflow:"hidden"});var F=c("<div></div>");F.css({position:"relative",left:0,width:n});H.append(F);g.append(H);h=c("<div></div>");h.css({position:"absolute",right:4,bottom:3,height:20,opacity:0.9});var A=c('<a href="#" style="float:left;"></a>');A.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,
background:"no-repeat center",backgroundImage:B(a.options.images.folder+"zen-prev.png")});var w=function(){0<p&&p--;var c=(d.iconWidth+d.iconPadding)*l*p;F.stop().animate({left:-c},2*a.options.animation.duration,"easeOutQuart");k();return!1};A.click(w);h.append(A);var x=c('<a href="#" style="float:left;"></a>');x.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:B(a.options.images.folder+"zen-next.png")});var y=function(){p<q-1&&p++;
var c=(d.iconWidth+d.iconPadding)*l*p;F.stop().animate({left:-c},2*a.options.animation.duration,"easeOutQuart");k();return!1};x.click(y);h.append(x);g.append(h);k();for(var C=!1,h=0;h<e.items.length;h++)(function(b,e){var h=c("<div></div>");h.css({position:"absolute",left:(d.iconWidth+d.iconPadding)*e,top:0,width:d.iconWidth+d.iconPadding+6,overflow:"hidden",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)"});var m=c('<div class="altgallery-thumbnail"></div>');m.css({position:"relative",width:d.iconWidth-2,
height:d.iconHeight-2,overflow:"hidden",border:"1px solid",borderColor:a.currentItem==e?"#000":"#fff",margin:"2px",cursor:"pointer"});u(b.thumb,function(a){var b=c('<img src="" alt="" />');b.attr("src",a.src);t(b);b.css({position:"absolute"});b.css(G.fill(a.width,a.height,d.iconWidth-2,d.iconHeight-2));m.append(b)},50*e);h.append(m);h.hover(function(){F.find(".altgallery-thumbnail").css({borderWidth:"1px",margin:"2px"});m.css({borderWidth:"3px",margin:"0px"})},function(){m.css({borderWidth:"1px",
margin:"2px"})}).click(function(){C||(a.currentItem=e,a.open(a.getCurrentItem()))});F.append(h)})(e.items[h],h);b.element.append(g);1<q&&(F.draggable({axis:"x",start:function(){C=!0},stop:function(a,c){c.position.left>c.originalPosition.left?w():y();setTimeout(function(){C=!1},100)}}),O(g))}};N.prototype.hideThumbnails=function(){this.canvas.element.find(".altgallery-images, .altgallery-images-overlay").remove()};N.prototype.showButtons=function(){var a=this;if("never"!=a.settings.showButtons.toLowerCase()&&
(a.settings.showAlbumsButton||a.settings.showThumbnailsButton)&&!a.canvas.element.find(".altgallery-buttons").size()){var b=c('<div class="altgallery-buttons"></div>');b.css({position:"absolute",right:a.settings.frameSize,top:25+a.settings.frameSize,padding:"3px 3px 3px 1px",background:"rgba(0, 0, 0, "+a.settings.buttonsBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderRight:"none","-moz-border-top-left-radius":"3px","-moz-border-bottom-left-radius":"3px","-webkit-border-top-left-radius":"3px",
"-webkit-border-bottom-left-radius":"3px","border-top-left-radius":"3px","border-bottom-left-radius":"3px"});if(c.browser.msie&&9>c.browser.version){var d=Math.round(255*parseInt(a.settings.buttonsBackgroundAlpha)/100),d=16>d?"0"+d.toString(16):d.toString(16);b.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+d+"000000,endColorstr=#"+d+"000000)"})}a.settings.showAlbumsButton&&1<a.albums.length&&(d=c('<a href="#" style="float:left;"></a>'),d.css({display:"block",
cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:B(a.options.images.folder+"zen-albums.png"),opacity:0.8}),d.click(function(){a.showAlbums();return!1}),b.append(d));a.settings.showThumbnailsButton&&(d=c('<a href="#" style="float:left;"></a>'),d.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:B(a.options.images.folder+"zen-thumbnails.png"),opacity:0.8}),d.click(function(){a.showThumbnails();
return!1}),b.append(d));a.canvas.element.append(b)}};N.prototype.hideButtons=function(){this.canvas.element.find(".altgallery-buttons").remove()};N.prototype.showCaption=function(){this.hideCaption();if("never"!=this.settings.showCaption.toLowerCase()&&(this.getCurrentAlbum()&&this.getCurrentAlbum().description||this.getCurrentItem()&&this.getCurrentItem().description)){var a=c('<div class="altgallery-caption"></div>');a.css({position:"absolute",left:this.settings.frameSize,top:25+this.settings.frameSize,
maxWidth:this.canvas.width()-100,padding:"4px 10px 5px 7px",color:"#fff",textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.3)",background:"rgba(0, 0, 0, "+this.settings.captionBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderLeft:"none","-moz-border-top-right-radius":"3px","-moz-border-bottom-right-radius":"3px","-webkit-border-top-right-radius":"3px","-webkit-border-bottom-right-radius":"3px","border-top-right-radius":"3px","border-bottom-right-radius":"3px"});if(c.browser.msie&&9>c.browser.version){var b=
Math.round(255*parseInt(this.settings.captionBackgroundAlpha)/100),b=16>b?"0"+b.toString(16):b.toString(16);a.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+b+"000000,endColorstr=#"+b+"000000)"})}this.getCurrentAlbum().description&&a.append('<div style="font-weight:bold;">'+this.getCurrentAlbum().description.replace("\n","<br/>")+"</div>");this.getCurrentItem().description&&a.append('<div style="">'+this.getCurrentItem().description.replace("\n","<br/>")+
"</div>");this.canvas.element.append(a)}};N.prototype.hideCaption=function(){this.canvas.element.find(".altgallery-caption").remove()};N.prototype.showNavigation=function(){var a=this;if("never"!=a.settings.showButtons.toLowerCase()&&a.settings.showNavigationButton&&!a.canvas.element.find(".altgallery-navigation").size()){var b=c('<div class="altgallery-navigation"></div>');b.css({position:"absolute",right:a.settings.frameSize,bottom:25+a.settings.frameSize,padding:"3px 3px 3px 1px",background:"rgba(0, 0, 0, "+
a.settings.buttonsBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderRight:"none","-moz-border-top-left-radius":"3px","-moz-border-bottom-left-radius":"3px","-webkit-border-top-left-radius":"3px","-webkit-border-bottom-left-radius":"3px","border-top-left-radius":"3px","border-bottom-left-radius":"3px"});if(c.browser.msie&&9>c.browser.version){var d=Math.round(255*parseInt(a.settings.buttonsBackgroundAlpha)/100),d=16>d?"0"+d.toString(16):d.toString(16);b.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+
d+"000000,endColorstr=#"+d+"000000)"})}a.settings.showNavigationButton&&(d=c('<a href="#" style="float:left;"></a>'),d.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:B(a.options.images.folder+"zen-prev.png"),opacity:0.8}),d.click(function(){a.prev();return!1}),b.append(d),d=c('<a href="#" style="float:left;"></a>'),d.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:B(a.options.images.folder+
"zen-next.png"),opacity:0.8}),d.click(function(){a.next();return!1}),b.append(d));a.canvas.element.append(b)}};N.prototype.hideNavigation=function(){this.canvas.element.find(".altgallery-navigation").remove()};N.prototype.open=function(a){var b=this,d=this.canvas,e=this.settings;b.hideAlbums();b.hideThumbnails();b.showButtons();b.showCaption();b.showNavigation();d.element.find(".altgallery-image img").hide();var k=d.element.find(".altgallery-imageFrame"),g=c('<img class="altgallery-preloader" src="'+
b.options.images.loader+'" alt="" />');t(g);g.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});u(a.source,function(c){g.hide();d.element.find(".altgallery-preloader").remove();var m=d.element.find(".altgallery-image img");"fit"==e.imageScaleMode?m.css(G.fit(c.width,c.height,d.width()-2*e.frameSize,d.height()-2*e.frameSize)):m.css(G.fill(c.width,c.height,d.width()-2*e.frameSize,d.height()-2*e.frameSize));m.attr("src",a.source).fadeIn(2*b.options.animation.duration);
b.cache()});setTimeout(function(){d.element.find(".altgallery-preloader").remove();k.append(g)},500)};N.prototype.prev=function(){0<this.currentItem?this.currentItem--:this.currentItem=this.getCurrentAlbum().items.length-1;this.open(this.getCurrentItem())};N.prototype.next=function(){this.currentItem<this.getCurrentAlbum().items.length-1?this.currentItem++:this.currentItem=0;this.open(this.getCurrentItem())};c.altgallery=altgallery=function(a,d,e){function k(){l.each(function(){var e,f=a,h=d;e=c(this);
var g,k,l={};l.options=f;var t=T();k=new na(e,f);g=f.config||{};var u=function(a){c(document).ready(function(){setTimeout(function(){var b=function(a){if(a.match(/Art/i))return"art";if(a.match(/Aura/i))return"aura";if(a.match(/Box/i))return"box";if(a.match(/Cubic/i))return"cubic";if(a.match(/PhotoFlow/i))return"photoflow";if(a.match(/Stack/i))return"stack";if(a.match(/Zen/i))return"zen"};fa!=32*pa&&(a=[]);switch(f.type?f.type.toLowerCase():g.galleryName?f.type=b(g.galleryName):f.type="box"){case "art":case "promo":l=
new X(k,a,g.settings,f);break;case "aura":l=new M(k,a,g.settings,f);break;default:case "box":l=new R(k,a,g.settings,f);break;case "cubic":l=new K(k,a,g.settings,f);break;case "photoflow":l=new V(k,a,g.settings,f);break;case "stack":l=new W(k,a,g.settings,f);break;case "zen":l=new N(k,a,g.settings,f)}"function"==typeof h&&h(l)},100)})},A=function(a,b){var d=this;this.user=a;this.albumId=b;this.data={};this.title="";this.items=[];this.getData=function(a){c.ajax({url:"https://picasaweb.google.com/data/feed/base/user/"+
this.user+"/albumid/"+this.albumId+"?alt=json",dataType:"json",success:function(b){d.data=b;if(b.feed&&(b.feed.title&&(d.title=b.feed.title.$t),b.feed.entry)){d.items=[];for(var c=0;c<b.feed.entry.length;c++)d.items.push({source:b.feed.entry[c].content.src,thumb:b.feed.entry[c].media$group.media$thumbnail[1].url,description:b.feed.entry[c].media$group.media$description.$t})}"function"==typeof a&&a(d.data)},error:function(){"function"==typeof a&&a()}})}},v=function(){"function"==typeof u&&u(y)},w=
function(a,b,c,d){c=c||"";d=d||"";a.items=a.items||[];for(var e=a.items.length,f=0;f<b.length&&(t||15>f);f++)a.items[e]={id:e,source:c+b[f].source,thumb:b[f].thumb?d+b[f].thumb:c+b[f].source,description:b[f].description||"",link:b[f].link||"",target:b[f].target||""},e++},x=function(a,c,d,e,f){e===b&&(e=g.settings.imagesFolder?g.settings.imagesFolder.replace(/\/+$/,"")+"/":"");f===b&&(f=f||g.settings.thumbnailsFolder?g.settings.thumbnailsFolder.replace(/\/+$/,"")+"/":e);y[a]={id:a,description:d};w(y[a],
c,e,f)},y=[];if(p(g.albums)&&g.albums.length){var B=0;for(e=0;e<g.albums.length&&(t||3>e);e++)x(e,g.albums[e].items||[],g.albums[e].description,g.albums[e].imagesFolder,g.albums[e].thumbnailsFolder),g.albums[e].picasa&&(g.albums[e].picasa.user&&g.albums[e].picasa.albumID)&&(B++,function(a){setTimeout(function(){var b=new A(g.albums[a].picasa.user,g.albums[a].picasa.albumID);b.getData(function(){b.items.length&&w(y[a],b.items);B--})},10*B)}(e));if(B)var E=setInterval(function(){1>B&&(clearInterval(E),
v())},100);else v()}else if(p(g.items)&&g.items.length)if(x(0,g.items),g.settings&&g.settings.picasa&&g.settings.picasa.user&&g.settings.picasa.albumID){var C=new A(g.settings.picasa.user,g.settings.picasa.albumID);C.getData(function(){w(y[0],C.items);v()})}else v();else if(g.settings&&g.settings.picasa&&g.settings.picasa.user&&g.settings.picasa.albumID)x(0,[]),C=new A(g.settings.picasa.user,g.settings.picasa.albumID),C.getData(function(){w(y[0],C.items);v()});else{var D=[];c(e).find("img").each(function(){D.push({source:c(this).parent("a").attr("href")||
c(this).attr("src"),thumb:c(this).attr("src"),description:this.title})});x(0,D);v()}})}e===b&&"function"!=typeof d&&(e=d,d=b);var l;e===b?(window.altgallery_id++,e="altgallery-"+window.altgallery_id,document.write('<div id="'+e+'"></div>'),l=c(document.getElementById(e))):l=c(e);a=c.extend(!0,{width:"550px",height:"400px",background:"none",images:{folder:ga+"img/",left:"left.png",right:"right.png",close:"close.png",loader:"loader.png"},animation:{duration:500}},a);if(a.images.folder){a.images.folder=
a.images.folder.replace(/\/+$/,"")+"/";for(var g in a.images)"folder"!=g&&!a.images[g].match("/")&&(a.images[g]=a.images.folder+a.images[g])}var h={load:function(a,c,d){if(c!==b)switch(c.toLowerCase()){default:case "xml":this.loadXML(a,d);break;case "json":this.loadJSON(a,d)}else a.match(/(json|txt)$/i)?this.loadJSON(a,d):this.loadXML(a,d)},loadJSON:function(a,b){c.ajax({url:a,dataType:"json",success:function(a){h.parse(a,b)},error:function(){"function"==typeof b&&b({})}})},loadXML:function(a,b){c.ajax({url:a,
dataType:"xml",success:function(a){var c;"undefined"==typeof c&&(c=function(){});c.ObjTree=function(){return this};c.ObjTree.prototype.attr_prefix="";c.ObjTree.prototype.parseDOM=function(a){if(a){this.__force_array={};if(this.force_array)for(var b=0;b<this.force_array.length;b++)this.__force_array[this.force_array[b]]=1;b=this.parseElement(a);this.__force_array[a.nodeName]&&(b=[b]);if(11!=a.nodeType){var c={};c[a.nodeName]=b;b=c}return b}};c.ObjTree.prototype.parseElement=function(a){if(7!=a.nodeType){if(3==
a.nodeType||4==a.nodeType)return null==a.nodeValue.match(/[^\x00-\x20]/)?void 0:a.nodeValue;var b,c={};if(a.attributes&&a.attributes.length){b={};for(var d=0;d<a.attributes.length;d++){var e=a.attributes[d].nodeName;if("string"==typeof e){var f=a.attributes[d].nodeValue;f&&(e=this.attr_prefix+e,"undefined"==typeof c[e]&&(c[e]=0),c[e]++,this.addNode(b,e,c[e],f))}}}if(a.childNodes&&a.childNodes.length){e=!0;b&&(e=!1);for(d=0;d<a.childNodes.length&&e;d++)f=a.childNodes[d].nodeType,3==f||4==f||(e=!1);
if(e){b||(b="");for(d=0;d<a.childNodes.length;d++)b+=a.childNodes[d].nodeValue}else{b||(b={});for(d=0;d<a.childNodes.length;d++)if(e=a.childNodes[d].nodeName,"string"==typeof e&&(f=this.parseElement(a.childNodes[d])))"undefined"==typeof c[e]&&(c[e]=0),c[e]++,this.addNode(b,e,c[e],f)}}return b}};c.ObjTree.prototype.addNode=function(a,b,c,d){this.__force_array[b]?(1==c&&(a[b]=[]),a[b][a[b].length]=d):1==c?a[b]=d:2==c?a[b]=[a[b],d]:a[b][a[b].length]=d};c=new c.ObjTree;c.attr_prefix="";a=c.parseDOM(a)["#document"];
h.parse(a,b)},error:function(){"function"==typeof b&&b({})}})},parse:function(a,b){if(a.gallery&&(a.galleryName&&(a.gallery.galleryName=a.galleryName),a=a.gallery,a.items&&a.items.item&&(a.items=a.items.item.length?a.items.item:[a.items.item]),a.albums)){a.albums.album&&(a.albums=a.albums.album.length?a.albums.album:[a.albums.album]);for(var c=0;c<a.albums.length;c++)a.albums[c].items&&a.albums[c].items.item&&(a.albums[c].items=a.albums[c].items.item.length?a.albums[c].items.item:[a.albums[c].items.item])}"function"==
typeof b&&b(a)}};"string"==typeof a.config?(l.css({visibility:"hidden"}),h.load(a.config,a.configType,function(b){l.css({visibility:"visible"});a.config=b;k()})):h.parse(a.config,function(b){a.config=b;k()});return l};c.fn.altgallery=function(a,b){c.altgallery(a,b,this);return this};c.altbox=altbox=function(a,b){if(d!=top)var d=top,e=d.document;b=c.extend(!0,{frame:{color:"#000",borderRadius:0},mask:{color:"#000",opacity:0.7},images:{folder:ga+"img/",close:"close.png",loader:"loader.gif"},animation:{duration:700}},
b);if(b.images.folder){b.images.folder=b.images.folder.replace(/\/+$/,"")+"/";for(var k in b.images)"folder"!=k&&!b.images[k].match("/")&&(b.images[k]=b.images.folder+b.images[k])}var g=c('<div style="position:fixed; z-index:999; left:0; top:0; width:100%; height:100%; background:no-repeat center;"></div>');g.css({opacity:0,backgroundColor:b.mask.color,backgroundImage:B(b.images.loader)});c(e.body).append(g);g.animate({opacity:b.mask.opacity},b.animation.duration);var h=new Image;h.onload=function(){function k(){g.remove();
v.remove()}function l(){x.remove();t.opacity="hide";v.animate(t,0.67*b.animation.duration);w.animate({width:t.width-20,height:t.height-20},0.67*b.animation.duration);g.fadeOut(b.animation.duration,function(){k()});return!1}var p=c(d).width()-100,q=c(d).height()-100,t=G.fit(h.width/4,h.height/4,p,q,{noEnlarge:!0,minWidth:100,minHeight:100});t.left+=50;t.top+=50;var u=G.fit(h.width+20,h.height+20,p,q,{noEnlarge:!0,minWidth:120,minHeight:120});u.left+=50;u.top+=50;var v=c('<div style="position:fixed; z-index:1000;"></div>');
v.css(t);v.css({backgroundColor:b.frame.color,borderRadius:b.frame.borderRadius,MozUserSelect:"none",webkitUserSelect:"none",userSelect:"none"});v.hide();var w=c('<img src="'+a+'" alt="" style="display:block;" />');w.css({margin:"10px",width:t.width-20,height:t.height-20,borderRadius:8<b.frame.borderRadius?b.frame.borderRadius-8:0});var x=c('<a href="#" style="display:block; position:absolute; right:-12px; top:-10px; width:30px; height:30px; background:no-repeat center;"></a>');x.css({backgroundImage:B(b.images.close)});
v.append(w);c(e.body).append(v);g.css({backgroundImage:"none"});w.animate({width:u.width-20,height:u.height-20,margin:"10px"},b.animation.duration,"easeOutBack");u.opacity="show";v.animate(u,b.animation.duration,"easeOutBack",function(){v.append(x)});c(d).resize(function(){p=c(d).width()-100;q=c(d).height()-100;t=G.fit(h.width/4,h.height/4,p,q,{noEnlarge:!0,minWidth:100,minHeight:100});t.left+=50;t.top+=50;u=G.fit(h.width+20,h.height+20,p,q,{noEnlarge:!0,minWidth:120,minHeight:120});u.left+=50;u.top+=
50;v.css(u);w.css({width:u.width-20,height:u.height-20})});g.click(k);x.click(l);v.dblclick(l)};h.src=a}})(jQuery);
