/**
 * altgallery, jQuery Plugin
 *
 * @version 0.5.0
 * @copyright 2011-2012 Flash-Gallery.com
 */

(function(c,a){function d(a,d){var g=a.nodeName.toLowerCase();if("area"===g){var g=a.parentNode,e=g.name;if(!a.href||!e||"map"!==g.nodeName.toLowerCase())return!1;g=c("img[usemap=#"+e+"]")[0];return!!g&&b(g)}return(/input|select|textarea|button|object/.test(g)?!a.disabled:"a"==g?a.href||d:d)&&b(a)}function b(a){return!c(a).parents().andSelf().filter(function(){return"hidden"===c.curCSS(this,"visibility")||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};c.ui.version||(c.extend(c.ui,{version:"1.8.18",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),c.fn.extend({propAttr:c.fn.prop||c.fn.attr,_focus:c.fn.focus,focus:function(a,d){return"number"===typeof a?this.each(function(){var b=
this;setTimeout(function(){c(b).focus();d&&d.call(b)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,
"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?c(document):a},zIndex:function(d){if(d!==a)return this.css("zIndex",d);if(this.length)for(var d=c(this[0]),b;d.length&&d[0]!==document;){b=d.css("position");if("absolute"===b||"relative"===b||"fixed"===b)if(b=parseInt(d.css("zIndex"),10),!isNaN(b)&&0!==b)return b;d=d.parent()}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(c){c.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),c.each(["Width","Height"],function(d,b){function g(a,w,j,y){c.each(e,function(){w-=parseFloat(c.curCSS(a,"padding"+this,!0))||0;j&&(w-=parseFloat(c.curCSS(a,"border"+this+"Width",!0))||0);y&&(w-=parseFloat(c.curCSS(a,"margin"+this,!0))||0)});return w}var e="Width"===b?["Left","Right"]:["Top","Bottom"],r=b.toLowerCase(),F={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,
outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+b]=function(d){return d===a?F["inner"+b].call(this):this.each(function(){c(this).css(r,g(this,d)+"px")})};c.fn["outer"+b]=function(a,w){return"number"!==typeof a?F["outer"+b].call(this,a):this.each(function(){c(this).css(r,g(this,a,!0,w)+"px")})}}),c.extend(c.expr[":"],{data:function(a,d,b){return!!c.data(a,b[3])},focusable:function(a){return d(a,!isNaN(c.attr(a,"tabindex")))},tabbable:function(a){var b=c.attr(a,"tabindex"),g=isNaN(b);
return(g||0<=b)&&d(a,!g)}}),c(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));c.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=100===b.offsetHeight;c.support.selectstart="onselectstart"in b;a.removeChild(b).style.display="none"}),c.extend(c.ui,{plugin:{add:function(a,b,d){var a=c.ui[a].prototype,e;for(e in d)a.plugins[e]=a.plugins[e]||[],a.plugins[e].push([b,d[e]])},call:function(c,a,b){if((a=c.plugins[a])&&c.element[0].parentNode)for(var d=
0;d<a.length;d++)c.options[a[d][0]]&&a[d][1].apply(c.element,b)}},contains:function(c,a){return document.compareDocumentPosition?c.compareDocumentPosition(a)&16:c!==a&&c.contains(a)},hasScroll:function(a,b){if("hidden"===c(a).css("overflow"))return!1;var d=b&&"left"===b?"scrollLeft":"scrollTop",e=!1;if(0<a[d])return!0;a[d]=1;e=0<a[d];a[d]=0;return e},isOverAxis:function(c,a,b){return c>a&&c<a+b},isOver:function(a,b,d,e,r,F){return c.ui.isOverAxis(a,d,r)&&c.ui.isOverAxis(b,e,F)}}))})(jQuery);
(function(c,a){if(c.cleanData){var d=c.cleanData;c.cleanData=function(a){for(var b=0,g;null!=(g=a[b]);b++)try{c(g).triggerHandler("remove")}catch(e){}d(a)}}else{var b=c.fn.remove;c.fn.remove=function(a,d){return this.each(function(){d||(!a||c.filter(a,[this]).length)&&c("*",this).add([this]).each(function(){try{c(this).triggerHandler("remove")}catch(a){}});return b.call(c(this),a,d)})}}c.widget=function(a,b,d){var e=a.split(".")[0],r,a=a.split(".")[1];r=e+"-"+a;if(!d)d=b,b=c.Widget;c.expr[":"][r]=
function(b){return!!c.data(b,a)};c[e]=c[e]||{};c[e][a]=function(c,a){arguments.length&&this._createWidget(c,a)};b=new b;b.options=c.extend(!0,{},b.options);c[e][a].prototype=c.extend(!0,b,{namespace:e,widgetName:a,widgetEventPrefix:c[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:r},d);c.widget.bridge(a,c[e][a])};c.widget.bridge=function(b,d){c.fn[b]=function(g){var e="string"===typeof g,r=Array.prototype.slice.call(arguments,1),F=this,g=!e&&r.length?c.extend.apply(null,[!0,g].concat(r)):g;
if(e&&"_"===g.charAt(0))return F;e?this.each(function(){var d=c.data(this,b),w=d&&c.isFunction(d[g])?d[g].apply(d,r):d;if(w!==d&&w!==a)return F=w,!1}):this.each(function(){var a=c.data(this,b);a?a.option(g||{})._init():c.data(this,b,new d(g,this))});return F}};c.Widget=function(c,a){arguments.length&&this._createWidget(c,a)};c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,b){c.data(b,this.widgetName,this);this.element=c(b);this.options=c.extend(!0,
{},this.options,this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return c.metadata&&c.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(b,d){var g=b;if(0===arguments.length)return c.extend({},this.options);if("string"===typeof b){if(d===a)return this.options[b];g={};g[b]=d}this._setOptions(g);return this},_setOptions:function(a){var b=this;c.each(a,function(c,a){b._setOption(c,a)});return this},_setOption:function(c,a){this.options[c]=a;"disabled"===c&&this.widget()[a?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
a);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,b,d){var e,r=this.options[a],d=d||{},b=c.Event(b);b.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();b.target=this.element[0];if(a=b.originalEvent)for(e in a)e in b||(b[e]=a[e]);this.element.trigger(b,d);return!(c.isFunction(r)&&!1===r.call(this.element[0],b,d)||b.isDefaultPrevented())}}})(jQuery);
(function(c){var a=!1;c(document).mouseup(function(){a=!1});c.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(c){return a._mouseDown(c)}).bind("click."+this.widgetName,function(b){if(!0===c.data(b.target,a.widgetName+".preventClickEvent"))return c.removeData(b.target,a.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName)},_mouseDown:function(d){if(!a){this._mouseStarted&&this._mouseUp(d);this._mouseDownEvent=d;var b=this,v=1==d.which,l="string"==typeof this.options.cancel&&d.target.nodeName?c(d.target).closest(this.options.cancel).length:!1;if(!v||l||!this._mouseCapture(d))return!0;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){b.mouseDelayMet=!0},this.options.delay);if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=
!1!==this._mouseStart(d),!this._mouseStarted))return d.preventDefault(),!0;!0===c.data(d.target,this.widgetName+".preventClickEvent")&&c.removeData(d.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(c){return b._mouseMove(c)};this._mouseUpDelegate=function(c){return b._mouseUp(c)};c(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);d.preventDefault();return a=!0}},_mouseMove:function(a){if(c.browser.msie&&
!(9<=document.documentMode)&&!a.button)return this._mouseUp(a);if(this._mouseStarted)return this._mouseDrag(a),a.preventDefault();if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a))(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,a))?this._mouseDrag(a):this._mouseUp(a);return!this._mouseStarted},_mouseUp:function(a){c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted)this._mouseStarted=
!1,a.target==this._mouseDownEvent.target&&c.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a);return!1},_mouseDistanceMet:function(c){return Math.max(Math.abs(this._mouseDownEvent.pageX-c.pageX),Math.abs(this._mouseDownEvent.pageY-c.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(c){c.widget("ui.draggable",c.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){if("original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position=
"relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(a){var d=this.options;if(this.helper||d.disabled||c(a.target).is(".ui-resizable-handle"))return!1;
this.handle=this._getHandle(a);if(!this.handle)return!1;d.iframeFix&&c(!0===d.iframeFix?"iframe":d.iframeFix).each(function(){c('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(c(this).offset()).appendTo("body")});return!0},_mouseStart:function(a){var d=this.options;this.helper=this._createHelper(a);this._cacheHelperProportions();if(c.ui.ddmanager)c.ui.ddmanager.current=
this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};c.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(a);this.originalPageX=a.pageX;
this.originalPageY=a.pageY;d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);d.containment&&this._setContainment();if(!1===this._trigger("start",a))return this._clear(),!1;this._cacheHelperProportions();c.ui.ddmanager&&!d.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,a);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(a,!0);c.ui.ddmanager&&c.ui.ddmanager.dragStart(this,a);return!0},_mouseDrag:function(a,d){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");
if(!d){var b=this._uiHash();if(!1===this._trigger("drag",a,b))return this._mouseUp({}),!1;this.position=b.position}if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";c.ui.ddmanager&&c.ui.ddmanager.drag(this,a);return!1},_mouseStop:function(a){var d=!1;c.ui.ddmanager&&!this.options.dropBehaviour&&(d=c.ui.ddmanager.drop(this,a));if(this.dropped)d=this.dropped,this.dropped=
!1;if((!this.element[0]||!this.element[0].parentNode)&&"original"==this.options.helper)return!1;if("invalid"==this.options.revert&&!d||"valid"==this.options.revert&&d||!0===this.options.revert||c.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)){var b=this;c(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==b._trigger("stop",a)&&b._clear()})}else!1!==this._trigger("stop",a)&&this._clear();return!1},_mouseUp:function(a){!0===
this.options.iframeFix&&c("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});c.ui.ddmanager&&c.ui.ddmanager.dragStop(this,a);return c.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var d=!this.options.handle||!c(this.options.handle,this.element).length?!0:!1;c(this.options.handle,this.element).find("*").andSelf().each(function(){this==a.target&&(d=
!0)});return d},_createHelper:function(a){var d=this.options,a=c.isFunction(d.helper)?c(d.helper.apply(this.element[0],[a])):"clone"==d.helper?this.element.clone().removeAttr("id"):this.element;a.parents("body").length||a.appendTo("parent"==d.appendTo?this.element[0].parentNode:d.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){"string"==typeof a&&(a=a.split(" "));c.isArray(a)&&(a={left:+a[0],top:+a[1]||
0});if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],
this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&c.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var c=this.element.position();return{top:c.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:c.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if("parent"==a.containment)a.containment=this.helper[0].parentNode;if("document"==a.containment||"window"==a.containment)this.containment=["document"==a.containment?0:c(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==a.containment?0:c(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==a.containment?0:c(window).scrollLeft())+c("document"==a.containment?document:
window).width()-this.helperProportions.width-this.margins.left,("document"==a.containment?0:c(window).scrollTop())+(c("document"==a.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var a=c(a.containment),d=a[0];if(d){a.offset();var b="hidden"!=c(d).css("overflow");this.containment=[(parseInt(c(d).css("borderLeftWidth"),10)||0)+(parseInt(c(d).css("paddingLeft"),
10)||0),(parseInt(c(d).css("borderTopWidth"),10)||0)+(parseInt(c(d).css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c(d).css("borderLeftWidth"),10)||0)-(parseInt(c(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c(d).css("borderTopWidth"),10)||0)-(parseInt(c(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];
this.relative_container=a}}else if(a.containment.constructor==Array)this.containment=a.containment},_convertPositionTo:function(a,d){if(!d)d=this.position;var b="absolute"==a?1:-1,v="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(v[0].tagName);return{top:d.top+this.offset.relative.top*b+this.offset.parent.top*b-(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?
0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():l?0:v.scrollTop())*b),left:d.left+this.offset.relative.left*b+this.offset.parent.left*b-(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():l?0:v.scrollLeft())*b)}},_generatePosition:function(a){var d=this.options,b="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,
v=/(html|body)/i.test(b[0].tagName),l=a.pageX,g=a.pageY;if(this.originalPosition){var e;if(this.containment)this.relative_container?(e=this.relative_container.offset(),e=[this.containment[0]+e.left,this.containment[1]+e.top,this.containment[2]+e.left,this.containment[3]+e.top]):e=this.containment,a.pageX-this.offset.click.left<e[0]&&(l=e[0]+this.offset.click.left),a.pageY-this.offset.click.top<e[1]&&(g=e[1]+this.offset.click.top),a.pageX-this.offset.click.left>e[2]&&(l=e[2]+this.offset.click.left),
a.pageY-this.offset.click.top>e[3]&&(g=e[3]+this.offset.click.top);d.grid&&(g=d.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/d.grid[1])*d.grid[1]:this.originalPageY,g=e?!(g-this.offset.click.top<e[1]||g-this.offset.click.top>e[3])?g:!(g-this.offset.click.top<e[1])?g-d.grid[1]:g+d.grid[1]:g,l=d.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/d.grid[0])*d.grid[0]:this.originalPageX,l=e?!(l-this.offset.click.left<e[0]||l-this.offset.click.left>e[2])?l:!(l-this.offset.click.left<
e[0])?l-d.grid[0]:l+d.grid[0]:l)}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():v?0:b.scrollTop()),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():v?0:b.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");
this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(a,d,b){b=b||this._uiHash();c.ui.plugin.call(this,a,[d,b]);if("drag"==a)this.positionAbs=this._convertPositionTo("absolute");return c.Widget.prototype._trigger.call(this,a,d,b)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});c.extend(c.ui.draggable,{version:"1.8.18"});
c.ui.plugin.add("draggable","connectToSortable",{start:function(a,d){var b=c(this).data("draggable"),v=b.options,l=c.extend({},d,{item:b.element});b.sortables=[];c(v.connectToSortable).each(function(){var d=c.data(this,"sortable");d&&!d.options.disabled&&(b.sortables.push({instance:d,shouldRevert:d.options.revert}),d.refreshPositions(),d._trigger("activate",a,l))})},stop:function(a,d){var b=c(this).data("draggable"),v=c.extend({},d,{item:b.element});c.each(b.sortables,function(){if(this.instance.isOver){this.instance.isOver=
0;b.cancelHelperRemoval=!0;this.instance.cancelHelperRemoval=!1;if(this.shouldRevert)this.instance.options.revert=!0;this.instance._mouseStop(a);this.instance.options.helper=this.instance.options._helper;"original"==b.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})}else this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",a,v)})},drag:function(a,d){var b=c(this).data("draggable"),v=this;c.each(b.sortables,function(){this.instance.positionAbs=b.positionAbs;
this.instance.helperProportions=b.helperProportions;this.instance.offset.click=b.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver)this.instance.isOver=1,this.instance.currentItem=c(v).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return d.helper[0]},a.target=this.instance.currentItem[0],this.instance._mouseCapture(a,
!0),this.instance._mouseStart(a,!0,!0),this.instance.offset.click.top=b.offset.click.top,this.instance.offset.click.left=b.offset.click.left,this.instance.offset.parent.left-=b.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=b.offset.parent.top-this.instance.offset.parent.top,b._trigger("toSortable",a),b.dropped=this.instance.element,b.currentItem=b.element,this.instance.fromOutside=b;this.instance.currentItem&&this.instance._mouseDrag(a)}else if(this.instance.isOver)this.instance.isOver=
0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),b._trigger("fromSortable",a),b.dropped=!1})}});c.ui.plugin.add("draggable","cursor",{start:function(){var a=c("body"),d=c(this).data("draggable").options;if(a.css("cursor"))d._cursor=
a.css("cursor");a.css("cursor",d.cursor)},stop:function(){var a=c(this).data("draggable").options;a._cursor&&c("body").css("cursor",a._cursor)}});c.ui.plugin.add("draggable","opacity",{start:function(a,d){var b=c(d.helper),v=c(this).data("draggable").options;if(b.css("opacity"))v._opacity=b.css("opacity");b.css("opacity",v.opacity)},stop:function(a,d){var b=c(this).data("draggable").options;b._opacity&&c(d.helper).css("opacity",b._opacity)}});c.ui.plugin.add("draggable","scroll",{start:function(){var a=
c(this).data("draggable");if(a.scrollParent[0]!=document&&"HTML"!=a.scrollParent[0].tagName)a.overflowOffset=a.scrollParent.offset()},drag:function(a){var d=c(this).data("draggable"),b=d.options,v=!1;if(d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName){if(!b.axis||"x"!=b.axis)if(d.overflowOffset.top+d.scrollParent[0].offsetHeight-a.pageY<b.scrollSensitivity)d.scrollParent[0].scrollTop=v=d.scrollParent[0].scrollTop+b.scrollSpeed;else if(a.pageY-d.overflowOffset.top<b.scrollSensitivity)d.scrollParent[0].scrollTop=
v=d.scrollParent[0].scrollTop-b.scrollSpeed;if(!b.axis||"y"!=b.axis)if(d.overflowOffset.left+d.scrollParent[0].offsetWidth-a.pageX<b.scrollSensitivity)d.scrollParent[0].scrollLeft=v=d.scrollParent[0].scrollLeft+b.scrollSpeed;else if(a.pageX-d.overflowOffset.left<b.scrollSensitivity)d.scrollParent[0].scrollLeft=v=d.scrollParent[0].scrollLeft-b.scrollSpeed}else{if(!b.axis||"x"!=b.axis)a.pageY-c(document).scrollTop()<b.scrollSensitivity?v=c(document).scrollTop(c(document).scrollTop()-b.scrollSpeed):
c(window).height()-(a.pageY-c(document).scrollTop())<b.scrollSensitivity&&(v=c(document).scrollTop(c(document).scrollTop()+b.scrollSpeed));if(!b.axis||"y"!=b.axis)a.pageX-c(document).scrollLeft()<b.scrollSensitivity?v=c(document).scrollLeft(c(document).scrollLeft()-b.scrollSpeed):c(window).width()-(a.pageX-c(document).scrollLeft())<b.scrollSensitivity&&(v=c(document).scrollLeft(c(document).scrollLeft()+b.scrollSpeed))}!1!==v&&c.ui.ddmanager&&!b.dropBehaviour&&c.ui.ddmanager.prepareOffsets(d,a)}});
c.ui.plugin.add("draggable","snap",{start:function(){var a=c(this).data("draggable"),d=a.options;a.snapElements=[];c(d.snap.constructor!=String?d.snap.items||":data(draggable)":d.snap).each(function(){var b=c(this),d=b.offset();this!=a.element[0]&&a.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:d.top,left:d.left})})},drag:function(a,d){for(var b=c(this).data("draggable"),v=b.options,l=v.snapTolerance,g=d.offset.left,e=g+b.helperProportions.width,r=d.offset.top,F=r+b.helperProportions.height,
A=b.snapElements.length-1;0<=A;A--){var w=b.snapElements[A].left,j=w+b.snapElements[A].width,y=b.snapElements[A].top,x=y+b.snapElements[A].height;if(w-l<g&&g<j+l&&y-l<r&&r<x+l||w-l<g&&g<j+l&&y-l<F&&F<x+l||w-l<e&&e<j+l&&y-l<r&&r<x+l||w-l<e&&e<j+l&&y-l<F&&F<x+l){if("inner"!=v.snapMode){var h=Math.abs(y-F)<=l,B=Math.abs(x-r)<=l,M=Math.abs(w-e)<=l,N=Math.abs(j-g)<=l;if(h)d.position.top=b._convertPositionTo("relative",{top:y-b.helperProportions.height,left:0}).top-b.margins.top;if(B)d.position.top=b._convertPositionTo("relative",
{top:x,left:0}).top-b.margins.top;if(M)d.position.left=b._convertPositionTo("relative",{top:0,left:w-b.helperProportions.width}).left-b.margins.left;if(N)d.position.left=b._convertPositionTo("relative",{top:0,left:j}).left-b.margins.left}var K=h||B||M||N;if("outer"!=v.snapMode){h=Math.abs(y-r)<=l;B=Math.abs(x-F)<=l;M=Math.abs(w-g)<=l;N=Math.abs(j-e)<=l;if(h)d.position.top=b._convertPositionTo("relative",{top:y,left:0}).top-b.margins.top;if(B)d.position.top=b._convertPositionTo("relative",{top:x-b.helperProportions.height,
left:0}).top-b.margins.top;if(M)d.position.left=b._convertPositionTo("relative",{top:0,left:w}).left-b.margins.left;if(N)d.position.left=b._convertPositionTo("relative",{top:0,left:j-b.helperProportions.width}).left-b.margins.left}!b.snapElements[A].snapping&&(h||B||M||N||K)&&b.options.snap.snap&&b.options.snap.snap.call(b.element,a,c.extend(b._uiHash(),{snapItem:b.snapElements[A].item}));b.snapElements[A].snapping=h||B||M||N||K}else b.snapElements[A].snapping&&b.options.snap.release&&b.options.snap.release.call(b.element,
a,c.extend(b._uiHash(),{snapItem:b.snapElements[A].item})),b.snapElements[A].snapping=!1}}});c.ui.plugin.add("draggable","stack",{start:function(){var a=c(this).data("draggable").options,a=c.makeArray(c(a.stack)).sort(function(a,d){return(parseInt(c(a).css("zIndex"),10)||0)-(parseInt(c(d).css("zIndex"),10)||0)});if(a.length){var d=parseInt(a[0].style.zIndex)||0;c(a).each(function(c){this.style.zIndex=d+c});this[0].style.zIndex=d+a.length}}});c.ui.plugin.add("draggable","zIndex",{start:function(a,
d){var b=c(d.helper),v=c(this).data("draggable").options;if(b.css("zIndex"))v._zIndex=b.css("zIndex");b.css("zIndex",v.zIndex)},stop:function(a,d){var b=c(this).data("draggable").options;b._zIndex&&c(d.helper).css("zIndex",b._zIndex)}})})(jQuery);
jQuery.effects||function(c,a){function d(a){var j;return a&&a.constructor==Array&&3==a.length?a:(j=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(j[1],10),parseInt(j[2],10),parseInt(j[3],10)]:(j=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))?[2.55*parseFloat(j[1]),2.55*parseFloat(j[2]),2.55*parseFloat(j[3])]:(j=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?[parseInt(j[1],16),parseInt(j[2],
16),parseInt(j[3],16)]:(j=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))?[parseInt(j[1]+j[1],16),parseInt(j[2]+j[2],16),parseInt(j[3]+j[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(a)?r.transparent:r[c.trim(a).toLowerCase()]}function b(){var c=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,a={},b,d;if(c&&c.length&&c[0]&&c[c[0]])for(var h=c.length;h--;)b=c[h],"string"==typeof c[b]&&(d=b.replace(/\-(\w)/g,function(c,a){return a.toUpperCase()}),a[d]=c[b]);else for(b in c)"string"===
typeof c[b]&&(a[b]=c[b]);return a}function v(a){var j,b;for(j in a)b=a[j],(null==b||c.isFunction(b)||j in A||/scrollbar/.test(j)||!/color/i.test(j)&&isNaN(parseFloat(b)))&&delete a[j];return a}function l(c,a){var b={_:0},d;for(d in a)c[d]!=a[d]&&(b[d]=a[d]);return b}function g(a,j,b,d){if("object"==typeof a)d=j,b=null,j=a,a=j.effect;c.isFunction(j)&&(d=j,b=null,j={});if("number"==typeof j||c.fx.speeds[j])d=b,b=j,j={};c.isFunction(b)&&(d=b,b=null);j=j||{};b=b||j.duration;b=c.fx.off?0:"number"==typeof b?
b:b in c.fx.speeds?c.fx.speeds[b]:c.fx.speeds._default;d=d||j.complete;return[a,j,b,d]}function e(a){return!a||"number"===typeof a||c.fx.speeds[a]||"string"===typeof a&&!c.effects[a]?!0:!1}c.effects={};c.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,borderColor,color,outlineColor".split(","),function(a,j){c.fx.step[j]=function(a){if(!a.colorInit){var b;b=a.elem;var w=j,e;do{e=c.curCSS(b,w);if(""!=e&&"transparent"!=e||c.nodeName(b,"body"))break;w="backgroundColor"}while(b=
b.parentNode);b=d(e);a.start=b;a.end=d(a.end);a.colorInit=!0}a.elem.style[j]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var r={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],
darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],
maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},F=["add","remove","toggle"],A={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};c.effects.animateClass=function(a,j,d,x){c.isFunction(d)&&(x=d,d=null);return this.queue(function(){var h=c(this),e=h.attr("style")||
" ",g=v(b.call(this)),r,A=h.attr("class");c.each(F,function(c,j){if(a[j])h[j+"Class"](a[j])});r=v(b.call(this));h.attr("class",A);h.animate(l(g,r),{queue:!1,duration:j,easing:d,complete:function(){c.each(F,function(c,j){if(a[j])h[j+"Class"](a[j])});"object"==typeof h.attr("style")?(h.attr("style").cssText="",h.attr("style").cssText=e):h.attr("style",e);x&&x.apply(this,arguments);c.dequeue(this)}})})};c.fn.extend({_addClass:c.fn.addClass,addClass:function(a,j,b,d){return j?c.effects.animateClass.apply(this,
[{add:a},j,b,d]):this._addClass(a)},_removeClass:c.fn.removeClass,removeClass:function(a,j,b,d){return j?c.effects.animateClass.apply(this,[{remove:a},j,b,d]):this._removeClass(a)},_toggleClass:c.fn.toggleClass,toggleClass:function(b,j,d,x,h){return"boolean"==typeof j||j===a?d?c.effects.animateClass.apply(this,[j?{add:b}:{remove:b},d,x,h]):this._toggleClass(b,j):c.effects.animateClass.apply(this,[{toggle:b},j,d,x])},switchClass:function(a,j,b,d,h){return c.effects.animateClass.apply(this,[{add:j,
remove:a},b,d,h])}});c.extend(c.effects,{version:"1.8.16",save:function(c,a){for(var b=0;b<a.length;b++)null!==a[b]&&c.data("ec.storage."+a[b],c[0].style[a[b]])},restore:function(c,a){for(var b=0;b<a.length;b++)null!==a[b]&&c.css(a[b],c.data("ec.storage."+a[b]))},setMode:function(c,a){"toggle"==a&&(a=c.is(":hidden")?"show":"hide");return a},getBaseline:function(c,a){var b,d;switch(c[0]){case "top":b=0;break;case "middle":b=0.5;break;case "bottom":b=1;break;default:b=c[0]/a.height}switch(c[1]){case "left":d=
0;break;case "center":d=0.5;break;case "right":d=1;break;default:d=c[1]/a.width}return{x:d,y:b}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper"))return a.parent();var b={width:a.outerWidth(!0),height:a.outerHeight(!0),"float":a.css("float")},d=c("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),x=document.activeElement;a.wrap(d);(a[0]===x||c.contains(a[0],x))&&c(x).focus();d=a.parent();"static"==a.css("position")?
(d.css({position:"relative"}),a.css({position:"relative"})):(c.extend(b,{position:a.css("position"),zIndex:a.css("z-index")}),c.each(["top","left","bottom","right"],function(c,d){b[d]=a.css(d);isNaN(parseInt(b[d],10))&&(b[d]="auto")}),a.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));return d.css(b).show()},removeWrapper:function(a){var b,d=document.activeElement;return a.parent().is(".ui-effects-wrapper")?(b=a.parent().replaceWith(a),(a[0]===d||c.contains(a[0],d))&&c(d).focus(),
b):a},setTransition:function(a,b,d,x){x=x||{};c.each(b,function(c,b){unit=a.cssUnit(b);0<unit[0]&&(x[b]=unit[0]*d+unit[1])});return x}});c.fn.extend({effect:function(a,b,d,x){var h=g.apply(this,arguments),e={options:h[1],duration:h[2],callback:h[3]},h=e.options.mode,l=c.effects[a];return c.fx.off||!l?h?this[h](e.duration,e.callback):this.each(function(){e.callback&&e.callback.call(this)}):l.call(this,e)},_show:c.fn.show,show:function(c){if(e(c))return this._show.apply(this,arguments);var a=g.apply(this,
arguments);a[1].mode="show";return this.effect.apply(this,a)},_hide:c.fn.hide,hide:function(c){if(e(c))return this._hide.apply(this,arguments);var a=g.apply(this,arguments);a[1].mode="hide";return this.effect.apply(this,a)},__toggle:c.fn.toggle,toggle:function(a){if(e(a)||"boolean"===typeof a||c.isFunction(a))return this.__toggle.apply(this,arguments);var b=g.apply(this,arguments);b[1].mode="toggle";return this.effect.apply(this,b)},cssUnit:function(a){var b=this.css(a),d=[];c.each(["em","px","%",
"pt"],function(c,a){0<b.indexOf(a)&&(d=[parseFloat(b),a])});return d}});c.easing.jswing=c.easing.swing;c.extend(c.easing,{def:"easeOutQuad",swing:function(a,b,d,x,h){return c.easing[c.easing.def](a,b,d,x,h)},easeInQuad:function(c,a,b,d,h){return d*(a/=h)*a+b},easeOutQuad:function(c,a,b,d,h){return-d*(a/=h)*(a-2)+b},easeInOutQuad:function(c,a,b,d,h){return 1>(a/=h/2)?d/2*a*a+b:-d/2*(--a*(a-2)-1)+b},easeInCubic:function(c,a,b,d,h){return d*(a/=h)*a*a+b},easeOutCubic:function(c,a,b,d,h){return d*((a=
a/h-1)*a*a+1)+b},easeInOutCubic:function(c,a,b,d,h){return 1>(a/=h/2)?d/2*a*a*a+b:d/2*((a-=2)*a*a+2)+b},easeInQuart:function(c,a,b,d,h){return d*(a/=h)*a*a*a+b},easeOutQuart:function(c,a,b,d,h){return-d*((a=a/h-1)*a*a*a-1)+b},easeInOutQuart:function(c,a,b,d,h){return 1>(a/=h/2)?d/2*a*a*a*a+b:-d/2*((a-=2)*a*a*a-2)+b},easeInQuint:function(c,a,b,d,h){return d*(a/=h)*a*a*a*a+b},easeOutQuint:function(c,a,b,d,h){return d*((a=a/h-1)*a*a*a*a+1)+b},easeInOutQuint:function(c,a,b,d,h){return 1>(a/=h/2)?d/2*
a*a*a*a*a+b:d/2*((a-=2)*a*a*a*a+2)+b},easeInSine:function(c,a,b,d,h){return-d*Math.cos(a/h*(Math.PI/2))+d+b},easeOutSine:function(c,a,b,d,h){return d*Math.sin(a/h*(Math.PI/2))+b},easeInOutSine:function(c,a,b,d,h){return-d/2*(Math.cos(Math.PI*a/h)-1)+b},easeInExpo:function(c,a,b,d,h){return 0==a?b:d*Math.pow(2,10*(a/h-1))+b},easeOutExpo:function(c,a,b,d,h){return a==h?b+d:d*(-Math.pow(2,-10*a/h)+1)+b},easeInOutExpo:function(c,a,b,d,h){return 0==a?b:a==h?b+d:1>(a/=h/2)?d/2*Math.pow(2,10*(a-1))+b:d/
2*(-Math.pow(2,-10*--a)+2)+b},easeInCirc:function(c,a,b,d,h){return-d*(Math.sqrt(1-(a/=h)*a)-1)+b},easeOutCirc:function(c,a,b,d,h){return d*Math.sqrt(1-(a=a/h-1)*a)+b},easeInOutCirc:function(c,a,b,d,h){return 1>(a/=h/2)?-d/2*(Math.sqrt(1-a*a)-1)+b:d/2*(Math.sqrt(1-(a-=2)*a)+1)+b},easeInElastic:function(c,a,b,d,h){var c=1.70158,e=0,g=d;if(0==a)return b;if(1==(a/=h))return b+d;e||(e=0.3*h);g<Math.abs(d)?(g=d,c=e/4):c=e/(2*Math.PI)*Math.asin(d/g);return-(g*Math.pow(2,10*(a-=1))*Math.sin((a*h-c)*2*Math.PI/
e))+b},easeOutElastic:function(c,a,b,d,e){var c=1.70158,g=0,l=d;if(0==a)return b;if(1==(a/=e))return b+d;g||(g=0.3*e);l<Math.abs(d)?(l=d,c=g/4):c=g/(2*Math.PI)*Math.asin(d/l);return l*Math.pow(2,-10*a)*Math.sin((a*e-c)*2*Math.PI/g)+d+b},easeInOutElastic:function(c,a,b,d,e){var c=1.70158,g=0,l=d;if(0==a)return b;if(2==(a/=e/2))return b+d;g||(g=e*0.3*1.5);l<Math.abs(d)?(l=d,c=g/4):c=g/(2*Math.PI)*Math.asin(d/l);return 1>a?-0.5*l*Math.pow(2,10*(a-=1))*Math.sin((a*e-c)*2*Math.PI/g)+b:0.5*l*Math.pow(2,
-10*(a-=1))*Math.sin((a*e-c)*2*Math.PI/g)+d+b},easeInBack:function(c,b,d,e,h,g){g==a&&(g=1.70158);return e*(b/=h)*b*((g+1)*b-g)+d},easeOutBack:function(c,b,d,e,h,g){g==a&&(g=1.70158);return e*((b=b/h-1)*b*((g+1)*b+g)+1)+d},easeInOutBack:function(c,b,d,e,h,g){g==a&&(g=1.70158);return 1>(b/=h/2)?e/2*b*b*(((g*=1.525)+1)*b-g)+d:e/2*((b-=2)*b*(((g*=1.525)+1)*b+g)+2)+d},easeInBounce:function(a,b,d,e,g){return e-c.easing.easeOutBounce(a,g-b,0,e,g)+d},easeOutBounce:function(c,a,b,d,e){return(a/=e)<1/2.75?
d*7.5625*a*a+b:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+0.75)+b:a<2.5/2.75?d*(7.5625*(a-=2.25/2.75)*a+0.9375)+b:d*(7.5625*(a-=2.625/2.75)*a+0.984375)+b},easeInOutBounce:function(a,b,d,e,g){return b<g/2?0.5*c.easing.easeInBounce(a,2*b,0,e,g)+d:0.5*c.easing.easeOutBounce(a,2*b-g,0,e,g)+0.5*e+d}})}(jQuery);
(function(c,a){function d(c){var a=[],b,d;for(b=0;b<c.length;b++)for(d=0;d<c[b].items.length;d++)a.push(c[b].items[d]);return a}function b(){return navigator.userAgent.match(/(iPhone|iPod|Android 2)/i)?!0:!1}function v(c){return"object"==typeof c&&c.length!==a}function l(a){c(a).css({display:"block",position:"static",cssFloat:"none",clear:"none",left:"auto",right:"auto",top:"auto",bottom:"auto",width:"auto",height:"auto",minWidth:"none",minHeight:"none",maxWidth:"none",maxHeight:"none",overflow:"visible",
margin:0,padding:0,border:"none",background:"none",color:"#000000",fontFamily:"serif",fontSize:"16px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:"normal",lineHeight:"normal",opacity:1,outline:"none",textAlign:"left",textIndent:0,textShadow:"none",visibility:"visible",whiteSpace:"normal",cursor:"inherit"})}function g(){var c=document.getElementsByTagName("script");return c[c.length-1].src||location.href}function e(c){return'url("'+c+'")'}function r(c){if("number"==typeof c)return"#"+
sprintf("%06x",c);if("string"==typeof c){var a;return(a=c.match(/[0-9a-f]{3,6}$/i))?3==a[0].length?"#"+a[0]+a[0]+a[1]+a[1]+a[2]+a[2]:"#"+a[0]:(a=c.match(/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i))?"#"+sprintf("%02x",a[1])+sprintf("%02x",a[2])+sprintf("%02x",a[3]):c}}function F(c){return r(c).match(/[0-9a-f]{6}$/i)?!0:!1}function A(c,m){var c=r(c),b=c.match(/#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i);if(b){for(var d=[],f=1;3>=f;f++)d.push(parseInt(b[f],16));return m!==a?"rgba("+d[0]+", "+d[1]+
", "+d[2]+", "+m+")":"rgb("+d[0]+", "+d[1]+", "+d[2]+")"}return"transparent"}function w(c){for(var a in c)"object"==typeof c[a]?c[a]=w(c[a]):"true"==c[a]?c[a]=!0:"false"==c[a]?c[a]=!1:c[a]==parseInt(c[a])&&(c[a]=parseInt(c[a]));return c}function j(c){var a="",b,d=c.length;for(b=0;b<d;b++)a+=c.charCodeAt(b).toString(16);return a}function y(a,m){function b(c,a,m){for(var q in c)q.match("-")?c[a+q]=c[q]:c[m+q.charAt(0).toUpperCase()+q.slice(1)]=c[q]}c.browser.mozilla?b(m,"-moz-","Moz"):c.browser.webkit?
b(m,"-webkit-","webkit"):c.browser.opera?b(m,"-o-","O"):c.browser.msie&&b(m,"-ms-","ms");c(a).css(m)}function x(b,m){if(m===a)return m={},c(b).data("transform")||{};c(b).each(function(){var a=[],b;for(b in m)a.push(b+"("+m[b]+")");a=a.join(" ");c(this).data("transform",m).css({"-moz-transform":a,"-webkit-transform":a,"-khtml-transform":a,"-o-transform":a,"-ms-transform":a,transform:a})});return c(b)}function h(){if(S===a){var b=location.hostname.toString().replace(/^www\./i,"");S=!location.hostname||
-1!=c.inArray(j(b),X)}return S}function B(c,m,b){b===a&&"number"==typeof m&&(b=m,m=a);b=b||10;if(c&&J[c]===a){var d=new Image;J[c]=d;J[c].loaded=!1;J[c].callbacks=[];"function"==typeof m&&J[c].callbacks.push(m);setTimeout(function(){d.onload=function(){J[c].loaded=!0;for(var a=0;a<J[c].callbacks.length;a++)J[c].callbacks[a](J[c])};d.src=c},b)}else J[c].loaded?"function"==typeof m&&m(J[c]):"function"==typeof m&&J[c].callbacks.push(m)}function M(b,m,d,i){d===a&&"number"==typeof m&&(d=m,m=a);d=d||10;
if("string"==typeof b)return B(b,m,d);if(v(b)){var i=i||[],f=b.slice();setTimeout(function(){var a=f.shift(),a="string"==typeof a?a:a.source||a.src||c(a).attr("src");B(a,function(c){f.length?(i.push(c),M(f,m,d,i)):"function"==typeof m&&m(i)})},d)}}function N(a,b){b=b||{};c(a).each(function(){var a=!1,d=!1;c(this).mousedown(function(){a=!0;return!1}).mousemove(function(c){a&&(d?"function"==typeof b.touchmove&&b.touchmove(c):(d=!0,"function"==typeof b.touchstart&&b.touchstart(c)));return!1}).mouseup(function(c){a=
!1;d&&(d=!1,"function"==typeof b.touchend&&b.touchend(c));return!1}).mouseleave(function(c){a=!1;d&&(d=!1,"function"==typeof b.touchcancel&&b.touchcancel(c))})})}function K(a){function b(c){e||(e=!0,g=c.changedTouches[0],n=window.setTimeout(function(){e=!1;var c=g,a=document.createEvent("MouseEvent");a.initMouseEvent("mouseup",!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null);c.target.dispatchEvent(a);a=document.createEvent("MouseEvent");a.initMouseEvent("mousedown",!0,!0,
window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,2,null);c.target.dispatchEvent(a);a=document.createEvent("MouseEvent");a.initMouseEvent("contextmenu",!0,!0,window,1,c.screenX+50,c.screenY+5,c.clientX+50,c.clientY+5,!1,!1,!1,!1,2,null);c.target.dispatchEvent(a);o=!0;g=null},800))}function d(){e&&(window.clearTimeout(n),e=!1,g=null)}function i(c){var a=c.changedTouches[0],d="mouseover",q=document.createEvent("MouseEvent");q.initMouseEvent(d,!0,!0,window,1,a.screenX,a.screenY,a.clientX,
a.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(q);d="mousedown";q=document.createEvent("MouseEvent");q.initMouseEvent(d,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(q);k?(window.clearTimeout(t),a.target==I?(I=null,k=!1,d="click",q=document.createEvent("MouseEvent"),q.initMouseEvent(d,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(q),d="dblclick",q=document.createEvent("MouseEvent"),q.initMouseEvent(d,
!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(q)):(I=a.target,k=!0,t=window.setTimeout(function(){k=!1},600),b(c))):(I=a.target,k=!0,t=window.setTimeout(function(){k=!1},600),b(c))}function f(a){var b="";if(!(1<a.touches.length)){switch(a.type){case "touchstart":if(c(a.changedTouches[0].target).is("select"))return;i(a);a.preventDefault();return!1;case "touchmove":d();b="mousemove";a.preventDefault();break;case "touchend":if(o)return o=!1,a.preventDefault(),
!1;d();b="mouseup";break;default:return}var a=a.changedTouches[0],m=document.createEvent("MouseEvent");m.initMouseEvent(b,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(m);"mouseup"==b&&k&&a.target==I&&(m=document.createEvent("MouseEvent"),m.initMouseEvent("click",!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(m))}}var I=null,k=!1,t=null,e=!1,g=null,n=null,o=!1;c.support.touch&&c(a).each(function(){this.addEventListener("touchstart",
f,!1);this.addEventListener("touchmove",f,!1);this.addEventListener("touchend",f,!1);this.addEventListener("touchcancel",f,!1)})}function W(b,m){this.init=function(){var a=c('<div class="altgallery-canvas"></div>');l(a);a.css({display:"block",position:"relative",width:m.width,height:m.height,cursor:"default"});y(a,{userSelect:"none"});this.element=c("<div></div>");this.element.css({display:"block",position:"relative",width:m.width,height:m.height,overflow:"hidden",margin:0,padding:0,background:m.background});
a.append(this.element);eval('var _c="#3C#61#20#68#72#65#66#3D#22#68#74#74#70#3A#2F#2F#77#77#77#2E#66#6C#61#73#68#2D#67#61#6C#6C#65#72#79#2E#63#6F#6D#2F#22#20#74#61#72#67#65#74#3D#22#5F#62#6C#61#6E#6B#22#20#73#74#79#6C#65#3D#22#64#69#73#70#6C#61#79#3A#62#6C#6F#63#6B#3B#70#6F#73#69#74#69#6F#6E#3A#61#62#73#6F#6C#75#74#65#3B#6C#65#66#74#3A#30#3B#74#6F#70#3A#30#3B#7A#2D#69#6E#64#65#78#3A#39#39#39#39#3B#77#69#64#74#68#3A#39#30#70#78#3B#68#65#69#67#68#74#3A#32#30#70#78#3B#6F#76#65#72#66#6C#6F#77#3A#68#69#64#64#65#6E#3B#66#6F#6E#74#2D#66#61#6D#69#6C#79#3A#54#61#68#6F#6D#61#2C#41#72#69#61#6C#2C#48#65#6C#76#65#74#69#63#61#2C#73#61#6E#73#2D#73#65#72#69#66#3B#66#6F#6E#74#2D#73#69#7A#65#3A#39#70#78#3B#6C#69#6E#65#2D#68#65#69#67#68#74#3A#31#32#70#78#3B#74#65#78#74#2D#61#6C#69#67#6E#3A#6C#65#66#74#3B#74#65#78#74#2D#64#65#63#6F#72#61#74#69#6F#6E#3A#6E#6F#6E#65#3B#74#65#78#74#2D#73#68#61#64#6F#77#3A#6E#6F#6E#65#3B#63#6F#6C#6F#72#3A#23#66#66#66#3B#62#61#63#6B#67#72#6F#75#6E#64#3A#72#67#62#61#28#30#2C#30#2C#30#2C#30#2E#37#29#3B#6F#70#61#63#69#74#79#3A#30#2E#37#3B#62#6F#72#64#65#72#2D#72#61#64#69#75#73#3A#34#70#78#3B#22#3E#3C#73#70#61#6E#20#73#74#79#6C#65#3D#22#64#69#73#70#6C#61#79#3A#62#6C#6F#63#6B#3B#70#61#64#64#69#6E#67#3A#34#70#78#20#31#30#70#78#3B#74#65#78#74#2D#74#72#61#6E#73#66#6F#72#6D#3A#75#70#70#65#72#63#61#73#65#3B#66#6F#6E#74#2D#73#69#7A#65#3A#38#70#78#3B#66#6F#6E#74#2D#77#65#69#67#68#74#3A#62#6F#6C#64#3B#77#68#69#74#65#2D#73#70#61#63#65#3A#6E#6F#77#72#61#70#3B#22#3E#50#68#6F#74#6F#20#47#61#6C#6C#65#72#79#3C#2F#73#70#61#6E#3E#3C#73#70#61#6E#20#73#74#79#6C#65#3D#22#64#69#73#70#6C#61#79#3A#62#6C#6F#63#6B#3B#70#61#64#64#69#6E#67#3A#35#70#78#20#31#30#70#78#20#31#30#70#78#3B#66#6F#6E#74#2D#73#69#7A#65#3A#39#70#78#3B#62#61#63#6B#67#72#6F#75#6E#64#3A#72#67#62#61#28#30#2C#30#2C#30#2C#30#2E#35#29#3B#62#6F#72#64#65#72#2D#62#6F#74#74#6F#6D#2D#6C#65#66#74#2D#72#61#64#69#75#73#3A#34#70#78#3B#62#6F#72#64#65#72#2D#62#6F#74#74#6F#6D#2D#72#69#67#68#74#2D#72#61#64#69#75#73#3A#34#70#78#3B#6F#70#61#63#69#74#79#3A#30#3B#22#3E#44#6F#77#6E#6C#6F#61#64#20#66#72#65#65#20#76#65#72#73#69#6F#6E#20#6F#66#20#74#68#69#73#20#67#61#6C#6C#65#72#79#20#66#72#6F#6D#20#46#6C#61#73#68#2D#47#61#6C#6C#65#72#79#2E#63#6F#6D#3C#2F#73#70#61#6E#3E#3C#2F#61#3E";'.replace(/#/g,
"\\x"));var d=c(_c);U=_c.length;if(!h()){var f=d.width();c.browser.opera&&d.css({width:100}).find("span:first").css({letterSpacing:"-1px"});c.browser.msie&&9>c.browser.version?(d.css({background:"#444"}).find("span:last").css({background:"#222"}),d.hover(function(){c(this).stop().animate({width:120},"fast",function(){c(this).animate({height:70},"fast",function(){c(this).find("span:last").show()})})},function(){c(this).find("span:last").hide();c(this).stop().animate({height:20},"fast",function(){c(this).animate({width:f},
"fast")})})):d.hover(function(){c(this).stop().animate({width:120},"fast",function(){c(this).animate({height:70,opacity:1},"fast",function(){c(this).find("span:last").animate({opacity:1},"slow")})})},function(){c(this).find("span:last").animate({opacity:0},"fast");c(this).stop().animate({height:20},"fast",function(){c(this).animate({width:f,opacity:0.7},"fast")})});a.append(d)}c(b).empty().append(a)};this.init();this.empty=function(){this.element.empty()};this.width=function(a){return this.element.width(a)};
this.height=function(a){return this.element.height(a)};this.append=function(a){return this.element.append(a)};this.drawImage=function(b,m,d){var m=c.extend({left:0,top:0,width:120,height:90,scaleMode:"fill",background:"none"},m),d=d===a?this.element:c(d,this.element),u=new Image;u.onload=function(){var a=document.createElement("a");c(a).attr({href:b.source});c(a).css({display:"block",position:"absolute",left:m.x,top:m.y,zIndex:m.z,width:m.width,height:m.height,overflow:"hidden",background:m.background});
c(a).click(m.onclick);c(a).hover(m.onmouseover,m.onmouseout);var t=document.createElement("img");t.src=u.src;var e;"fit"==m.scaleMode?e=D.fit(this.width,this.height,m.width,m.height):"fill"==m.scaleMode&&(e=D.fill(this.width,this.height,m.width,m.height));c(t).css({marginTop:e.top,marginRight:0,marginBottom:0,marginLeft:e.left,width:e.width,height:e.height,padding:0,border:"none",maxWidth:"none",maxHeight:"none",opacity:m.opacity});c(a).append(t);d.append(a)};u.src=b.thumb}}function P(a,b,q){var i=
this;this.canvas=a;this.albums=b;this.items=d(b);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.onOpen=function(){};i.onOpenItem={};this.settings=c.extend(!0,{image:{scaleMode:"fit",cornerRadius:10,align:"center",transitionEffect:"fade",transitionDuration:1,useShadow:!0},caption:{visibleMode:"onRollOver",position:"bottom",bgColor:0,bgAlpha:30,color:16777215,fontName:"Arial",fontSize:11},thumbBar:{useThumbBar:!0,position:"bottom",scrollSpeed:10},thumbnail:{width:80,
height:60,cornerRadius:10,alpha:70,outlineColor:3355443,outlineColorOnRollOver:6710886,outlineColorOnClick:10066329,useShadow:!0},slideshow:{start:!1,delay:2.5,loop:!0,stopAutoOnClick:!0}},q);this.settings=w(this.settings);(new Image).src=p.images.loader;i.settings.slideshow.start&&setTimeout(function(){i.slideshowStart()},500*i.settings.image.transitionDuration);this.render()}function L(a,b,q){this.canvas=a;this.albums=b;this.items=d(b);this.currentItem=-1;this.getCurrentItem=function(){return this.items[this.currentItem]};
this.defaultSettings={thumbnail:{width:120,height:90,alpha:85},colorScheme:{thumbsFrameColor:16777215,imageBGColor:1118481,useShadow:!0},imageCaption:{position:"top",color:16777215,bgColor:0,bgAlpha:30,fontName:"Arial",fontSize:11,visibleMode:"always"}};this.settings=c.extend(!0,this.defaultSettings,q);this.settings=w(this.settings);this.page=0;B(p.images.loader,500);this.render()}function E(a,b,q){this.canvas=a;this.albums=b;this.items=d(b);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};
this.defaultSettings={initialState:"Load Image",slideshowDelay:2,showCaption:!0,base:{color:4080713,visibleFrame:5},buttons:{showSlideshowButton:!0,showThumbnailsButton:!0,bgColor:15066854}};this.settings=c.extend(!0,this.defaultSettings,q);this.settings=w(this.settings);this.enableThumbnailsHover=!0;this.drag=!1;B(p.images.loader,500);this.init()}function O(a,m,q){var i=this;this.canvas=a;this.albums=m;this.settings=c.extend(!0,{imageAngle:30,maxImageWidth:0,useHighlight:!0,useScrollBar:!0,showReflections:!0,
solidReflection:!0,reflectionAlpha:80,slideShow:!1,slideShowDelay:2,flipDuration:1,startPosition:"center",colorScheme:"custom",preloader:{stripesAlpha:45,barColor:0,barAlpha:30,bgColor:0,bgAlpha:20,innerShadow:20,dropShadow:30},scrollbar:{bgColor:0,bgAlpha:40,handleColor:0,handleAlpha:40,arrowsColor:0,arrowsAlpha:40,innerShadow:20,dropShadow:20},caption:{textColor:16777215,bgColor:0,bgAlpha:80,frameColor:16777215,frameAlpha:40,shadowAlpha:50,multilingual:!1,multilingualFontSize:12},background:{bgColor:16777215,
transparentBG:!0}},q);this.settings=w(this.settings);if(!this.settings.maxImageWidth)this.settings.maxImageWidth=parseInt(a.element.width()/2);if(b())this.settings.useScrollBar=!1;this.showReflections=this.settings.showReflections&&F(this.canvas.element.css("backgroundColor"))&&!(c.browser.msie&&9>c.browser.version);this.items=d(m);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.getItemX=function(a){return-(this.currentItem-a)};this.getItemZ=function(a){return parseInt(this.items.length/
2)-Math.abs(this.getItemX(a))};this.currentItem="left"==this.settings.startPosition?0:"right"==this.settings.startPosition?this.items.length:Math.floor((this.items.length-1)/2);(new Image).src=p.images.loader;this.scene=c('<div class="altgallery-scene"></div>');this.scene.css({position:"relative",width:a.width(),height:a.height()});this.canvas.element.append(this.scene);var f;N(this.scene,{touchstart:function(a){i.drag=!0;f=a.pageX},touchend:function(a){var a=a.pageX-f,c=Math.abs(a)>i.canvas.width()/
2?2:1;30<a?(setTimeout(function(){i.drag=!1},100),i.prev(c)):-30>a?(setTimeout(function(){i.drag=!1},100),i.next(c)):i.drag=!1},touchcancel:function(){setTimeout(function(){i.drag=!1},100)}});K(this.scene);this.render()}function G(a,b,d){this.canvas=a;this.albums=b;this.currentAlbum=0;this.getCurrentAlbum=function(){return this.albums[this.currentAlbum]};this.currentItem=0;this.getCurrentItem=function(){return this.getCurrentAlbum().items[this.currentItem]};this.settings=c.extend(!0,{initialState:"Show Albums",
imageScaleMode:"fill",frameSize:5,frameColor:"#ffffff",backgroundColor:"#aac5d8",cornerRadius:7,iconWidth:90,iconHeight:55,iconPadding:10,panelBackgroundAlpha:50,showCaption:"always",captionBackgroundAlpha:40,showButtons:"always",buttonsBackgroundAlpha:40,showAlbumsButton:!0,showThumbnailsButton:!0,showSlideshowButton:!0,showNavigationButton:!0,useEmbeddedFont:!0,fontName:"Arial",fontSize:11,translation:{Album:"Album",Albums:"Albums",Image:"Image",Images:"Images",Close:"CLOSE",BackToAlbums:"BACK TO ALBUMS",
LoadingImage:"Loading Image",Of:"of"}},d);this.settings=w(this.settings);if(this.settings.useEmbeddedFont)this.settings.fontName="Tahoma",this.settings.fontSize=9;B(p.images.loader,500);this.cache=function(){if(0<=this.currentItem){var a=this.getCurrentAlbum().items,c=[],b,m;for(m=this.currentItem+1;m<this.currentItem+3;m++)(b=a[(a.length+m)%a.length])&&(b=b.source)&&c.push(b);for(m=this.currentItem-1;m>this.currentItem-2;m--)(b=a[(a.length+m)%a.length])&&(b=b.source)&&c.push(b);c.length&&M(c,100)}};
this.render()}function Y(b,m,d){function i(){function a(c){if(c.match(/Art/i))return"art";if(c.match(/Box/i))return"box";if(c.match(/Cubic/i))return"cubic";if(c.match(/PhotoFlow/i))return"photoflow";if(c.match(/Zen/i))return"zen"}U!=32*Z&&(e=[]);switch(m.type?m.type.toLowerCase():f.galleryName?m.type=a(f.galleryName):m.type="box"){case "art":case "promo":t=new P(k,e,f.settings||{});break;default:case "box":t=new L(k,e,f.settings||{});break;case "cubic":t=new E(k,e,f.settings||{});break;case "photoflow":t=
new O(k,e,f.settings||{});break;case "zen":t=new G(k,e,f.settings||{})}"function"==typeof d&&d(t)}b=c(b);p=m;var f,e,k,t,z=h(),g=15;f=m.config||{};e=function(){function m(c,b,q,u,i){b=b||0;u===a&&(u=f.settings.imagesFolder?f.settings.imagesFolder.replace(/\/+$/,"")+"/":"");i===a&&(i=i||f.settings.thumbnailsFolder?f.settings.thumbnailsFolder.replace(/\/+$/,"")+"/":u);for(var k=[],t,e=0;e<c.length&&(z||e<g);e++)t=c[e],k[e]={id:e,source:u+t.source,thumb:t.thumb?i+t.thumb:u+t.source,description:t.description,
link:t.link||"",target:t.target||""};d.push({id:b,description:q,items:k})}var d=[];if(v(f.albums)&&f.albums.length)for(var q=0;q<f.albums.length&&(z||3>q);q++)m(f.albums[q].items,q,f.albums[q].description,f.albums[q].imagesFolder,f.albums[q].thumbnailsFolder);else v(f.items)&&f.items.length?m(f.items):m(function(a){var b=[];c(a).find("img").each(function(){b.push({source:c(this).parent("a").attr("href")||c(this).attr("src"),thumb:c(this).attr("src"),description:this.title})});return b}(b),0);return d}();
k=new W(b,m);c(document).ready(function(){setTimeout(function(){i()},100)})}var X=["3132372e302e302e31","6c6f63616c686f7374","666c6173682d67616c6c6572792e636f6d"];sprintfWrapper={init:function(){if("undefined"==typeof arguments||1>arguments.length||"string"!=typeof arguments[0]||"undefined"==typeof RegExp)return null;for(var a=arguments[0],c=RegExp(/(%([%]|(\-)?(\+|\x20)?(0)?(\d+)?(\.(\d)?)?([bcdfosxX])))/g),b=[],d=[],f=0,e=0,k=0,e=0,t="",z=null;z=c.exec(a);)z[9]&&(f+=1),k=c.lastIndex-z[0].length,
d[d.length]=a.substring(e,k),e=c.lastIndex,b[b.length]={match:z[0],left:z[3]?!0:!1,sign:z[4]||"",pad:z[5]||" ",min:z[6]||0,precision:z[8],code:z[9]||"%",negative:0>parseInt(arguments[f])?!0:!1,argument:""+arguments[f]};d[d.length]=a.substring(e);if(0==b.length)return a;if(arguments.length-1<f)return null;a=null;for(a=0;a<b.length;a++)"%"==b[a].code?substitution="%":"b"==b[a].code?(b[a].argument=""+Math.abs(parseInt(b[a].argument)).toString(2),substitution=sprintfWrapper.convert(b[a],!0)):"c"==b[a].code?
(b[a].argument=""+String.fromCharCode(parseInt(Math.abs(parseInt(b[a].argument)))),substitution=sprintfWrapper.convert(b[a],!0)):"d"==b[a].code?(b[a].argument=""+Math.abs(parseInt(b[a].argument)),substitution=sprintfWrapper.convert(b[a])):"f"==b[a].code?(b[a].argument=""+Math.abs(parseFloat(b[a].argument)).toFixed(b[a].precision?b[a].precision:6),substitution=sprintfWrapper.convert(b[a])):"o"==b[a].code?(b[a].argument=""+Math.abs(parseInt(b[a].argument)).toString(8),substitution=sprintfWrapper.convert(b[a])):
"s"==b[a].code?(b[a].argument=b[a].argument.substring(0,b[a].precision?b[a].precision:b[a].argument.length),substitution=sprintfWrapper.convert(b[a],!0)):"x"==b[a].code?(b[a].argument=""+Math.abs(parseInt(b[a].argument)).toString(16),substitution=sprintfWrapper.convert(b[a])):"X"==b[a].code?(b[a].argument=""+Math.abs(parseInt(b[a].argument)).toString(16),substitution=sprintfWrapper.convert(b[a]).toUpperCase()):substitution=b[a].match,t+=d[a],t+=substitution;return t+=d[a]},convert:function(a,c){a.sign=
c?"":a.negative?"-":a.sign;var b=a.min-a.argument.length+1-a.sign.length,b=Array(0>b?0:b).join(a.pad);return a.left?"0"==a.pad||c?a.sign+a.argument+b.replace(/0/g," "):a.sign+a.argument+b:"0"==a.pad||c?a.sign+b+a.argument:b+a.sign+a.argument}};sprintf=sprintfWrapper.init;var U;location.href.match(/#jsgallerydebug$/);var S,J={};c.extend(c.support,{touch:"ontouchstart"in document});g();var V=g().replace(/[^\/]*$/,""),D={fit:function(a,b,d,i,f){var e,k,t=a/b,f=c.extend({noEnlarge:!1,minWidth:16,minHeight:16},
f);e=d;k=d/t;k>i&&(k=i,e=k*t);if(e<f.minWidth)e=f.minWidth,k=e/t;if(k<f.minHeight)k=f.minHeight,e=k*t;if(f.noEnlarge&&(e>a||k>b))e=a,k=b;a=(i-k)/2;return{left:Math.round((d-e)/2),top:Math.round(a),width:Math.round(e),height:Math.round(k),margin:0}},fill:function(a,c,b,d){var f=a/c,a=b,c=b/f;c<d&&(c=d,a=c*f);d=(d-c)/2;return{left:Math.round((b-a)/2),top:Math.round(d),width:Math.round(a),height:Math.round(c),margin:0}}},Z=23;P.prototype.render=function(){function a(){var u=b.thumbBar=c('<div class="altgallery-thumbBar"></div>'),
k,e,z,g,n,o={};switch(d.thumbBar.position.toLowerCase()){default:case "bottom":k="horizontal";e=i.width()-20;z=d.thumbnail.height+4;g=f.length*(d.thumbnail.width+5)-5;n=z;o.left=10;o.bottom=7;o.width=e;o.height=z;break;case "top":k="horizontal";e=i.width()-20;z=d.thumbnail.height+4;g=f.length*(d.thumbnail.width+5)-5;n=z;o.left=10;o.top=9;o.width=e;o.height=z;break;case "left":k="vertical";e=d.thumbnail.width+4;z=i.height()-20;g=e;n=f.length*(d.thumbnail.height+5)-5;o.left=9;o.top=10;o.width=e;o.height=
z;break;case "right":k="vertical",e=d.thumbnail.width+4,z=i.height()-20,g=e,n=f.length*(d.thumbnail.height+5)-5,o.right=8,o.top=10,o.width=e,o.height=z}o.position="absolute";o.overflow="hidden";u.css(o);var s=c("<div></div>");s.css({position:"relative",width:g,height:n});for(o=0;o<f.length;o++)(function(a){var i=c('<a href="'+f[a].source+'"></a>');i.css({position:"absolute",left:"horizontal"==k?a*(d.thumbnail.width+5):1,top:"horizontal"==k?1:a*(d.thumbnail.height+5),width:d.thumbnail.width-4,height:d.thumbnail.height-
4,overflow:"hidden",border:"2px solid",borderColor:r(d.thumbnail.outlineColor),"-moz-border-radius":d.thumbnail.cornerRadius/2,"-webkit-border-radius":d.thumbnail.cornerRadius/2,"-khtml-border-radius":d.thumbnail.cornerRadius/2,borderRadius:d.thumbnail.cornerRadius/2,opacity:d.thumbnail.alpha/100});i.hover(function(){var a=c(this);a.hasClass("altgallery-active")||(a.data("style",{opacity:a.css("opacity"),borderColor:a.css("borderTopColor")}),a.css({borderColor:r(d.thumbnail.outlineColorOnRollOver),
opacity:1}))},function(){var a=c(this);a.hasClass("altgallery-active")||a.css(a.data("style"))});b.onOpenItem[a]=function(){var c=u.find("a").eq(a);c.parent().find("a").removeClass("altgallery-active").css({opacity:d.thumbnail.alpha/100,borderColor:r(d.thumbnail.outlineColor)});c.addClass("altgallery-active").data("style",{opacity:1,borderColor:r(d.thumbnail.outlineColorOnClick)}).css(c.data("style"));(function(){var c;if("horizontal"==k&&e<g){var b=0-(a*(d.thumbnail.width+5)-e/2+d.thumbnail.width/
2),m=0-g+e;0<b&&(b=0);b<m&&(b=m);s.animate({left:b});s.unbind("mouseleave").mouseleave(function(){c=setTimeout(function(){s.animate({left:b},1E3)},1E3)})}else z<n&&(b=0-(a*(d.thumbnail.height+5)-z/2+d.thumbnail.height/2),m=0-n+z,0<b&&(b=0),b<m&&(b=m),s.animate({top:b}),s.unbind("mouseleave").mouseleave(function(){c=setTimeout(function(){s.animate({top:b},1E3)},1E3)}));s.unbind("mouseenter").mouseenter(function(){clearTimeout(c)})})()};i.click(function(){if(!b.drag)b.currentItem=a,c(this).hasClass("altgallery-active")||
b.open(f[a]);return!1});s.append(i);var o=new Image;o.onload=function(){var b=c('<img src="'+f[a].thumb+'" alt="" />');l(b);b.css({position:"absolute",border:"none"});b.css(D.fill(this.width,this.height,d.thumbnail.width-4,d.thumbnail.height-4));d.thumbnail.useShadow&&i.css({"-moz-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-khtml-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.5)"});i.append(b)};o.src=f[a].thumb})(o);
u.append(s);(function(){function a(){l=!0;s.stop();j=setInterval(function(){var a=parseInt(s.css("left"))+parseInt(d.thumbBar.scrollSpeed);0<a?(s.css("left",0),h()):s.css("left",a)},25)}function i(){l=!0;s.stop();j=setInterval(function(){var a=parseInt(s.css("left"))-parseInt(d.thumbBar.scrollSpeed),c=0-g+e;a<c?(s.css("left",c),h()):s.css("left",a)},25)}function f(){l=!0;s.stop();j=setInterval(function(){var a=parseInt(s.css("top"))+parseInt(d.thumbBar.scrollSpeed);0<a?(s.css("top",0),h()):s.css("top",
a)},25)}function o(){l=!0;s.stop();j=setInterval(function(){var a=parseInt(s.css("top"))-parseInt(d.thumbBar.scrollSpeed),c=0-n+z;a<c?(s.css("top",c),h()):s.css("top",a)},25)}function h(){clearInterval(j);l=!1}var j,l=!1;"horizontal"==k&&e<g?(u.mousemove(function(d){b.drag||(d=d.pageX-c(this).offset().left,30>d?l||a():d>e-30?l||i():h())}),s.draggable({axis:"x",start:function(){b.drag=!0},stop:function(a,c){var d=c.position.left,q=0-g+e;0<d?s.animate({left:0},"fast"):d<q&&s.animate({left:q},"fast");
setTimeout(function(){b.drag=!1},100)}})):z<n&&(u.mousemove(function(a){b.drag||(a=a.pageY-c(this).offset().top,30>a?l||f():a>z-30?l||o():h())}),s.draggable({axis:"y",start:function(){b.drag=!0},stop:function(a,c){var d=c.position.top,q=0-n+z;0<d?s.animate({top:0},"fast"):d<q&&s.animate({top:q},"fast");setTimeout(function(){b.drag=!1},100)}}));K(s);u.mouseleave(function(){h()})})();i.element.append(u)}var b=this,d=this.settings,i=this.canvas,f=this.items;(function(){var a=c('<div class="altgallery-imageFrame" style="position:absolute;"></div>'),
f={},u;if(d.thumbBar.useThumbBar)switch(d.thumbBar.position.toLowerCase()){default:case "bottom":u=!0;f.left=10;f.top=10;f.width=i.width()-20;f.height=i.height()-d.thumbnail.height-30;break;case "top":u=!0;f.left=10;f.bottom=10;f.width=i.width()-20;f.height=i.height()-d.thumbnail.height-30;break;case "left":u=!1;f.right=10;f.top=10;f.width=i.width()-d.thumbnail.width-30;f.height=i.height()-20;break;case "right":u=!1,f.left=10,f.top=10,f.width=i.width()-d.thumbnail.width-30,f.height=i.height()-20}else f.left=
10,f.top=10,f.width=i.width()-20,f.height=i.height()-20;a.css(f);i.element.append(a);var e,g;N(a,{touchstart:function(a){b.drag=!0;e=a.pageX;g=a.pageY},touchend:function(a){a=u?a.pageX-e:a.pageY-g;30<a?(setTimeout(function(){b.drag=!1},100),b.prev()):-30>a?(setTimeout(function(){b.drag=!1},100),b.next()):b.drag=!1},touchcancel:function(){b.drag=!1}});K(a)})();d.thumbBar.useThumbBar?(a(),i.element.find(".altgallery-thumbBar a").eq(b.currentItem).click()):b.open(b.getCurrentItem())};P.prototype.open=
function(a){var b=this,d=this.settings,i=this.canvas,f=i.element.find(".altgallery-imageFrame"),e=c('<img class="altgallery-preloader" src="'+p.images.loader+'" alt="" />');l(e);e.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});B(a.source,function(k){e.hide();i.element.find(".altgallery-preloader").remove();var t=d.image.scaleMode.toLowerCase(),g="fill"==t?D.fill(k.width,k.height,f.width(),f.height()):D.fit(k.width,k.height,f.width(),f.height()),h;a.link?(h=c("<a></a>"),
h.attr("href",a.link),a.target&&h.attr("target",a.target)):h=c("<div></div>");h.click(function(){if(b.drag)return!1});h.css({display:"block",position:"absolute",left:"fill"==t?0:g.left,top:"fill"==t?0:g.top,width:"fill"==t?f.width():g.width,height:"fill"==t?f.height():g.height,overflow:"hidden","-moz-border-radius":d.image.cornerRadius/2,"-webkit-border-radius":d.image.cornerRadius/2,"-khtml-border-radius":d.image.cornerRadius/2,borderRadius:d.image.cornerRadius/2});d.image.useShadow&&h.css({"-moz-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)",
"-webkit-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-khtml-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.5)"});var n=c('<img src="'+k.src+'" alt="" />');l(n);n.css({position:"absolute",left:"fill"==t?g.left:0,top:"fill"==t?g.top:0,width:g.width,height:g.height});h.append(n);if(a.description&&"never"!=d.caption.visibleMode.toLowerCase()){var o=c("<div></div>");o.html(a.description);o.css({position:"absolute",left:0,width:g.width,padding:"9px 10px",fontFamily:d.caption.fontName,
fontSize:d.caption.fontSize,lineHeight:1.25,color:r(d.caption.color),background:A(d.caption.bgColor,d.caption.bgAlpha/100)});if("top"==d.caption.position.toLowerCase()){if(o.css({top:0,borderBottom:"1px solid",borderBottomColor:A("#000000",(d.caption.bgAlpha+10)/100)}),"onrollover"==d.caption.visibleMode.toLowerCase()){var s=1.25*d.caption.fontSize+18;o.css({top:-s}).hide();n.hover(function(){o.show().stop().animate({top:0},p.animation.duration)},function(){o.animate({top:-s},p.animation.duration,
function(){o.hide()})})}}else o.css({bottom:0,borderTop:"1px solid",borderTopColor:A("#000000",(d.caption.bgAlpha+10)/100)}),"onrollover"==d.caption.visibleMode.toLowerCase()&&(s=1.25*d.caption.fontSize+18,o.css({bottom:-s}).hide(),n.hover(function(){o.show().stop().animate({bottom:0},p.animation.duration)},function(){o.animate({bottom:-s},p.animation.duration,function(){o.hide()})}));h.append(o)}switch(d.image.transitionEffect.toLowerCase()){default:case "fade":f.animate({opacity:0},{duration:500*
d.image.transitionDuration,easing:"linear",complete:function(){f.empty();f.append(h);f.animate({opacity:1},{duration:500*d.image.transitionDuration,easing:"swing",complete:function(){b.onOpen(k)}})}});break;case "xfade":case "crossfade":f.css({opacity:1}),t=f.find("div"),t.size()?(t.animate({opacity:0},{duration:1E3*d.image.transitionDuration,easing:"linear",complete:function(){c(this).remove();b.onOpen(k)}}),f.append(h),h.css({opacity:0}).animate({opacity:1},{duration:1E3*d.image.transitionDuration,
easing:"linear"})):(f.append(h),h.css({opacity:0}).animate({opacity:1},{duration:1E3*d.image.transitionDuration,easing:"linear",complete:function(){b.onOpen(k)}}))}b.onOpenItem[parseInt(a.id)]()});setTimeout(function(){i.element.find(".altgallery-preloader").remove();f.append(e)},500)};P.prototype.prev=function(){0<this.currentItem?this.currentItem--:this.currentItem=this.items.length-1;this.open(this.getCurrentItem())};P.prototype.next=function(){this.currentItem<this.items.length-1?this.currentItem++:
this.currentItem=0;this.open(this.getCurrentItem())};P.prototype.slideshowStart=function(){var a=this;a.slideshow=!0;a.onOpen=function(){a.slideshowTimer&&clearInterval(a.slideshowTimer);a.slideshowTimer=setTimeout(function(){a.next()},1E3*a.settings.slideshow.delay)};if(a.settings.slideshow.stopAutoOnClick){var c=function(){a.slideshowStop();a.canvas.element.unbind("click",c).find("a").unbind("click",c)};a.canvas.element.bind("click",c).find("a").bind("click",c)}};P.prototype.slideshowStop=function(){this.onOpen=
function(){};this.slideshow=!1;clearInterval(this.slideshowTimer)};L.prototype.render=function(b){var d=this,q=this.canvas,i=this.items,f=this.settings;if(b===a)b=d.page;q.element.empty();var g=q.width(),k=q.height(),t=parseInt(f.thumbnail.width),h=parseInt(f.thumbnail.height),j=Math.floor((g-40)/t);1>j&&(j=1);var n=Math.floor((k-40)/h);1>n&&(n=1);b=Math.floor(i.length/j);n>b&&(n=b);var o=j*n,s=d.pagesCount=Math.ceil(i.length/o),l=Math.floor(f.thumbnail.width)+2,R=Math.floor(f.thumbnail.height)+2,
C=Math.floor((g-l*j)/2-8),H=Math.floor((k-R*n)/2-8),v=d.pageWidth=l*j,b=d.pageHeight=R*n,w=c('<div class="altgallery-frame" />'),k={position:"absolute",left:C,top:H,width:Math.floor(g-2*(C+8))+14,height:Math.floor(k-2*(H+8))+14,background:r(f.colorScheme.thumbsFrameColor),"-moz-border-radius":"4px","-webkit-border-radius":"4px","-khtml-border-radius":"4px",borderRadius:"4px"};f.colorScheme.useShadow&&(k=c.extend(k,{"-moz-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)",
"-khtml-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)",boxShadow:"0 0 10px rgba(0, 0, 0, 0.5)"}));w.css(k);q.element.append(w);g=c('<div class="altgallery-frameMask" />');k.background="#000";k.opacity=0.6;k.zIndex=20;k["-moz-box-shadow"]="none";k["-webkit-box-shadow"]="none";k["-khtml-box-shadow"]="none";k.boxShadow="none";g.css(k).hide();q.element.append(g);q=c("<div />");q.css({position:"absolute",left:8,top:8,width:v-2,height:b-2,overflow:"hidden"});var Q=d.imagesContainer=c("<div />");Q.css({position:"relative",
left:0,top:0,width:l*j*s-2,height:R*n-2});q.append(Q);w.append(q);d.drag=!1;var T=0;Q.draggable({axis:"x",distance:30,start:function(a,c){T=c.position.left;d.drag=!0},stop:function(a,c){30<Math.abs(Math.abs(T)-Math.abs(c.position.left))?T<c.position.left?d.prevPage():d.nextPage():d.placePage();setTimeout(function(){d.drag=!1},100)}});K(Q);for(q=0;q<i.length;q++)s=q%j*l+Math.floor(q/o)*v,g=Math.floor(q/j)%n*R,function(a,b,q){var e=c("<img />"),k=c("<a />");k.attr({href:i[a].source}).css({display:"block",
position:"absolute",left:Math.floor(b),top:Math.floor(q+0.5*h),width:t,height:h,overflow:"hidden",opacity:0,background:r(f.colorScheme.imageBGColor),border:"none",margin:0,padding:0}).click(function(){return!1});Q.append(k);var u=function(){k.click(function(){if(!d.drag)d.currentItem=a,d.open(i[a],{left:a%j*l+C,top:q+H});return!1}).mouseover(function(){e.stop().animate({opacity:1},p.animation.duration/2)}).mouseleave(function(){e.stop().animate({opacity:f.thumbnail.alpha/100},p.animation.duration/
2)})};a<o?setTimeout(function(){k.animate({top:q,opacity:1},{duration:p.animation.duration,complete:u})},200*a):(k.css({top:q,opacity:1}),u());B(i[a].thumb,function(a){e.attr({src:a.src}).css({display:"block",position:"absolute",margin:0,padding:0,border:"none",opacity:f.thumbnail.alpha/100}).css(D.fill(a.width,a.height,parseInt(f.thumbnail.width),parseInt(f.thumbnail.height)));k.append(e)},200*a)}(q,s,g);n=d.prevPageButton=c("<div />");n.css({position:"absolute",left:5,top:b/2-10,width:30,height:30,
background:e(p.images.folder+"/left.png"),cursor:"pointer"});y(n,{borderRadius:"4px"});n.click(function(){d.prevPage()});w.append(n);n=d.nextPageButton=c("<div />");n.css({position:"absolute",right:5,top:b/2-10,width:30,height:30,background:e(p.images.folder+"/right.png"),cursor:"pointer"});y(n,{borderRadius:"4px"});n.click(function(){d.nextPage()});w.append(n);w.mouseover(function(){d.showControls()});w.mouseleave(function(){d.hideControls()});d.hideControls();d.showControls()};L.prototype.hideControls=
function(){this.prevPageButton.hide();this.nextPageButton.hide()};L.prototype.showControls=function(){0<this.page&&this.prevPageButton.show();this.page<this.pagesCount-1&&this.nextPageButton.show()};L.prototype.open=function(b,d){var q=this,i=this.settings,f=c('<img class="altgallery-preloader" src="'+p.images.loader+'" alt="" />');l(f);f.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});var g=c('<img src="'+b.thumb+'" />');B(b.thumb,function(k){c(".altgallery-imageFrame",
q.canvas.element).remove();c(".altgallery-frameMask",q.canvas.element).fadeIn(p.animation.duration);var t=document.createElement("div");c(t).addClass("altgallery-imageFrame").css({position:"absolute",padding:8,background:r(i.colorScheme.imageBGColor),zIndex:30});c(t).hide();var h=D.fit(k.width,k.height,q.canvas.width()-48,q.canvas.height()-48),j={left:h.left+16+h.width/3,top:h.top+16+h.height/3,width:h.width/3,height:h.height/3};if(d!==a){if(d.left!==a)j.left=d.left;if(d.top!==a)j.top=d.top}c(t).css(j);
var k=D.fit(k.width,k.height,q.canvas.width()-48,q.canvas.height()-48),n={left:k.left+16+k.width/3,top:k.top+16+k.height/3,width:k.width/3,height:k.height/3,margin:0,padding:0,border:"none",maxWidth:"none",maxHeight:"none",cursor:"pointer"};g.css(n);c(t).append(g);q.canvas.element.append(t);g.animate(k,p.animation.duration);c(t).animate({opacity:"show",left:h.left+16,top:h.top+16,width:h.width,height:h.height},p.animation.duration,function(){var a=c("<div></div>");a.css({position:"absolute",left:8,
top:8,width:h.width,height:h.height,overflow:"hidden",cursor:"pointer"});if(b.description){var d=parseInt(i.imageCaption.fontSize),d=d||q.defaultSettings.imageCaption.fontSize,m=c("<div><div>"+b.description+"</div></div>");m.css({position:"absolute",left:0,width:h.width,fontFamily:i.imageCaption.fontName,fontSize:d+"px",lineHeight:1.25,color:r(i.imageCaption.color),background:A(i.imageCaption.bgColor,i.imageCaption.bgAlpha/100)});a.append(m);c(t).append(a);"bottom"==i.imageCaption.position.toLowerCase()?
(m.css({bottom:"-33px",borderTop:"1px solid "+A(i.imageCaption.bgColor,(i.imageCaption.bgAlpha+10)/100)}),m.children("div").css({padding:"8px 10px 10px"}),m.animate({bottom:0})):(m.css({top:"-33px",borderBottom:"1px solid "+A(i.imageCaption.bgColor,(i.imageCaption.bgAlpha+10)/100)}),m.children("div").css({padding:"10px 10px 8px"}),m.animate({top:0}))}var k=c('<a class="altgallery-close" style="position:absolute; right:-15px; top:-13px; width:30px; height:30px; z-index:40; background:no-repeat center; cursor:pointer;"></a>');
k.css({backgroundImage:e(p.images.close)});k.click(function(){c(this).remove();m&&m.remove();j.opacity="hide";c(t).animate(j,p.animation.duration,function(){c(this).remove()});g.animate(n,p.animation.duration);c(".altgallery-frameMask",q.canvas.element).fadeOut(p.animation.duration)});c(t).append(k);a.click(function(){k.remove();m&&m.remove();j.opacity="hide";c(t).animate(j,p.animation.duration,function(){c(this).remove();q.next()});g.animate(n,p.animation.duration)});setTimeout(function(){c(t).append(f)},
500)})});B(b.source,function(){f.hide();q.canvas.element.find(".altgallery-preloader").remove();c(g).attr("src",b.source)})};L.prototype.prev=function(){this.currentItem--;if(0>this.currentItem)this.currentItem=this.items.length-1;this.open(this.getCurrentItem())};L.prototype.next=function(){this.currentItem++;if(this.currentItem>=this.items.length)this.currentItem=0;this.open(this.getCurrentItem())};L.prototype.placePage=function(){var a=this;a.hideControls();a.imagesContainer.animate({left:-(a.page*
a.pageWidth)},{duration:p.animation.duration,complete:function(){a.showControls()}})};L.prototype.prevPage=function(){this.page--;if(0>this.page)this.page=0;this.placePage()};L.prototype.nextPage=function(){this.page++;if(this.page>=this.pagesCount)this.page=this.pagesCount-1;this.placePage()};E.prototype.init=function(){var a=this.settings;this.initFrame();this.initNavigation();this.initCaption();this.initButtons();this.initThumbnails();this.initImage();switch(a.initialState.toLowerCase()){case "show thumbnails":this.showThumbnails();
break;default:case "load image":case "show image":this.showImage();break;case "start slideshow":this.showImage(),this.slideshowStart()}};E.prototype.initFrame=function(){var a=this.canvas,b=this.settings,d=this.frame=c("<div></div>"),i=a.width()-10,f=a.height()-10;d.css({position:"absolute",left:5,top:5,width:i,height:f,overflow:"hidden",background:r(b.buttons.bgColor)});y(d,{borderRadius:"5px",boxShadow:"0 0 4px rgba(0, 0, 0, 0.5)"});var e=this.content=c("<div></div>"),i=this.contentWidth=i-18,f=
this.contentHeight=f-43;e.css({position:"absolute",left:9,top:9,width:i,height:f,background:r(b.base.color)});y(e,{borderRadius:"4px"});d.append(e);b=this.preloader=c('<img alt="" />');b.attr("src",p.images.loader);b.css({position:"absolute",left:"50%",top:"50%",zIndex:100,margin:"-16px 0 0 -16px"});e.append(b);a.append(d)};E.prototype.initNavigation=function(){this.initPrevButton();this.initNextButton()};E.prototype.initPrevButton=function(){var a=this.settings,b=c("<div></div>");b.css({position:"absolute",
left:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,background:r(a.buttons.bgColor),cursor:"default"});y(b,{borderRadius:"10px",boxShadow:"5px 0 15px rgba(0, 0, 0, 0.5)"});this.frame.append(b);prevOverlay=c("<div></div>");prevOverlay.css({position:"absolute",left:0,top:this.contentHeight/2-30,zIndex:10,width:9,height:80,background:r(a.buttons.bgColor),cursor:"default"});this.frame.append(prevOverlay);var d=this.prevButton=c('<div><div style="margin:25px 0 0 6px; width:9px; height:9px; background:url('+
p.images.folder+'cubic-buttons.png) no-repeat -8px -8px;"></div></div>');d.css({position:"absolute",left:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,cursor:"pointer"});this.frame.append(d);var i;this.canvas.element.hover(function(){clearTimeout(i);b.stop().show().css({opacity:1}).animate({left:0});d.stop().animate({left:0,opacity:1})},function(){i=setTimeout(function(){b.stop().animate({left:-12},function(){b.fadeOut()});d.stop().animate({left:-12,opacity:0})},100)});this.hidePrevButton=
function(){b.css({visibility:"hidden"});prevOverlay.css({visibility:"hidden"});d.css({visibility:"hidden"})};this.showPrevButton=function(){b.css({visibility:"visible"});prevOverlay.css({visibility:"visible"});d.css({visibility:"visible"})}};E.prototype.initNextButton=function(){var a=this.settings,b=c("<div></div>");b.css({position:"absolute",right:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,background:r(a.buttons.bgColor),cursor:"default"});y(b,{borderRadius:"10px",boxShadow:"-5px 0 15px rgba(0, 0, 0, 0.5)"});
this.frame.append(b);nextOverlay=c("<div></div>");nextOverlay.css({position:"absolute",right:0,top:this.contentHeight/2-30,zIndex:10,width:9,height:80,background:r(a.buttons.bgColor),cursor:"default"});this.frame.append(nextOverlay);var d=this.nextButton=c('<div><div style="margin:25px 0 0 6px; width:9px; height:9px; background:url('+p.images.folder+'cubic-buttons.png) no-repeat -8px -33px;"></div></div>');d.css({position:"absolute",right:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,
cursor:"pointer"});this.frame.append(d);var i;this.canvas.element.hover(function(){clearTimeout(i);b.stop().show().css({opacity:1}).animate({right:0});d.stop().animate({right:0,opacity:1})},function(){i=setTimeout(function(){b.stop().animate({right:-12},function(){b.fadeOut()});d.stop().animate({right:-12,opacity:0})},100)});this.hideNextButton=function(){b.css({visibility:"hidden"});nextOverlay.css({visibility:"hidden"});d.css({visibility:"hidden"})};this.showNextButton=function(){b.css({visibility:"visible"});
nextOverlay.css({visibility:"visible"});d.css({visibility:"visible"})}};E.prototype.initCaption=function(){var a=this.caption=c("<div></div>");a.css({position:"absolute",left:10,bottom:10,width:this.contentWidth-60,overflow:"hidden",fontFamily:"Arial, Helvetica, sans-serif",fontSize:"11px",color:"#777"});this.frame.append(a)};E.prototype.initButtons=function(){var a=this,b=a.settings,d=function(){c(this).css({borderColor:"#fff #bbb #bbb #fff"});y(this,{boxShadow:"0 0 2px rgba(0, 0, 0, 0.2)"})},i=
function(){c(this).css({borderColor:"transparent"});y(this,{boxShadow:"none"})};if(b.buttons.showSlideshowButton){var f=a.slideshowButton=c("<div></div>");f.css({position:"absolute",right:b.buttons.showThumbnailsButton?29:5,bottom:5,width:23,height:23,background:e(p.images.folder+"cubic-buttons.png")+" no-repeat 0px -51px",border:"1px solid",borderColor:"transparent",cursor:"pointer"});y(f,{borderRadius:"3px 4px 3px 4px"});f.hover(d,i);f.click(function(){a.showImage();a.slideshowStart()});a.frame.append(f)}if(b.buttons.showThumbnailsButton)b=
a.showThumbnailsButton=c("<div></div>"),b.css({position:"absolute",right:5,bottom:5,width:23,height:23,background:e(p.images.folder+"cubic-buttons.png")+" no-repeat -1px -126px",border:"1px solid",borderColor:"transparent",cursor:"pointer"}).hide(),y(b,{borderRadius:"3px 4px 3px 4px"}),b.hover(d,i),b.click(function(){a.showThumbnails()}),a.frame.append(b),b=a.showImagesButton=c("<div></div>"),b.css({position:"absolute",right:5,bottom:5,width:23,height:23,background:e(p.images.folder+"cubic-buttons.png")+
" no-repeat -1px -101px",border:"1px solid",borderColor:"transparent",cursor:"pointer"}).hide(),y(b,{borderRadius:"3px 4px 3px 4px"}),b.hover(d,i),b.click(function(){a.showImage()}),a.frame.append(b)};E.prototype.initImage=function(){var a=this.imageWidth=this.contentWidth-2*this.settings.base.visibleFrame,b=this.imageHeight=this.contentHeight-2*this.settings.base.visibleFrame,d=this.imagesFrame=c("<div></div>");d.css({position:"absolute",left:this.settings.base.visibleFrame,top:this.settings.base.visibleFrame,
width:a,height:b,overflow:"hidden"}).hide();y(d,{borderRadius:"3px"});this.content.append(d);a=this.imagesContainer=c("<div></div>");a.css({position:"relative",left:0,top:0});d.append(a)};E.prototype.showImage=function(a){var c=this,b=function(){function a(){setTimeout(function(){c.drag=!1},100)}c.cleanup();c.thumbnailsFrame.hide();c.imagesFrame.show();c.showImagesButton.hide();c.showThumbnailsButton.show();c.showPrevButton();c.showNextButton();c.prevButton.unbind("click").click(function(){c.slideshowStop();
c.prev()});c.nextButton.unbind("click").click(function(){c.slideshowStop();c.next()});var b=0;c.imagesContainer.draggable({axis:"x",distance:30,start:function(a,d){c.drag=!0;b=d.position.left},stop:function(d,e){30<Math.abs(Math.abs(b)-Math.abs(e.position.left))?b<e.position.left?c.prev(p.animation.duration,a):c.next(p.animation.duration,a):c.place(p.animation.duration,a)}})};K(c.imagesContainer);!1!==a?(c.hidePrevButton(),c.hideNextButton(),c.open(c.getCurrentItem(),b)):b()};E.prototype.initThumbnails=
function(){function a(){b.cleanup()}var b=this,d=b.canvas,i=b.thumbnailsWidth=b.contentWidth-2*b.settings.base.visibleFrame,f=b.thumbnailsHeight=b.contentHeight-2*b.settings.base.visibleFrame,e=b.thumbnailsFrame=c("<div></div>");e.css({position:"absolute",left:b.settings.base.visibleFrame,top:b.settings.base.visibleFrame,width:i,height:f,overflow:"hidden"}).hide();y(e,{borderRadius:"3px"});b.content.append(e);var k=b.thumbnailsContainer=c('<div class="thumbnailsContainer"></div>');k.css({position:"relative",
left:0,top:0,width:i*Math.ceil(b.items.length/20),height:f});e.append(k);for(var g=Math.round((i-5)/5),h=Math.round((f-4)/4),j=Math.round((i-5*g)/10),n=Math.round((f-4*h)/8),f=0;f<b.items.length;f++)(function(f,e){B(e.thumb,function(I){var p=f%5,C=Math.floor(f%20/5),H=c('<a class="altgallery-thumbnail altgallery-thumbnail-'+f+'"></a>');l(H);H.attr({href:e.source}).css({display:"block",position:"absolute",left:p*g+Math.floor(f/20)*i+1*p+j,top:C*h+1*C+n,width:g,height:h,overflow:"hidden",cursor:"pointer",
zIndex:Math.floor(f%20/5)});y(H,{boxShadow:"0px 3px 3px rgba(0, 0, 0, 0.5)"});H.mouseover(function(){if(b.enableThumbnailsHover&&!b.drag){var j=0;0==p?j=g/8:4==p&&(j=-g/8);var n=0;0==C?n=h/8:3==C&&(n=-h/8);b.updateCaption(e.description||"Image "+(f+1)+" / "+b.items.length);b.cleanup();d.element.find(".altgallery-thumbnail").css({opacity:0.8});var l=c(this).clone();l.addClass("altgallery-clone");l.css({left:c(this).offset().left-k.offset().left,top:c(this).offset().top-k.offset().top,zIndex:10,opacity:1});
y(l,{boxShadow:"5px 15px 13px rgba(0, 0, 0, 0.7)"});k.append(l);var H=l.find("img");l.animate({width:1.25*g,height:1.25*h,marginLeft:-g/8+j,marginTop:-h/8+n},{duration:"fast",easing:"linear",step:function(){H.css(D.fill(I.width,I.height,l.width(),l.height()))}});l.click(function(){if(!b.drag)b.currentItem=f,l.unbind("mouseleave"),b.canvas.element.unbind("mouseleave",a),y(l,{boxShadow:"none"}),l.animate({left:b.currentPage*i,top:0,width:b.imageWidth,height:b.imageHeight,marginLeft:0,marginTop:0},{duration:"normal",
step:function(){H.css(D.fill(I.width,I.height,l.width(),l.height()))},complete:function(){b.showImage()}});return!1});l.mouseleave(function(){b.cleanup();b.updateCaption(" ")})}});H.click(function(){if(!b.drag)b.currentItem=f,b.showImage();return!1});var r=c("<img />");r.attr({src:e.thumb}).css({display:"block",position:"absolute",border:"none"}).css(D.fill(I.width,I.height,g,h));H.append(r);k.append(H)})})(f,b.items[f]);b.canvas.element.mouseleave(a);b.currentPage=0;b.preloader.hide()};E.prototype.showThumbnails=
function(){function a(c,b){f.thumbnailsContainer.stop().animate({left:-f.currentPage*f.thumbnailsWidth},{duration:c||2*p.animation.duration,complete:function(){f.enableThumbnailsHover=!0;"function"==typeof b&&b()}})}function c(b,d){if(0<f.currentPage)f.currentPage--,f.enableThumbnailsHover=!1,f.cleanup();a(b,d);f.updateNavigation()}function b(c,d){if(f.currentPage<Math.ceil(f.items.length/20)-1)f.currentPage++,f.enableThumbnailsHover=!1,f.cleanup();a(c,d);f.updateNavigation()}function d(){setTimeout(function(){f.drag=
!1},100)}var f=this;f.slideshow&&f.slideshowStop();f.updateCaption(" ");f.imagesFrame.hide();f.thumbnailsFrame.show();f.showThumbnailsButton.hide();f.showImagesButton.show();f.prevButton.unbind("click").click(function(){c()});f.nextButton.unbind("click").click(function(){b()});f.updateNavigation();var e=0;f.thumbnailsContainer.draggable({axis:"x",distance:30,start:function(a,c){f.drag=!0;e=c.position.left;f.cleanup()},stop:function(f,g){30<Math.abs(Math.abs(e)-Math.abs(g.position.left))?e<g.position.left?
c(p.animation.duration,d):b(p.animation.duration,d):a(p.animation.duration,d)}});K(f.thumbnailsContainer)};E.prototype.updateNavigation=function(){var a=Math.ceil(this.items.length/20);0<this.currentPage?this.showPrevButton():this.hidePrevButton();this.currentPage<a-1?this.showNextButton():this.hideNextButton()};E.prototype.updateCaption=function(a){(a=a||this.getCurrentItem().description)?this.caption.html(a):this.caption.html("Image "+(this.currentItem+1)+" / "+this.items.length)};E.prototype.loadImage=
function(b,d){var e=this,b=b%e.items.length;e.items[b]!==a&&B(e.items[b].source,function(a){var f="altgallery-image-"+b;if(!e.imagesContainer.find("."+f).size()){f=c('<div class="'+f+'"></div>');f.css({position:"absolute",left:e.imageWidth*b,top:0,width:e.imageWidth,height:e.imageHeight,overflow:"hidden"});var g=c('<img style="position:absolute;" />');g.attr("src",a.src);g.css(D.fill(a.width,a.height,e.imageWidth,e.imageHeight));f.append(g);e.imagesContainer.append(f)}"function"==typeof d&&d(a)})};
E.prototype.open=function(a,b){var d=this,e="altgallery-image-"+d.currentItem;d.imagesContainer.find("."+e).size()?"function"==typeof b&&b():(d.preloader.show(),B(a.source,function(a){var g=c('<div class="'+e+'"></div>');g.css({position:"absolute",left:d.imageWidth*d.currentItem,top:0,width:d.imageWidth,height:d.imageHeight,overflow:"hidden"});var k=c('<img style="position:absolute;" />');k.attr("src",a.src);k.css(D.fill(a.width,a.height,d.imageWidth,d.imageHeight));g.append(k);d.imagesContainer.append(g);
d.preloader.hide();"function"==typeof b&&b()}));d.imagesContainer.stop().css({left:-d.imageWidth*d.currentItem});d.updateCaption();d.loadImage(a.id+1);d.loadImage(a.id-1)};E.prototype.place=function(a,c){this.imagesContainer.stop().animate({left:-this.imageWidth*this.currentItem},{duration:a||2*p.animation.duration,complete:function(){"function"==typeof c&&c()}})};E.prototype.prev=function(a,c){var b=this;if(0<b.currentItem){b.currentItem--;var d=setTimeout(function(){b.preloader.show()},500);b.loadImage(b.currentItem,
function(){clearTimeout(d);b.preloader.hide();b.place(a,c);b.updateCaption();b.loadImage(b.currentItem-1)})}else b.currentItem=b.items.length-1,b.showImage()};E.prototype.next=function(a,c){var b=this;if(b.currentItem<b.items.length-1){b.currentItem++;var d=setTimeout(function(){b.preloader.show()},500);b.loadImage(b.currentItem,function(){clearTimeout(d);b.preloader.hide();b.place(a,function(){b.slideshow&&b.slideshowStart();"function"==typeof c&&c()});b.updateCaption();b.loadImage(b.currentItem+
1)})}else b.currentItem=0,b.showImage(),b.slideshow&&b.slideshowStart()};E.prototype.slideshowStart=function(){var a=this;a.showImage(!1);clearTimeout(a.slideshowTimer);a.slideshow=!0;a.slideshowButton.css({background:e(p.images.folder+"cubic-buttons.png")+" no-repeat 0px -76px"});a.slideshowButton.unbind("click").click(function(){a.slideshowStop()});a.slideshowTimer=setTimeout(function(){a.next()},1E3*a.settings.slideshowDelay)};E.prototype.slideshowStop=function(){var a=this;a.slideshow=!1;clearTimeout(a.slideshowTimer);
a.slideshowButton.css({background:e(p.images.folder+"cubic-buttons.png")+" no-repeat 0px -51px"});a.slideshowButton.unbind("click").click(function(){a.slideshowStart()})};E.prototype.cleanup=function(){this.canvas.element.find(".altgallery-clone").remove();c(this.canvas.element).find(".altgallery-thumbnail").css({opacity:1})};O.prototype.showScrollbar=function(){var a=this,b=this.settings,d=this.canvas,e=c('<div class="altgallery-scrollbar"></div>'),f=Math.round(0.8*d.width())-36;e.css({position:"absolute",
zIndex:1E3,left:(d.width()-f)/2,bottom:5,width:f+36,height:17,background:A(b.scrollbar.bgColor,b.scrollbar.bgAlpha/100),"-moz-border-radius":8,"-webkit-border-radius":8,borderRadius:8});if(c.browser.msie&&9>c.browser.version){var g=sprintf("%02x%s",255*b.scrollbar.bgAlpha/100,r(b.scrollbar.bgColor).replace("#",""));e.css({filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+g+",endColorstr=#"+g+")"})}var k=c('<div class="altgallery-scrollbar-handle"></div>'),h=f/a.items.length;k.css({position:"absolute",
left:Math.round(a.currentItem*h),top:-10,width:Math.floor(h),height:30});var j=c("<div />");j.css({position:"relative",top:10,height:13,background:r(b.scrollbar.handleColor),opacity:b.scrollbar.handleAlpha/100,cursor:"ew-resize"});j.hover(function(){j.css({opacity:1})},function(){j.css({opacity:b.scrollbar.handleAlpha/100})});k.append(j);k.draggable({axis:"x",containment:"parent",stop:function(c,b){a.currentItem=Math.floor(b.position.left/f*a.items.length);k.css({left:Math.round(a.currentItem*h)});
a.animate()}});g=c("<div></div>");g.css({position:"relative",top:2,height:13,margin:"0 18px"});g.click(function(b){b=b.pageX-c(this).offset().left;a.currentItem=Math.floor(b/f*a.items.length);k.css({left:Math.round(a.currentItem*h)});a.animate()});var l={position:"absolute",top:2,width:16,height:16,fontFamily:"Arial, Helvetica, sans-serif",fontSize:"10px",lineHeight:"14px",textAlign:"center",color:r(b.scrollbar.arrowsColor),opacity:b.scrollbar.arrowsAlpha/100,cursor:"pointer"},n=c("<div>&#9668;</div>");
n.css(l);n.css({left:1});n.click(function(){a.prev()});e.append(n);n=c("<div>&#9658;</div>");n.css(l);n.css({right:1});n.click(function(){a.next()});e.append(n);g.append(k);e.append(g);d.element.append(e);K(k)};O.prototype.updateScrollbar=function(){var a=this.canvas,c=(Math.round(0.8*a.width())-36)/this.items.length;a.element.find(".altgallery-scrollbar-handle").css({left:Math.round(this.currentItem*c)})};O.prototype.getItemStyle=function(a,c){var b=this.settings,d=this.canvas,e,g;e=this.getItemX(c);
g=this.getItemZ(c);var k;k=Math.abs(e);var h=D.fit(a.width,a.height,b.maxImageWidth*(1>k?1:2>k?0.55:3>k?0.5:0.6-0.05*k),d.height()-60);return{zIndex:g,left:(d.width()-h.width)/2+e*d.width()/8+(e?e/k*b.maxImageWidth/3:0),top:(d.height()-h.height)/2-30,width:h.width,height:h.height,opacity:e?0.8:1,transform:{rotateY:-(e?e/k:0)*b.imageAngle+"deg"}}};O.prototype.render=function(){function a(b,k){B(f[b].source,function(a){var h=d.getItemStyle(a,b),j=c('<a class="altgallery-item-'+b+'"></a>');f[b].link&&
(j.attr("href",f[b].link),f[b].target&&j.attr("target",f[b].target));j.css({display:"block",position:"absolute",zIndex:h.zIndex,left:h.left,top:h.top,width:h.width,height:h.height,overflow:"visible",background:"#000",cursor:"pointer",outline:"none"});g&&x(j,{rotateY:h.transform.rotateY});var o=c('<img src="" alt="" />');o.attr("src",a.src);l(o);o.css({display:"block",width:h.width,height:h.height,opacity:h.opacity});j.append(o);if(d.showReflections){a=o.clone();a.css({position:"absolute",opacity:e.reflectionAlpha/
100,"-moz-transform":"scaleY(-1)","-webkit-transform":"scaleY(-1)","-o-transform":"scaleY(-1)","-ms-transform":"scaleY(-1)",transform:"scaleY(-1)",zIndex:1});var t=c('<div class="altgallery-overlay"></div>');t.css({position:"absolute",top:h.height,width:h.width,height:h.height,background:i.element.css("backgroundColor"),zIndex:0});var n=c('<div class="altgallery-overlay"></div>');n.css({position:"absolute",top:h.height,width:h.width,height:h.height,zIndex:2});var h=i.element.css("backgroundColor"),
u=[A(h,0),A(h,0.5),A(h,1)];c.browser.mozilla?n.css({background:"-moz-linear-gradient(top, "+u[0]+" 0%, "+u[1]+" 15%, "+u[2]+" 50%)"}):c.browser.webkit?n.css({background:"-webkit-linear-gradient(top, "+u[0]+" 0%, "+u[1]+" 15%, "+u[2]+" 50%)"}):c.browser.opera?n.css({background:"-o-linear-gradient(top, "+u[0]+" 0%, "+u[1]+" 15%, "+u[2]+" 50%)"}):c.browser.msie?(h=r(h).replace("#",""),n.css({filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00"+h+",endColorstr=#ff"+h+",GradientType=0)"})):
n.css({background:"linear-gradient(top, "+u[0]+" 0%, "+u[1]+" 15%, "+u[2]+" 50%)"});j.append(a);j.append(t);j.append(n)}j.click(function(){if(!d.drag){d.currentItem+=k;if(0>d.currentItem)d.currentItem=0;else if(d.currentItem>=f.length)d.currentItem=f.length-1;d.animate()}return!1}).hover(function(){o.css({opacity:1})},function(){o.css({opacity:k?0.8:1})});b==d.currentItem&&j.unbind("click").click(function(){if(d.drag)return!1});d.scene.append(j)})}var d=this,e=this.settings,i=this.canvas,f=this.items,
g=!b();d.scene.empty();d.scene.css({"-webkit-perspective":400,"-moz-perspective":400,perspective:400});var k,h,j,p,n,o=0;p=d.currentItem;n=2*Math.max(p,f.length-p);for(h=1;h<=n;h++)k=p+(h%2?parseInt(h/2):-parseInt(h/2)),0<=k&&k<f.length&&function(c){setTimeout(function(){j=d.getItemX(c);a(c,j)},100*o++)}(k);e.useScrollBar&&d.showScrollbar();c.browser.mozilla&&d.showReflections&&d.animate()};O.prototype.animate=function(){function a(b,k,g){B(e[b].source,function(a){function h(a){function b(c){return n[c]+
(l[c]-n[c])*a/1E4}j.css({left:b("left"),top:b("top"),width:b("width"),height:b("height")});t.css({width:b("width"),height:b("height")});c.showReflections&&u.css({top:b("height"),width:b("width"),height:b("height")});f&&x(j,{rotateY:parseFloat(n.transform.rotateY)+(parseFloat(l.transform.rotateY)-parseFloat(n.transform.rotateY))*a/1E4+"deg"})}var j=c.scene.find(".altgallery-item-"+b),t=j.find("img"),n={left:parseInt(j.css("left")),top:parseInt(j.css("top")),width:j.width(),height:j.height(),opacity:j.find("img").css("opacity"),
transform:x(j)},l=c.getItemStyle(a,b);g||j.show().css({zIndex:l.zIndex});j.unbind("click").click(function(){if(!c.drag){c.currentItem+=k;if(0>c.currentItem)c.currentItem=0;else if(c.currentItem>=e.length)c.currentItem=e.length-1;c.animate()}return!1}).unbind("hover").hover(function(){t.first().css({opacity:1})},function(){t.first().css({opacity:k?0.8:1})});t.first().css({opacity:l.opacity});var u=j.find(".altgallery-overlay");j.stop().prop("animate",0);g?h(1E4):j.animate({animate:1E4},{duration:800*
d.flipDuration,easing:"easeOutCubic",step:function(a){h(a)},complete:function(){j.prop("animate",0);b==c.currentItem&&j.unbind("click").click(function(){if(c.drag)return!1})}})})}var c=this,d=this.settings,e=this.items,f=!b(),g,k,h,j,l;j=c.currentItem;l=2*Math.max(j,e.length-j);for(k=1;k<=l;k++)if(g=j+(k%2?parseInt(k/2):-parseInt(k/2)),0<=g&&g<e.length){var n=Math.abs(c.currentItem-g);h=c.getItemX(g);4>n?a(g,h):(c.scene.find(".altgallery-item-"+g).hide(),a(g,h,!0))}d.useScrollBar&&c.updateScrollbar()};
O.prototype.open=function(a){this.currentItem=a.id;this.animate()};O.prototype.prev=function(a){a=this.currentItem-(a||1);0>a&&(a=0);if(this.currentItem!=a)this.currentItem=a,this.animate()};O.prototype.next=function(a){a=this.currentItem+(a||1);a>=this.items.length&&(a=this.items.length-1);if(this.currentItem!=a)this.currentItem=a,this.animate()};G.prototype.render=function(){var a=this,b=this.settings,d=this.canvas;d.element.css({fontFamily:b.fontName,fontSize:parseInt(b.fontSize)+"px",lineHeight:1.2*
parseInt(b.fontSize)+"px"});(function(){var e=c('<div class="altgallery-imageFrame"></div>');e.css({width:d.width()-2*b.frameSize,height:d.height()-2*b.frameSize,padding:b.frameSize,background:r(b.frameColor),borderRadius:b.cornerRadius/2});var f=c('<div class="altgallery-image"></div>');f.css({position:"relative",width:d.width()-2*b.frameSize,height:d.height()-2*b.frameSize,overflow:"hidden",background:r(b.backgroundColor),borderRadius:b.cornerRadius/2-b.frameSize/4,cursor:"pointer"});var g=c('<img src="" alt="" />');
l(f.children("img"));g.css({position:"absolute"});e.click(function(){a.next()});f.append(g);e.append(f);d.element.append(e);a.open(a.getCurrentItem())})();switch(b.initialState.toLowerCase()){default:case "show albums":this.showAlbums();break;case "show thumbnails":this.showThumbnails();case "load image":case "start slideshow":}};G.prototype.showAlbums=function(){function a(){function f(){var a=o*u+1,c=o*u+u;if(c>b.albums.length)c=b.albums.length;r.html(a+"-"+c+" "+i.translation.Of+" "+b.albums.length);
0>=o?(C.css({opacity:0.3,cursor:"default"}),C.unbind("click").click(function(){return!1})):(C.css({opacity:1,cursor:"pointer"}),C.unbind("click").click(w));o>=n-1?(x.css({opacity:0.3,cursor:"default"}),x.unbind("click").click(function(){return!1})):(x.css({opacity:1,cursor:"pointer"}),x.unbind("click").click(y))}b.hideThumbnails();b.hideButtons();b.hideCaption();b.hideNavigation();var g=c('<div class="altgallery-albums"></div>'),k=d.width()-2*i.frameSize,h=i.iconHeight+115;g.css({position:"absolute",
left:i.frameSize,top:(d.height()-h)/2,width:d.width()-2*i.frameSize,height:h,overflow:"hidden",color:"#fff",border:"1px #000",borderStyle:"solid none",zIndex:2});var j=c('<div class="altgallery-albums-overlay"></div>');j.css({position:"absolute",left:i.frameSize,top:(d.height()-h)/2,width:d.width()-2*i.frameSize,height:h+1,background:"#000",opacity:i.panelBackgroundAlpha/100,zIndex:1});d.element.append(j);h=c("<div></div>");h.css({position:"absolute",top:10,right:20});j=c('<a class="altgallery-close" href="#">'+
i.translation.Close+"</a>");j.css({marginRight:0,color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",backgroundImage:e(p.images.folder+"zen-close.png"),paddingLeft:12});j.click(function(){b.hideAlbums();b.showButtons();b.showCaption();b.showNavigation();return!1});h.append(j);g.append(h);var u=Math.floor((k-20)/(i.iconWidth+i.iconPadding)),u=u>b.albums.length?b.albums.length:u,h=(i.iconWidth+i.iconPadding)*u-i.iconPadding,
j=(i.iconWidth+i.iconPadding)*b.albums.length-i.iconPadding,n=Math.ceil(b.albums.length/u),o=0,s=c("<div>"+i.translation.Albums+"</div>");s.css({position:"absolute",left:9,top:0,padding:10,paddingLeft:25,textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.5)",fontWeight:"bold",background:"no-repeat left center",backgroundImage:e(p.images.folder+"zen-albums.png")});g.append(s);var r=c("<span></span>");r.css({marginLeft:"1em",fontWeight:"normal"});s.append(r);s=c("<div></div>");s.css({position:"absolute",left:(k-
h)/2-4,top:42,width:h+4,height:i.iconHeight+70,overflow:"hidden"});var v=c("<div></div>");v.css({position:"relative",left:0,width:j});s.append(v);k=c("<div></div>");k.css({position:"absolute",right:4,bottom:3,height:20,opacity:0.9});var C=c('<a href="#" style="float:left;"></a>');C.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:e(p.images.folder+"zen-prev.png")});var w=function(){o--;var a=(i.iconWidth+i.iconPadding)*u*o;v.stop();
v.animate({left:-a},2*p.animation.duration,"easeOutQuart");f();return!1};C.click(w);k.append(C);g.append(s);var x=c('<a href="#" style="float:left;"></a>');x.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:e(p.images.folder+"zen-next.png")});var y=function(){o++;var a=(i.iconWidth+i.iconPadding)*u*o;v.stop();v.animate({left:-a},2*p.animation.duration,"easeOutQuart");f();return!1};x.click(y);k.append(x);g.append(k);f();for(k=0;k<b.albums.length;k++)(function(a,
d){var e=c("<div></div>");e.css({position:"absolute",left:(i.iconWidth+i.iconPadding)*d,top:0,width:i.iconWidth+i.iconPadding+6,overflow:"hidden",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)"});var f=c("<div></div>");f.css({position:"relative",width:i.iconWidth-2,height:i.iconHeight-2,overflow:"hidden",border:"1px solid",borderColor:b.currentAlbum==d?"#000":"#fff",margin:"2px",cursor:"pointer"});B(a.items[0].thumb,function(a){var b=c('<img src="" alt="" />');b.attr("src",a.src);l(b);b.css({position:"absolute"});
b.css(D.fill(a.width,a.height,i.iconWidth-2,i.iconHeight-2));f.append(b)},50*d);e.append(f);e.append('<div style="padding:7px 2px 2px; font-weight:bold;">'+(a.description||"Album "+(d+1))+"<div>");e.append('<div style="padding:1px 2px;">'+a.items.length+" "+(1==a.items.length?i.translation.Image:i.translation.Images)+"<div>");e.hover(function(){f.css({borderWidth:"3px",margin:"0px"})},function(){f.css({borderWidth:"1px",margin:"2px"})}).click(function(){if(b.currentAlbum!=d)b.currentItem=-1;b.currentAlbum=
d;b.showThumbnails()});v.append(e)})(b.albums[k],k);d.element.append(g)}var b=this,d=this.canvas,i=this.settings;d.element.find(".altgallery-albums").size()||a()};G.prototype.hideAlbums=function(){this.canvas.element.find(".altgallery-albums, .altgallery-albums-overlay").remove()};G.prototype.showThumbnails=function(){function a(){function g(){var a=s*n+1,b=s*n+n;if(b>f.items.length)b=f.items.length;v.html(a+"-"+b+" "+i.translation.Of+" "+f.items.length);0>=s?(w.css({opacity:0.3,cursor:"default"}),
w.unbind("click").click(function(){return!1})):(w.css({opacity:1,cursor:"pointer"}),w.unbind("click").click(x));s>=o-1?(y.css({opacity:0.3,cursor:"default"}),y.unbind("click").click(function(){return!1})):(y.css({opacity:1,cursor:"pointer"}),y.unbind("click").click(A))}b.hideAlbums();b.hideButtons();b.hideCaption();b.hideNavigation();var k=c('<div class="altgallery-images"></div>'),h=d.width()-2*i.frameSize,j=i.iconHeight+75;k.css({position:"absolute",left:i.frameSize,top:(d.height()-j)/2,width:d.width()-
2*i.frameSize,height:j,overflow:"hidden",color:"#fff",border:"1px #000",borderStyle:"solid none",zIndex:2});var u=c('<div class="altgallery-images-overlay"></div>');u.css({position:"absolute",left:i.frameSize,top:(d.height()-j)/2,width:d.width()-2*i.frameSize,height:j+1,background:"#000",opacity:i.panelBackgroundAlpha/100,zIndex:1});d.element.append(u);j=c("<div></div>");j.css({position:"absolute",top:10,right:20});1<b.albums.length&&(u=c('<a class="altgallery-back" href="#">'+i.translation.BackToAlbums+
"</a>"),u.css({marginRight:"1.5em",color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",backgroundImage:e(p.images.folder+"zen-backToAlbums.png"),paddingLeft:14}),u.click(function(){b.showAlbums();return!1}),j.append(u));u=c('<a class="altgallery-close" href="#">'+i.translation.Close+"</a>");u.css({marginRight:0,color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",
backgroundImage:e(p.images.folder+"zen-close.png"),paddingLeft:12});u.click(function(){b.hideThumbnails();b.showButtons();b.showCaption();b.showNavigation();return!1});j.append(u);k.append(j);var n=Math.floor((h-20)/(i.iconWidth+i.iconPadding)),n=n>f.items.length?f.items.length:n,j=(i.iconWidth+i.iconPadding)*n-i.iconPadding,u=(i.iconWidth+i.iconPadding)*f.items.length-i.iconPadding,o=Math.ceil(f.items.length/n),s=0,r=c("<div>"+i.translation.Images+"</div>");r.css({position:"absolute",left:9,top:0,
padding:10,paddingLeft:25,textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.5)",fontWeight:"bold",background:"no-repeat left center",backgroundImage:e(p.images.folder+"zen-thumbnails.png")});k.append(r);var v=c("<span></span>");v.css({marginLeft:"1em",fontWeight:"normal"});r.append(v);r=c("<div></div>");r.css({position:"absolute",left:(h-j)/2-4,top:42,width:j+4,height:i.iconHeight+4,overflow:"hidden"});var C=c("<div></div>");C.css({position:"relative",left:0,width:u});r.append(C);k.append(r);h=c("<div></div>");
h.css({position:"absolute",right:4,bottom:3,height:20,opacity:0.9});var w=c('<a href="#" style="float:left;"></a>');w.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:e(p.images.folder+"zen-prev.png")});var x=function(){s--;var a=(i.iconWidth+i.iconPadding)*n*s;C.stop();C.animate({left:-a},2*p.animation.duration,"easeOutQuart");g();return!1};w.click(x);h.append(w);var y=c('<a href="#" style="float:left;"></a>');y.css({display:"block",
cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:e(p.images.folder+"zen-next.png")});var A=function(){s++;var a=(i.iconWidth+i.iconPadding)*n*s;C.stop();C.animate({left:-a},2*p.animation.duration,"easeOutQuart");g();return!1};y.click(A);h.append(y);k.append(h);g();for(h=0;h<f.items.length;h++)(function(a,d){var e=c("<div></div>");e.css({position:"absolute",left:(i.iconWidth+i.iconPadding)*d,top:0,width:i.iconWidth+i.iconPadding+6,overflow:"hidden",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)"});
var f=c("<div></div>");f.css({position:"relative",width:i.iconWidth-2,height:i.iconHeight-2,overflow:"hidden",border:"1px solid",borderColor:b.currentItem==d?"#000":"#fff",margin:"2px",cursor:"pointer"});B(a.thumb,function(a){var b=c('<img src="" alt="" />');b.attr("src",a.src);l(b);b.css({position:"absolute"});b.css(D.fill(a.width,a.height,i.iconWidth-2,i.iconHeight-2));f.append(b)},50*d);e.append(f);e.hover(function(){f.css({borderWidth:"3px",margin:"0px"})},function(){f.css({borderWidth:"1px",
margin:"2px"})}).click(function(){b.currentItem=d;b.open(b.getCurrentItem())});C.append(e)})(f.items[h],h);d.element.append(k)}var b=this,d=this.canvas,i=this.settings,f=this.getCurrentAlbum();d.element.find(".altgallery-images").size()||a()};G.prototype.hideThumbnails=function(){this.canvas.element.find(".altgallery-images, .altgallery-images-overlay").remove()};G.prototype.showButtons=function(){function a(){var d=c('<div class="altgallery-buttons"></div>');d.css({position:"absolute",right:b.settings.frameSize,
top:25+b.settings.frameSize,padding:"3px 3px 3px 1px",background:"rgba(0, 0, 0, "+b.settings.buttonsBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderRight:"none","-moz-border-top-left-radius":"3px","-moz-border-bottom-left-radius":"3px","-webkit-border-top-left-radius":"3px","-webkit-border-bottom-left-radius":"3px","border-top-left-radius":"3px","border-bottom-left-radius":"3px"});if(c.browser.msie&&9>c.browser.version){var i=Math.round(255*parseInt(b.settings.buttonsBackgroundAlpha)/
100),i=16>i?"0"+i.toString(16):i.toString(16);d.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+i+"000000,endColorstr=#"+i+"000000)"})}b.settings.showAlbumsButton&&1<b.albums.length&&(i=c('<a href="#" style="float:left;"></a>'),i.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:e(p.images.folder+"zen-albums.png"),opacity:0.8}),i.click(function(){b.showAlbums();return!1}),d.append(i));b.settings.showThumbnailsButton&&
(i=c('<a href="#" style="float:left;"></a>'),i.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:e(p.images.folder+"zen-thumbnails.png"),opacity:0.8}),i.click(function(){b.showThumbnails();return!1}),d.append(i));b.canvas.element.append(d)}var b=this;if("never"!=b.settings.showButtons.toLowerCase()&&(b.settings.showAlbumsButton||b.settings.showThumbnailsButton))b.canvas.element.find(".altgallery-buttons").size()||a()};G.prototype.hideButtons=
function(){this.canvas.element.find(".altgallery-buttons").remove()};G.prototype.showCaption=function(){this.hideCaption();if("never"!=this.settings.showCaption.toLowerCase()&&(this.getCurrentAlbum()&&this.getCurrentAlbum().description||this.getCurrentItem()&&this.getCurrentItem().description)){var a=c('<div class="altgallery-caption"></div>');a.css({position:"absolute",left:this.settings.frameSize,top:25+this.settings.frameSize,padding:"4px 10px 5px 7px",color:"#fff",textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.3)",
background:"rgba(0, 0, 0, "+this.settings.captionBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderLeft:"none","-moz-border-top-right-radius":"3px","-moz-border-bottom-right-radius":"3px","-webkit-border-top-right-radius":"3px","-webkit-border-bottom-right-radius":"3px","border-top-right-radius":"3px","border-bottom-right-radius":"3px"});if(c.browser.msie&&9>c.browser.version){var b=Math.round(255*parseInt(this.settings.captionBackgroundAlpha)/100),b=16>b?"0"+b.toString(16):b.toString(16);
a.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+b+"000000,endColorstr=#"+b+"000000)"})}this.getCurrentAlbum().description&&a.append('<div style="font-weight:bold;">'+this.getCurrentAlbum().description+"</div>");this.getCurrentItem().description&&a.append('<div style="">'+this.getCurrentItem().description+"</div>");this.canvas.element.append(a)}};G.prototype.hideCaption=function(){this.canvas.element.find(".altgallery-caption").remove()};G.prototype.showNavigation=
function(){function a(){var d=c('<div class="altgallery-navigation"></div>');d.css({position:"absolute",right:b.settings.frameSize,bottom:25+b.settings.frameSize,padding:"3px 3px 3px 1px",background:"rgba(0, 0, 0, "+b.settings.buttonsBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderRight:"none","-moz-border-top-left-radius":"3px","-moz-border-bottom-left-radius":"3px","-webkit-border-top-left-radius":"3px","-webkit-border-bottom-left-radius":"3px","border-top-left-radius":"3px",
"border-bottom-left-radius":"3px"});if(c.browser.msie&&9>c.browser.version){var i=Math.round(255*parseInt(b.settings.buttonsBackgroundAlpha)/100),i=16>i?"0"+i.toString(16):i.toString(16);d.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+i+"000000,endColorstr=#"+i+"000000)"})}b.settings.showNavigationButton&&(i=c('<a href="#" style="float:left;"></a>'),i.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",
backgroundImage:e(p.images.folder+"zen-prev.png"),opacity:0.8}),i.click(function(){b.prev();return!1}),d.append(i),i=c('<a href="#" style="float:left;"></a>'),i.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:e(p.images.folder+"zen-next.png"),opacity:0.8}),i.click(function(){b.next();return!1}),d.append(i));b.canvas.element.append(d)}var b=this;"never"!=b.settings.showButtons.toLowerCase()&&b.settings.showNavigationButton&&(b.canvas.element.find(".altgallery-navigation").size()||
a())};G.prototype.hideNavigation=function(){this.canvas.element.find(".altgallery-navigation").remove()};G.prototype.open=function(a){var b=this,d=this.canvas,e=this.settings;b.hideAlbums();b.hideThumbnails();b.showButtons();b.showCaption();b.showNavigation();d.element.find(".altgallery-image img").hide();var f=d.element.find(".altgallery-imageFrame"),g=c('<img class="altgallery-preloader" src="'+p.images.loader+'" alt="" />');l(g);g.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});
B(a.source,function(c){g.hide();d.element.find(".altgallery-preloader").remove();var f=d.element.find(".altgallery-image img");"fit"==e.imageScaleMode?f.css(D.fit(c.width,c.height,d.width()-2*e.frameSize,d.height()-2*e.frameSize)):f.css(D.fill(c.width,c.height,d.width()-2*e.frameSize,d.height()-2*e.frameSize));f.attr("src",a.source).fadeIn(2*p.animation.duration);b.cache()});setTimeout(function(){d.element.find(".altgallery-preloader").remove();f.append(g)},500)};G.prototype.prev=function(){0<this.currentItem?
this.currentItem--:this.currentItem=this.getCurrentAlbum().items.length-1;this.open(this.getCurrentItem())};G.prototype.next=function(){this.currentItem<this.getCurrentAlbum().items.length-1?this.currentItem++:this.currentItem=0;this.open(this.getCurrentItem())};var p={};c.fn.altgallery=function(b,d){function e(){g.each(function(){Y(this,b,d)})}var g=this,b=c.extend(!0,{width:"550px",height:"400px",background:"none",images:{folder:V+"img/",left:"left.png",right:"right.png",close:"close.png",loader:"loader.png"},
animation:{duration:500},config:{settings:{}}},b);if(b.images.folder){b.images.folder=b.images.folder.replace(/\/+$/,"")+"/";for(var f in b.images)"folder"!=f&&!b.images[f].match("/")&&(b.images[f]=b.images.folder+b.images[f])}if("string"==typeof b.config){g.css({visibility:"hidden"});var h={load:function(b,c,d){if(c!==a)switch(c.toLowerCase()){case "xml":this.loadXML(b,d);break;default:case "json":this.loadJSON(b,d)}else b.match(/(xml)$/i)?this.loadXML(b,d):this.loadJSON(b,d)},loadJSON:function(a,
b){c.ajax({url:a,dataType:"json",success:function(a){a=h.parse(a);"function"==typeof b&&b(a)},error:function(){"function"==typeof b&&b({})}})},loadXML:function(a,b){function d(a){var b;"undefined"==typeof b&&(b=function(){});b.ObjTree=function(){return this};b.ObjTree.prototype.attr_prefix="";b.ObjTree.prototype.parseDOM=function(a){if(a){this.__force_array={};if(this.force_array)for(var b=0;b<this.force_array.length;b++)this.__force_array[this.force_array[b]]=1;b=this.parseElement(a);this.__force_array[a.nodeName]&&
(b=[b]);if(11!=a.nodeType){var c={};c[a.nodeName]=b;b=c}return b}};b.ObjTree.prototype.parseElement=function(a){if(7!=a.nodeType){if(3==a.nodeType||4==a.nodeType)return null==a.nodeValue.match(/[^\x00-\x20]/)?void 0:a.nodeValue;var b,c={};if(a.attributes&&a.attributes.length){b={};for(var d=0;d<a.attributes.length;d++){var e=a.attributes[d].nodeName;if("string"==typeof e){var f=a.attributes[d].nodeValue;f&&(e=this.attr_prefix+e,"undefined"==typeof c[e]&&(c[e]=0),c[e]++,this.addNode(b,e,c[e],f))}}}if(a.childNodes&&
a.childNodes.length){e=!0;b&&(e=!1);for(d=0;d<a.childNodes.length&&e;d++)f=a.childNodes[d].nodeType,3==f||4==f||(e=!1);if(e){b||(b="");for(d=0;d<a.childNodes.length;d++)b+=a.childNodes[d].nodeValue}else{b||(b={});for(d=0;d<a.childNodes.length;d++)if(e=a.childNodes[d].nodeName,"string"==typeof e&&(f=this.parseElement(a.childNodes[d])))"undefined"==typeof c[e]&&(c[e]=0),c[e]++,this.addNode(b,e,c[e],f)}}return b}};b.ObjTree.prototype.addNode=function(a,b,c,d){this.__force_array[b]?(1==c&&(a[b]=[]),a[b][a[b].length]=
d):1==c?a[b]=d:2==c?a[b]=[a[b],d]:a[b][a[b].length]=d};b=new b.ObjTree;b.attr_prefix="";return b.parseDOM(a)["#document"]}c.ajax({url:a,dataType:"xml",success:function(a){a=d(a);a=h.parse(a);"function"==typeof b&&b(a)},error:function(){"function"==typeof b&&b({})}})},parse:function(a){if(a.gallery){if(a.galleryName)a.gallery.galleryName=a.galleryName;a=a.gallery;if(a.items&&a.items.item)a.items=a.items.item.length?a.items.item:[a.items.item];if(a.albums){if(a.albums.album)a.albums=a.albums.album.length?
a.albums.album:[a.albums.album];for(var b=0;b<a.albums.length;b++)if(a.albums[b].items.item)a.albums[b].items=a.albums[b].items.item.length?a.albums[b].items.item:[a.albums[b].items.item]}}return a}};h.load(b.config,b.configType,function(a){g.css({visibility:"visible"});b.config=a;e()})}else e();return this};c.altbox=function(a,b){if(d!=top)var d=top,g=d.document;b=c.extend(!0,{frame:{color:"#000",borderRadius:0},mask:{color:"#000",opacity:0.7},images:{folder:V+"img/",close:"close.png",loader:"loader.gif"},
animation:{duration:700}},b);if(b.images.folder){b.images.folder=b.images.folder.replace(/\/+$/,"")+"/";for(var f in b.images)"folder"!=f&&!b.images[f].match("/")&&(b.images[f]=b.images.folder+b.images[f])}var h=c('<div style="position:fixed; z-index:999; left:0; top:0; width:100%; height:100%; background:no-repeat center;"></div>');h.css({opacity:0,backgroundColor:b.mask.color,backgroundImage:e(b.images.loader)});c(g.body).append(h);h.animate({opacity:b.mask.opacity},b.animation.duration);var j=
new Image;j.onload=function(){function f(){h.remove();s.remove()}var l=c(d).width()-100,p=c(d).height()-100,n=D.fit(j.width/4,j.height/4,l,p,{noEnlarge:!0,minWidth:100,minHeight:100});n.left+=50;n.top+=50;var o=D.fit(j.width+20,j.height+20,l,p,{noEnlarge:!0,minWidth:120,minHeight:120});o.left+=50;o.top+=50;var s=c('<div style="position:fixed; z-index:1000;"></div>');s.css(n);s.css({backgroundColor:b.frame.color,borderRadius:b.frame.borderRadius,MozUserSelect:"none",webkitUserSelect:"none",userSelect:"none"});
s.hide();var r=c('<img src="'+a+'" alt="" style="display:block;" />');r.css({margin:"10px",width:n.width-20,height:n.height-20,borderRadius:8<b.frame.borderRadius?b.frame.borderRadius-8:0});var v=c('<a href="#" style="display:block; position:absolute; right:-12px; top:-10px; width:30px; height:30px; background:no-repeat center;"></a>');v.css({backgroundImage:e(b.images.close)});s.append(r);c(g.body).append(s);(function(){h.css({backgroundImage:"none"});r.animate({width:o.width-20,height:o.height-
20,margin:"10px"},b.animation.duration,"easeOutBack");o.opacity="show";s.animate(o,b.animation.duration,"easeOutBack",function(){s.append(v)})})();c(d).resize(function(){l=c(d).width()-100;p=c(d).height()-100;n=D.fit(j.width/4,j.height/4,l,p,{noEnlarge:!0,minWidth:100,minHeight:100});n.left+=50;n.top+=50;o=D.fit(j.width+20,j.height+20,l,p,{noEnlarge:!0,minWidth:120,minHeight:120});o.left+=50;o.top+=50;s.css(o);r.css({width:o.width-20,height:o.height-20})});h.click(f);v.click(function(){v.remove();
n.opacity="hide";s.animate(n,0.67*b.animation.duration);r.animate({width:n.width-20,height:n.height-20},0.67*b.animation.duration);h.fadeOut(b.animation.duration,function(){f()});return!1})};j.src=a}})(jQuery);
