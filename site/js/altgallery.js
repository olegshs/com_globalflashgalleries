/**
 * altgallery, jQuery Plugin
 *
 * @version 0.5.3
 * @copyright 2011-2012 Flash-Gallery.com
 */

if(void 0===JSON){var JSON;JSON||(JSON={});(function(){function b(b){return 10>b?"0"+b:b}function a(b){r.lastIndex=0;return r.test(b)?'"'+b.replace(r,function(b){var t=e[b];return"string"===typeof t?t:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function c(b,d){var t,f,E,z,r=n,I,e=d[b];e&&"object"===typeof e&&"function"===typeof e.toJSON&&(e=e.toJSON(b));"function"===typeof x&&(e=x.call(d,b,e));switch(typeof e){case "string":return a(e);case "number":return isFinite(e)?""+
e:"null";case "boolean":case "null":return""+e;case "object":if(!e)return"null";n+=k;I=[];if("[object Array]"===Object.prototype.toString.apply(e)){z=e.length;for(t=0;t<z;t+=1)I[t]=c(t,e)||"null";E=0===I.length?"[]":n?"[\n"+n+I.join(",\n"+n)+"\n"+r+"]":"["+I.join(",")+"]";n=r;return E}if(x&&"object"===typeof x){z=x.length;for(t=0;t<z;t+=1)"string"===typeof x[t]&&(f=x[t],(E=c(f,e))&&I.push(a(f)+(n?": ":":")+E))}else for(f in e)Object.prototype.hasOwnProperty.call(e,f)&&(E=c(f,e))&&I.push(a(f)+(n?": ":
":")+E);E=0===I.length?"{}":n?"{\n"+n+I.join(",\n"+n)+"\n"+r+"}":"{"+I.join(",")+"}";n=r;return E}}if("function"!==typeof Date.prototype.toJSON)Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,k,e={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},x;if("function"!==typeof JSON.stringify)JSON.stringify=function(b,a,t){var f;k=n="";if("number"===typeof t)for(f=0;f<t;f+=1)k+=" ";else"string"===typeof t&&(k=t);if((x=a)&&"function"!==typeof a&&("object"!==typeof a||"number"!==typeof a.length))throw Error("JSON.stringify");return c("",
{"":b})};if("function"!==typeof JSON.parse)JSON.parse=function(b,a){function t(b,f){var c,d,r=b[f];if(r&&"object"===typeof r)for(c in r)Object.prototype.hasOwnProperty.call(r,c)&&(d=t(r,c),void 0!==d?r[c]=d:delete r[c]);return a.call(b,f,r)}var f,b=""+b;d.lastIndex=0;d.test(b)&&(b=b.replace(d,function(b){return"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return f=eval("("+b+")"),"function"===typeof a?t({"":f},""):f;throw new SyntaxError("JSON.parse");}})()}
(function(b,a){function c(a,c){var k=a.nodeName.toLowerCase();if("area"===k){var k=a.parentNode,e=k.name;if(!a.href||!e||"map"!==k.nodeName.toLowerCase())return!1;k=b("img[usemap=#"+e+"]")[0];return!!k&&d(k)}return(/input|select|textarea|button|object/.test(k)?!a.disabled:"a"==k?a.href||c:c)&&d(a)}function d(a){return!b(a).parents().andSelf().filter(function(){return"hidden"===b.curCSS(this,"visibility")||b.expr.filters.hidden(this)}).length}b.ui=b.ui||{};b.ui.version||(b.extend(b.ui,{version:"1.8.18",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),b.fn.extend({propAttr:b.fn.prop||b.fn.attr,_focus:b.fn.focus,focus:function(a,c){return"number"===typeof a?this.each(function(){var d=
this;setTimeout(function(){b(d).focus();c&&c.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=b.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.curCSS(this,"position",1))&&/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.curCSS(this,
"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?b(document):a},zIndex:function(c){if(c!==a)return this.css("zIndex",c);if(this.length)for(var c=b(this[0]),d;c.length&&c[0]!==document;){d=c.css("position");if("absolute"===d||"relative"===d||"fixed"===d)if(d=parseInt(c.css("zIndex"),10),!isNaN(d)&&0!==d)return d;c=c.parent()}return 0},disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),b.each(["Width","Height"],function(c,d){function k(a,t,f,E){b.each(e,function(){t-=parseFloat(b.curCSS(a,"padding"+this,!0))||0;f&&(t-=parseFloat(b.curCSS(a,"border"+this+"Width",!0))||0);E&&(t-=parseFloat(b.curCSS(a,"margin"+this,!0))||0)});return t}var e="Width"===d?["Left","Right"]:["Top","Bottom"],x=d.toLowerCase(),y={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,
outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+d]=function(c){return c===a?y["inner"+d].call(this):this.each(function(){b(this).css(x,k(this,c)+"px")})};b.fn["outer"+d]=function(a,t){return"number"!==typeof a?y["outer"+d].call(this,a):this.each(function(){b(this).css(x,k(this,a,!0,t)+"px")})}}),b.extend(b.expr[":"],{data:function(a,c,d){return!!b.data(a,d[3])},focusable:function(a){return c(a,!isNaN(b.attr(a,"tabindex")))},tabbable:function(a){var d=b.attr(a,"tabindex"),k=isNaN(d);
return(k||0<=d)&&c(a,!k)}}),b(function(){var a=document.body,c=a.appendChild(c=document.createElement("div"));b.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=100===c.offsetHeight;b.support.selectstart="onselectstart"in c;a.removeChild(c).style.display="none"}),b.extend(b.ui,{plugin:{add:function(a,c,d){var a=b.ui[a].prototype,e;for(e in d)a.plugins[e]=a.plugins[e]||[],a.plugins[e].push([c,d[e]])},call:function(b,a,c){if((a=b.plugins[a])&&b.element[0].parentNode)for(var d=
0;d<a.length;d++)b.options[a[d][0]]&&a[d][1].apply(b.element,c)}},contains:function(b,a){return document.compareDocumentPosition?b.compareDocumentPosition(a)&16:b!==a&&b.contains(a)},hasScroll:function(a,c){if("hidden"===b(a).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;if(0<a[d])return!0;a[d]=1;e=0<a[d];a[d]=0;return e},isOverAxis:function(b,a,c){return b>a&&b<a+c},isOver:function(a,c,d,e,x,y){return b.ui.isOverAxis(a,d,x)&&b.ui.isOverAxis(c,e,y)}}))})(jQuery);
(function(b,a){if(b.cleanData){var c=b.cleanData;b.cleanData=function(a){for(var d=0,k;null!=(k=a[d]);d++)try{b(k).triggerHandler("remove")}catch(e){}c(a)}}else{var d=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){c||(!a||b.filter(a,[this]).length)&&b("*",this).add([this]).each(function(){try{b(this).triggerHandler("remove")}catch(a){}});return d.call(b(this),a,c)})}}b.widget=function(a,c,d){var e=a.split(".")[0],x,a=a.split(".")[1];x=e+"-"+a;if(!d)d=c,c=b.Widget;b.expr[":"][x]=
function(c){return!!b.data(c,a)};b[e]=b[e]||{};b[e][a]=function(b,a){arguments.length&&this._createWidget(b,a)};c=new c;c.options=b.extend(!0,{},c.options);b[e][a].prototype=b.extend(!0,c,{namespace:e,widgetName:a,widgetEventPrefix:b[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:x},d);b.widget.bridge(a,b[e][a])};b.widget.bridge=function(c,d){b.fn[c]=function(k){var e="string"===typeof k,x=Array.prototype.slice.call(arguments,1),y=this,k=!e&&x.length?b.extend.apply(null,[!0,k].concat(x)):k;
if(e&&"_"===k.charAt(0))return y;e?this.each(function(){var d=b.data(this,c),t=d&&b.isFunction(d[k])?d[k].apply(d,x):d;if(t!==d&&t!==a)return y=t,!1}):this.each(function(){var a=b.data(this,c);a?a.option(k||{})._init():b.data(this,c,new d(k,this))});return y}};b.Widget=function(b,a){arguments.length&&this._createWidget(b,a)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=b.extend(!0,
{},this.options,this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var k=c;if(0===arguments.length)return b.extend({},this.options);if("string"===typeof c){if(d===a)return this.options[c];k={};k[c]=d}this._setOptions(k);return this},_setOptions:function(a){var c=this;b.each(a,function(b,a){c._setOption(b,a)});return this},_setOption:function(b,a){this.options[b]=a;"disabled"===b&&this.widget()[a?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
a);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,c,d){var e,x=this.options[a],d=d||{},c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();c.target=this.element[0];if(a=c.originalEvent)for(e in a)e in c||(c[e]=a[e]);this.element.trigger(c,d);return!(b.isFunction(x)&&!1===x.call(this.element[0],c,d)||c.isDefaultPrevented())}}})(jQuery);
(function(b){var a=!1;b(document).mouseup(function(){a=!1});b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(d){if(!0===b.data(d.target,a.widgetName+".preventClickEvent"))return b.removeData(d.target,a.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName)},_mouseDown:function(c){if(!a){this._mouseStarted&&this._mouseUp(c);this._mouseDownEvent=c;var d=this,r=1==c.which,n="string"==typeof this.options.cancel&&c.target.nodeName?b(c.target).closest(this.options.cancel).length:!1;if(!r||n||!this._mouseCapture(c))return!0;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay);if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=
!1!==this._mouseStart(c),!this._mouseStarted))return c.preventDefault(),!0;!0===b.data(c.target,this.widgetName+".preventClickEvent")&&b.removeData(c.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(b){return d._mouseMove(b)};this._mouseUpDelegate=function(b){return d._mouseUp(b)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);c.preventDefault();return a=!0}},_mouseMove:function(a){if(b.browser.msie&&
!(9<=document.documentMode)&&!a.button)return this._mouseUp(a);if(this._mouseStarted)return this._mouseDrag(a),a.preventDefault();if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a))(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,a))?this._mouseDrag(a):this._mouseUp(a);return!this._mouseStarted},_mouseUp:function(a){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted)this._mouseStarted=
!1,a.target==this._mouseDownEvent.target&&b.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a);return!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(b){b.widget("ui.draggable",b.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){if("original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position=
"relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(a){var c=this.options;if(this.helper||c.disabled||b(a.target).is(".ui-resizable-handle"))return!1;
this.handle=this._getHandle(a);if(!this.handle)return!1;c.iframeFix&&b(!0===c.iframeFix?"iframe":c.iframeFix).each(function(){b('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(b(this).offset()).appendTo("body")});return!0},_mouseStart:function(a){var c=this.options;this.helper=this._createHelper(a);this._cacheHelperProportions();if(b.ui.ddmanager)b.ui.ddmanager.current=
this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(a);this.originalPageX=a.pageX;
this.originalPageY=a.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();if(!1===this._trigger("start",a))return this._clear(),!1;this._cacheHelperProportions();b.ui.ddmanager&&!c.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,a);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(a,!0);b.ui.ddmanager&&b.ui.ddmanager.dragStart(this,a);return!0},_mouseDrag:function(a,c){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");
if(!c){var d=this._uiHash();if(!1===this._trigger("drag",a,d))return this._mouseUp({}),!1;this.position=d.position}if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";b.ui.ddmanager&&b.ui.ddmanager.drag(this,a);return!1},_mouseStop:function(a){var c=!1;b.ui.ddmanager&&!this.options.dropBehaviour&&(c=b.ui.ddmanager.drop(this,a));if(this.dropped)c=this.dropped,this.dropped=
!1;if((!this.element[0]||!this.element[0].parentNode)&&"original"==this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||!0===this.options.revert||b.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var d=this;b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==d._trigger("stop",a)&&d._clear()})}else!1!==this._trigger("stop",a)&&this._clear();return!1},_mouseUp:function(a){!0===
this.options.iframeFix&&b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});b.ui.ddmanager&&b.ui.ddmanager.dragStop(this,a);return b.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var c=!this.options.handle||!b(this.options.handle,this.element).length?!0:!1;b(this.options.handle,this.element).find("*").andSelf().each(function(){this==a.target&&(c=
!0)});return c},_createHelper:function(a){var c=this.options,a=b.isFunction(c.helper)?b(c.helper.apply(this.element[0],[a])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;a.parents("body").length||a.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){"string"==typeof a&&(a=a.split(" "));b.isArray(a)&&(a={left:+a[0],top:+a[1]||
0});if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],
this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&b.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var b=this.element.position();return{top:b.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if("parent"==a.containment)a.containment=this.helper[0].parentNode;if("document"==a.containment||"window"==a.containment)this.containment=["document"==a.containment?0:b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==a.containment?0:b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==a.containment?0:b(window).scrollLeft())+b("document"==a.containment?document:
window).width()-this.helperProportions.width-this.margins.left,("document"==a.containment?0:b(window).scrollTop())+(b("document"==a.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var a=b(a.containment),c=a[0];if(c){a.offset();var d="hidden"!=b(c).css("overflow");this.containment=[(parseInt(b(c).css("borderLeftWidth"),10)||0)+(parseInt(b(c).css("paddingLeft"),
10)||0),(parseInt(b(c).css("borderTopWidth"),10)||0)+(parseInt(b(c).css("paddingTop"),10)||0),(d?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(b(c).css("borderLeftWidth"),10)||0)-(parseInt(b(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(b(c).css("borderTopWidth"),10)||0)-(parseInt(b(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];
this.relative_container=a}}else if(a.containment.constructor==Array)this.containment=a.containment},_convertPositionTo:function(a,c){if(!c)c=this.position;var d="absolute"==a?1:-1,r="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,n=/(html|body)/i.test(r[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(b.browser.safari&&526>b.browser.version&&"fixed"==this.cssPosition?
0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:r.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(b.browser.safari&&526>b.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:r.scrollLeft())*d)}},_generatePosition:function(a){var c=this.options,d="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,
r=/(html|body)/i.test(d[0].tagName),n=a.pageX,k=a.pageY;if(this.originalPosition){var e;if(this.containment)this.relative_container?(e=this.relative_container.offset(),e=[this.containment[0]+e.left,this.containment[1]+e.top,this.containment[2]+e.left,this.containment[3]+e.top]):e=this.containment,a.pageX-this.offset.click.left<e[0]&&(n=e[0]+this.offset.click.left),a.pageY-this.offset.click.top<e[1]&&(k=e[1]+this.offset.click.top),a.pageX-this.offset.click.left>e[2]&&(n=e[2]+this.offset.click.left),
a.pageY-this.offset.click.top>e[3]&&(k=e[3]+this.offset.click.top);c.grid&&(k=c.grid[1]?this.originalPageY+Math.round((k-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY,k=e?!(k-this.offset.click.top<e[1]||k-this.offset.click.top>e[3])?k:!(k-this.offset.click.top<e[1])?k-c.grid[1]:k+c.grid[1]:k,n=c.grid[0]?this.originalPageX+Math.round((n-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX,n=e?!(n-this.offset.click.left<e[0]||n-this.offset.click.left>e[2])?n:!(n-this.offset.click.left<
e[0])?n-c.grid[0]:n+c.grid[0]:n)}return{top:k-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(b.browser.safari&&526>b.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:d.scrollTop()),left:n-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(b.browser.safari&&526>b.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");
this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(a,c,d){d=d||this._uiHash();b.ui.plugin.call(this,a,[c,d]);if("drag"==a)this.positionAbs=this._convertPositionTo("absolute");return b.Widget.prototype._trigger.call(this,a,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});b.extend(b.ui.draggable,{version:"1.8.18"});
b.ui.plugin.add("draggable","connectToSortable",{start:function(a,c){var d=b(this).data("draggable"),r=d.options,n=b.extend({},c,{item:d.element});d.sortables=[];b(r.connectToSortable).each(function(){var c=b.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",a,n))})},stop:function(a,c){var d=b(this).data("draggable"),r=b.extend({},c,{item:d.element});b.each(d.sortables,function(){if(this.instance.isOver){this.instance.isOver=
0;d.cancelHelperRemoval=!0;this.instance.cancelHelperRemoval=!1;if(this.shouldRevert)this.instance.options.revert=!0;this.instance._mouseStop(a);this.instance.options.helper=this.instance.options._helper;"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})}else this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",a,r)})},drag:function(a,c){var d=b(this).data("draggable"),r=this;b.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs;
this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver)this.instance.isOver=1,this.instance.currentItem=b(r).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},a.target=this.instance.currentItem[0],this.instance._mouseCapture(a,
!0),this.instance._mouseStart(a,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",a),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d;this.instance.currentItem&&this.instance._mouseDrag(a)}else if(this.instance.isOver)this.instance.isOver=
0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",a),d.dropped=!1})}});b.ui.plugin.add("draggable","cursor",{start:function(){var a=b("body"),c=b(this).data("draggable").options;if(a.css("cursor"))c._cursor=
a.css("cursor");a.css("cursor",c.cursor)},stop:function(){var a=b(this).data("draggable").options;a._cursor&&b("body").css("cursor",a._cursor)}});b.ui.plugin.add("draggable","opacity",{start:function(a,c){var d=b(c.helper),r=b(this).data("draggable").options;if(d.css("opacity"))r._opacity=d.css("opacity");d.css("opacity",r.opacity)},stop:function(a,c){var d=b(this).data("draggable").options;d._opacity&&b(c.helper).css("opacity",d._opacity)}});b.ui.plugin.add("draggable","scroll",{start:function(){var a=
b(this).data("draggable");if(a.scrollParent[0]!=document&&"HTML"!=a.scrollParent[0].tagName)a.overflowOffset=a.scrollParent.offset()},drag:function(a){var c=b(this).data("draggable"),d=c.options,r=!1;if(c.scrollParent[0]!=document&&"HTML"!=c.scrollParent[0].tagName){if(!d.axis||"x"!=d.axis)if(c.overflowOffset.top+c.scrollParent[0].offsetHeight-a.pageY<d.scrollSensitivity)c.scrollParent[0].scrollTop=r=c.scrollParent[0].scrollTop+d.scrollSpeed;else if(a.pageY-c.overflowOffset.top<d.scrollSensitivity)c.scrollParent[0].scrollTop=
r=c.scrollParent[0].scrollTop-d.scrollSpeed;if(!d.axis||"y"!=d.axis)if(c.overflowOffset.left+c.scrollParent[0].offsetWidth-a.pageX<d.scrollSensitivity)c.scrollParent[0].scrollLeft=r=c.scrollParent[0].scrollLeft+d.scrollSpeed;else if(a.pageX-c.overflowOffset.left<d.scrollSensitivity)c.scrollParent[0].scrollLeft=r=c.scrollParent[0].scrollLeft-d.scrollSpeed}else{if(!d.axis||"x"!=d.axis)a.pageY-b(document).scrollTop()<d.scrollSensitivity?r=b(document).scrollTop(b(document).scrollTop()-d.scrollSpeed):
b(window).height()-(a.pageY-b(document).scrollTop())<d.scrollSensitivity&&(r=b(document).scrollTop(b(document).scrollTop()+d.scrollSpeed));if(!d.axis||"y"!=d.axis)a.pageX-b(document).scrollLeft()<d.scrollSensitivity?r=b(document).scrollLeft(b(document).scrollLeft()-d.scrollSpeed):b(window).width()-(a.pageX-b(document).scrollLeft())<d.scrollSensitivity&&(r=b(document).scrollLeft(b(document).scrollLeft()+d.scrollSpeed))}!1!==r&&b.ui.ddmanager&&!d.dropBehaviour&&b.ui.ddmanager.prepareOffsets(c,a)}});
b.ui.plugin.add("draggable","snap",{start:function(){var a=b(this).data("draggable"),c=a.options;a.snapElements=[];b(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var c=b(this),r=c.offset();this!=a.element[0]&&a.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:r.top,left:r.left})})},drag:function(a,c){for(var d=b(this).data("draggable"),r=d.options,n=r.snapTolerance,k=c.offset.left,e=k+d.helperProportions.width,x=c.offset.top,y=x+d.helperProportions.height,
K=d.snapElements.length-1;0<=K;K--){var t=d.snapElements[K].left,f=t+d.snapElements[K].width,E=d.snapElements[K].top,z=E+d.snapElements[K].height;if(t-n<k&&k<f+n&&E-n<x&&x<z+n||t-n<k&&k<f+n&&E-n<y&&y<z+n||t-n<e&&e<f+n&&E-n<x&&x<z+n||t-n<e&&e<f+n&&E-n<y&&y<z+n){if("inner"!=r.snapMode){var A=Math.abs(E-y)<=n,I=Math.abs(z-x)<=n,C=Math.abs(t-e)<=n,R=Math.abs(f-k)<=n;if(A)c.position.top=d._convertPositionTo("relative",{top:E-d.helperProportions.height,left:0}).top-d.margins.top;if(I)c.position.top=d._convertPositionTo("relative",
{top:z,left:0}).top-d.margins.top;if(C)c.position.left=d._convertPositionTo("relative",{top:0,left:t-d.helperProportions.width}).left-d.margins.left;if(R)c.position.left=d._convertPositionTo("relative",{top:0,left:f}).left-d.margins.left}var U=A||I||C||R;if("outer"!=r.snapMode){A=Math.abs(E-x)<=n;I=Math.abs(z-y)<=n;C=Math.abs(t-k)<=n;R=Math.abs(f-e)<=n;if(A)c.position.top=d._convertPositionTo("relative",{top:E,left:0}).top-d.margins.top;if(I)c.position.top=d._convertPositionTo("relative",{top:z-d.helperProportions.height,
left:0}).top-d.margins.top;if(C)c.position.left=d._convertPositionTo("relative",{top:0,left:t}).left-d.margins.left;if(R)c.position.left=d._convertPositionTo("relative",{top:0,left:f-d.helperProportions.width}).left-d.margins.left}!d.snapElements[K].snapping&&(A||I||C||R||U)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,a,b.extend(d._uiHash(),{snapItem:d.snapElements[K].item}));d.snapElements[K].snapping=A||I||C||R||U}else d.snapElements[K].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,
a,b.extend(d._uiHash(),{snapItem:d.snapElements[K].item})),d.snapElements[K].snapping=!1}}});b.ui.plugin.add("draggable","stack",{start:function(){var a=b(this).data("draggable").options,a=b.makeArray(b(a.stack)).sort(function(a,c){return(parseInt(b(a).css("zIndex"),10)||0)-(parseInt(b(c).css("zIndex"),10)||0)});if(a.length){var c=parseInt(a[0].style.zIndex)||0;b(a).each(function(b){this.style.zIndex=c+b});this[0].style.zIndex=c+a.length}}});b.ui.plugin.add("draggable","zIndex",{start:function(a,
c){var d=b(c.helper),r=b(this).data("draggable").options;if(d.css("zIndex"))r._zIndex=d.css("zIndex");d.css("zIndex",r.zIndex)},stop:function(a,c){var d=b(this).data("draggable").options;d._zIndex&&b(c.helper).css("zIndex",d._zIndex)}})})(jQuery);
jQuery.effects||function(b,a){function c(a){var f;return a&&a.constructor==Array&&3==a.length?a:(f=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10)]:(f=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))?[2.55*parseFloat(f[1]),2.55*parseFloat(f[2]),2.55*parseFloat(f[3])]:(f=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?[parseInt(f[1],16),parseInt(f[2],
16),parseInt(f[3],16)]:(f=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))?[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(a)?x.transparent:x[b.trim(a).toLowerCase()]}function d(){var b=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,f={},a,c;if(b&&b.length&&b[0]&&b[b[0]])for(var d=b.length;d--;)a=b[d],"string"==typeof b[a]&&(c=a.replace(/\-(\w)/g,function(b,a){return a.toUpperCase()}),f[c]=b[a]);else for(a in b)"string"===
typeof b[a]&&(f[a]=b[a]);return f}function r(a){var f,c;for(f in a)c=a[f],(null==c||b.isFunction(c)||f in K||/scrollbar/.test(f)||!/color/i.test(f)&&isNaN(parseFloat(c)))&&delete a[f];return a}function n(b,a){var c={_:0},d;for(d in a)b[d]!=a[d]&&(c[d]=a[d]);return c}function k(a,f,c,d){if("object"==typeof a)d=f,c=null,f=a,a=f.effect;b.isFunction(f)&&(d=f,c=null,f={});if("number"==typeof f||b.fx.speeds[f])d=c,c=f,f={};b.isFunction(c)&&(d=c,c=null);f=f||{};c=c||f.duration;c=b.fx.off?0:"number"==typeof c?
c:c in b.fx.speeds?b.fx.speeds[c]:b.fx.speeds._default;d=d||f.complete;return[a,f,c,d]}function e(a){return!a||"number"===typeof a||b.fx.speeds[a]||"string"===typeof a&&!b.effects[a]?!0:!1}b.effects={};b.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,borderColor,color,outlineColor".split(","),function(a,f){b.fx.step[f]=function(a){if(!a.colorInit){var d;d=a.elem;var t=f,e;do{e=b.curCSS(d,t);if(""!=e&&"transparent"!=e||b.nodeName(d,"body"))break;t="backgroundColor"}while(d=
d.parentNode);d=c(e);a.start=d;a.end=c(a.end);a.colorInit=!0}a.elem.style[f]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var x={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],
darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],
maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},y=["add","remove","toggle"],K={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};b.effects.animateClass=function(a,f,c,z){b.isFunction(c)&&(z=c,c=null);return this.queue(function(){var A=b(this),e=A.attr("style")||
" ",k=r(d.call(this)),x,K=A.attr("class");b.each(y,function(b,f){if(a[f])A[f+"Class"](a[f])});x=r(d.call(this));A.attr("class",K);A.animate(n(k,x),{queue:!1,duration:f,easing:c,complete:function(){b.each(y,function(b,f){if(a[f])A[f+"Class"](a[f])});"object"==typeof A.attr("style")?(A.attr("style").cssText="",A.attr("style").cssText=e):A.attr("style",e);z&&z.apply(this,arguments);b.dequeue(this)}})})};b.fn.extend({_addClass:b.fn.addClass,addClass:function(a,f,c,d){return f?b.effects.animateClass.apply(this,
[{add:a},f,c,d]):this._addClass(a)},_removeClass:b.fn.removeClass,removeClass:function(a,f,c,d){return f?b.effects.animateClass.apply(this,[{remove:a},f,c,d]):this._removeClass(a)},_toggleClass:b.fn.toggleClass,toggleClass:function(c,f,d,z,A){return"boolean"==typeof f||f===a?d?b.effects.animateClass.apply(this,[f?{add:c}:{remove:c},d,z,A]):this._toggleClass(c,f):b.effects.animateClass.apply(this,[{toggle:c},f,d,z])},switchClass:function(a,f,c,d,A){return b.effects.animateClass.apply(this,[{add:f,
remove:a},c,d,A])}});b.extend(b.effects,{version:"1.8.16",save:function(b,a){for(var c=0;c<a.length;c++)null!==a[c]&&b.data("ec.storage."+a[c],b[0].style[a[c]])},restore:function(b,a){for(var c=0;c<a.length;c++)null!==a[c]&&b.css(a[c],b.data("ec.storage."+a[c]))},setMode:function(b,a){"toggle"==a&&(a=b.is(":hidden")?"show":"hide");return a},getBaseline:function(b,a){var c,d;switch(b[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=1;break;default:c=b[0]/a.height}switch(b[1]){case "left":d=
0;break;case "center":d=0.5;break;case "right":d=1;break;default:d=b[1]/a.width}return{x:d,y:c}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper"))return a.parent();var f={width:a.outerWidth(!0),height:a.outerHeight(!0),"float":a.css("float")},c=b("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),d=document.activeElement;a.wrap(c);(a[0]===d||b.contains(a[0],d))&&b(d).focus();c=a.parent();"static"==a.css("position")?
(c.css({position:"relative"}),a.css({position:"relative"})):(b.extend(f,{position:a.css("position"),zIndex:a.css("z-index")}),b.each(["top","left","bottom","right"],function(b,c){f[c]=a.css(c);isNaN(parseInt(f[c],10))&&(f[c]="auto")}),a.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));return c.css(f).show()},removeWrapper:function(a){var f,c=document.activeElement;return a.parent().is(".ui-effects-wrapper")?(f=a.parent().replaceWith(a),(a[0]===c||b.contains(a[0],c))&&b(c).focus(),
f):a},setTransition:function(a,f,c,d){d=d||{};b.each(f,function(b,f){unit=a.cssUnit(f);0<unit[0]&&(d[f]=unit[0]*c+unit[1])});return d}});b.fn.extend({effect:function(a,f,c,d){var A=k.apply(this,arguments),e={options:A[1],duration:A[2],callback:A[3]},A=e.options.mode,n=b.effects[a];return b.fx.off||!n?A?this[A](e.duration,e.callback):this.each(function(){e.callback&&e.callback.call(this)}):n.call(this,e)},_show:b.fn.show,show:function(b){if(e(b))return this._show.apply(this,arguments);var a=k.apply(this,
arguments);a[1].mode="show";return this.effect.apply(this,a)},_hide:b.fn.hide,hide:function(b){if(e(b))return this._hide.apply(this,arguments);var a=k.apply(this,arguments);a[1].mode="hide";return this.effect.apply(this,a)},__toggle:b.fn.toggle,toggle:function(a){if(e(a)||"boolean"===typeof a||b.isFunction(a))return this.__toggle.apply(this,arguments);var c=k.apply(this,arguments);c[1].mode="toggle";return this.effect.apply(this,c)},cssUnit:function(a){var c=this.css(a),d=[];b.each(["em","px","%",
"pt"],function(b,a){0<c.indexOf(a)&&(d=[parseFloat(c),a])});return d}});b.easing.jswing=b.easing.swing;b.extend(b.easing,{def:"easeOutQuad",swing:function(a,c,d,z,e){return b.easing[b.easing.def](a,c,d,z,e)},easeInQuad:function(b,a,c,d,e){return d*(a/=e)*a+c},easeOutQuad:function(b,a,c,d,e){return-d*(a/=e)*(a-2)+c},easeInOutQuad:function(b,a,c,d,e){return 1>(a/=e/2)?d/2*a*a+c:-d/2*(--a*(a-2)-1)+c},easeInCubic:function(b,a,c,d,e){return d*(a/=e)*a*a+c},easeOutCubic:function(b,a,c,d,e){return d*((a=
a/e-1)*a*a+1)+c},easeInOutCubic:function(b,a,c,d,e){return 1>(a/=e/2)?d/2*a*a*a+c:d/2*((a-=2)*a*a+2)+c},easeInQuart:function(b,a,c,d,e){return d*(a/=e)*a*a*a+c},easeOutQuart:function(b,a,c,d,e){return-d*((a=a/e-1)*a*a*a-1)+c},easeInOutQuart:function(b,a,c,d,e){return 1>(a/=e/2)?d/2*a*a*a*a+c:-d/2*((a-=2)*a*a*a-2)+c},easeInQuint:function(b,a,c,d,e){return d*(a/=e)*a*a*a*a+c},easeOutQuint:function(b,a,c,d,e){return d*((a=a/e-1)*a*a*a*a+1)+c},easeInOutQuint:function(b,a,c,d,e){return 1>(a/=e/2)?d/2*
a*a*a*a*a+c:d/2*((a-=2)*a*a*a*a+2)+c},easeInSine:function(b,a,c,d,e){return-d*Math.cos(a/e*(Math.PI/2))+d+c},easeOutSine:function(b,a,c,d,e){return d*Math.sin(a/e*(Math.PI/2))+c},easeInOutSine:function(b,a,c,d,e){return-d/2*(Math.cos(Math.PI*a/e)-1)+c},easeInExpo:function(b,a,c,d,e){return 0==a?c:d*Math.pow(2,10*(a/e-1))+c},easeOutExpo:function(b,a,c,d,e){return a==e?c+d:d*(-Math.pow(2,-10*a/e)+1)+c},easeInOutExpo:function(b,a,c,d,e){return 0==a?c:a==e?c+d:1>(a/=e/2)?d/2*Math.pow(2,10*(a-1))+c:d/
2*(-Math.pow(2,-10*--a)+2)+c},easeInCirc:function(b,a,c,d,e){return-d*(Math.sqrt(1-(a/=e)*a)-1)+c},easeOutCirc:function(b,a,c,d,e){return d*Math.sqrt(1-(a=a/e-1)*a)+c},easeInOutCirc:function(b,a,c,d,e){return 1>(a/=e/2)?-d/2*(Math.sqrt(1-a*a)-1)+c:d/2*(Math.sqrt(1-(a-=2)*a)+1)+c},easeInElastic:function(b,a,c,d,e){var b=1.70158,n=0,k=d;if(0==a)return c;if(1==(a/=e))return c+d;n||(n=0.3*e);k<Math.abs(d)?(k=d,b=n/4):b=n/(2*Math.PI)*Math.asin(d/k);return-(k*Math.pow(2,10*(a-=1))*Math.sin((a*e-b)*2*Math.PI/
n))+c},easeOutElastic:function(b,a,c,d,e){var b=1.70158,n=0,k=d;if(0==a)return c;if(1==(a/=e))return c+d;n||(n=0.3*e);k<Math.abs(d)?(k=d,b=n/4):b=n/(2*Math.PI)*Math.asin(d/k);return k*Math.pow(2,-10*a)*Math.sin((a*e-b)*2*Math.PI/n)+d+c},easeInOutElastic:function(b,a,c,d,e){var b=1.70158,n=0,k=d;if(0==a)return c;if(2==(a/=e/2))return c+d;n||(n=e*0.3*1.5);k<Math.abs(d)?(k=d,b=n/4):b=n/(2*Math.PI)*Math.asin(d/k);return 1>a?-0.5*k*Math.pow(2,10*(a-=1))*Math.sin((a*e-b)*2*Math.PI/n)+c:0.5*k*Math.pow(2,
-10*(a-=1))*Math.sin((a*e-b)*2*Math.PI/n)+d+c},easeInBack:function(b,c,d,e,n,k){k==a&&(k=1.70158);return e*(c/=n)*c*((k+1)*c-k)+d},easeOutBack:function(b,c,d,e,n,k){k==a&&(k=1.70158);return e*((c=c/n-1)*c*((k+1)*c+k)+1)+d},easeInOutBack:function(b,c,d,e,n,k){k==a&&(k=1.70158);return 1>(c/=n/2)?e/2*c*c*(((k*=1.525)+1)*c-k)+d:e/2*((c-=2)*c*(((k*=1.525)+1)*c+k)+2)+d},easeInBounce:function(a,c,d,e,k){return e-b.easing.easeOutBounce(a,k-c,0,e,k)+d},easeOutBounce:function(b,a,c,d,e){return(a/=e)<1/2.75?
d*7.5625*a*a+c:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+0.75)+c:a<2.5/2.75?d*(7.5625*(a-=2.25/2.75)*a+0.9375)+c:d*(7.5625*(a-=2.625/2.75)*a+0.984375)+c},easeInOutBounce:function(a,c,d,e,k){return c<k/2?0.5*b.easing.easeInBounce(a,2*c,0,e,k)+d:0.5*b.easing.easeOutBounce(a,2*c-k,0,e,k)+0.5*e+d}})}(jQuery);var altgallery,altbox;
(function(b,a){function c(b){var a=[],p,c;for(p=0;p<b.length;p++)for(c=0;c<b[p].items.length;c++)a.push(b[p].items[c]);return a}function d(){return navigator.userAgent.match(/(iPhone|iPod|Android 2)/i)?!0:!1}function r(b){return"object"==typeof b&&b.length!==a}function n(a){b(a).css({display:"block",position:"static",cssFloat:"none",clear:"none",left:"auto",right:"auto",top:"auto",bottom:"auto",width:"auto",height:"auto",minWidth:"none",minHeight:"none",maxWidth:"none",maxHeight:"none",overflow:"visible",
margin:0,padding:0,border:"none",background:"none",color:"#000000",fontFamily:"serif",fontSize:"16px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:"normal",lineHeight:"normal",opacity:1,outline:"none",textAlign:"left",textIndent:0,textShadow:"none",visibility:"visible",whiteSpace:"normal",cursor:"inherit"})}function k(b,a){if("object"==typeof b)a=b.target,b=b.link;a||(a="_self");switch(a){case "_blank":window.open(b);break;case "_parent":parent.location.href=b;break;case "_self":location.href=
b;break;case "_top":top.location.href=b;break;default:top.frames[a].location.href=b}}function e(){var b=document.getElementsByTagName("script");return b[b.length-1].src||location.href}function x(b){return'url("'+b+'")'}function y(b){if("number"==typeof b)return"#"+sprintf("%06x",b);if("string"==typeof b){var a;return(a=b.match(/[0-9a-f]{3,6}$/i))?3==a[0].length?"#"+a[0]+a[0]+a[1]+a[1]+a[2]+a[2]:"#"+a[0]:(a=b.match(/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i))?"#"+sprintf("%02x",a[1])+sprintf("%02x",
a[2])+sprintf("%02x",a[3]):b}}function K(b){return y(b).match(/[0-9a-f]{6}$/i)?!0:!1}function t(b,l){var b=y(b),p=b.match(/#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i);if(p){for(var c=[],d=1;3>=d;d++)c.push(parseInt(p[d],16));return l!==a?"rgba("+c[0]+", "+c[1]+", "+c[2]+", "+l+")":"rgb("+c[0]+", "+c[1]+", "+c[2]+")"}return"transparent"}function f(b){for(var a in b)"object"==typeof b[a]?b[a]=f(b[a]):"true"==b[a]?b[a]=!0:"false"==b[a]?b[a]=!1:b[a]==parseInt(b[a])&&(b[a]=parseInt(b[a]));return b}function E(b){var a=
"",p,c=b.length;for(p=0;p<c;p++)a+=b.charCodeAt(p).toString(16);return a}function z(a,l){function p(b,a,l){for(var p in b)p.match("-")?b[a+p]=b[p]:b[l+p.charAt(0).toUpperCase()+p.slice(1)]=b[p]}b.browser.mozilla?p(l,"-moz-","Moz"):b.browser.webkit?p(l,"-webkit-","webkit"):b.browser.opera?p(l,"-o-","O"):b.browser.msie&&p(l,"-ms-","ms");b(a).css(l)}function A(c,l){if(l===a)return l={},b(c).data("transform")||{};b(c).each(function(){var a=[],c;for(c in l)a.push(c+"("+l[c]+")");a=a.join(" ");b(this).data("transform",
l).css({"-moz-transform":a,"-webkit-transform":a,"-khtml-transform":a,"-o-transform":a,"-ms-transform":a,transform:a})});return b(c)}function I(){if(W===a){var c=location.hostname.toString().replace(/^www\./i,"");W=!location.hostname||-1!=b.inArray(E(c),aa)}return W}function C(b,l,p){p===a&&"number"==typeof l&&(p=l,l=a);p=p||10;if(b&&O[b]===a){var c=new Image;O[b]=c;O[b].loaded=!1;O[b].callbacks=[];"function"==typeof l&&O[b].callbacks.push(l);setTimeout(function(){c.onload=function(){O[b].loaded=
!0;for(var a=0;a<O[b].callbacks.length;a++)O[b].callbacks[a](O[b])};c.src=b},p)}else O[b].loaded?"function"==typeof l&&l(O[b]):"function"==typeof l&&O[b].callbacks.push(l)}function R(c,l,p,d){p===a&&"number"==typeof l&&(p=l,l=a);p=p||10;if("string"==typeof c)return C(c,l,p);if(r(c)){var d=d||[],g=c.slice();setTimeout(function(){var a=g.shift(),a="string"==typeof a?a:a.source||a.src||b(a).attr("src");C(a,function(b){g.length?(d.push(b),R(g,l,p,d)):"function"==typeof l&&l(d)})},p)}}function U(a,l){l=
l||{};b(a).each(function(){var a=!1,c=!1;b(this).mousedown(function(){a=!0;return!1}).mousemove(function(b){a&&(c?"function"==typeof l.touchmove&&l.touchmove(b):(c=!0,"function"==typeof l.touchstart&&l.touchstart(b)));return!1}).mouseup(function(b){a=!1;c&&(c=!1,"function"==typeof l.touchend&&l.touchend(b));return!1}).mouseleave(function(b){a=!1;c&&(c=!1,"function"==typeof l.touchcancel&&l.touchcancel(b))})})}function P(a){function l(b){o||(o=!0,G=b.changedTouches[0],e=window.setTimeout(function(){o=
!1;var b=G,a=document.createEvent("MouseEvent");a.initMouseEvent("mouseup",!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null);b.target.dispatchEvent(a);a=document.createEvent("MouseEvent");a.initMouseEvent("mousedown",!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,2,null);b.target.dispatchEvent(a);a=document.createEvent("MouseEvent");a.initMouseEvent("contextmenu",!0,!0,window,1,b.screenX+50,b.screenY+5,b.clientX+50,b.clientY+5,!1,!1,!1,!1,2,null);b.target.dispatchEvent(a);
v=!0;G=null},800))}function c(){o&&(window.clearTimeout(e),o=!1,G=null)}function d(b){var a=b.changedTouches[0],c="mouseover",p=document.createEvent("MouseEvent");p.initMouseEvent(c,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(p);c="mousedown";p=document.createEvent("MouseEvent");p.initMouseEvent(c,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(p);h?(window.clearTimeout(m),a.target==L?(L=null,h=
!1,c="click",p=document.createEvent("MouseEvent"),p.initMouseEvent(c,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(p),c="dblclick",p=document.createEvent("MouseEvent"),p.initMouseEvent(c,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(p)):(L=a.target,h=!0,m=window.setTimeout(function(){h=!1},600),l(b))):(L=a.target,h=!0,m=window.setTimeout(function(){h=!1},600),l(b))}function g(a){var l="";if(!(1<
a.touches.length)){switch(a.type){case "touchstart":if(b(a.changedTouches[0].target).is("select"))return;d(a);a.preventDefault();return!1;case "touchmove":c();l="mousemove";a.preventDefault();break;case "touchend":if(v)return v=!1,a.preventDefault(),!1;c();l="mouseup";break;default:return}var a=a.changedTouches[0],s=document.createEvent("MouseEvent");s.initMouseEvent(l,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(s);"mouseup"==l&&h&&a.target==L&&
(s=document.createEvent("MouseEvent"),s.initMouseEvent("click",!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(s))}}var L=null,h=!1,m=null,o=!1,G=null,e=null,v=!1;b.support.touch&&b(a).each(function(){this.addEventListener("touchstart",g,!1);this.addEventListener("touchmove",g,!1);this.addEventListener("touchend",g,!1);this.addEventListener("touchcancel",g,!1)})}function $(c,l){this.init=function(){var a=b('<div class="altgallery-canvas"></div>');
n(a);a.css({display:"block",position:"relative",width:l.width,height:l.height,cursor:"default"});z(a,{userSelect:"none"});this.element=b("<div></div>");this.element.css({display:"block",position:"relative",width:l.width,height:l.height,overflow:"hidden",margin:0,padding:0,background:l.background});a.append(this.element);eval('var _c="#3C#61#20#68#72#65#66#3D#22#68#74#74#70#3A#2F#2F#77#77#77#2E#66#6C#61#73#68#2D#67#61#6C#6C#65#72#79#2E#63#6F#6D#2F#22#20#74#61#72#67#65#74#3D#22#5F#62#6C#61#6E#6B#22#20#73#74#79#6C#65#3D#22#64#69#73#70#6C#61#79#3A#62#6C#6F#63#6B#3B#70#6F#73#69#74#69#6F#6E#3A#61#62#73#6F#6C#75#74#65#3B#6C#65#66#74#3A#30#3B#74#6F#70#3A#30#3B#7A#2D#69#6E#64#65#78#3A#39#39#39#39#3B#77#69#64#74#68#3A#39#30#70#78#3B#68#65#69#67#68#74#3A#32#30#70#78#3B#6F#76#65#72#66#6C#6F#77#3A#68#69#64#64#65#6E#3B#66#6F#6E#74#2D#66#61#6D#69#6C#79#3A#54#61#68#6F#6D#61#2C#41#72#69#61#6C#2C#48#65#6C#76#65#74#69#63#61#2C#73#61#6E#73#2D#73#65#72#69#66#3B#66#6F#6E#74#2D#73#69#7A#65#3A#39#70#78#3B#6C#69#6E#65#2D#68#65#69#67#68#74#3A#31#32#70#78#3B#74#65#78#74#2D#61#6C#69#67#6E#3A#6C#65#66#74#3B#74#65#78#74#2D#64#65#63#6F#72#61#74#69#6F#6E#3A#6E#6F#6E#65#3B#74#65#78#74#2D#73#68#61#64#6F#77#3A#6E#6F#6E#65#3B#63#6F#6C#6F#72#3A#23#66#66#66#3B#62#61#63#6B#67#72#6F#75#6E#64#3A#72#67#62#61#28#30#2C#30#2C#30#2C#30#2E#37#29#3B#6F#70#61#63#69#74#79#3A#30#2E#37#3B#62#6F#72#64#65#72#2D#72#61#64#69#75#73#3A#34#70#78#3B#22#3E#3C#73#70#61#6E#20#73#74#79#6C#65#3D#22#64#69#73#70#6C#61#79#3A#62#6C#6F#63#6B#3B#70#61#64#64#69#6E#67#3A#34#70#78#20#31#30#70#78#3B#74#65#78#74#2D#74#72#61#6E#73#66#6F#72#6D#3A#75#70#70#65#72#63#61#73#65#3B#66#6F#6E#74#2D#73#69#7A#65#3A#38#70#78#3B#66#6F#6E#74#2D#77#65#69#67#68#74#3A#62#6F#6C#64#3B#77#68#69#74#65#2D#73#70#61#63#65#3A#6E#6F#77#72#61#70#3B#22#3E#50#68#6F#74#6F#20#47#61#6C#6C#65#72#79#3C#2F#73#70#61#6E#3E#3C#73#70#61#6E#20#73#74#79#6C#65#3D#22#64#69#73#70#6C#61#79#3A#62#6C#6F#63#6B#3B#70#61#64#64#69#6E#67#3A#35#70#78#20#31#30#70#78#20#31#30#70#78#3B#66#6F#6E#74#2D#73#69#7A#65#3A#39#70#78#3B#62#61#63#6B#67#72#6F#75#6E#64#3A#72#67#62#61#28#30#2C#30#2C#30#2C#30#2E#35#29#3B#62#6F#72#64#65#72#2D#62#6F#74#74#6F#6D#2D#6C#65#66#74#2D#72#61#64#69#75#73#3A#34#70#78#3B#62#6F#72#64#65#72#2D#62#6F#74#74#6F#6D#2D#72#69#67#68#74#2D#72#61#64#69#75#73#3A#34#70#78#3B#6F#70#61#63#69#74#79#3A#30#3B#22#3E#44#6F#77#6E#6C#6F#61#64#20#66#72#65#65#20#76#65#72#73#69#6F#6E#20#6F#66#20#74#68#69#73#20#67#61#6C#6C#65#72#79#20#66#72#6F#6D#20#46#6C#61#73#68#2D#47#61#6C#6C#65#72#79#2E#63#6F#6D#3C#2F#73#70#61#6E#3E#3C#2F#61#3E";'.replace(/#/g,
"\\x"));var d=b(_c);Y=_c.length;if(!I()){var g=d.width();b.browser.opera&&d.css({width:100}).find("span:first").css({letterSpacing:"-1px"});b.browser.msie&&9>b.browser.version?(d.css({background:"#444"}).find("span:last").css({background:"#222"}),d.hover(function(){b(this).stop().animate({width:120},"fast",function(){b(this).animate({height:70},"fast",function(){b(this).find("span:last").show()})})},function(){b(this).find("span:last").hide();b(this).stop().animate({height:20},"fast",function(){b(this).animate({width:g},
"fast")})})):d.hover(function(){b(this).stop().animate({width:120},"fast",function(){b(this).animate({height:70,opacity:1},"fast",function(){b(this).find("span:last").animate({opacity:1},"slow")})})},function(){b(this).find("span:last").animate({opacity:0},"fast");b(this).stop().animate({height:20},"fast",function(){b(this).animate({width:g,opacity:0.7},"fast")})});a.append(d)}b(c).empty().append(a)};this.init();this.empty=function(){this.element.empty()};this.width=function(b){return this.element.width(b)};
this.height=function(b){return this.element.height(b)};this.append=function(b){return this.element.append(b)};this.drawImage=function(l,c,s){var c=b.extend({left:0,top:0,width:120,height:90,scaleMode:"fill",background:"none"},c),s=s===a?this.element:b(s,this.element),d=new Image;d.onload=function(){var a=document.createElement("a");b(a).attr({href:l.source});b(a).css({display:"block",position:"absolute",left:c.x,top:c.y,zIndex:c.z,width:c.width,height:c.height,overflow:"hidden",background:c.background});
b(a).click(c.onclick);b(a).hover(c.onmouseover,c.onmouseout);var m=document.createElement("img");m.src=d.src;var o;"fit"==c.scaleMode?o=D.fit(this.width,this.height,c.width,c.height):"fill"==c.scaleMode&&(o=D.fill(this.width,this.height,c.width,c.height));b(m).css({marginTop:o.top,marginRight:0,marginBottom:0,marginLeft:o.left,width:o.width,height:o.height,padding:0,border:"none",maxWidth:"none",maxHeight:"none",opacity:c.opacity});b(a).append(m);s.append(a)};d.src=l.thumb}}function T(a,l,p){var d=
this;this.canvas=a;this.albums=l;this.items=c(l);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.onOpen=function(){};d.onOpenItem={};this.settings=b.extend(!0,{image:{scaleMode:"fit",cornerRadius:10,align:"center",transitionEffect:"fade",transitionDuration:1,useShadow:!0},caption:{visibleMode:"onRollOver",position:"bottom",bgColor:0,bgAlpha:30,color:16777215,fontName:"Arial",fontSize:11},thumbBar:{useThumbBar:!0,position:"bottom",scrollSpeed:10},thumbnail:{width:80,
height:60,cornerRadius:10,alpha:70,outlineColor:3355443,outlineColorOnRollOver:6710886,outlineColorOnClick:10066329,useShadow:!0},slideshow:{start:!1,delay:2.5,loop:!0,stopAutoOnClick:!0}},p);this.settings=f(this.settings);(new Image).src=q.images.loader;d.settings.slideshow.start&&setTimeout(function(){d.slideshowStart()},500*d.settings.image.transitionDuration);this.render()}function J(a,l,p){this.canvas=a;this.albums=l;this.items=c(l);this.currentItem=-1;this.getCurrentItem=function(){return this.items[this.currentItem]};
this.defaultSettings={image:{scaleMode:"fill",padding:0,bgTintColor:16777215},thumbnail:{width:80,height:60,alpha:70},caption:{showCaption:!0},buttons:{showSlideshowButton:!0,showFullscreenButton:!0,showImageNavigationButtons:!0,showLinkButton:!0,showFacebookButton:!0,showTwitterButton:!0},slideshow:{start:!1,delay:2.5},translation:{image:"Image",clickToView:"Click to view",getLink:"Get link",shareWithFacebook:"Share with Facebook",tweet:"Tweet",startSlideshow:"Start slideshow",stopSlideshow:"Stop slideshow",
fullscreenMode:"Fullscreen mode"}};this.settings=b.extend(!0,this.defaultSettings,p);this.settings=f(this.settings);this.init()}function Q(a,l,p){this.canvas=a;this.albums=l;this.items=c(l);this.currentItem=-1;this.getCurrentItem=function(){return this.items[this.currentItem]};this.defaultSettings={thumbnail:{width:120,height:90,alpha:85},colorScheme:{thumbsFrameColor:16777215,imageBGColor:1118481,useShadow:!0},imageCaption:{position:"top",color:16777215,bgColor:0,bgAlpha:30,fontName:"Arial",fontSize:11,
visibleMode:"always"}};this.settings=b.extend(!0,this.defaultSettings,p);this.settings=f(this.settings);this.page=0;C(q.images.loader,500);this.render()}function F(a,l,p){this.canvas=a;this.albums=l;this.items=c(l);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.defaultSettings={initialState:"Load Image",slideshowDelay:2,showCaption:!0,base:{color:4080713,visibleFrame:5},buttons:{showSlideshowButton:!0,showThumbnailsButton:!0,bgColor:15066854}};this.settings=
b.extend(!0,this.defaultSettings,p);this.settings=f(this.settings);this.enableThumbnailsHover=!0;this.drag=!1;C(q.images.loader,500);this.init()}function S(a,l,p){var w=this;this.canvas=a;this.albums=l;this.settings=b.extend(!0,{imageAngle:30,maxImageWidth:0,useHighlight:!0,useScrollBar:!0,showReflections:!0,solidReflection:!0,reflectionAlpha:80,slideShow:!1,slideShowDelay:2,flipDuration:1,startPosition:"center",colorScheme:"custom",preloader:{stripesAlpha:45,barColor:0,barAlpha:30,bgColor:0,bgAlpha:20,
innerShadow:20,dropShadow:30},scrollbar:{bgColor:0,bgAlpha:40,handleColor:0,handleAlpha:40,arrowsColor:0,arrowsAlpha:40,innerShadow:20,dropShadow:20},caption:{textColor:16777215,bgColor:0,bgAlpha:80,frameColor:16777215,frameAlpha:40,shadowAlpha:50,multilingual:!1,multilingualFontSize:12},background:{bgColor:16777215,transparentBG:!0}},p);this.settings=f(this.settings);if(!this.settings.maxImageWidth)this.settings.maxImageWidth=parseInt(a.element.width()/2);if(d())this.settings.useScrollBar=!1;this.showReflections=
this.settings.showReflections&&K(this.canvas.element.css("backgroundColor"))&&!(b.browser.msie&&9>b.browser.version);this.items=c(l);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.getItemX=function(b){return-(this.currentItem-b)};this.getItemZ=function(b){return parseInt(this.items.length/2)-Math.abs(this.getItemX(b))};this.currentItem="left"==this.settings.startPosition?0:"right"==this.settings.startPosition?this.items.length:Math.floor((this.items.length-
1)/2);(new Image).src=q.images.loader;this.scene=b('<div class="altgallery-scene"></div>');this.scene.css({position:"relative",width:a.width(),height:a.height()});this.canvas.element.append(this.scene);var g;U(this.scene,{touchstart:function(b){w.drag=!0;g=b.pageX},touchend:function(b){var b=b.pageX-g,a=Math.abs(b)>w.canvas.width()/2?2:1;30<b?(setTimeout(function(){w.drag=!1},100),w.prev(a)):-30>b?(setTimeout(function(){w.drag=!1},100),w.next(a)):w.drag=!1},touchcancel:function(){setTimeout(function(){w.drag=
!1},100)}});P(this.scene);this.render()}function M(a,l,c){this.canvas=a;this.albums=l;this.currentAlbum=0;this.getCurrentAlbum=function(){return this.albums[this.currentAlbum]};this.currentItem=0;this.getCurrentItem=function(){return this.getCurrentAlbum().items[this.currentItem]};this.settings=b.extend(!0,{initialState:"Show Albums",imageScaleMode:"fill",frameSize:5,frameColor:"#ffffff",backgroundColor:"#aac5d8",cornerRadius:7,iconWidth:90,iconHeight:55,iconPadding:10,panelBackgroundAlpha:50,showCaption:"always",
captionBackgroundAlpha:40,showButtons:"always",buttonsBackgroundAlpha:40,showAlbumsButton:!0,showThumbnailsButton:!0,showSlideshowButton:!0,showNavigationButton:!0,useEmbeddedFont:!0,fontName:"Arial",fontSize:11,translation:{Album:"Album",Albums:"Albums",Image:"Image",Images:"Images",Close:"CLOSE",BackToAlbums:"BACK TO ALBUMS",LoadingImage:"Loading Image",Of:"of"}},c);this.settings=f(this.settings);if(this.settings.useEmbeddedFont)this.settings.fontName="Tahoma",this.settings.fontSize=9;C(q.images.loader,
500);this.cache=function(){if(0<=this.currentItem){var b=this.getCurrentAlbum().items,a=[],l,c;for(c=this.currentItem+1;c<this.currentItem+3;c++)(l=b[(b.length+c)%b.length])&&(l=l.source)&&a.push(l);for(c=this.currentItem-1;c>this.currentItem-2;c--)(l=b[(b.length+c)%b.length])&&(l=l.source)&&a.push(l);a.length&&R(a,100)}};this.render()}function ba(c,l,p){function d(){function b(a){if(a.match(/Art/i))return"art";if(a.match(/Aura/i))return"aura";if(a.match(/Box/i))return"box";if(a.match(/Cubic/i))return"cubic";
if(a.match(/PhotoFlow/i))return"photoflow";if(a.match(/Zen/i))return"zen"}Y!=32*ca&&(e=[]);switch(l.type?l.type.toLowerCase():g.galleryName?l.type=b(g.galleryName):l.type="box"){case "art":case "promo":m=new T(h,e,g.settings||{});break;case "aura":m=new J(h,e,g.settings||{});break;default:case "box":m=new Q(h,e,g.settings||{});break;case "cubic":m=new F(h,e,g.settings||{});break;case "photoflow":m=new S(h,e,g.settings||{});break;case "zen":m=new M(h,e,g.settings||{})}"function"==typeof p&&p(m)}c=
b(c);q=l;var g,e,h,m,o=I(),G=15;g=l.config||{};e=function(){function l(b,c,d,s,w){c=c||0;s===a&&(s=g.settings.imagesFolder?g.settings.imagesFolder.replace(/\/+$/,"")+"/":"");w===a&&(w=w||g.settings.thumbnailsFolder?g.settings.thumbnailsFolder.replace(/\/+$/,"")+"/":s);for(var h=[],m,e=0;e<b.length&&(o||e<G);e++)m=b[e],h[e]={id:e,source:s+m.source,thumb:m.thumb?w+m.thumb:s+m.source,description:m.description,link:m.link||"",target:m.target||""};p.push({id:c,description:d,items:h})}var p=[];if(r(g.albums)&&
g.albums.length)for(var d=0;d<g.albums.length&&(o||3>d);d++)l(g.albums[d].items,d,g.albums[d].description,g.albums[d].imagesFolder,g.albums[d].thumbnailsFolder);else r(g.items)&&g.items.length?l(g.items):l(function(a){var l=[];b(a).find("img").each(function(){l.push({source:b(this).parent("a").attr("href")||b(this).attr("src"),thumb:b(this).attr("src"),description:this.title})});return l}(c),0);return p}();h=new $(c,l);b(document).ready(function(){setTimeout(function(){d()},100)})}window.altgallery_id=
window.altgallery_id||0;var aa=["3132372e302e302e31","6c6f63616c686f7374","666c6173682d67616c6c6572792e636f6d"];sprintfWrapper={init:function(){if("undefined"==typeof arguments||1>arguments.length||"string"!=typeof arguments[0]||"undefined"==typeof RegExp)return null;for(var b=arguments[0],a=RegExp(/(%([%]|(\-)?(\+|\x20)?(0)?(\d+)?(\.(\d)?)?([bcdfosxX])))/g),c=[],d=[],g=0,e=0,h=0,e=0,m="",o=null;o=a.exec(b);)o[9]&&(g+=1),h=a.lastIndex-o[0].length,d[d.length]=b.substring(e,h),e=a.lastIndex,c[c.length]=
{match:o[0],left:o[3]?!0:!1,sign:o[4]||"",pad:o[5]||" ",min:o[6]||0,precision:o[8],code:o[9]||"%",negative:0>parseInt(arguments[g])?!0:!1,argument:""+arguments[g]};d[d.length]=b.substring(e);if(0==c.length)return b;if(arguments.length-1<g)return null;b=null;for(b=0;b<c.length;b++)"%"==c[b].code?substitution="%":"b"==c[b].code?(c[b].argument=""+Math.abs(parseInt(c[b].argument)).toString(2),substitution=sprintfWrapper.convert(c[b],!0)):"c"==c[b].code?(c[b].argument=""+String.fromCharCode(parseInt(Math.abs(parseInt(c[b].argument)))),
substitution=sprintfWrapper.convert(c[b],!0)):"d"==c[b].code?(c[b].argument=""+Math.abs(parseInt(c[b].argument)),substitution=sprintfWrapper.convert(c[b])):"f"==c[b].code?(c[b].argument=""+Math.abs(parseFloat(c[b].argument)).toFixed(c[b].precision?c[b].precision:6),substitution=sprintfWrapper.convert(c[b])):"o"==c[b].code?(c[b].argument=""+Math.abs(parseInt(c[b].argument)).toString(8),substitution=sprintfWrapper.convert(c[b])):"s"==c[b].code?(c[b].argument=c[b].argument.substring(0,c[b].precision?
c[b].precision:c[b].argument.length),substitution=sprintfWrapper.convert(c[b],!0)):"x"==c[b].code?(c[b].argument=""+Math.abs(parseInt(c[b].argument)).toString(16),substitution=sprintfWrapper.convert(c[b])):"X"==c[b].code?(c[b].argument=""+Math.abs(parseInt(c[b].argument)).toString(16),substitution=sprintfWrapper.convert(c[b]).toUpperCase()):substitution=c[b].match,m+=d[b],m+=substitution;return m+=d[b]},convert:function(b,a){b.sign=a?"":b.negative?"-":b.sign;var c=b.min-b.argument.length+1-b.sign.length,
c=Array(0>c?0:c).join(b.pad);return b.left?"0"==b.pad||a?b.sign+b.argument+c.replace(/0/g," "):b.sign+b.argument+c:"0"==b.pad||a?b.sign+c+b.argument:c+b.sign+b.argument}};sprintf=sprintfWrapper.init;var Y;location.href.match(/#jsgallerydebug$/);var W,O={};b.extend(b.support,{touch:"ontouchstart"in document});e();var Z=e().replace(/[^\/]*$/,""),D={fit:function(a,c,d,w,g){var e,h,m=a/c,g=b.extend({noEnlarge:!1,minWidth:16,minHeight:16},g);e=d;h=d/m;h>w&&(h=w,e=h*m);if(e<g.minWidth)e=g.minWidth,h=e/
m;if(h<g.minHeight)h=g.minHeight,e=h*m;if(g.noEnlarge&&(e>a||h>c))e=a,h=c;a=(w-h)/2;return{left:Math.round((d-e)/2),top:Math.round(a),width:Math.round(e),height:Math.round(h),margin:0}},fill:function(b,a,c,d){var g=b/a,b=c,a=c/g;a<d&&(a=d,b=a*g);d=(d-a)/2;return{left:Math.round((c-b)/2),top:Math.round(d),width:Math.round(b),height:Math.round(a),margin:0}}},B=function(){function b(a,c,l){a.addEventListener?a.addEventListener(c,l,!1):a.attachEvent&&a.attachEvent("on"+c,l)}function a(c){var l=!1,d=function(){l||
(l=!0,c())};document.write('<script defer src="//:" id="__onload_ie_pixastic__"><\/script>');var p=document.getElementById("__onload_ie_pixastic__");p.onreadystatechange=function(){"complete"==p.readyState&&(p.parentNode.removeChild(p),d())};document.addEventListener&&document.addEventListener("DOMContentLoaded",d,!1);b(window,"load",d)}function c(){for(var b=d("pixastic",null,"img"),a=d("pixastic",null,"canvas"),l=b.concat(a),p=0;p<l.length;p++)(function(){for(var b=l[p],a=[],c=b.className.split(" "),
d=0;d<c.length;d++){var s=c[d];"pixastic-"==s.substring(0,9)&&(s=s.substring(9),""!=s&&a.push(s))}if(a.length)if("img"==b.tagName.toLowerCase())if(c=new Image,c.src=b.src,c.complete)for(c=0;c<a.length;c++)(d=B.applyAction(b,b,a[c],null))&&(b=d);else c.onload=function(){for(var c=0;c<a.length;c++){var l=B.applyAction(b,b,a[c],null);l&&(b=l)}};else setTimeout(function(){for(var c=0;c<a.length;c++){var l=B.applyAction(b,b,a[c],null);l&&(b=l)}},1)})()}function d(b,a,c){var l=[];null==a&&(a=document);
null==c&&(c="*");a=a.getElementsByTagName(c);c=a.length;b=RegExp("(^|\\s)"+b+"(\\s|$)");for(i=0,j=0;i<c;i++)b.test(a[i].className)&&(l[j]=a[i],j++);return l}function g(b,a){if(B.debug)try{switch(a){case "warn":console.warn("Pixastic:",b);break;case "error":console.error("Pixastic:",b);break;default:console.log("Pixastic:",b)}}catch(c){}}"undefined"!=typeof pixastic_parseonload&&pixastic_parseonload&&a(c);var e=function(){var b=document.createElement("canvas"),a=!1;try{a=!!("function"==typeof b.getContext&&
b.getContext("2d"))}catch(c){}return function(){return a}}(),h=function(){var b=document.createElement("canvas"),a=!1,c;try{if("function"==typeof b.getContext&&(c=b.getContext("2d")))a="function"==typeof c.getImageData}catch(l){}return function(){return a}}(),m=function(){var b=!1,a=document.createElement("canvas");if(e()&&h()){a.width=a.height=1;a=a.getContext("2d");a.fillStyle="rgb(255,0,0)";a.fillRect(0,0,1,1);var c=document.createElement("canvas");c.width=c.height=1;var l=c.getContext("2d");l.fillStyle=
"rgb(0,0,255)";l.fillRect(0,0,1,1);a.globalAlpha=0.5;a.drawImage(c,0,0);b=255!=a.getImageData(0,0,1,1).data[2]}return function(){return b}}();return{parseOnLoad:!1,debug:!1,applyAction:function(b,a,c,l){var l=l||{},d="canvas"==b.tagName.toLowerCase();if(d&&B.Client.isIE())return B.debug&&g("Tried to process a canvas element but browser is IE."),!1;var p,s,w=!1;B.Client.hasCanvas()&&(w=!!l.resultCanvas,p=l.resultCanvas||document.createElement("canvas"),s=p.getContext("2d"));var h=b.offsetWidth,m=b.offsetHeight;
if(d)h=b.width,m=b.height;if(0==h||0==m)if(null==b.parentNode){var e=b.style.position,L=b.style.left;b.style.position="absolute";b.style.left="-9999px";document.body.appendChild(b);h=b.offsetWidth;m=b.offsetHeight;document.body.removeChild(b);b.style.position=e;b.style.left=L}else{B.debug&&g("Image has 0 width and/or height.");return}if(-1<c.indexOf("(")&&(e=c,c=e.substr(0,e.indexOf("(")),e=e.match(/\((.*?)\)/),e[1])){e=e[1].split(";");for(L=0;L<e.length;L++)if(thisArg=e[L].split("="),2==thisArg.length)if("rect"==
thisArg[0]){var f=thisArg[1].split(",");l[thisArg[0]]={left:parseInt(f[0],10)||0,top:parseInt(f[1],10)||0,width:parseInt(f[2],10)||0,height:parseInt(f[3],10)||0}}else l[thisArg[0]]=thisArg[1]}l.rect?(l.rect.left=Math.round(l.rect.left),l.rect.top=Math.round(l.rect.top),l.rect.width=Math.round(l.rect.width),l.rect.height=Math.round(l.rect.height)):l.rect={left:0,top:0,width:h,height:m};e=!1;B.Actions[c]&&"function"==typeof B.Actions[c].process&&(e=!0);if(!e)return B.debug&&g('Invalid action "'+c+'". Maybe file not included?'),
!1;if(!B.Actions[c].checkSupport())return B.debug&&g('Action "'+c+'" not supported by this browser.'),!1;if(B.Client.hasCanvas()){if(p!==b)p.width=h,p.height=m;if(!w)p.style.width=h+"px",p.style.height=m+"px";s.drawImage(a,0,0,h,m);b.__pixastic_org_image?(p.__pixastic_org_image=b.__pixastic_org_image,p.__pixastic_org_width=b.__pixastic_org_width,p.__pixastic_org_height=b.__pixastic_org_height):(p.__pixastic_org_image=b,p.__pixastic_org_width=h,p.__pixastic_org_height=m)}else if(B.Client.isIE()&&"undefined"==
typeof b.__pixastic_org_style)b.__pixastic_org_style=b.style.cssText;a={image:b,canvas:p,width:h,height:m,useData:!0,options:l};if(!B.Actions[c].process(a))return!1;if(B.Client.hasCanvas()){a.useData&&B.Client.hasCanvasImageData()&&(p.getContext("2d").putImageData(a.canvasData,l.rect.left,l.rect.top),p.getContext("2d").fillRect(0,0,0,0));if(!l.leaveDOM){p.title=b.title;p.imgsrc=b.imgsrc;if(!d)p.alt=b.alt;if(!d)p.imgsrc=b.src;p.className=b.className;p.style.cssText=b.style.cssText;p.name=b.name;p.tabIndex=
b.tabIndex;p.id=b.id;b.parentNode&&b.parentNode.replaceChild&&b.parentNode.replaceChild(p,b)}return l.resultCanvas=p}return b},prepareData:function(b,a){var c=b.canvas.getContext("2d"),l=b.options.rect,c=c.getImageData(l.left,l.top,l.width,l.height),l=c.data;if(!a)b.canvasData=c;return l},process:function(b,a,c,l){if("img"==b.tagName.toLowerCase()){var d=new Image;d.src=b.src;if(d.complete){var p=B.applyAction(b,d,a,c);l&&l(p);return p}d.onload=function(){var p=B.applyAction(b,d,a,c);l&&l(p)}}if("canvas"==
b.tagName.toLowerCase())return p=B.applyAction(b,b,a,c),l&&l(p),p},revert:function(b){if(B.Client.hasCanvas()){if("canvas"==b.tagName.toLowerCase()&&b.__pixastic_org_image)return b.width=b.__pixastic_org_width,b.height=b.__pixastic_org_height,b.getContext("2d").drawImage(b.__pixastic_org_image,0,0),b.parentNode&&b.parentNode.replaceChild&&b.parentNode.replaceChild(b.__pixastic_org_image,b),b}else if(B.Client.isIE()&&"undefined"!=typeof b.__pixastic_org_style)b.style.cssText=b.__pixastic_org_style},
Client:{hasCanvas:e,hasCanvasImageData:h,hasGlobalAlpha:m,isIE:function(){return!!document.all&&!!window.attachEvent&&!window.opera}},Actions:{}}}();B.Actions.blurfast={process:function(b){var a=parseFloat(b.options.amount)||0,c=!!(b.options.clear&&"false"!=b.options.clear),a=Math.max(0,Math.min(5,a));if(B.Client.hasCanvas()){var d=b.options.rect,g=b.canvas.getContext("2d");g.save();g.beginPath();g.rect(d.left,d.top,d.width,d.height);g.clip();var e=Math.round(b.width/2),h=Math.round(b.height/2),m=
document.createElement("canvas");m.width=e;m.height=h;for(var c=!1,a=Math.round(20*a),o=m.getContext("2d"),G=0;G<a;G++){var f=Math.max(1,Math.round(e-G)),v=Math.max(1,Math.round(h-G));o.clearRect(0,0,e,h);o.drawImage(b.canvas,0,0,b.width,b.height,0,0,f,v);c&&g.clearRect(d.left,d.top,d.width,d.height);g.drawImage(m,0,0,f,v,0,0,b.width,b.height)}g.restore();b.useData=!1;return!0}if(B.Client.isIE())return c=10*a,b.image.style.filter+=" progid:DXImageTransform.Microsoft.Blur(pixelradius="+c+")",b.image.style.marginLeft=
(parseInt(b.image.style.marginLeft,10)||0)-Math.round(c)+"px",b.image.style.marginTop=(parseInt(b.image.style.marginTop,10)||0)-Math.round(c)+"px",!0},checkSupport:function(){return B.Client.hasCanvas()||B.Client.isIE()}};var ca=23;T.prototype.render=function(){function a(){var s=c.thumbBar=b('<div class="altgallery-thumbBar"></div>'),h,e,o,G,f,v={};switch(d.thumbBar.position.toLowerCase()){default:case "bottom":h="horizontal";e=w.width()-20;o=d.thumbnail.height+4;G=g.length*(d.thumbnail.width+5)-
5;f=o;v.left=10;v.bottom=7;v.width=e;v.height=o;break;case "top":h="horizontal";e=w.width()-20;o=d.thumbnail.height+4;G=g.length*(d.thumbnail.width+5)-5;f=o;v.left=10;v.top=9;v.width=e;v.height=o;break;case "left":h="vertical";e=d.thumbnail.width+4;o=w.height()-20;G=e;f=g.length*(d.thumbnail.height+5)-5;v.left=9;v.top=10;v.width=e;v.height=o;break;case "right":h="vertical",e=d.thumbnail.width+4,o=w.height()-20,G=e,f=g.length*(d.thumbnail.height+5)-5,v.right=8,v.top=10,v.width=e,v.height=o}v.position=
"absolute";v.overflow="hidden";s.css(v);var u=b("<div></div>");u.css({position:"relative",width:G,height:f});for(v=0;v<g.length;v++)(function(a){var w=b('<a href="'+g[a].source+'"></a>');w.css({position:"absolute",left:"horizontal"==h?a*(d.thumbnail.width+5):1,top:"horizontal"==h?1:a*(d.thumbnail.height+5),width:d.thumbnail.width-4,height:d.thumbnail.height-4,overflow:"hidden",border:"2px solid",borderColor:y(d.thumbnail.outlineColor),"-moz-border-radius":d.thumbnail.cornerRadius/2,"-webkit-border-radius":d.thumbnail.cornerRadius/
2,"-khtml-border-radius":d.thumbnail.cornerRadius/2,borderRadius:d.thumbnail.cornerRadius/2,opacity:d.thumbnail.alpha/100});w.hover(function(){var a=b(this);a.hasClass("altgallery-active")||(a.data("style",{opacity:a.css("opacity"),borderColor:a.css("borderTopColor")}),a.css({borderColor:y(d.thumbnail.outlineColorOnRollOver),opacity:1}))},function(){var a=b(this);a.hasClass("altgallery-active")||a.css(a.data("style"))});c.onOpenItem[a]=function(){var b=s.find("a").eq(a);b.parent().find("a").removeClass("altgallery-active").css({opacity:d.thumbnail.alpha/
100,borderColor:y(d.thumbnail.outlineColor)});b.addClass("altgallery-active").data("style",{opacity:1,borderColor:y(d.thumbnail.outlineColorOnClick)}).css(b.data("style"));(function(){var b;if("horizontal"==h&&e<G){var c=0-(a*(d.thumbnail.width+5)-e/2+d.thumbnail.width/2),l=0-G+e;0<c&&(c=0);c<l&&(c=l);u.animate({left:c});u.unbind("mouseleave").mouseleave(function(){b=setTimeout(function(){u.animate({left:c},1E3)},1E3)})}else o<f&&(c=0-(a*(d.thumbnail.height+5)-o/2+d.thumbnail.height/2),l=0-f+o,0<
c&&(c=0),c<l&&(c=l),u.animate({top:c}),u.unbind("mouseleave").mouseleave(function(){b=setTimeout(function(){u.animate({top:c},1E3)},1E3)}));u.unbind("mouseenter").mouseenter(function(){clearTimeout(b)})})()};w.click(function(){if(!c.drag)c.currentItem=a,b(this).hasClass("altgallery-active")||c.open(g[a]);return!1});u.append(w);var v=new Image;v.onload=function(){var c=b('<img src="'+g[a].thumb+'" alt="" />');n(c);c.css({position:"absolute",border:"none"});c.css(D.fill(this.width,this.height,d.thumbnail.width-
4,d.thumbnail.height-4));d.thumbnail.useShadow&&w.css({"-moz-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-khtml-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.5)"});w.append(c)};v.src=g[a].thumb})(v);s.append(u);(function(){function a(){q=!0;u.stop();n=setInterval(function(){var b=parseInt(u.css("left"))+parseInt(d.thumbBar.scrollSpeed);0<b?(u.css("left",0),k()):u.css("left",b)},25)}function w(){q=!0;u.stop();
n=setInterval(function(){var b=parseInt(u.css("left"))-parseInt(d.thumbBar.scrollSpeed),a=0-G+e;b<a?(u.css("left",a),k()):u.css("left",b)},25)}function g(){q=!0;u.stop();n=setInterval(function(){var b=parseInt(u.css("top"))+parseInt(d.thumbBar.scrollSpeed);0<b?(u.css("top",0),k()):u.css("top",b)},25)}function v(){q=!0;u.stop();n=setInterval(function(){var b=parseInt(u.css("top"))-parseInt(d.thumbBar.scrollSpeed),a=0-f+o;b<a?(u.css("top",a),k()):u.css("top",b)},25)}function k(){clearInterval(n);q=
!1}var n,q=!1;"horizontal"==h&&e<G?(s.mousemove(function(d){c.drag||(d=d.pageX-b(this).offset().left,30>d?q||a():d>e-30?q||w():k())}),u.draggable({axis:"x",start:function(){c.drag=!0},stop:function(b,a){var d=a.position.left,p=0-G+e;0<d?u.animate({left:0},"fast"):d<p&&u.animate({left:p},"fast");setTimeout(function(){c.drag=!1},100)}})):o<f&&(s.mousemove(function(a){c.drag||(a=a.pageY-b(this).offset().top,30>a?q||g():a>o-30?q||v():k())}),u.draggable({axis:"y",start:function(){c.drag=!0},stop:function(b,
a){var d=a.position.top,p=0-f+o;0<d?u.animate({top:0},"fast"):d<p&&u.animate({top:p},"fast");setTimeout(function(){c.drag=!1},100)}}));P(u);s.mouseleave(function(){k()})})();w.element.append(s)}var c=this,d=this.settings,w=this.canvas,g=this.items;(function(){var a=b('<div class="altgallery-imageFrame" style="position:absolute;"></div>'),s={},g;if(d.thumbBar.useThumbBar)switch(d.thumbBar.position.toLowerCase()){default:case "bottom":g=!0;s.left=10;s.top=10;s.width=w.width()-20;s.height=w.height()-
d.thumbnail.height-30;break;case "top":g=!0;s.left=10;s.bottom=10;s.width=w.width()-20;s.height=w.height()-d.thumbnail.height-30;break;case "left":g=!1;s.right=10;s.top=10;s.width=w.width()-d.thumbnail.width-30;s.height=w.height()-20;break;case "right":g=!1,s.left=10,s.top=10,s.width=w.width()-d.thumbnail.width-30,s.height=w.height()-20}else s.left=10,s.top=10,s.width=w.width()-20,s.height=w.height()-20;a.css(s);w.element.append(a);var e,f;U(a,{touchstart:function(b){c.drag=!0;e=b.pageX;f=b.pageY},
touchend:function(b){b=g?b.pageX-e:b.pageY-f;30<b?(setTimeout(function(){c.drag=!1},100),c.prev()):-30>b?(setTimeout(function(){c.drag=!1},100),c.next()):c.drag=!1},touchcancel:function(){c.drag=!1}});P(a)})();d.thumbBar.useThumbBar?(a(),w.element.find(".altgallery-thumbBar a").eq(c.currentItem).click()):c.open(c.getCurrentItem())};T.prototype.open=function(a){var c=this,d=this.settings,w=this.canvas,g=w.element.find(".altgallery-imageFrame"),e=b('<img class="altgallery-preloader" src="'+q.images.loader+
'" alt="" />');n(e);e.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});C(a.source,function(h){e.hide();w.element.find(".altgallery-preloader").remove();var m=d.image.scaleMode.toLowerCase(),o="fill"==m?D.fill(h.width,h.height,g.width(),g.height()):D.fit(h.width,h.height,g.width(),g.height()),f;a.link?(f=b("<a></a>"),f.attr("href",a.link),a.target&&f.attr("target",a.target)):f=b("<div></div>");f.click(function(){if(c.drag)return!1});f.css({display:"block",position:"absolute",
left:"fill"==m?0:o.left,top:"fill"==m?0:o.top,width:"fill"==m?g.width():o.width,height:"fill"==m?g.height():o.height,overflow:"hidden","-moz-border-radius":d.image.cornerRadius/2,"-webkit-border-radius":d.image.cornerRadius/2,"-khtml-border-radius":d.image.cornerRadius/2,borderRadius:d.image.cornerRadius/2});d.image.useShadow&&f.css({"-moz-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-khtml-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.5)"});
var k=b('<img src="'+h.src+'" alt="" />');n(k);k.css({position:"absolute",left:"fill"==m?o.left:0,top:"fill"==m?o.top:0,width:o.width,height:o.height});f.append(k);if(a.description&&"never"!=d.caption.visibleMode.toLowerCase()){var v=b("<div></div>");v.html(a.description);v.css({position:"absolute",left:0,width:o.width,padding:"9px 10px",fontFamily:d.caption.fontName,fontSize:d.caption.fontSize,lineHeight:1.25,color:y(d.caption.color),background:t(d.caption.bgColor,d.caption.bgAlpha/100)});if("top"==
d.caption.position.toLowerCase()){if(v.css({top:0,borderBottom:"1px solid",borderBottomColor:t("#000000",(d.caption.bgAlpha+10)/100)}),"onrollover"==d.caption.visibleMode.toLowerCase()){var u=1.25*d.caption.fontSize+18;v.css({top:-u}).hide();k.hover(function(){v.show().stop().animate({top:0},q.animation.duration)},function(){v.animate({top:-u},q.animation.duration,function(){v.hide()})})}}else v.css({bottom:0,borderTop:"1px solid",borderTopColor:t("#000000",(d.caption.bgAlpha+10)/100)}),"onrollover"==
d.caption.visibleMode.toLowerCase()&&(u=1.25*d.caption.fontSize+18,v.css({bottom:-u}).hide(),k.hover(function(){v.show().stop().animate({bottom:0},q.animation.duration)},function(){v.animate({bottom:-u},q.animation.duration,function(){v.hide()})}));f.append(v)}switch(d.image.transitionEffect.toLowerCase()){default:case "fade":g.animate({opacity:0},{duration:500*d.image.transitionDuration,easing:"linear",complete:function(){g.empty();g.append(f);g.animate({opacity:1},{duration:500*d.image.transitionDuration,
easing:"swing",complete:function(){c.onOpen(h)}})}});break;case "xfade":case "crossfade":g.css({opacity:1}),m=g.find("div"),m.size()?(m.animate({opacity:0},{duration:1E3*d.image.transitionDuration,easing:"linear",complete:function(){b(this).remove();c.onOpen(h)}}),g.append(f),f.css({opacity:0}).animate({opacity:1},{duration:1E3*d.image.transitionDuration,easing:"linear"})):(g.append(f),f.css({opacity:0}).animate({opacity:1},{duration:1E3*d.image.transitionDuration,easing:"linear",complete:function(){c.onOpen(h)}}))}c.onOpenItem[parseInt(a.id)]()});
setTimeout(function(){w.element.find(".altgallery-preloader").remove();g.append(e)},500)};T.prototype.prev=function(){0<this.currentItem?this.currentItem--:this.currentItem=this.items.length-1;this.open(this.getCurrentItem())};T.prototype.next=function(){this.currentItem<this.items.length-1?this.currentItem++:this.currentItem=0;this.open(this.getCurrentItem())};T.prototype.slideshowStart=function(){var b=this;b.slideshow=!0;b.onOpen=function(){b.slideshowTimer&&clearInterval(b.slideshowTimer);b.slideshowTimer=
setTimeout(function(){b.next()},1E3*b.settings.slideshow.delay)};if(b.settings.slideshow.stopAutoOnClick){var a=function(){b.slideshowStop();b.canvas.element.unbind("click",a).find("a").unbind("click",a)};b.canvas.element.bind("click",a).find("a").bind("click",a)}};T.prototype.slideshowStop=function(){this.onOpen=function(){};this.slideshow=!1;clearInterval(this.slideshowTimer)};J.prototype.init=function(){this.initPreloader();this.initImage();this.initNavigation();this.initThumbnails();this.initCaption();
this.initButtons();var b,a=0;if((b=location.hash.match(/#galleryPhotoNumber=(\d+)/))||(b=location.href.match(/[?&]galleryPhotoNumber=(\d+)/)))a=b[1]-1;this.open(this.items[a])};J.prototype.initPreloader=function(){var a=this.canvas;C(q.images.loader,500);var c=this.preloader=b('<img alt="" />');c.attr({src:q.images.loader}).css({position:"absolute",left:"50%",top:"50%",zIndex:100,margin:"-16px 0 0 -16px"});a.append(c)};J.prototype.initImage=function(){var a=this,c=a.canvas,d=a.settings,w=b("<div />");
w.css({position:"absolute",left:0,top:0,width:c.width(),height:c.height()});c.append(w);var g=a.background=b("<div />");g.css({position:"absolute",left:0,top:0,zIndex:0,width:c.width(),height:c.height(),overflow:"hidden",background:y(d.image.bgTintColor)});w.append(g);g=a.imageFrame=b("<div />");g.css({position:"absolute",left:d.image.padding,top:d.image.padding,zIndex:1,width:c.width()-2*d.image.padding,height:c.height()-2*d.image.padding,overflow:"visible"});w.append(g);var e;U(w,{touchstart:function(b){a.drag=
!0;e=b.pageX},touchend:function(b){b=b.pageX-e;30<b?(setTimeout(function(){a.drag=!1},100),a.prev()):-30>b?(setTimeout(function(){a.drag=!1},100),a.next()):a.drag=!1},touchcancel:function(){setTimeout(function(){a.drag=!1},100)}});P(w)};J.prototype.initNavigation=function(){this.initPrevButton();this.initNextButton()};J.prototype.initPrevButton=function(){var a=this,c=a.canvas,d=a.prevButton=b("<div></div>");d.css({position:"absolute",left:-10,top:(c.height()-69)/2,zIndex:1,width:72,height:69,background:"no-repeat center 0",
backgroundImage:x(q.images.folder+"aura-arrows.png"),opacity:0.5,cursor:"pointer"}).hover(function(){b(this).css({opacity:1})},function(){b(this).css({opacity:0.5})}).click(function(){a.prev();return!1});c.append(d)};J.prototype.initNextButton=function(){var a=this,c=a.canvas,d=a.nextButton=b("<div></div>");d.css({position:"absolute",right:-10,top:(c.height()-69)/2,zIndex:1,width:72,height:69,background:"no-repeat center -75px",backgroundImage:x(q.images.folder+"aura-arrows.png"),opacity:0.5,cursor:"pointer"}).hover(function(){b(this).css({opacity:1})},
function(){b(this).css({opacity:0.5})}).click(function(){a.next();return!1});c.append(d)};J.prototype.initThumbnails=function(){function a(){u||(u=!0,v=setInterval(function(){var b=parseInt(f.css("left"))+10;0<b&&(b=0);f.css({left:b})},25))}function c(){u||(u=!0,v=setInterval(function(){var b=parseInt(f.css("left"))-10,a=-(k-g.width()+10);b<a&&(b=a);f.css({left:b})},25))}function d(){u=!1;clearInterval(v)}var w=this,g=w.canvas,e=w.settings,h=w.items,m=b("<div />");g.append(m);var o=w.thumbBar=b("<div />");
o.css({position:"absolute",left:0,bottom:0,zIndex:1,width:g.width(),height:e.thumbnail.height+50,background:"rgba(0,0,0,0.5)"});m=b("<div />");m.css({position:"absolute",left:0,top:29,width:g.width(),height:1,background:"#fff",opacity:0.7});z(m,{boxShadow:"0 1px 0 #000"});o.append(m);var f=b('<div class="altgallery-thumbnails" />');f.css({position:"absolute",left:0,bottom:10});var k=h.length*(e.thumbnail.width+10),v,u=!1;o.mousemove(function(e){e=e.pageX-b(this).offset().left;50>e?a():e>g.width()-
50?c():d()}).mouseleave(function(){d()});g.element.mouseover(function(){o.stop().animate({opacity:1})});g.element.mouseleave(function(){d();o.stop().animate({opacity:0})});f.draggable({axis:"x",start:function(){w.drag=!0},stop:function(b,a){var c=a.position.left,d=-(k-g.width()+10);0<c?f.animate({left:0},"fast"):c<d&&f.animate({left:d},"fast");setTimeout(function(){w.drag=!1},100)}});for(m=0;m<h.length;m++){var n=b("<a></a>");n.attr({href:h[m].source}).css({position:"absolute",left:10+m*(e.thumbnail.width+
10),bottom:0,width:e.thumbnail.width,height:e.thumbnail.height,overflow:"hidden"});(function(a,c){c.hover(function(){z(this,{boxShadow:"0 0 6px #fff"})},function(){a!=w.currentItem&&z(this,{boxShadow:"none"})}).click(function(){w.drag||w.open(h[a],function(){});return!1});C(h[a].thumb,function(a){var d=b('<img alt="" />');d.attr({src:a.src});d.css({position:"absolute"});d.css(D.fill(a.width,a.height,e.thumbnail.width,e.thumbnail.height));c.append(d)},50*a)})(m,n);f.append(n)}o.append(f);g.append(o);
P(o)};J.prototype.initCaption=function(){var a=this.caption=b("<div />");a.css({position:"absolute",left:10,top:10,fontFamily:'"Times New Roman", Times, serif',fontSize:"12px",fontWeight:"bold",color:"#fff",textShadow:"0 1px 0 #000"});this.thumbBar.append(a)};J.prototype.initButtons=function(){function a(){b(this).css({opacity:1})}function c(){b(this).css({opacity:0.5})}var d=this,e=d.settings,g=b("<div />");g.css({position:"absolute",right:5,top:7});var f={cssFloat:"left",width:16,height:16,margin:"0 0 0 4px",
backgroundImage:x(q.images.folder+"aura-buttons.png"),backgroundRepeat:"no-repeat",opacity:0.5,cursor:"pointer"},h=b("<div />");h.prop({title:e.translation.getLink}).css(f).css({backgroundPosition:"0 -40px"}).click(function(){k(d.getCurrentItem().source,"_blank")}).hover(a,c);g.append(h);h=b("<div />");h.prop({title:e.translation.shareWithFacebook}).css(f).css({backgroundPosition:"0 -60px"}).click(function(){k("http://www.facebook.com/sharer.php?u="+location.href+"%23galleryPhotoNumber="+(d.currentItem+
1)+"&t="+d.getCurrentItem().description||"","_blank")}).hover(a,c);g.append(h);h=b("<div />");h.prop({title:e.translation.tweet}).css(f).css({backgroundPosition:"0 -80px"}).click(function(){k("https://twitter.com/intent/tweet?url="+location.href+"%23galleryPhotoNumber="+(d.currentItem+1)+"&text="+d.getCurrentItem().description||"","_blank")}).hover(a,c);g.append(h);h=b("<div />");h.css({cssFloat:"left",width:1,height:14,margin:"0 3px 0 5px",background:"#fff"});g.append(h);h=b("<div />");h.prop({title:e.translation.startSlideshow}).css(f).css({backgroundPosition:"0 0"}).click(function(){d.slideshow?
(d.slideshowStop(),b(this).css({backgroundPosition:"0 0"})):(d.slideshowStart(),b(this).css({backgroundPosition:"0 -20px"}))}).hover(a,c);g.append(h);d.thumbBar.append(g)};J.prototype.update=function(){this.updateThumbnails();this.updateNavigation();this.updateCaption()};J.prototype.updateThumbnails=function(){var a=this,c=0;a.thumbBar.find(".altgallery-thumbnails a").each(function(){var d=b(this);c==a.currentItem?z(d,{boxShadow:"0 0 6px #fff"}):z(d,{boxShadow:"none"});c++})};J.prototype.updateNavigation=
function(){0==this.currentItem?this.prevButton.hide():this.prevButton.show();this.currentItem==this.items.length-1?this.nextButton.hide():this.nextButton.show()};J.prototype.updateCaption=function(b){this.caption.html(b||this.getCurrentItem().description||this.settings.translation.image+" "+(this.currentItem+1)+"/"+this.items.length)};J.prototype.open=function(a,c){var d=this,e=d.canvas,g=d.settings;if(d.currentItem!=a.id){d.currentItem=a.id;var f=setTimeout(function(){d.preloader.show()},500);C(a.source,
function(a){clearTimeout(f);d.preloader.hide();(function(){var c=b('<img alt="" />');c.attr({src:a.src}).css({position:"absolute"});var l,e=d.imageFrame.width(),w=d.imageFrame.height();if("fill"==g.image.scaleMode){l=D.fill(a.width,a.height,e,w);if(l.width>e)l.width=e,l.left=0;if(l.height>w)l.height=w,l.top=0}else l=D.fit(a.width,a.height,e,w);c.css(D.fill(a.width,a.height,l.width,l.height));var s=d.imageFrame.find("div"),e=b("<div />");e.css({position:"absolute",overflow:"hidden"}).css(l).hide();
z(e,{boxShadow:"0 6px 6px rgba(0,0,0,0.6)"});e.append(c);d.imageFrame.append(e);s.animate({opacity:"hide"},q.animation.duration/2);e.animate({opacity:"show"},q.animation.duration/2,function(){s.remove()})})();(function(){var c=b('<img alt="" />');c.attr({src:a.src}).css({position:"absolute"});c.css(D.fill(a.width,a.height,e.width(),e.height()));var l=d.background.find("div"),g=b("<div />");g.css({opacity:0});g.append(c);d.background.append(g);B.process(c.get(0),"blurfast",{amount:1.5});l.animate({opacity:0},
q.animation.duration);g.animate({opacity:0.5},q.animation.duration,function(){l.remove()})})();"function"==typeof c&&c(a);C(d.items[(d.currentItem+1)%d.items.length].source)});d.update()}};J.prototype.prev=function(b){0<this.currentItem?this.open(this.items[this.currentItem-1],b):this.open(this.items[this.items.length-1],b)};J.prototype.next=function(b){this.currentItem<this.items.length-1?this.open(this.items[this.currentItem+1],b):this.open(this.items[0],b)};J.prototype.slideshowStart=function(){var b=
this,a=b.settings;if(!b.slideshow){var c=function(){b.slideshowTimeoutId=setTimeout(function(){b.next(c)},1E3*a.slideshow.delay+2E3)};b.slideshow=!0;setTimeout(function(){b.next(c)},1E3*a.slideshow.delay)}};J.prototype.slideshowStop=function(){if(this.slideshow)this.slideshow=!1,clearTimeout(this.slideshowTimeoutId)};Q.prototype.render=function(c){var d=this,p=this.canvas,e=this.items,g=this.settings;if(c===a)c=d.page;p.element.empty();var f=p.width(),h=p.height(),m=parseInt(g.thumbnail.width),o=
parseInt(g.thumbnail.height),k=Math.floor((f-40)/m);1>k&&(k=1);var n=Math.floor((h-40)/o);1>n&&(n=1);c=Math.ceil(e.length/k);n>c&&(n=c);var v=k*n,u=d.pagesCount=Math.ceil(e.length/v),V=Math.floor(g.thumbnail.width)+2,r=Math.floor(g.thumbnail.height)+2,H=Math.floor((f-V*k)/2-8),N=Math.floor((h-r*n)/2-8),t=d.pageWidth=V*k,c=d.pageHeight=r*n,A=b('<div class="altgallery-frame" />'),h={position:"absolute",left:H,top:N,width:Math.floor(f-2*(H+8))+14,height:Math.floor(h-2*(N+8))+14,background:y(g.colorScheme.thumbsFrameColor),
"-moz-border-radius":"4px","-webkit-border-radius":"4px","-khtml-border-radius":"4px",borderRadius:"4px"};g.colorScheme.useShadow&&(h=b.extend(h,{"-moz-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)","-khtml-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)",boxShadow:"0 0 10px rgba(0, 0, 0, 0.5)"}));A.css(h);p.element.append(A);f=b('<div class="altgallery-frameMask" />');h.background="#000";h.opacity=0.6;h.zIndex=20;h["-moz-box-shadow"]="none";h["-webkit-box-shadow"]=
"none";h["-khtml-box-shadow"]="none";h.boxShadow="none";f.css(h).hide();p.element.append(f);p=b("<div />");p.css({position:"absolute",left:8,top:8,width:t-2,height:c-2,overflow:"hidden"});var B=d.imagesContainer=b("<div />");B.css({position:"relative",left:0,top:0,width:V*k*u-2,height:r*n-2});p.append(B);A.append(p);d.drag=!1;var X=0;B.draggable({axis:"x",distance:30,start:function(b,a){X=a.position.left;d.drag=!0},stop:function(b,a){30<Math.abs(Math.abs(X)-Math.abs(a.position.left))?X<a.position.left?
d.prevPage():d.nextPage():d.placePage();setTimeout(function(){d.drag=!1},100)}});P(B);for(p=0;p<e.length;p++)u=p%k*V+Math.floor(p/v)*t,f=Math.floor(p/k)%n*r,function(a,c,p){var s=b("<img />"),h=b("<a />");h.attr({href:e[a].source}).css({display:"block",position:"absolute",left:Math.floor(c),top:Math.floor(p+0.5*o),width:m,height:o,overflow:"hidden",opacity:0,background:y(g.colorScheme.imageBGColor),border:"none",margin:0,padding:0}).click(function(){return!1});B.append(h);var f=function(){h.click(function(){if(!d.drag)d.currentItem=
a,d.open(e[a],{left:a%k*V+H,top:p+N});return!1}).mouseover(function(){s.stop().animate({opacity:1},q.animation.duration/2)}).mouseleave(function(){s.stop().animate({opacity:g.thumbnail.alpha/100},q.animation.duration/2)})};a<v?setTimeout(function(){h.animate({top:p,opacity:1},{duration:q.animation.duration,complete:f})},200*a):(h.css({top:p,opacity:1}),f());C(e[a].thumb,function(b){s.attr({src:b.src}).css({display:"block",position:"absolute",margin:0,padding:0,border:"none",opacity:g.thumbnail.alpha/
100}).css(D.fill(b.width,b.height,parseInt(g.thumbnail.width),parseInt(g.thumbnail.height)));h.append(s)},200*a)}(p,u,f);n=d.prevPageButton=b("<div />");n.css({position:"absolute",left:5,top:c/2-10,width:30,height:30,background:x(q.images.folder+"/left.png"),cursor:"pointer"});z(n,{borderRadius:"4px"});n.click(function(){d.prevPage()});A.append(n);n=d.nextPageButton=b("<div />");n.css({position:"absolute",right:5,top:c/2-10,width:30,height:30,background:x(q.images.folder+"/right.png"),cursor:"pointer"});
z(n,{borderRadius:"4px"});n.click(function(){d.nextPage()});A.append(n);A.mouseover(function(){d.showControls()});A.mouseleave(function(){d.hideControls()});d.hideControls();d.showControls()};Q.prototype.hideControls=function(){this.prevPageButton.hide();this.nextPageButton.hide()};Q.prototype.showControls=function(){0<this.page&&this.prevPageButton.show();this.page<this.pagesCount-1&&this.nextPageButton.show()};Q.prototype.open=function(c,d){var p=this,e=this.settings,g=b('<img class="altgallery-preloader" src="'+
q.images.loader+'" alt="" />');n(g);g.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});var f=b('<img src="'+c.thumb+'" />');C(c.thumb,function(h){b(".altgallery-imageFrame",p.canvas.element).remove();b(".altgallery-frameMask",p.canvas.element).fadeIn(q.animation.duration);var m=document.createElement("div");b(m).addClass("altgallery-imageFrame").css({position:"absolute",padding:8,background:y(e.colorScheme.imageBGColor),zIndex:30});b(m).hide();var o=D.fit(h.width,
h.height,p.canvas.width()-48,p.canvas.height()-48),k={left:o.left+16+o.width/3,top:o.top+16+o.height/3,width:o.width/3,height:o.height/3};if(d!==a){if(d.left!==a)k.left=d.left;if(d.top!==a)k.top=d.top}b(m).css(k);var h=D.fit(h.width,h.height,p.canvas.width()-48,p.canvas.height()-48),n={left:h.left+16+h.width/3,top:h.top+16+h.height/3,width:h.width/3,height:h.height/3,margin:0,padding:0,border:"none",maxWidth:"none",maxHeight:"none",cursor:"pointer"};f.css(n);b(m).append(f);p.canvas.element.append(m);
f.animate(h,q.animation.duration);b(m).animate({opacity:"show",left:o.left+16,top:o.top+16,width:o.width,height:o.height},q.animation.duration,function(){var a=b("<div></div>");a.css({position:"absolute",left:8,top:8,width:o.width,height:o.height,overflow:"hidden",cursor:"pointer"});if(c.description){var d=parseInt(e.imageCaption.fontSize),d=d||p.defaultSettings.imageCaption.fontSize,l=b("<div><div>"+c.description+"</div></div>");l.css({position:"absolute",left:0,width:o.width,fontFamily:e.imageCaption.fontName,
fontSize:d+"px",lineHeight:1.25,color:y(e.imageCaption.color),background:t(e.imageCaption.bgColor,e.imageCaption.bgAlpha/100)});a.append(l);b(m).append(a);"bottom"==e.imageCaption.position.toLowerCase()?(l.css({bottom:"-33px",borderTop:"1px solid "+t(e.imageCaption.bgColor,(e.imageCaption.bgAlpha+10)/100)}),l.children("div").css({padding:"8px 10px 10px"}),l.animate({bottom:0})):(l.css({top:"-33px",borderBottom:"1px solid "+t(e.imageCaption.bgColor,(e.imageCaption.bgAlpha+10)/100)}),l.children("div").css({padding:"10px 10px 8px"}),
l.animate({top:0}))}var h=b('<a class="altgallery-close" style="position:absolute; right:-15px; top:-13px; width:30px; height:30px; z-index:40; background:no-repeat center; cursor:pointer;"></a>');h.css({backgroundImage:x(q.images.close)});h.click(function(){b(this).remove();l&&l.remove();k.opacity="hide";b(m).animate(k,q.animation.duration,function(){b(this).remove()});f.animate(n,q.animation.duration);b(".altgallery-frameMask",p.canvas.element).fadeOut(q.animation.duration)});b(m).append(h);a.click(function(){h.remove();
l&&l.remove();k.opacity="hide";b(m).animate(k,q.animation.duration,function(){b(this).remove();p.next()});f.animate(n,q.animation.duration)});setTimeout(function(){b(m).append(g)},500)})});C(c.source,function(){g.hide();p.canvas.element.find(".altgallery-preloader").remove();b(f).attr("src",c.source)})};Q.prototype.prev=function(){this.currentItem--;if(0>this.currentItem)this.currentItem=this.items.length-1;this.open(this.getCurrentItem())};Q.prototype.next=function(){this.currentItem++;if(this.currentItem>=
this.items.length)this.currentItem=0;this.open(this.getCurrentItem())};Q.prototype.placePage=function(){var b=this;b.hideControls();b.imagesContainer.animate({left:-(b.page*b.pageWidth)},{duration:q.animation.duration,complete:function(){b.showControls()}})};Q.prototype.prevPage=function(){this.page--;if(0>this.page)this.page=0;this.placePage()};Q.prototype.nextPage=function(){this.page++;if(this.page>=this.pagesCount)this.page=this.pagesCount-1;this.placePage()};F.prototype.init=function(){var b=
this.settings;this.initFrame();this.initNavigation();this.initCaption();this.initButtons();this.initThumbnails();this.initImage();switch(b.initialState.toLowerCase()){case "show thumbnails":this.showThumbnails();break;default:case "load image":case "show image":this.showImage();break;case "start slideshow":this.showImage(),this.slideshowStart()}};F.prototype.initFrame=function(){var a=this.canvas,c=this.settings,d=this.frame=b("<div></div>"),e=a.width()-10,g=a.height()-10;d.css({position:"absolute",
left:5,top:5,width:e,height:g,overflow:"hidden",background:y(c.buttons.bgColor)});z(d,{borderRadius:"5px",boxShadow:"0 0 4px rgba(0, 0, 0, 0.5)"});var f=this.content=b("<div></div>"),e=this.contentWidth=e-18,g=this.contentHeight=g-43;f.css({position:"absolute",left:9,top:9,width:e,height:g,background:y(c.base.color)});z(f,{borderRadius:"4px"});d.append(f);c=this.preloader=b('<img alt="" />');c.attr("src",q.images.loader);c.css({position:"absolute",left:"50%",top:"50%",zIndex:100,margin:"-16px 0 0 -16px"});
f.append(c);a.append(d)};F.prototype.initNavigation=function(){this.initPrevButton();this.initNextButton()};F.prototype.initPrevButton=function(){var a=this.settings,c=b("<div></div>");c.css({position:"absolute",left:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,background:y(a.buttons.bgColor),cursor:"default"});z(c,{borderRadius:"10px",boxShadow:"5px 0 15px rgba(0, 0, 0, 0.5)"});this.frame.append(c);prevOverlay=b("<div></div>");prevOverlay.css({position:"absolute",left:0,top:this.contentHeight/
2-30,zIndex:10,width:9,height:80,background:y(a.buttons.bgColor),cursor:"default"});this.frame.append(prevOverlay);var d=this.prevButton=b('<div><div style="margin:25px 0 0 6px; width:9px; height:9px; background:url('+q.images.folder+'cubic-buttons.png) no-repeat -8px -8px;"></div></div>');d.css({position:"absolute",left:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,cursor:"pointer"});this.frame.append(d);var e;this.canvas.element.hover(function(){clearTimeout(e);c.stop().show().css({opacity:1}).animate({left:0});
d.stop().animate({left:0,opacity:1})},function(){e=setTimeout(function(){c.stop().animate({left:-12},function(){c.fadeOut()});d.stop().animate({left:-12,opacity:0})},100)});this.hidePrevButton=function(){c.css({visibility:"hidden"});prevOverlay.css({visibility:"hidden"});d.css({visibility:"hidden"})};this.showPrevButton=function(){c.css({visibility:"visible"});prevOverlay.css({visibility:"visible"});d.css({visibility:"visible"})}};F.prototype.initNextButton=function(){var a=this.settings,c=b("<div></div>");
c.css({position:"absolute",right:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,background:y(a.buttons.bgColor),cursor:"default"});z(c,{borderRadius:"10px",boxShadow:"-5px 0 15px rgba(0, 0, 0, 0.5)"});this.frame.append(c);nextOverlay=b("<div></div>");nextOverlay.css({position:"absolute",right:0,top:this.contentHeight/2-30,zIndex:10,width:9,height:80,background:y(a.buttons.bgColor),cursor:"default"});this.frame.append(nextOverlay);var d=this.nextButton=b('<div><div style="margin:25px 0 0 6px; width:9px; height:9px; background:url('+
q.images.folder+'cubic-buttons.png) no-repeat -8px -33px;"></div></div>');d.css({position:"absolute",right:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,cursor:"pointer"});this.frame.append(d);var e;this.canvas.element.hover(function(){clearTimeout(e);c.stop().show().css({opacity:1}).animate({right:0});d.stop().animate({right:0,opacity:1})},function(){e=setTimeout(function(){c.stop().animate({right:-12},function(){c.fadeOut()});d.stop().animate({right:-12,opacity:0})},100)});this.hideNextButton=
function(){c.css({visibility:"hidden"});nextOverlay.css({visibility:"hidden"});d.css({visibility:"hidden"})};this.showNextButton=function(){c.css({visibility:"visible"});nextOverlay.css({visibility:"visible"});d.css({visibility:"visible"})}};F.prototype.initCaption=function(){var a=this.caption=b("<div></div>");a.css({position:"absolute",left:10,bottom:10,width:this.contentWidth-60,overflow:"hidden",fontFamily:"Arial, Helvetica, sans-serif",fontSize:"11px",color:"#777"});this.frame.append(a)};F.prototype.initButtons=
function(){var a=this,c=a.settings,d=function(){b(this).css({borderColor:"#fff #bbb #bbb #fff"});z(this,{boxShadow:"0 0 2px rgba(0, 0, 0, 0.2)"})},e=function(){b(this).css({borderColor:"transparent"});z(this,{boxShadow:"none"})};if(c.buttons.showSlideshowButton){var g=a.slideshowButton=b("<div></div>");g.css({position:"absolute",right:c.buttons.showThumbnailsButton?29:5,bottom:5,width:23,height:23,background:x(q.images.folder+"cubic-buttons.png")+" no-repeat 0px -51px",border:"1px solid",borderColor:"transparent",
cursor:"pointer"});z(g,{borderRadius:"3px 4px 3px 4px"});g.hover(d,e);g.click(function(){a.showImage();a.slideshowStart()});a.frame.append(g)}if(c.buttons.showThumbnailsButton)c=a.showThumbnailsButton=b("<div></div>"),c.css({position:"absolute",right:5,bottom:5,width:23,height:23,background:x(q.images.folder+"cubic-buttons.png")+" no-repeat -1px -126px",border:"1px solid",borderColor:"transparent",cursor:"pointer"}).hide(),z(c,{borderRadius:"3px 4px 3px 4px"}),c.hover(d,e),c.click(function(){a.showThumbnails()}),
a.frame.append(c),c=a.showImagesButton=b("<div></div>"),c.css({position:"absolute",right:5,bottom:5,width:23,height:23,background:x(q.images.folder+"cubic-buttons.png")+" no-repeat -1px -101px",border:"1px solid",borderColor:"transparent",cursor:"pointer"}).hide(),z(c,{borderRadius:"3px 4px 3px 4px"}),c.hover(d,e),c.click(function(){a.showImage()}),a.frame.append(c)};F.prototype.initImage=function(){var a=this.imageWidth=this.contentWidth-2*this.settings.base.visibleFrame,c=this.imageHeight=this.contentHeight-
2*this.settings.base.visibleFrame,d=this.imagesFrame=b("<div></div>");d.css({position:"absolute",left:this.settings.base.visibleFrame,top:this.settings.base.visibleFrame,width:a,height:c,overflow:"hidden"}).hide();z(d,{borderRadius:"3px"});this.content.append(d);a=this.imagesContainer=b("<div></div>");a.css({position:"relative",left:0,top:0});d.append(a)};F.prototype.showImage=function(b){var a=this,c=function(){function b(){setTimeout(function(){a.drag=!1},100)}a.cleanup();a.thumbnailsFrame.hide();
a.imagesFrame.show();a.showImagesButton.hide();a.showThumbnailsButton.show();a.showPrevButton();a.showNextButton();a.prevButton.unbind("click").click(function(){a.slideshowStop();a.prev()});a.nextButton.unbind("click").click(function(){a.slideshowStop();a.next()});var c=0;a.imagesContainer.draggable({axis:"x",distance:30,start:function(b,d){a.drag=!0;c=d.position.left},stop:function(d,e){30<Math.abs(Math.abs(c)-Math.abs(e.position.left))?c<e.position.left?a.prev(q.animation.duration,b):a.next(q.animation.duration,
b):a.place(q.animation.duration,b)}});a.imagesContainer.unbind("dblclick").dblclick(function(){a.showThumbnails()});P(a.imagesContainer)};!1!==b?(a.hidePrevButton(),a.hideNextButton(),a.open(a.getCurrentItem(),c)):c()};F.prototype.initThumbnails=function(){function a(){c.cleanup()}var c=this,d=c.canvas,e=c.thumbnailsWidth=c.contentWidth-2*c.settings.base.visibleFrame,g=c.thumbnailsHeight=c.contentHeight-2*c.settings.base.visibleFrame,f=c.thumbnailsFrame=b("<div></div>");f.css({position:"absolute",
left:c.settings.base.visibleFrame,top:c.settings.base.visibleFrame,width:e,height:g,overflow:"hidden"}).hide();z(f,{borderRadius:"3px"});c.content.append(f);var h=c.thumbnailsContainer=b('<div class="thumbnailsContainer"></div>');h.css({position:"relative",left:0,top:0,width:e*Math.ceil(c.items.length/20),height:g});f.append(h);for(var m=Math.round((e-5)/5),o=Math.round((g-4)/4),k=Math.round((e-5*m)/10),q=Math.round((g-4*o)/8),g=0;g<c.items.length;g++)(function(g,f){C(f.thumb,function(L){var r=g%
5,H=Math.floor(g%20/5),N=b('<a class="altgallery-thumbnail altgallery-thumbnail-'+g+'"></a>');n(N);N.attr({href:f.source}).css({display:"block",position:"absolute",left:r*m+Math.floor(g/20)*e+1*r+k,top:H*o+1*H+q,width:m,height:o,overflow:"hidden",cursor:"pointer",zIndex:Math.floor(g%20/5)});z(N,{boxShadow:"0px 3px 3px rgba(0, 0, 0, 0.5)"});N.mouseover(function(){if(c.enableThumbnailsHover&&!c.drag){var k=0;0==r?k=m/8:4==r&&(k=-m/8);var n=0;0==H?n=o/8:3==H&&(n=-o/8);c.updateCaption(f.description||
"Image "+(g+1)+" / "+c.items.length);c.cleanup();d.element.find(".altgallery-thumbnail").css({opacity:0.8});var q=b(this).clone();q.addClass("altgallery-clone");q.css({left:b(this).offset().left-h.offset().left,top:b(this).offset().top-h.offset().top,zIndex:10,opacity:1});z(q,{boxShadow:"5px 15px 13px rgba(0, 0, 0, 0.7)"});h.append(q);var G=q.find("img");q.animate({width:1.25*m,height:1.25*o,marginLeft:-m/8+k,marginTop:-o/8+n},{duration:"fast",easing:"linear",step:function(){G.css(D.fill(L.width,
L.height,q.width(),q.height()))}});q.click(function(){if(!c.drag)c.currentItem=g,q.unbind("mouseleave"),c.canvas.element.unbind("mouseleave",a),z(q,{boxShadow:"none"}),q.animate({left:c.currentPage*e,top:0,width:c.imageWidth,height:c.imageHeight,marginLeft:0,marginTop:0},{duration:"normal",step:function(){G.css(D.fill(L.width,L.height,q.width(),q.height()))},complete:function(){c.showImage()}});return!1});q.mouseleave(function(){c.cleanup();c.updateCaption(" ")})}});N.click(function(){if(!c.drag)c.currentItem=
g,c.showImage();return!1});var x=b("<img />");x.attr({src:f.thumb}).css({display:"block",position:"absolute",border:"none"}).css(D.fill(L.width,L.height,m,o));N.append(x);h.append(N)})})(g,c.items[g]);c.canvas.element.mouseleave(a);c.currentPage=0;c.preloader.hide()};F.prototype.showThumbnails=function(){function b(a,c){e.thumbnailsContainer.stop().animate({left:-e.currentPage*e.thumbnailsWidth},{duration:a||2*q.animation.duration,complete:function(){e.enableThumbnailsHover=!0;"function"==typeof c&&
c()}})}function a(c,d){if(0<e.currentPage)e.currentPage--,e.enableThumbnailsHover=!1,e.cleanup();b(c,d);e.updateNavigation()}function c(a,d){if(e.currentPage<Math.ceil(e.items.length/20)-1)e.currentPage++,e.enableThumbnailsHover=!1,e.cleanup();b(a,d);e.updateNavigation()}function d(){setTimeout(function(){e.drag=!1},100)}var e=this;e.slideshow&&e.slideshowStop();e.updateCaption(" ");e.imagesFrame.hide();e.thumbnailsFrame.show();e.showThumbnailsButton.hide();e.showImagesButton.show();e.prevButton.unbind("click").click(function(){a()});
e.nextButton.unbind("click").click(function(){c()});e.updateNavigation();var f=0;e.thumbnailsContainer.draggable({axis:"x",distance:30,start:function(b,a){e.drag=!0;f=a.position.left;e.cleanup()},stop:function(e,g){30<Math.abs(Math.abs(f)-Math.abs(g.position.left))?f<g.position.left?a(q.animation.duration,d):c(q.animation.duration,d):b(q.animation.duration,d)}});P(e.thumbnailsContainer)};F.prototype.updateNavigation=function(){var b=Math.ceil(this.items.length/20);0<this.currentPage?this.showPrevButton():
this.hidePrevButton();this.currentPage<b-1?this.showNextButton():this.hideNextButton()};F.prototype.updateCaption=function(b){(b=b||this.getCurrentItem().description)?this.caption.html(b):this.caption.html("Image "+(this.currentItem+1)+" / "+this.items.length)};F.prototype.loadImage=function(c,d){var e=this,c=c%e.items.length;e.items[c]!==a&&C(e.items[c].source,function(a){var g="altgallery-image-"+c;if(!e.imagesContainer.find("."+g).size()){g=b('<div class="'+g+'"></div>');g.css({position:"absolute",
left:e.imageWidth*c,top:0,width:e.imageWidth,height:e.imageHeight,overflow:"hidden"});var f=b('<img style="position:absolute;" />');f.attr("src",a.src);f.css(D.fill(a.width,a.height,e.imageWidth,e.imageHeight));g.append(f);e.imagesContainer.append(g)}"function"==typeof d&&d(a)})};F.prototype.open=function(a,c){var d=this,e="altgallery-image-"+d.currentItem;d.imagesContainer.find("."+e).size()?"function"==typeof c&&c():(d.preloader.show(),C(a.source,function(a){var f=b('<div class="'+e+'"></div>');
f.css({position:"absolute",left:d.imageWidth*d.currentItem,top:0,width:d.imageWidth,height:d.imageHeight,overflow:"hidden"});var h=b('<img style="position:absolute;" />');h.attr("src",a.src);h.css(D.fill(a.width,a.height,d.imageWidth,d.imageHeight));f.append(h);d.imagesContainer.append(f);d.preloader.hide();"function"==typeof c&&c()}));d.imagesContainer.stop().css({left:-d.imageWidth*d.currentItem});d.updateCaption();d.loadImage(a.id+1);d.loadImage(a.id-1)};F.prototype.place=function(b,a){this.imagesContainer.stop().animate({left:-this.imageWidth*
this.currentItem},{duration:b||2*q.animation.duration,complete:function(){"function"==typeof a&&a()}})};F.prototype.prev=function(b,a){var c=this;if(0<c.currentItem){c.currentItem--;var d=setTimeout(function(){c.preloader.show()},500);c.loadImage(c.currentItem,function(){clearTimeout(d);c.preloader.hide();c.place(b,a);c.updateCaption();c.loadImage(c.currentItem-1)})}else c.currentItem=c.items.length-1,c.showImage()};F.prototype.next=function(b,a){var c=this;if(c.currentItem<c.items.length-1){c.currentItem++;
var d=setTimeout(function(){c.preloader.show()},500);c.loadImage(c.currentItem,function(){clearTimeout(d);c.preloader.hide();c.place(b,function(){c.slideshow&&c.slideshowStart();"function"==typeof a&&a()});c.updateCaption();c.loadImage(c.currentItem+1)})}else c.currentItem=0,c.showImage(),c.slideshow&&c.slideshowStart()};F.prototype.slideshowStart=function(){var b=this;b.showImage(!1);clearTimeout(b.slideshowTimer);b.slideshow=!0;b.slideshowButton.css({background:x(q.images.folder+"cubic-buttons.png")+
" no-repeat 0px -76px"});b.slideshowButton.unbind("click").click(function(){b.slideshowStop()});b.slideshowTimer=setTimeout(function(){b.next()},1E3*b.settings.slideshowDelay)};F.prototype.slideshowStop=function(){var b=this;b.slideshow=!1;clearTimeout(b.slideshowTimer);b.slideshowButton.css({background:x(q.images.folder+"cubic-buttons.png")+" no-repeat 0px -51px"});b.slideshowButton.unbind("click").click(function(){b.slideshowStart()})};F.prototype.cleanup=function(){this.canvas.element.find(".altgallery-clone").remove();
b(this.canvas.element).find(".altgallery-thumbnail").css({opacity:1})};S.prototype.showScrollbar=function(){var a=this,c=this.settings,d=this.canvas,e=b('<div class="altgallery-scrollbar"></div>'),g=Math.round(0.8*d.width())-36;e.css({position:"absolute",zIndex:1E3,left:(d.width()-g)/2,bottom:5,width:g+36,height:17,background:t(c.scrollbar.bgColor,c.scrollbar.bgAlpha/100),"-moz-border-radius":8,"-webkit-border-radius":8,borderRadius:8});if(b.browser.msie&&9>b.browser.version){var f=sprintf("%02x%s",
255*c.scrollbar.bgAlpha/100,y(c.scrollbar.bgColor).replace("#",""));e.css({filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+f+",endColorstr=#"+f+")"})}var h=b('<div class="altgallery-scrollbar-handle"></div>'),m=g/a.items.length;h.css({position:"absolute",left:Math.round(a.currentItem*m),top:-10,width:Math.floor(m),height:30});var k=b("<div />");k.css({position:"relative",top:10,height:13,background:y(c.scrollbar.handleColor),opacity:c.scrollbar.handleAlpha/100,cursor:"ew-resize"});
k.hover(function(){k.css({opacity:1})},function(){k.css({opacity:c.scrollbar.handleAlpha/100})});h.append(k);h.draggable({axis:"x",containment:"parent",stop:function(b,c){a.currentItem=Math.floor(c.position.left/g*a.items.length);h.css({left:Math.round(a.currentItem*m)});a.animate()}});f=b("<div></div>");f.css({position:"relative",top:2,height:13,margin:"0 18px"});f.click(function(c){c=c.pageX-b(this).offset().left;a.currentItem=Math.floor(c/g*a.items.length);h.css({left:Math.round(a.currentItem*
m)});a.animate()});var n={position:"absolute",top:2,width:16,height:16,fontFamily:"Arial, Helvetica, sans-serif",fontSize:"10px",lineHeight:"14px",textAlign:"center",color:y(c.scrollbar.arrowsColor),opacity:c.scrollbar.arrowsAlpha/100,cursor:"pointer"},q=b("<div>&#9668;</div>");q.css(n);q.css({left:1});q.click(function(){a.prev()});e.append(q);q=b("<div>&#9658;</div>");q.css(n);q.css({right:1});q.click(function(){a.next()});e.append(q);f.append(h);e.append(f);d.element.append(e);P(h)};S.prototype.updateScrollbar=
function(){var b=this.canvas,a=(Math.round(0.8*b.width())-36)/this.items.length;b.element.find(".altgallery-scrollbar-handle").css({left:Math.round(this.currentItem*a)})};S.prototype.getItemStyle=function(b,a){var c=this.settings,d=this.canvas,e,f;e=this.getItemX(a);f=this.getItemZ(a);var h;h=Math.abs(e);var m=D.fit(b.width,b.height,c.maxImageWidth*(1>h?1:2>h?0.55:3>h?0.5:0.6-0.05*h),d.height()-60);return{zIndex:10*f,left:(d.width()-m.width)/2+e*d.width()/8+(e?e/h*c.maxImageWidth/3:0),top:(d.height()-
m.height)/2-30,width:m.width,height:m.height,opacity:e?0.8:1,transform:{rotateY:-(e?e/h:0)*c.imageAngle+"deg"}}};S.prototype.render=function(){function a(d,h){C(g[d].source,function(a){var m=c.getItemStyle(a,d),o=b('<a class="altgallery-item-'+d+'"></a>');g[d].link&&(o.attr("href",g[d].link),g[d].target&&o.attr("target",g[d].target));o.css({display:"block",position:"absolute",zIndex:m.zIndex,left:m.left,top:m.top,width:m.width,height:m.height,overflow:"visible",background:"#000",cursor:"pointer",
outline:"none"});k&&A(o,{rotateY:m.transform.rotateY});var s=b('<img src="" alt="" />');s.attr("src",a.src);n(s);s.css({display:"block",width:m.width,height:m.height,opacity:m.opacity});o.append(s);if(c.showReflections){a=s.clone();a.css({position:"absolute",opacity:e.reflectionAlpha/100,"-moz-transform":"scaleY(-1)","-webkit-transform":"scaleY(-1)","-o-transform":"scaleY(-1)","-ms-transform":"scaleY(-1)",transform:"scaleY(-1)",zIndex:1});var q=b('<div class="altgallery-overlay"></div>');q.css({position:"absolute",
top:m.height,width:m.width,height:m.height,background:f.element.css("backgroundColor"),zIndex:0});var v=b('<div class="altgallery-overlay"></div>');v.css({position:"absolute",top:m.height,width:m.width,height:m.height,zIndex:2});var m=f.element.css("backgroundColor"),r=[t(m,0),t(m,0.5),t(m,1)];b.browser.mozilla?v.css({background:"-moz-linear-gradient(top, "+r[0]+" 0%, "+r[1]+" 15%, "+r[2]+" 50%)"}):b.browser.webkit?v.css({background:"-webkit-linear-gradient(top, "+r[0]+" 0%, "+r[1]+" 15%, "+r[2]+
" 50%)"}):b.browser.opera?v.css({background:"-o-linear-gradient(top, "+r[0]+" 0%, "+r[1]+" 15%, "+r[2]+" 50%)"}):b.browser.msie?(m=y(m).replace("#",""),v.css({filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00"+m+",endColorstr=#ff"+m+",GradientType=0)"})):v.css({background:"linear-gradient(top, "+r[0]+" 0%, "+r[1]+" 15%, "+r[2]+" 50%)"});o.append(a);o.append(q);o.append(v)}o.click(function(){if(!c.drag){c.currentItem+=h;if(0>c.currentItem)c.currentItem=0;else if(c.currentItem>=g.length)c.currentItem=
g.length-1;c.animate()}return!1}).hover(function(){s.css({opacity:1})},function(){s.css({opacity:h?0.8:1})});d==c.currentItem&&o.unbind("click").click(function(){if(c.drag)return!1});c.scene.append(o)})}var c=this,e=this.settings,f=this.canvas,g=this.items,k=!d();c.scene.empty();c.scene.css({"-webkit-perspective":400,"-moz-perspective":400,perspective:400});var h,m,o,q,r,v=0;q=c.currentItem;r=2*Math.max(q,g.length-q);for(m=1;m<=r;m++)h=q+(m%2?parseInt(m/2):-parseInt(m/2)),0<=h&&h<g.length&&function(b){setTimeout(function(){o=
c.getItemX(b);a(b,o)},100*v++)}(h);e.useScrollBar&&c.showScrollbar();b.browser.mozilla&&c.showReflections&&c.animate()};S.prototype.animate=function(){function b(d,m,h){C(e[d].source,function(b){function k(b){function c(a){return s[a]+(q[a]-s[a])*b/1E4}o.css({left:c("left"),top:c("top"),zIndex:parseInt(c("zIndex")),width:c("width"),height:c("height")});n.css({width:c("width"),height:c("height")});a.showReflections&&r.css({top:c("height"),width:c("width"),height:c("height")});f&&A(o,{rotateY:parseFloat(s.transform.rotateY)+
(parseFloat(q.transform.rotateY)-parseFloat(s.transform.rotateY))*b/1E4+"deg"})}var o=a.scene.find(".altgallery-item-"+d),n=o.find("img"),s={left:parseInt(o.css("left")),top:parseInt(o.css("top")),zIndex:parseInt(o.css("z-index")),width:o.width(),height:o.height(),opacity:o.find("img").css("opacity"),transform:A(o)},q=a.getItemStyle(b,d);h||o.show();o.unbind("click").click(function(){if(!a.drag){a.currentItem+=m;if(0>a.currentItem)a.currentItem=0;else if(a.currentItem>=e.length)a.currentItem=e.length-
1;a.animate()}return!1}).unbind("hover").hover(function(){n.first().css({opacity:1})},function(){n.first().css({opacity:m?0.8:1})});n.first().css({opacity:q.opacity});var r=o.find(".altgallery-overlay");o.stop().prop("animate",0);h?k(1E4):o.animate({animate:1E4},{duration:500*c.flipDuration,easing:"linear",step:function(b){k(b)},complete:function(){o.prop("animate",0);d==a.currentItem&&o.unbind("click").click(function(){if(a.drag)return!1})}})})}var a=this,c=this.settings,e=this.items,f=!d(),k,h,
m,o,n;o=a.currentItem;n=2*Math.max(o,e.length-o);for(h=1;h<=n;h++)if(k=o+(h%2?parseInt(h/2):-parseInt(h/2)),0<=k&&k<e.length){var q=Math.abs(a.currentItem-k);m=a.getItemX(k);4>q?b(k,m):(a.scene.find(".altgallery-item-"+k).hide(),b(k,m,!0))}c.useScrollBar&&a.updateScrollbar()};S.prototype.open=function(b){this.currentItem=b.id;this.animate()};S.prototype.prev=function(b){b=this.currentItem-(b||1);0>b&&(b=0);if(this.currentItem!=b)this.currentItem=b,this.animate()};S.prototype.next=function(b){b=this.currentItem+
(b||1);b>=this.items.length&&(b=this.items.length-1);if(this.currentItem!=b)this.currentItem=b,this.animate()};M.prototype.render=function(){var a=this,c=this.settings,d=this.canvas;d.element.css({fontFamily:c.fontName,fontSize:parseInt(c.fontSize)+"px",lineHeight:1.2*parseInt(c.fontSize)+"px"});(function(){var e=b('<div class="altgallery-imageFrame"></div>');e.css({width:d.width()-2*c.frameSize,height:d.height()-2*c.frameSize,padding:c.frameSize,background:y(c.frameColor),borderRadius:c.cornerRadius/
2});var f=b('<div class="altgallery-image"></div>');f.css({position:"relative",width:d.width()-2*c.frameSize,height:d.height()-2*c.frameSize,overflow:"hidden",background:y(c.backgroundColor),borderRadius:c.cornerRadius/2-c.frameSize/4,cursor:"pointer"});var k=b('<img src="" alt="" />');n(f.children("img"));k.css({position:"absolute"});e.click(function(){a.next()});f.append(k);e.append(f);d.element.append(e);a.open(a.getCurrentItem())})();switch(c.initialState.toLowerCase()){default:case "show albums":this.showAlbums();
break;case "show thumbnails":this.showThumbnails();case "load image":case "start slideshow":}};M.prototype.showAlbums=function(){function a(){function f(){var b=v*s+1,a=v*s+s;if(a>c.albums.length)a=c.albums.length;t.html(b+"-"+a+" "+e.translation.Of+" "+c.albums.length);0>=v?(H.css({opacity:0.3,cursor:"default"}),H.unbind("click").click(function(){return!1})):(H.css({opacity:1,cursor:"pointer"}),H.unbind("click").click(N));v>=r-1?(y.css({opacity:0.3,cursor:"default"}),y.unbind("click").click(function(){return!1})):
(y.css({opacity:1,cursor:"pointer"}),y.unbind("click").click(A))}c.hideThumbnails();c.hideButtons();c.hideCaption();c.hideNavigation();var k=b('<div class="altgallery-albums"></div>'),h=d.width()-2*e.frameSize,m=e.iconHeight+115;k.css({position:"absolute",left:e.frameSize,top:(d.height()-m)/2,width:d.width()-2*e.frameSize,height:m,overflow:"hidden",color:"#fff",border:"1px #000",borderStyle:"solid none",zIndex:2});var o=b('<div class="altgallery-albums-overlay"></div>');o.css({position:"absolute",
left:e.frameSize,top:(d.height()-m)/2,width:d.width()-2*e.frameSize,height:m+1,background:"#000",opacity:e.panelBackgroundAlpha/100,zIndex:1});d.element.append(o);m=b("<div></div>");m.css({position:"absolute",top:10,right:20});o=b('<a class="altgallery-close" href="#">'+e.translation.Close+"</a>");o.css({marginRight:0,color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",backgroundImage:x(q.images.folder+"zen-close.png"),paddingLeft:12});
o.click(function(){c.hideAlbums();c.showButtons();c.showCaption();c.showNavigation();return!1});m.append(o);k.append(m);var s=Math.floor((h-20)/(e.iconWidth+e.iconPadding)),s=s>c.albums.length?c.albums.length:s,m=(e.iconWidth+e.iconPadding)*s-e.iconPadding,o=(e.iconWidth+e.iconPadding)*c.albums.length-e.iconPadding,r=Math.ceil(c.albums.length/s),v=0,u=b("<div>"+e.translation.Albums+"</div>");u.css({position:"absolute",left:9,top:0,padding:10,paddingLeft:25,textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.5)",
fontWeight:"bold",background:"no-repeat left center",backgroundImage:x(q.images.folder+"zen-albums.png")});k.append(u);var t=b("<span></span>");t.css({marginLeft:"1em",fontWeight:"normal"});u.append(t);u=b("<div></div>");u.css({position:"absolute",left:(h-m)/2-4,top:42,width:m+4,height:e.iconHeight+70,overflow:"hidden"});var z=b("<div></div>");z.css({position:"relative",left:0,width:o});u.append(z);h=b("<div></div>");h.css({position:"absolute",right:4,bottom:3,height:20,opacity:0.9});var H=b('<a href="#" style="float:left;"></a>');
H.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:x(q.images.folder+"zen-prev.png")});var N=function(){0<v&&v--;var b=(e.iconWidth+e.iconPadding)*s*v;z.stop().animate({left:-b},2*q.animation.duration,"easeOutQuart");f();return!1};H.click(N);h.append(H);k.append(u);var y=b('<a href="#" style="float:left;"></a>');y.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:x(q.images.folder+
"zen-next.png")});var A=function(){v<r-1&&v++;var b=(e.iconWidth+e.iconPadding)*s*v;z.stop().animate({left:-b},2*q.animation.duration,"easeOutQuart");f();return!1};y.click(A);h.append(y);k.append(h);f();for(var B,h=0;h<c.albums.length;h++)(function(a,d){var f=b("<div></div>");f.css({position:"absolute",left:(e.iconWidth+e.iconPadding)*d,top:0,width:e.iconWidth+e.iconPadding+6,overflow:"hidden",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)"});var g=b('<div class="altgallery-thumbnail"></div>');g.css({position:"relative",
width:e.iconWidth-2,height:e.iconHeight-2,overflow:"hidden",border:"1px solid",borderColor:c.currentAlbum==d?"#000":"#fff",margin:"2px",cursor:"pointer"});C(a.items[0].thumb,function(a){var c=b('<img src="" alt="" />');c.attr("src",a.src);n(c);c.css({position:"absolute"});c.css(D.fill(a.width,a.height,e.iconWidth-2,e.iconHeight-2));g.append(c)},50*d);f.append(g);f.append('<div style="padding:7px 2px 2px; font-weight:bold;">'+(a.description||"Album "+(d+1))+"<div>");f.append('<div style="padding:1px 2px;">'+
a.items.length+" "+(1==a.items.length?e.translation.Image:e.translation.Images)+"<div>");f.hover(function(){z.find(".altgallery-thumbnail").css({borderWidth:"1px",margin:"2px"});g.css({borderWidth:"3px",margin:"0px"})},function(){g.css({borderWidth:"1px",margin:"2px"})}).click(function(){if(!B){if(c.currentAlbum!=d)c.currentItem=-1;c.currentAlbum=d;c.showThumbnails()}});z.append(f)})(c.albums[h],h);d.element.append(k);1<r&&(z.draggable({axis:"x",start:function(){B=!0},stop:function(b,a){a.position.left>
a.originalPosition.left?N():A();setTimeout(function(){B=!1},100)}}),P(k))}var c=this,d=this.canvas,e=this.settings;d.element.find(".altgallery-albums").size()||a()};M.prototype.hideAlbums=function(){this.canvas.element.find(".altgallery-albums, .altgallery-albums-overlay").remove()};M.prototype.showThumbnails=function(){function a(){function k(){var b=u*r+1,a=u*r+r;if(a>f.items.length)a=f.items.length;z.html(b+"-"+a+" "+e.translation.Of+" "+f.items.length);0>=u?(y.css({opacity:0.3,cursor:"default"}),
y.unbind("click").click(function(){return!1})):(y.css({opacity:1,cursor:"pointer"}),y.unbind("click").click(A));u>=v-1?(B.css({opacity:0.3,cursor:"default"}),B.unbind("click").click(function(){return!1})):(B.css({opacity:1,cursor:"pointer"}),B.unbind("click").click(E))}c.hideAlbums();c.hideButtons();c.hideCaption();c.hideNavigation();var h=b('<div class="altgallery-images"></div>'),m=d.width()-2*e.frameSize,o=e.iconHeight+75;h.css({position:"absolute",left:e.frameSize,top:(d.height()-o)/2,width:d.width()-
2*e.frameSize,height:o,overflow:"hidden",color:"#fff",border:"1px #000",borderStyle:"solid none",zIndex:2});var s=b('<div class="altgallery-images-overlay"></div>');s.css({position:"absolute",left:e.frameSize,top:(d.height()-o)/2,width:d.width()-2*e.frameSize,height:o+1,background:"#000",opacity:e.panelBackgroundAlpha/100,zIndex:1});d.element.append(s);o=b("<div></div>");o.css({position:"absolute",top:10,right:20});1<c.albums.length&&(s=b('<a class="altgallery-back" href="#">'+e.translation.BackToAlbums+
"</a>"),s.css({marginRight:"1.5em",color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",backgroundImage:x(q.images.folder+"zen-backToAlbums.png"),paddingLeft:14}),s.click(function(){c.showAlbums();return!1}),o.append(s));s=b('<a class="altgallery-close" href="#">'+e.translation.Close+"</a>");s.css({marginRight:0,color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",
backgroundImage:x(q.images.folder+"zen-close.png"),paddingLeft:12});s.click(function(){c.hideThumbnails();c.showButtons();c.showCaption();c.showNavigation();return!1});o.append(s);h.append(o);var r=Math.floor((m-20)/(e.iconWidth+e.iconPadding)),r=r>f.items.length?f.items.length:r,o=(e.iconWidth+e.iconPadding)*r-e.iconPadding,s=(e.iconWidth+e.iconPadding)*f.items.length-e.iconPadding,v=Math.ceil(f.items.length/r),u=0,t=b("<div>"+e.translation.Images+"</div>");t.css({position:"absolute",left:9,top:0,
padding:10,paddingLeft:25,textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.5)",fontWeight:"bold",background:"no-repeat left center",backgroundImage:x(q.images.folder+"zen-thumbnails.png")});h.append(t);var z=b("<span></span>");z.css({marginLeft:"1em",fontWeight:"normal"});t.append(z);t=b("<div></div>");t.css({position:"absolute",left:(m-o)/2-4,top:42,width:o+4,height:e.iconHeight+4,overflow:"hidden"});var H=b("<div></div>");H.css({position:"relative",left:0,width:s});t.append(H);h.append(t);m=b("<div></div>");
m.css({position:"absolute",right:4,bottom:3,height:20,opacity:0.9});var y=b('<a href="#" style="float:left;"></a>');y.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:x(q.images.folder+"zen-prev.png")});var A=function(){0<u&&u--;var b=(e.iconWidth+e.iconPadding)*r*u;H.stop().animate({left:-b},2*q.animation.duration,"easeOutQuart");k();return!1};y.click(A);m.append(y);var B=b('<a href="#" style="float:left;"></a>');B.css({display:"block",
cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:x(q.images.folder+"zen-next.png")});var E=function(){u<v-1&&u++;var b=(e.iconWidth+e.iconPadding)*r*u;H.stop().animate({left:-b},2*q.animation.duration,"easeOutQuart");k();return!1};B.click(E);m.append(B);h.append(m);k();for(var F=!1,m=0;m<f.items.length;m++)(function(a,d){var f=b("<div></div>");f.css({position:"absolute",left:(e.iconWidth+e.iconPadding)*d,top:0,width:e.iconWidth+e.iconPadding+6,overflow:"hidden",
textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)"});var g=b('<div class="altgallery-thumbnail"></div>');g.css({position:"relative",width:e.iconWidth-2,height:e.iconHeight-2,overflow:"hidden",border:"1px solid",borderColor:c.currentItem==d?"#000":"#fff",margin:"2px",cursor:"pointer"});C(a.thumb,function(a){var c=b('<img src="" alt="" />');c.attr("src",a.src);n(c);c.css({position:"absolute"});c.css(D.fill(a.width,a.height,e.iconWidth-2,e.iconHeight-2));g.append(c)},50*d);f.append(g);f.hover(function(){H.find(".altgallery-thumbnail").css({borderWidth:"1px",
margin:"2px"});g.css({borderWidth:"3px",margin:"0px"})},function(){g.css({borderWidth:"1px",margin:"2px"})}).click(function(){if(!F)c.currentItem=d,c.open(c.getCurrentItem())});H.append(f)})(f.items[m],m);d.element.append(h);1<v&&(H.draggable({axis:"x",start:function(){F=!0},stop:function(a,b){b.position.left>b.originalPosition.left?A():E();setTimeout(function(){F=!1},100)}}),P(h))}var c=this,d=this.canvas,e=this.settings,f=this.getCurrentAlbum();d.element.find(".altgallery-images").size()||a()};
M.prototype.hideThumbnails=function(){this.canvas.element.find(".altgallery-images, .altgallery-images-overlay").remove()};M.prototype.showButtons=function(){function a(){var d=b('<div class="altgallery-buttons"></div>');d.css({position:"absolute",right:c.settings.frameSize,top:25+c.settings.frameSize,padding:"3px 3px 3px 1px",background:"rgba(0, 0, 0, "+c.settings.buttonsBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderRight:"none","-moz-border-top-left-radius":"3px","-moz-border-bottom-left-radius":"3px",
"-webkit-border-top-left-radius":"3px","-webkit-border-bottom-left-radius":"3px","border-top-left-radius":"3px","border-bottom-left-radius":"3px"});if(b.browser.msie&&9>b.browser.version){var e=Math.round(255*parseInt(c.settings.buttonsBackgroundAlpha)/100),e=16>e?"0"+e.toString(16):e.toString(16);d.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+e+"000000,endColorstr=#"+e+"000000)"})}c.settings.showAlbumsButton&&1<c.albums.length&&(e=b('<a href="#" style="float:left;"></a>'),
e.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:x(q.images.folder+"zen-albums.png"),opacity:0.8}),e.click(function(){c.showAlbums();return!1}),d.append(e));c.settings.showThumbnailsButton&&(e=b('<a href="#" style="float:left;"></a>'),e.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:x(q.images.folder+"zen-thumbnails.png"),opacity:0.8}),e.click(function(){c.showThumbnails();
return!1}),d.append(e));c.canvas.element.append(d)}var c=this;if("never"!=c.settings.showButtons.toLowerCase()&&(c.settings.showAlbumsButton||c.settings.showThumbnailsButton))c.canvas.element.find(".altgallery-buttons").size()||a()};M.prototype.hideButtons=function(){this.canvas.element.find(".altgallery-buttons").remove()};M.prototype.showCaption=function(){this.hideCaption();if("never"!=this.settings.showCaption.toLowerCase()&&(this.getCurrentAlbum()&&this.getCurrentAlbum().description||this.getCurrentItem()&&
this.getCurrentItem().description)){var a=b('<div class="altgallery-caption"></div>');a.css({position:"absolute",left:this.settings.frameSize,top:25+this.settings.frameSize,padding:"4px 10px 5px 7px",color:"#fff",textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.3)",background:"rgba(0, 0, 0, "+this.settings.captionBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderLeft:"none","-moz-border-top-right-radius":"3px","-moz-border-bottom-right-radius":"3px","-webkit-border-top-right-radius":"3px",
"-webkit-border-bottom-right-radius":"3px","border-top-right-radius":"3px","border-bottom-right-radius":"3px"});if(b.browser.msie&&9>b.browser.version){var c=Math.round(255*parseInt(this.settings.captionBackgroundAlpha)/100),c=16>c?"0"+c.toString(16):c.toString(16);a.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+c+"000000,endColorstr=#"+c+"000000)"})}this.getCurrentAlbum().description&&a.append('<div style="font-weight:bold;">'+this.getCurrentAlbum().description+
"</div>");this.getCurrentItem().description&&a.append('<div style="">'+this.getCurrentItem().description+"</div>");this.canvas.element.append(a)}};M.prototype.hideCaption=function(){this.canvas.element.find(".altgallery-caption").remove()};M.prototype.showNavigation=function(){function a(){var d=b('<div class="altgallery-navigation"></div>');d.css({position:"absolute",right:c.settings.frameSize,bottom:25+c.settings.frameSize,padding:"3px 3px 3px 1px",background:"rgba(0, 0, 0, "+c.settings.buttonsBackgroundAlpha/
100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderRight:"none","-moz-border-top-left-radius":"3px","-moz-border-bottom-left-radius":"3px","-webkit-border-top-left-radius":"3px","-webkit-border-bottom-left-radius":"3px","border-top-left-radius":"3px","border-bottom-left-radius":"3px"});if(b.browser.msie&&9>b.browser.version){var e=Math.round(255*parseInt(c.settings.buttonsBackgroundAlpha)/100),e=16>e?"0"+e.toString(16):e.toString(16);d.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+
e+"000000,endColorstr=#"+e+"000000)"})}c.settings.showNavigationButton&&(e=b('<a href="#" style="float:left;"></a>'),e.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:x(q.images.folder+"zen-prev.png"),opacity:0.8}),e.click(function(){c.prev();return!1}),d.append(e),e=b('<a href="#" style="float:left;"></a>'),e.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:x(q.images.folder+
"zen-next.png"),opacity:0.8}),e.click(function(){c.next();return!1}),d.append(e));c.canvas.element.append(d)}var c=this;"never"!=c.settings.showButtons.toLowerCase()&&c.settings.showNavigationButton&&(c.canvas.element.find(".altgallery-navigation").size()||a())};M.prototype.hideNavigation=function(){this.canvas.element.find(".altgallery-navigation").remove()};M.prototype.open=function(a){var c=this,d=this.canvas,e=this.settings;c.hideAlbums();c.hideThumbnails();c.showButtons();c.showCaption();c.showNavigation();
d.element.find(".altgallery-image img").hide();var f=d.element.find(".altgallery-imageFrame"),k=b('<img class="altgallery-preloader" src="'+q.images.loader+'" alt="" />');n(k);k.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});C(a.source,function(b){k.hide();d.element.find(".altgallery-preloader").remove();var f=d.element.find(".altgallery-image img");"fit"==e.imageScaleMode?f.css(D.fit(b.width,b.height,d.width()-2*e.frameSize,d.height()-2*e.frameSize)):f.css(D.fill(b.width,
b.height,d.width()-2*e.frameSize,d.height()-2*e.frameSize));f.attr("src",a.source).fadeIn(2*q.animation.duration);c.cache()});setTimeout(function(){d.element.find(".altgallery-preloader").remove();f.append(k)},500)};M.prototype.prev=function(){0<this.currentItem?this.currentItem--:this.currentItem=this.getCurrentAlbum().items.length-1;this.open(this.getCurrentItem())};M.prototype.next=function(){this.currentItem<this.getCurrentAlbum().items.length-1?this.currentItem++:this.currentItem=0;this.open(this.getCurrentItem())};
var q={};b.altgallery=altgallery=function(c,d,e){function f(){g.each(function(){ba(this,c,d)})}e===a&&"function"!=typeof d&&(e=d,d=a);var g;e===a?(window.altgallery_id++,e="altgallery-"+window.altgallery_id,document.write('<div id="'+e+'"></div>'),g=b(document.getElementById(e))):g=b(e);c=b.extend(!0,{width:"550px",height:"400px",background:"none",images:{folder:Z+"img/",left:"left.png",right:"right.png",close:"close.png",loader:"loader.png"},animation:{duration:500},config:{settings:{}}},c);if(c.images.folder){c.images.folder=
c.images.folder.replace(/\/+$/,"")+"/";for(var k in c.images)"folder"!=k&&!c.images[k].match("/")&&(c.images[k]=c.images.folder+c.images[k])}if("string"==typeof c.config){g.css({visibility:"hidden"});var h={load:function(b,c,d){if(c!==a)switch(c.toLowerCase()){case "xml":this.loadXML(b,d);break;default:case "json":this.loadJSON(b,d)}else b.match(/(xml)$/i)?this.loadXML(b,d):this.loadJSON(b,d)},loadJSON:function(a,c){b.ajax({url:a,dataType:"json",success:function(a){a=h.parse(a);"function"==typeof c&&
c(a)},error:function(){"function"==typeof c&&c({})}})},loadXML:function(a,c){function d(a){var b;"undefined"==typeof b&&(b=function(){});b.ObjTree=function(){return this};b.ObjTree.prototype.attr_prefix="";b.ObjTree.prototype.parseDOM=function(b){if(b){this.__force_array={};if(this.force_array)for(var a=0;a<this.force_array.length;a++)this.__force_array[this.force_array[a]]=1;a=this.parseElement(b);this.__force_array[b.nodeName]&&(a=[a]);if(11!=b.nodeType){var c={};c[b.nodeName]=a;a=c}return a}};
b.ObjTree.prototype.parseElement=function(a){if(7!=a.nodeType){if(3==a.nodeType||4==a.nodeType)return null==a.nodeValue.match(/[^\x00-\x20]/)?void 0:a.nodeValue;var b,c={};if(a.attributes&&a.attributes.length){b={};for(var d=0;d<a.attributes.length;d++){var e=a.attributes[d].nodeName;if("string"==typeof e){var f=a.attributes[d].nodeValue;f&&(e=this.attr_prefix+e,"undefined"==typeof c[e]&&(c[e]=0),c[e]++,this.addNode(b,e,c[e],f))}}}if(a.childNodes&&a.childNodes.length){e=!0;b&&(e=!1);for(d=0;d<a.childNodes.length&&
e;d++)f=a.childNodes[d].nodeType,3==f||4==f||(e=!1);if(e){b||(b="");for(d=0;d<a.childNodes.length;d++)b+=a.childNodes[d].nodeValue}else{b||(b={});for(d=0;d<a.childNodes.length;d++)if(e=a.childNodes[d].nodeName,"string"==typeof e&&(f=this.parseElement(a.childNodes[d])))"undefined"==typeof c[e]&&(c[e]=0),c[e]++,this.addNode(b,e,c[e],f)}}return b}};b.ObjTree.prototype.addNode=function(a,b,c,d){this.__force_array[b]?(1==c&&(a[b]=[]),a[b][a[b].length]=d):1==c?a[b]=d:2==c?a[b]=[a[b],d]:a[b][a[b].length]=
d};b=new b.ObjTree;b.attr_prefix="";return b.parseDOM(a)["#document"]}b.ajax({url:a,dataType:"xml",success:function(a){a=d(a);a=h.parse(a);"function"==typeof c&&c(a)},error:function(){"function"==typeof c&&c({})}})},parse:function(a){if(a.gallery){if(a.galleryName)a.gallery.galleryName=a.galleryName;a=a.gallery;if(a.items&&a.items.item)a.items=a.items.item.length?a.items.item:[a.items.item];if(a.albums){if(a.albums.album)a.albums=a.albums.album.length?a.albums.album:[a.albums.album];for(var b=0;b<
a.albums.length;b++)if(a.albums[b].items.item)a.albums[b].items=a.albums[b].items.item.length?a.albums[b].items.item:[a.albums[b].items.item]}}return a}};h.load(c.config,c.configType,function(a){g.css({visibility:"visible"});c.config=a;f()})}else f();return g};b.fn.altgallery=function(a,c){b.altgallery(a,c,this);return this};b.altbox=altbox=function(a,c){if(d!=top)var d=top,e=d.document;c=b.extend(!0,{frame:{color:"#000",borderRadius:0},mask:{color:"#000",opacity:0.7},images:{folder:Z+"img/",close:"close.png",
loader:"loader.gif"},animation:{duration:700}},c);if(c.images.folder){c.images.folder=c.images.folder.replace(/\/+$/,"")+"/";for(var f in c.images)"folder"!=f&&!c.images[f].match("/")&&(c.images[f]=c.images.folder+c.images[f])}var k=b('<div style="position:fixed; z-index:999; left:0; top:0; width:100%; height:100%; background:no-repeat center;"></div>');k.css({opacity:0,backgroundColor:c.mask.color,backgroundImage:x(c.images.loader)});b(e.body).append(k);k.animate({opacity:c.mask.opacity},c.animation.duration);
var h=new Image;h.onload=function(){function f(){k.remove();t.remove()}function g(){z.remove();r.opacity="hide";t.animate(r,0.67*c.animation.duration);y.animate({width:r.width-20,height:r.height-20},0.67*c.animation.duration);k.fadeOut(c.animation.duration,function(){f()});return!1}var n=b(d).width()-100,q=b(d).height()-100,r=D.fit(h.width/4,h.height/4,n,q,{noEnlarge:!0,minWidth:100,minHeight:100});r.left+=50;r.top+=50;var u=D.fit(h.width+20,h.height+20,n,q,{noEnlarge:!0,minWidth:120,minHeight:120});
u.left+=50;u.top+=50;var t=b('<div style="position:fixed; z-index:1000;"></div>');t.css(r);t.css({backgroundColor:c.frame.color,borderRadius:c.frame.borderRadius,MozUserSelect:"none",webkitUserSelect:"none",userSelect:"none"});t.hide();var y=b('<img src="'+a+'" alt="" style="display:block;" />');y.css({margin:"10px",width:r.width-20,height:r.height-20,borderRadius:8<c.frame.borderRadius?c.frame.borderRadius-8:0});var z=b('<a href="#" style="display:block; position:absolute; right:-12px; top:-10px; width:30px; height:30px; background:no-repeat center;"></a>');
z.css({backgroundImage:x(c.images.close)});t.append(y);b(e.body).append(t);(function(){k.css({backgroundImage:"none"});y.animate({width:u.width-20,height:u.height-20,margin:"10px"},c.animation.duration,"easeOutBack");u.opacity="show";t.animate(u,c.animation.duration,"easeOutBack",function(){t.append(z)})})();b(d).resize(function(){n=b(d).width()-100;q=b(d).height()-100;r=D.fit(h.width/4,h.height/4,n,q,{noEnlarge:!0,minWidth:100,minHeight:100});r.left+=50;r.top+=50;u=D.fit(h.width+20,h.height+20,n,
q,{noEnlarge:!0,minWidth:120,minHeight:120});u.left+=50;u.top+=50;t.css(u);y.css({width:u.width-20,height:u.height-20})});k.click(f);z.click(g);t.dblclick(g)};h.src=a}})(jQuery);
