/**
 * altgallery, jQuery Plugin
 *
 * @version 0.5.2
 * @copyright 2011-2012 Flash-Gallery.com
 */

(function(b,a){function c(a,c){var h=a.nodeName.toLowerCase();if("area"===h){var h=a.parentNode,f=h.name;if(!a.href||!f||"map"!==h.nodeName.toLowerCase())return!1;h=b("img[usemap=#"+f+"]")[0];return!!h&&d(h)}return(/input|select|textarea|button|object/.test(h)?!a.disabled:"a"==h?a.href||c:c)&&d(a)}function d(a){return!b(a).parents().andSelf().filter(function(){return"hidden"===b.curCSS(this,"visibility")||b.expr.filters.hidden(this)}).length}b.ui=b.ui||{};b.ui.version||(b.extend(b.ui,{version:"1.8.18",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),b.fn.extend({propAttr:b.fn.prop||b.fn.attr,_focus:b.fn.focus,focus:function(a,c){return"number"===typeof a?this.each(function(){var d=
this;setTimeout(function(){b(d).focus();c&&c.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=b.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.curCSS(this,"position",1))&&/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.curCSS(this,
"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?b(document):a},zIndex:function(c){if(c!==a)return this.css("zIndex",c);if(this.length)for(var c=b(this[0]),d;c.length&&c[0]!==document;){d=c.css("position");if("absolute"===d||"relative"===d||"fixed"===d)if(d=parseInt(c.css("zIndex"),10),!isNaN(d)&&0!==d)return d;c=c.parent()}return 0},disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),b.each(["Width","Height"],function(c,d){function h(a,x,o,L){b.each(f,function(){x-=parseFloat(b.curCSS(a,"padding"+this,!0))||0;o&&(x-=parseFloat(b.curCSS(a,"border"+this+"Width",!0))||0);L&&(x-=parseFloat(b.curCSS(a,"margin"+this,!0))||0)});return x}var f="Width"===d?["Left","Right"]:["Top","Bottom"],z=d.toLowerCase(),B={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,
outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+d]=function(c){return c===a?B["inner"+d].call(this):this.each(function(){b(this).css(z,h(this,c)+"px")})};b.fn["outer"+d]=function(a,x){return"number"!==typeof a?B["outer"+d].call(this,a):this.each(function(){b(this).css(z,h(this,a,!0,x)+"px")})}}),b.extend(b.expr[":"],{data:function(a,c,d){return!!b.data(a,d[3])},focusable:function(a){return c(a,!isNaN(b.attr(a,"tabindex")))},tabbable:function(a){var d=b.attr(a,"tabindex"),h=isNaN(d);
return(h||0<=d)&&c(a,!h)}}),b(function(){var a=document.body,c=a.appendChild(c=document.createElement("div"));b.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=100===c.offsetHeight;b.support.selectstart="onselectstart"in c;a.removeChild(c).style.display="none"}),b.extend(b.ui,{plugin:{add:function(a,c,d){var a=b.ui[a].prototype,f;for(f in d)a.plugins[f]=a.plugins[f]||[],a.plugins[f].push([c,d[f]])},call:function(b,a,c){if((a=b.plugins[a])&&b.element[0].parentNode)for(var d=
0;d<a.length;d++)b.options[a[d][0]]&&a[d][1].apply(b.element,c)}},contains:function(b,a){return document.compareDocumentPosition?b.compareDocumentPosition(a)&16:b!==a&&b.contains(a)},hasScroll:function(a,c){if("hidden"===b(a).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",f=!1;if(0<a[d])return!0;a[d]=1;f=0<a[d];a[d]=0;return f},isOverAxis:function(b,a,c){return b>a&&b<a+c},isOver:function(a,c,d,f,z,B){return b.ui.isOverAxis(a,d,z)&&b.ui.isOverAxis(c,f,B)}}))})(jQuery);
(function(b,a){if(b.cleanData){var c=b.cleanData;b.cleanData=function(a){for(var d=0,h;null!=(h=a[d]);d++)try{b(h).triggerHandler("remove")}catch(f){}c(a)}}else{var d=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){c||(!a||b.filter(a,[this]).length)&&b("*",this).add([this]).each(function(){try{b(this).triggerHandler("remove")}catch(a){}});return d.call(b(this),a,c)})}}b.widget=function(a,c,d){var f=a.split(".")[0],z,a=a.split(".")[1];z=f+"-"+a;if(!d)d=c,c=b.Widget;b.expr[":"][z]=
function(c){return!!b.data(c,a)};b[f]=b[f]||{};b[f][a]=function(b,a){arguments.length&&this._createWidget(b,a)};c=new c;c.options=b.extend(!0,{},c.options);b[f][a].prototype=b.extend(!0,c,{namespace:f,widgetName:a,widgetEventPrefix:b[f][a].prototype.widgetEventPrefix||a,widgetBaseClass:z},d);b.widget.bridge(a,b[f][a])};b.widget.bridge=function(c,d){b.fn[c]=function(h){var f="string"===typeof h,z=Array.prototype.slice.call(arguments,1),B=this,h=!f&&z.length?b.extend.apply(null,[!0,h].concat(z)):h;
if(f&&"_"===h.charAt(0))return B;f?this.each(function(){var d=b.data(this,c),x=d&&b.isFunction(d[h])?d[h].apply(d,z):d;if(x!==d&&x!==a)return B=x,!1}):this.each(function(){var a=b.data(this,c);a?a.option(h||{})._init():b.data(this,c,new d(h,this))});return B}};b.Widget=function(b,a){arguments.length&&this._createWidget(b,a)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=b.extend(!0,
{},this.options,this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var h=c;if(0===arguments.length)return b.extend({},this.options);if("string"===typeof c){if(d===a)return this.options[c];h={};h[c]=d}this._setOptions(h);return this},_setOptions:function(a){var c=this;b.each(a,function(b,a){c._setOption(b,a)});return this},_setOption:function(b,a){this.options[b]=a;"disabled"===b&&this.widget()[a?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
a);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,c,d){var f,z=this.options[a],d=d||{},c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();c.target=this.element[0];if(a=c.originalEvent)for(f in a)f in c||(c[f]=a[f]);this.element.trigger(c,d);return!(b.isFunction(z)&&!1===z.call(this.element[0],c,d)||c.isDefaultPrevented())}}})(jQuery);
(function(b){var a=!1;b(document).mouseup(function(){a=!1});b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(d){if(!0===b.data(d.target,a.widgetName+".preventClickEvent"))return b.removeData(d.target,a.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName)},_mouseDown:function(c){if(!a){this._mouseStarted&&this._mouseUp(c);this._mouseDownEvent=c;var d=this,y=1==c.which,w="string"==typeof this.options.cancel&&c.target.nodeName?b(c.target).closest(this.options.cancel).length:!1;if(!y||w||!this._mouseCapture(c))return!0;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay);if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=
!1!==this._mouseStart(c),!this._mouseStarted))return c.preventDefault(),!0;!0===b.data(c.target,this.widgetName+".preventClickEvent")&&b.removeData(c.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(b){return d._mouseMove(b)};this._mouseUpDelegate=function(b){return d._mouseUp(b)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);c.preventDefault();return a=!0}},_mouseMove:function(a){if(b.browser.msie&&
!(9<=document.documentMode)&&!a.button)return this._mouseUp(a);if(this._mouseStarted)return this._mouseDrag(a),a.preventDefault();if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a))(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,a))?this._mouseDrag(a):this._mouseUp(a);return!this._mouseStarted},_mouseUp:function(a){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted)this._mouseStarted=
!1,a.target==this._mouseDownEvent.target&&b.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a);return!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(b){b.widget("ui.draggable",b.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){if("original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position=
"relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(a){var c=this.options;if(this.helper||c.disabled||b(a.target).is(".ui-resizable-handle"))return!1;
this.handle=this._getHandle(a);if(!this.handle)return!1;c.iframeFix&&b(!0===c.iframeFix?"iframe":c.iframeFix).each(function(){b('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(b(this).offset()).appendTo("body")});return!0},_mouseStart:function(a){var c=this.options;this.helper=this._createHelper(a);this._cacheHelperProportions();if(b.ui.ddmanager)b.ui.ddmanager.current=
this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(a);this.originalPageX=a.pageX;
this.originalPageY=a.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();if(!1===this._trigger("start",a))return this._clear(),!1;this._cacheHelperProportions();b.ui.ddmanager&&!c.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,a);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(a,!0);b.ui.ddmanager&&b.ui.ddmanager.dragStart(this,a);return!0},_mouseDrag:function(a,c){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");
if(!c){var d=this._uiHash();if(!1===this._trigger("drag",a,d))return this._mouseUp({}),!1;this.position=d.position}if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";b.ui.ddmanager&&b.ui.ddmanager.drag(this,a);return!1},_mouseStop:function(a){var c=!1;b.ui.ddmanager&&!this.options.dropBehaviour&&(c=b.ui.ddmanager.drop(this,a));if(this.dropped)c=this.dropped,this.dropped=
!1;if((!this.element[0]||!this.element[0].parentNode)&&"original"==this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||!0===this.options.revert||b.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var d=this;b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==d._trigger("stop",a)&&d._clear()})}else!1!==this._trigger("stop",a)&&this._clear();return!1},_mouseUp:function(a){!0===
this.options.iframeFix&&b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});b.ui.ddmanager&&b.ui.ddmanager.dragStop(this,a);return b.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var c=!this.options.handle||!b(this.options.handle,this.element).length?!0:!1;b(this.options.handle,this.element).find("*").andSelf().each(function(){this==a.target&&(c=
!0)});return c},_createHelper:function(a){var c=this.options,a=b.isFunction(c.helper)?b(c.helper.apply(this.element[0],[a])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;a.parents("body").length||a.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){"string"==typeof a&&(a=a.split(" "));b.isArray(a)&&(a={left:+a[0],top:+a[1]||
0});if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],
this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&b.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var b=this.element.position();return{top:b.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if("parent"==a.containment)a.containment=this.helper[0].parentNode;if("document"==a.containment||"window"==a.containment)this.containment=["document"==a.containment?0:b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==a.containment?0:b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==a.containment?0:b(window).scrollLeft())+b("document"==a.containment?document:
window).width()-this.helperProportions.width-this.margins.left,("document"==a.containment?0:b(window).scrollTop())+(b("document"==a.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var a=b(a.containment),c=a[0];if(c){a.offset();var d="hidden"!=b(c).css("overflow");this.containment=[(parseInt(b(c).css("borderLeftWidth"),10)||0)+(parseInt(b(c).css("paddingLeft"),
10)||0),(parseInt(b(c).css("borderTopWidth"),10)||0)+(parseInt(b(c).css("paddingTop"),10)||0),(d?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(b(c).css("borderLeftWidth"),10)||0)-(parseInt(b(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(b(c).css("borderTopWidth"),10)||0)-(parseInt(b(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];
this.relative_container=a}}else if(a.containment.constructor==Array)this.containment=a.containment},_convertPositionTo:function(a,c){if(!c)c=this.position;var d="absolute"==a?1:-1,y="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,w=/(html|body)/i.test(y[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(b.browser.safari&&526>b.browser.version&&"fixed"==this.cssPosition?
0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():w?0:y.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(b.browser.safari&&526>b.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():w?0:y.scrollLeft())*d)}},_generatePosition:function(a){var c=this.options,d="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,
y=/(html|body)/i.test(d[0].tagName),w=a.pageX,h=a.pageY;if(this.originalPosition){var f;if(this.containment)this.relative_container?(f=this.relative_container.offset(),f=[this.containment[0]+f.left,this.containment[1]+f.top,this.containment[2]+f.left,this.containment[3]+f.top]):f=this.containment,a.pageX-this.offset.click.left<f[0]&&(w=f[0]+this.offset.click.left),a.pageY-this.offset.click.top<f[1]&&(h=f[1]+this.offset.click.top),a.pageX-this.offset.click.left>f[2]&&(w=f[2]+this.offset.click.left),
a.pageY-this.offset.click.top>f[3]&&(h=f[3]+this.offset.click.top);c.grid&&(h=c.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY,h=f?!(h-this.offset.click.top<f[1]||h-this.offset.click.top>f[3])?h:!(h-this.offset.click.top<f[1])?h-c.grid[1]:h+c.grid[1]:h,w=c.grid[0]?this.originalPageX+Math.round((w-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX,w=f?!(w-this.offset.click.left<f[0]||w-this.offset.click.left>f[2])?w:!(w-this.offset.click.left<
f[0])?w-c.grid[0]:w+c.grid[0]:w)}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(b.browser.safari&&526>b.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():y?0:d.scrollTop()),left:w-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(b.browser.safari&&526>b.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():y?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");
this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(a,c,d){d=d||this._uiHash();b.ui.plugin.call(this,a,[c,d]);if("drag"==a)this.positionAbs=this._convertPositionTo("absolute");return b.Widget.prototype._trigger.call(this,a,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});b.extend(b.ui.draggable,{version:"1.8.18"});
b.ui.plugin.add("draggable","connectToSortable",{start:function(a,c){var d=b(this).data("draggable"),y=d.options,w=b.extend({},c,{item:d.element});d.sortables=[];b(y.connectToSortable).each(function(){var c=b.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",a,w))})},stop:function(a,c){var d=b(this).data("draggable"),y=b.extend({},c,{item:d.element});b.each(d.sortables,function(){if(this.instance.isOver){this.instance.isOver=
0;d.cancelHelperRemoval=!0;this.instance.cancelHelperRemoval=!1;if(this.shouldRevert)this.instance.options.revert=!0;this.instance._mouseStop(a);this.instance.options.helper=this.instance.options._helper;"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})}else this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",a,y)})},drag:function(a,c){var d=b(this).data("draggable"),y=this;b.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs;
this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver)this.instance.isOver=1,this.instance.currentItem=b(y).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},a.target=this.instance.currentItem[0],this.instance._mouseCapture(a,
!0),this.instance._mouseStart(a,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",a),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d;this.instance.currentItem&&this.instance._mouseDrag(a)}else if(this.instance.isOver)this.instance.isOver=
0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",a),d.dropped=!1})}});b.ui.plugin.add("draggable","cursor",{start:function(){var a=b("body"),c=b(this).data("draggable").options;if(a.css("cursor"))c._cursor=
a.css("cursor");a.css("cursor",c.cursor)},stop:function(){var a=b(this).data("draggable").options;a._cursor&&b("body").css("cursor",a._cursor)}});b.ui.plugin.add("draggable","opacity",{start:function(a,c){var d=b(c.helper),y=b(this).data("draggable").options;if(d.css("opacity"))y._opacity=d.css("opacity");d.css("opacity",y.opacity)},stop:function(a,c){var d=b(this).data("draggable").options;d._opacity&&b(c.helper).css("opacity",d._opacity)}});b.ui.plugin.add("draggable","scroll",{start:function(){var a=
b(this).data("draggable");if(a.scrollParent[0]!=document&&"HTML"!=a.scrollParent[0].tagName)a.overflowOffset=a.scrollParent.offset()},drag:function(a){var c=b(this).data("draggable"),d=c.options,y=!1;if(c.scrollParent[0]!=document&&"HTML"!=c.scrollParent[0].tagName){if(!d.axis||"x"!=d.axis)if(c.overflowOffset.top+c.scrollParent[0].offsetHeight-a.pageY<d.scrollSensitivity)c.scrollParent[0].scrollTop=y=c.scrollParent[0].scrollTop+d.scrollSpeed;else if(a.pageY-c.overflowOffset.top<d.scrollSensitivity)c.scrollParent[0].scrollTop=
y=c.scrollParent[0].scrollTop-d.scrollSpeed;if(!d.axis||"y"!=d.axis)if(c.overflowOffset.left+c.scrollParent[0].offsetWidth-a.pageX<d.scrollSensitivity)c.scrollParent[0].scrollLeft=y=c.scrollParent[0].scrollLeft+d.scrollSpeed;else if(a.pageX-c.overflowOffset.left<d.scrollSensitivity)c.scrollParent[0].scrollLeft=y=c.scrollParent[0].scrollLeft-d.scrollSpeed}else{if(!d.axis||"x"!=d.axis)a.pageY-b(document).scrollTop()<d.scrollSensitivity?y=b(document).scrollTop(b(document).scrollTop()-d.scrollSpeed):
b(window).height()-(a.pageY-b(document).scrollTop())<d.scrollSensitivity&&(y=b(document).scrollTop(b(document).scrollTop()+d.scrollSpeed));if(!d.axis||"y"!=d.axis)a.pageX-b(document).scrollLeft()<d.scrollSensitivity?y=b(document).scrollLeft(b(document).scrollLeft()-d.scrollSpeed):b(window).width()-(a.pageX-b(document).scrollLeft())<d.scrollSensitivity&&(y=b(document).scrollLeft(b(document).scrollLeft()+d.scrollSpeed))}!1!==y&&b.ui.ddmanager&&!d.dropBehaviour&&b.ui.ddmanager.prepareOffsets(c,a)}});
b.ui.plugin.add("draggable","snap",{start:function(){var a=b(this).data("draggable"),c=a.options;a.snapElements=[];b(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var c=b(this),y=c.offset();this!=a.element[0]&&a.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:y.top,left:y.left})})},drag:function(a,c){for(var d=b(this).data("draggable"),y=d.options,w=y.snapTolerance,h=c.offset.left,f=h+d.helperProportions.width,z=c.offset.top,B=z+d.helperProportions.height,
I=d.snapElements.length-1;0<=I;I--){var x=d.snapElements[I].left,o=x+d.snapElements[I].width,L=d.snapElements[I].top,A=L+d.snapElements[I].height;if(x-w<h&&h<o+w&&L-w<z&&z<A+w||x-w<h&&h<o+w&&L-w<B&&B<A+w||x-w<f&&f<o+w&&L-w<z&&z<A+w||x-w<f&&f<o+w&&L-w<B&&B<A+w){if("inner"!=y.snapMode){var n=Math.abs(L-B)<=w,P=Math.abs(A-z)<=w,E=Math.abs(x-f)<=w,Q=Math.abs(o-h)<=w;if(n)c.position.top=d._convertPositionTo("relative",{top:L-d.helperProportions.height,left:0}).top-d.margins.top;if(P)c.position.top=d._convertPositionTo("relative",
{top:A,left:0}).top-d.margins.top;if(E)c.position.left=d._convertPositionTo("relative",{top:0,left:x-d.helperProportions.width}).left-d.margins.left;if(Q)c.position.left=d._convertPositionTo("relative",{top:0,left:o}).left-d.margins.left}var U=n||P||E||Q;if("outer"!=y.snapMode){n=Math.abs(L-z)<=w;P=Math.abs(A-B)<=w;E=Math.abs(x-h)<=w;Q=Math.abs(o-f)<=w;if(n)c.position.top=d._convertPositionTo("relative",{top:L,left:0}).top-d.margins.top;if(P)c.position.top=d._convertPositionTo("relative",{top:A-d.helperProportions.height,
left:0}).top-d.margins.top;if(E)c.position.left=d._convertPositionTo("relative",{top:0,left:x}).left-d.margins.left;if(Q)c.position.left=d._convertPositionTo("relative",{top:0,left:o-d.helperProportions.width}).left-d.margins.left}!d.snapElements[I].snapping&&(n||P||E||Q||U)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,a,b.extend(d._uiHash(),{snapItem:d.snapElements[I].item}));d.snapElements[I].snapping=n||P||E||Q||U}else d.snapElements[I].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,
a,b.extend(d._uiHash(),{snapItem:d.snapElements[I].item})),d.snapElements[I].snapping=!1}}});b.ui.plugin.add("draggable","stack",{start:function(){var a=b(this).data("draggable").options,a=b.makeArray(b(a.stack)).sort(function(a,c){return(parseInt(b(a).css("zIndex"),10)||0)-(parseInt(b(c).css("zIndex"),10)||0)});if(a.length){var c=parseInt(a[0].style.zIndex)||0;b(a).each(function(b){this.style.zIndex=c+b});this[0].style.zIndex=c+a.length}}});b.ui.plugin.add("draggable","zIndex",{start:function(a,
c){var d=b(c.helper),y=b(this).data("draggable").options;if(d.css("zIndex"))y._zIndex=d.css("zIndex");d.css("zIndex",y.zIndex)},stop:function(a,c){var d=b(this).data("draggable").options;d._zIndex&&b(c.helper).css("zIndex",d._zIndex)}})})(jQuery);
jQuery.effects||function(b,a){function c(a){var o;return a&&a.constructor==Array&&3==a.length?a:(o=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(o[1],10),parseInt(o[2],10),parseInt(o[3],10)]:(o=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))?[2.55*parseFloat(o[1]),2.55*parseFloat(o[2]),2.55*parseFloat(o[3])]:(o=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?[parseInt(o[1],16),parseInt(o[2],
16),parseInt(o[3],16)]:(o=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))?[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(a)?z.transparent:z[b.trim(a).toLowerCase()]}function d(){var b=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,a={},c,d;if(b&&b.length&&b[0]&&b[b[0]])for(var n=b.length;n--;)c=b[n],"string"==typeof b[c]&&(d=c.replace(/\-(\w)/g,function(b,a){return a.toUpperCase()}),a[d]=b[c]);else for(c in b)"string"===
typeof b[c]&&(a[c]=b[c]);return a}function y(a){var o,c;for(o in a)c=a[o],(null==c||b.isFunction(c)||o in I||/scrollbar/.test(o)||!/color/i.test(o)&&isNaN(parseFloat(c)))&&delete a[o];return a}function w(b,a){var c={_:0},d;for(d in a)b[d]!=a[d]&&(c[d]=a[d]);return c}function h(a,o,c,d){if("object"==typeof a)d=o,c=null,o=a,a=o.effect;b.isFunction(o)&&(d=o,c=null,o={});if("number"==typeof o||b.fx.speeds[o])d=c,c=o,o={};b.isFunction(c)&&(d=c,c=null);o=o||{};c=c||o.duration;c=b.fx.off?0:"number"==typeof c?
c:c in b.fx.speeds?b.fx.speeds[c]:b.fx.speeds._default;d=d||o.complete;return[a,o,c,d]}function f(a){return!a||"number"===typeof a||b.fx.speeds[a]||"string"===typeof a&&!b.effects[a]?!0:!1}b.effects={};b.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,borderColor,color,outlineColor".split(","),function(a,o){b.fx.step[o]=function(a){if(!a.colorInit){var d;d=a.elem;var x=o,f;do{f=b.curCSS(d,x);if(""!=f&&"transparent"!=f||b.nodeName(d,"body"))break;x="backgroundColor"}while(d=
d.parentNode);d=c(f);a.start=d;a.end=c(a.end);a.colorInit=!0}a.elem.style[o]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var z={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],
darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],
maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},B=["add","remove","toggle"],I={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};b.effects.animateClass=function(a,o,c,A){b.isFunction(c)&&(A=c,c=null);return this.queue(function(){var n=b(this),f=n.attr("style")||
" ",h=y(d.call(this)),z,I=n.attr("class");b.each(B,function(b,o){if(a[o])n[o+"Class"](a[o])});z=y(d.call(this));n.attr("class",I);n.animate(w(h,z),{queue:!1,duration:o,easing:c,complete:function(){b.each(B,function(b,o){if(a[o])n[o+"Class"](a[o])});"object"==typeof n.attr("style")?(n.attr("style").cssText="",n.attr("style").cssText=f):n.attr("style",f);A&&A.apply(this,arguments);b.dequeue(this)}})})};b.fn.extend({_addClass:b.fn.addClass,addClass:function(a,o,c,d){return o?b.effects.animateClass.apply(this,
[{add:a},o,c,d]):this._addClass(a)},_removeClass:b.fn.removeClass,removeClass:function(a,o,c,d){return o?b.effects.animateClass.apply(this,[{remove:a},o,c,d]):this._removeClass(a)},_toggleClass:b.fn.toggleClass,toggleClass:function(c,o,d,A,n){return"boolean"==typeof o||o===a?d?b.effects.animateClass.apply(this,[o?{add:c}:{remove:c},d,A,n]):this._toggleClass(c,o):b.effects.animateClass.apply(this,[{toggle:c},o,d,A])},switchClass:function(a,o,c,d,n){return b.effects.animateClass.apply(this,[{add:o,
remove:a},c,d,n])}});b.extend(b.effects,{version:"1.8.16",save:function(b,a){for(var c=0;c<a.length;c++)null!==a[c]&&b.data("ec.storage."+a[c],b[0].style[a[c]])},restore:function(b,a){for(var c=0;c<a.length;c++)null!==a[c]&&b.css(a[c],b.data("ec.storage."+a[c]))},setMode:function(b,a){"toggle"==a&&(a=b.is(":hidden")?"show":"hide");return a},getBaseline:function(b,a){var c,d;switch(b[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=1;break;default:c=b[0]/a.height}switch(b[1]){case "left":d=
0;break;case "center":d=0.5;break;case "right":d=1;break;default:d=b[1]/a.width}return{x:d,y:c}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper"))return a.parent();var o={width:a.outerWidth(!0),height:a.outerHeight(!0),"float":a.css("float")},c=b("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),d=document.activeElement;a.wrap(c);(a[0]===d||b.contains(a[0],d))&&b(d).focus();c=a.parent();"static"==a.css("position")?
(c.css({position:"relative"}),a.css({position:"relative"})):(b.extend(o,{position:a.css("position"),zIndex:a.css("z-index")}),b.each(["top","left","bottom","right"],function(b,c){o[c]=a.css(c);isNaN(parseInt(o[c],10))&&(o[c]="auto")}),a.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));return c.css(o).show()},removeWrapper:function(a){var c,d=document.activeElement;return a.parent().is(".ui-effects-wrapper")?(c=a.parent().replaceWith(a),(a[0]===d||b.contains(a[0],d))&&b(d).focus(),
c):a},setTransition:function(a,c,d,A){A=A||{};b.each(c,function(b,c){unit=a.cssUnit(c);0<unit[0]&&(A[c]=unit[0]*d+unit[1])});return A}});b.fn.extend({effect:function(a,c,d,A){var n=h.apply(this,arguments),f={options:n[1],duration:n[2],callback:n[3]},n=f.options.mode,w=b.effects[a];return b.fx.off||!w?n?this[n](f.duration,f.callback):this.each(function(){f.callback&&f.callback.call(this)}):w.call(this,f)},_show:b.fn.show,show:function(b){if(f(b))return this._show.apply(this,arguments);var a=h.apply(this,
arguments);a[1].mode="show";return this.effect.apply(this,a)},_hide:b.fn.hide,hide:function(b){if(f(b))return this._hide.apply(this,arguments);var a=h.apply(this,arguments);a[1].mode="hide";return this.effect.apply(this,a)},__toggle:b.fn.toggle,toggle:function(a){if(f(a)||"boolean"===typeof a||b.isFunction(a))return this.__toggle.apply(this,arguments);var c=h.apply(this,arguments);c[1].mode="toggle";return this.effect.apply(this,c)},cssUnit:function(a){var c=this.css(a),d=[];b.each(["em","px","%",
"pt"],function(b,a){0<c.indexOf(a)&&(d=[parseFloat(c),a])});return d}});b.easing.jswing=b.easing.swing;b.extend(b.easing,{def:"easeOutQuad",swing:function(a,c,d,A,n){return b.easing[b.easing.def](a,c,d,A,n)},easeInQuad:function(b,a,c,d,n){return d*(a/=n)*a+c},easeOutQuad:function(b,a,c,d,n){return-d*(a/=n)*(a-2)+c},easeInOutQuad:function(b,a,c,d,n){return 1>(a/=n/2)?d/2*a*a+c:-d/2*(--a*(a-2)-1)+c},easeInCubic:function(b,a,c,d,n){return d*(a/=n)*a*a+c},easeOutCubic:function(b,a,c,d,n){return d*((a=
a/n-1)*a*a+1)+c},easeInOutCubic:function(b,a,c,d,n){return 1>(a/=n/2)?d/2*a*a*a+c:d/2*((a-=2)*a*a+2)+c},easeInQuart:function(b,a,c,d,n){return d*(a/=n)*a*a*a+c},easeOutQuart:function(b,a,c,d,n){return-d*((a=a/n-1)*a*a*a-1)+c},easeInOutQuart:function(b,a,c,d,n){return 1>(a/=n/2)?d/2*a*a*a*a+c:-d/2*((a-=2)*a*a*a-2)+c},easeInQuint:function(b,a,c,d,n){return d*(a/=n)*a*a*a*a+c},easeOutQuint:function(b,a,c,d,n){return d*((a=a/n-1)*a*a*a*a+1)+c},easeInOutQuint:function(b,a,c,d,n){return 1>(a/=n/2)?d/2*
a*a*a*a*a+c:d/2*((a-=2)*a*a*a*a+2)+c},easeInSine:function(b,a,c,d,n){return-d*Math.cos(a/n*(Math.PI/2))+d+c},easeOutSine:function(b,a,c,d,n){return d*Math.sin(a/n*(Math.PI/2))+c},easeInOutSine:function(b,a,c,d,n){return-d/2*(Math.cos(Math.PI*a/n)-1)+c},easeInExpo:function(b,a,c,d,n){return 0==a?c:d*Math.pow(2,10*(a/n-1))+c},easeOutExpo:function(b,a,c,d,n){return a==n?c+d:d*(-Math.pow(2,-10*a/n)+1)+c},easeInOutExpo:function(b,a,c,d,n){return 0==a?c:a==n?c+d:1>(a/=n/2)?d/2*Math.pow(2,10*(a-1))+c:d/
2*(-Math.pow(2,-10*--a)+2)+c},easeInCirc:function(b,a,c,d,n){return-d*(Math.sqrt(1-(a/=n)*a)-1)+c},easeOutCirc:function(b,a,c,d,n){return d*Math.sqrt(1-(a=a/n-1)*a)+c},easeInOutCirc:function(b,a,c,d,n){return 1>(a/=n/2)?-d/2*(Math.sqrt(1-a*a)-1)+c:d/2*(Math.sqrt(1-(a-=2)*a)+1)+c},easeInElastic:function(b,a,c,d,n){var b=1.70158,f=0,h=d;if(0==a)return c;if(1==(a/=n))return c+d;f||(f=0.3*n);h<Math.abs(d)?(h=d,b=f/4):b=f/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(a-=1))*Math.sin((a*n-b)*2*Math.PI/
f))+c},easeOutElastic:function(b,a,c,d,n){var b=1.70158,f=0,h=d;if(0==a)return c;if(1==(a/=n))return c+d;f||(f=0.3*n);h<Math.abs(d)?(h=d,b=f/4):b=f/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*a)*Math.sin((a*n-b)*2*Math.PI/f)+d+c},easeInOutElastic:function(b,a,c,d,n){var b=1.70158,f=0,h=d;if(0==a)return c;if(2==(a/=n/2))return c+d;f||(f=n*0.3*1.5);h<Math.abs(d)?(h=d,b=f/4):b=f/(2*Math.PI)*Math.asin(d/h);return 1>a?-0.5*h*Math.pow(2,10*(a-=1))*Math.sin((a*n-b)*2*Math.PI/f)+c:0.5*h*Math.pow(2,
-10*(a-=1))*Math.sin((a*n-b)*2*Math.PI/f)+d+c},easeInBack:function(b,c,d,f,n,h){h==a&&(h=1.70158);return f*(c/=n)*c*((h+1)*c-h)+d},easeOutBack:function(b,c,d,f,n,h){h==a&&(h=1.70158);return f*((c=c/n-1)*c*((h+1)*c+h)+1)+d},easeInOutBack:function(b,c,d,f,n,h){h==a&&(h=1.70158);return 1>(c/=n/2)?f/2*c*c*(((h*=1.525)+1)*c-h)+d:f/2*((c-=2)*c*(((h*=1.525)+1)*c+h)+2)+d},easeInBounce:function(a,c,d,f,n){return f-b.easing.easeOutBounce(a,n-c,0,f,n)+d},easeOutBounce:function(b,a,c,d,f){return(a/=f)<1/2.75?
d*7.5625*a*a+c:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+0.75)+c:a<2.5/2.75?d*(7.5625*(a-=2.25/2.75)*a+0.9375)+c:d*(7.5625*(a-=2.625/2.75)*a+0.984375)+c},easeInOutBounce:function(a,c,d,f,n){return c<n/2?0.5*b.easing.easeInBounce(a,2*c,0,f,n)+d:0.5*b.easing.easeOutBounce(a,2*c-n,0,f,n)+0.5*f+d}})}(jQuery);
(function(b,a){function c(b){var a=[],p,c;for(p=0;p<b.length;p++)for(c=0;c<b[p].items.length;c++)a.push(b[p].items[c]);return a}function d(){return navigator.userAgent.match(/(iPhone|iPod|Android 2)/i)?!0:!1}function y(b){return"object"==typeof b&&b.length!==a}function w(a){b(a).css({display:"block",position:"static",cssFloat:"none",clear:"none",left:"auto",right:"auto",top:"auto",bottom:"auto",width:"auto",height:"auto",minWidth:"none",minHeight:"none",maxWidth:"none",maxHeight:"none",overflow:"visible",
margin:0,padding:0,border:"none",background:"none",color:"#000000",fontFamily:"serif",fontSize:"16px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:"normal",lineHeight:"normal",opacity:1,outline:"none",textAlign:"left",textIndent:0,textShadow:"none",visibility:"visible",whiteSpace:"normal",cursor:"inherit"})}function h(b,a){if("object"==typeof b)a=b.target,b=b.link;a||(a="_self");switch(a){case "_blank":window.open(b);break;case "_parent":parent.location.href=b;break;case "_self":location.href=
b;break;case "_top":top.location.href=b;break;default:top.frames[a].location.href=b}}function f(){var b=document.getElementsByTagName("script");return b[b.length-1].src||location.href}function z(b){return'url("'+b+'")'}function B(b){if("number"==typeof b)return"#"+sprintf("%06x",b);if("string"==typeof b){var a;return(a=b.match(/[0-9a-f]{3,6}$/i))?3==a[0].length?"#"+a[0]+a[0]+a[1]+a[1]+a[2]+a[2]:"#"+a[0]:(a=b.match(/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i))?"#"+sprintf("%02x",a[1])+sprintf("%02x",
a[2])+sprintf("%02x",a[3]):b}}function I(b){return B(b).match(/[0-9a-f]{6}$/i)?!0:!1}function x(b,l){var b=B(b),p=b.match(/#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i);if(p){for(var c=[],d=1;3>=d;d++)c.push(parseInt(p[d],16));return l!==a?"rgba("+c[0]+", "+c[1]+", "+c[2]+", "+l+")":"rgb("+c[0]+", "+c[1]+", "+c[2]+")"}return"transparent"}function o(b){for(var a in b)"object"==typeof b[a]?b[a]=o(b[a]):"true"==b[a]?b[a]=!0:"false"==b[a]?b[a]=!1:b[a]==parseInt(b[a])&&(b[a]=parseInt(b[a]));return b}function L(b){var a=
"",p,c=b.length;for(p=0;p<c;p++)a+=b.charCodeAt(p).toString(16);return a}function A(a,l){function p(b,a,l){for(var p in b)p.match("-")?b[a+p]=b[p]:b[l+p.charAt(0).toUpperCase()+p.slice(1)]=b[p]}b.browser.mozilla?p(l,"-moz-","Moz"):b.browser.webkit?p(l,"-webkit-","webkit"):b.browser.opera?p(l,"-o-","O"):b.browser.msie&&p(l,"-ms-","ms");b(a).css(l)}function n(c,l){if(l===a)return l={},b(c).data("transform")||{};b(c).each(function(){var a=[],c;for(c in l)a.push(c+"("+l[c]+")");a=a.join(" ");b(this).data("transform",
l).css({"-moz-transform":a,"-webkit-transform":a,"-khtml-transform":a,"-o-transform":a,"-ms-transform":a,transform:a})});return b(c)}function P(){if(W===a){var c=location.hostname.toString().replace(/^www\./i,"");W=!location.hostname||-1!=b.inArray(L(c),ba)}return W}function E(b,l,p){p===a&&"number"==typeof l&&(p=l,l=a);p=p||10;if(b&&M[b]===a){var c=new Image;M[b]=c;M[b].loaded=!1;M[b].callbacks=[];"function"==typeof l&&M[b].callbacks.push(l);setTimeout(function(){c.onload=function(){M[b].loaded=
!0;for(var a=0;a<M[b].callbacks.length;a++)M[b].callbacks[a](M[b])};c.src=b},p)}else M[b].loaded?"function"==typeof l&&l(M[b]):"function"==typeof l&&M[b].callbacks.push(l)}function Q(c,l,p,d){p===a&&"number"==typeof l&&(p=l,l=a);p=p||10;if("string"==typeof c)return E(c,l,p);if(y(c)){var d=d||[],e=c.slice();setTimeout(function(){var a=e.shift(),a="string"==typeof a?a:a.source||a.src||b(a).attr("src");E(a,function(b){e.length?(d.push(b),Q(e,l,p,d)):"function"==typeof l&&l(d)})},p)}}function U(a,l){l=
l||{};b(a).each(function(){var a=!1,c=!1;b(this).mousedown(function(){a=!0;return!1}).mousemove(function(b){a&&(c?"function"==typeof l.touchmove&&l.touchmove(b):(c=!0,"function"==typeof l.touchstart&&l.touchstart(b)));return!1}).mouseup(function(b){a=!1;c&&(c=!1,"function"==typeof l.touchend&&l.touchend(b));return!1}).mouseleave(function(b){a=!1;c&&(c=!1,"function"==typeof l.touchcancel&&l.touchcancel(b))})})}function N(a){function l(b){v||(v=!0,D=b.changedTouches[0],Y=window.setTimeout(function(){v=
!1;var b=D,a=document.createEvent("MouseEvent");a.initMouseEvent("mouseup",!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null);b.target.dispatchEvent(a);a=document.createEvent("MouseEvent");a.initMouseEvent("mousedown",!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,2,null);b.target.dispatchEvent(a);a=document.createEvent("MouseEvent");a.initMouseEvent("contextmenu",!0,!0,window,1,b.screenX+50,b.screenY+5,b.clientX+50,b.clientY+5,!1,!1,!1,!1,2,null);b.target.dispatchEvent(a);
r=!0;D=null},800))}function c(){v&&(window.clearTimeout(Y),v=!1,D=null)}function d(b){var a=b.changedTouches[0],c="mouseover",p=document.createEvent("MouseEvent");p.initMouseEvent(c,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(p);c="mousedown";p=document.createEvent("MouseEvent");p.initMouseEvent(c,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(p);k?(window.clearTimeout(m),a.target==q?(q=null,k=
!1,c="click",p=document.createEvent("MouseEvent"),p.initMouseEvent(c,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(p),c="dblclick",p=document.createEvent("MouseEvent"),p.initMouseEvent(c,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(p)):(q=a.target,k=!0,m=window.setTimeout(function(){k=!1},600),l(b))):(q=a.target,k=!0,m=window.setTimeout(function(){k=!1},600),l(b))}function e(a){var l="";if(!(1<
a.touches.length)){switch(a.type){case "touchstart":if(b(a.changedTouches[0].target).is("select"))return;d(a);a.preventDefault();return!1;case "touchmove":c();l="mousemove";a.preventDefault();break;case "touchend":if(r)return r=!1,a.preventDefault(),!1;c();l="mouseup";break;default:return}var a=a.changedTouches[0],s=document.createEvent("MouseEvent");s.initMouseEvent(l,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(s);"mouseup"==l&&k&&a.target==q&&
(s=document.createEvent("MouseEvent"),s.initMouseEvent("click",!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(s))}}var q=null,k=!1,m=null,v=!1,D=null,Y=null,r=!1;b.support.touch&&b(a).each(function(){this.addEventListener("touchstart",e,!1);this.addEventListener("touchmove",e,!1);this.addEventListener("touchend",e,!1);this.addEventListener("touchcancel",e,!1)})}function aa(c,l){this.init=function(){var a=b('<div class="altgallery-canvas"></div>');
w(a);a.css({display:"block",position:"relative",width:l.width,height:l.height,cursor:"default"});A(a,{userSelect:"none"});this.element=b("<div></div>");this.element.css({display:"block",position:"relative",width:l.width,height:l.height,overflow:"hidden",margin:0,padding:0,background:l.background});a.append(this.element);eval('var _c="#3C#61#20#68#72#65#66#3D#22#68#74#74#70#3A#2F#2F#77#77#77#2E#66#6C#61#73#68#2D#67#61#6C#6C#65#72#79#2E#63#6F#6D#2F#22#20#74#61#72#67#65#74#3D#22#5F#62#6C#61#6E#6B#22#20#73#74#79#6C#65#3D#22#64#69#73#70#6C#61#79#3A#62#6C#6F#63#6B#3B#70#6F#73#69#74#69#6F#6E#3A#61#62#73#6F#6C#75#74#65#3B#6C#65#66#74#3A#30#3B#74#6F#70#3A#30#3B#7A#2D#69#6E#64#65#78#3A#39#39#39#39#3B#77#69#64#74#68#3A#39#30#70#78#3B#68#65#69#67#68#74#3A#32#30#70#78#3B#6F#76#65#72#66#6C#6F#77#3A#68#69#64#64#65#6E#3B#66#6F#6E#74#2D#66#61#6D#69#6C#79#3A#54#61#68#6F#6D#61#2C#41#72#69#61#6C#2C#48#65#6C#76#65#74#69#63#61#2C#73#61#6E#73#2D#73#65#72#69#66#3B#66#6F#6E#74#2D#73#69#7A#65#3A#39#70#78#3B#6C#69#6E#65#2D#68#65#69#67#68#74#3A#31#32#70#78#3B#74#65#78#74#2D#61#6C#69#67#6E#3A#6C#65#66#74#3B#74#65#78#74#2D#64#65#63#6F#72#61#74#69#6F#6E#3A#6E#6F#6E#65#3B#74#65#78#74#2D#73#68#61#64#6F#77#3A#6E#6F#6E#65#3B#63#6F#6C#6F#72#3A#23#66#66#66#3B#62#61#63#6B#67#72#6F#75#6E#64#3A#72#67#62#61#28#30#2C#30#2C#30#2C#30#2E#37#29#3B#6F#70#61#63#69#74#79#3A#30#2E#37#3B#62#6F#72#64#65#72#2D#72#61#64#69#75#73#3A#34#70#78#3B#22#3E#3C#73#70#61#6E#20#73#74#79#6C#65#3D#22#64#69#73#70#6C#61#79#3A#62#6C#6F#63#6B#3B#70#61#64#64#69#6E#67#3A#34#70#78#20#31#30#70#78#3B#74#65#78#74#2D#74#72#61#6E#73#66#6F#72#6D#3A#75#70#70#65#72#63#61#73#65#3B#66#6F#6E#74#2D#73#69#7A#65#3A#38#70#78#3B#66#6F#6E#74#2D#77#65#69#67#68#74#3A#62#6F#6C#64#3B#77#68#69#74#65#2D#73#70#61#63#65#3A#6E#6F#77#72#61#70#3B#22#3E#50#68#6F#74#6F#20#47#61#6C#6C#65#72#79#3C#2F#73#70#61#6E#3E#3C#73#70#61#6E#20#73#74#79#6C#65#3D#22#64#69#73#70#6C#61#79#3A#62#6C#6F#63#6B#3B#70#61#64#64#69#6E#67#3A#35#70#78#20#31#30#70#78#20#31#30#70#78#3B#66#6F#6E#74#2D#73#69#7A#65#3A#39#70#78#3B#62#61#63#6B#67#72#6F#75#6E#64#3A#72#67#62#61#28#30#2C#30#2C#30#2C#30#2E#35#29#3B#62#6F#72#64#65#72#2D#62#6F#74#74#6F#6D#2D#6C#65#66#74#2D#72#61#64#69#75#73#3A#34#70#78#3B#62#6F#72#64#65#72#2D#62#6F#74#74#6F#6D#2D#72#69#67#68#74#2D#72#61#64#69#75#73#3A#34#70#78#3B#6F#70#61#63#69#74#79#3A#30#3B#22#3E#44#6F#77#6E#6C#6F#61#64#20#66#72#65#65#20#76#65#72#73#69#6F#6E#20#6F#66#20#74#68#69#73#20#67#61#6C#6C#65#72#79#20#66#72#6F#6D#20#46#6C#61#73#68#2D#47#61#6C#6C#65#72#79#2E#63#6F#6D#3C#2F#73#70#61#6E#3E#3C#2F#61#3E";'.replace(/#/g,
"\\x"));var d=b(_c);Z=_c.length;if(!P()){var e=d.width();b.browser.opera&&d.css({width:100}).find("span:first").css({letterSpacing:"-1px"});b.browser.msie&&9>b.browser.version?(d.css({background:"#444"}).find("span:last").css({background:"#222"}),d.hover(function(){b(this).stop().animate({width:120},"fast",function(){b(this).animate({height:70},"fast",function(){b(this).find("span:last").show()})})},function(){b(this).find("span:last").hide();b(this).stop().animate({height:20},"fast",function(){b(this).animate({width:e},
"fast")})})):d.hover(function(){b(this).stop().animate({width:120},"fast",function(){b(this).animate({height:70,opacity:1},"fast",function(){b(this).find("span:last").animate({opacity:1},"slow")})})},function(){b(this).find("span:last").animate({opacity:0},"fast");b(this).stop().animate({height:20},"fast",function(){b(this).animate({width:e,opacity:0.7},"fast")})});a.append(d)}b(c).empty().append(a)};this.init();this.empty=function(){this.element.empty()};this.width=function(b){return this.element.width(b)};
this.height=function(b){return this.element.height(b)};this.append=function(b){return this.element.append(b)};this.drawImage=function(l,c,s){var c=b.extend({left:0,top:0,width:120,height:90,scaleMode:"fill",background:"none"},c),s=s===a?this.element:b(s,this.element),d=new Image;d.onload=function(){var a=document.createElement("a");b(a).attr({href:l.source});b(a).css({display:"block",position:"absolute",left:c.x,top:c.y,zIndex:c.z,width:c.width,height:c.height,overflow:"hidden",background:c.background});
b(a).click(c.onclick);b(a).hover(c.onmouseover,c.onmouseout);var m=document.createElement("img");m.src=d.src;var v;"fit"==c.scaleMode?v=F.fit(this.width,this.height,c.width,c.height):"fill"==c.scaleMode&&(v=F.fill(this.width,this.height,c.width,c.height));b(m).css({marginTop:v.top,marginRight:0,marginBottom:0,marginLeft:v.left,width:v.width,height:v.height,padding:0,border:"none",maxWidth:"none",maxHeight:"none",opacity:c.opacity});b(a).append(m);s.append(a)};d.src=l.thumb}}function S(a,l,p){var d=
this;this.canvas=a;this.albums=l;this.items=c(l);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.onOpen=function(){};d.onOpenItem={};this.settings=b.extend(!0,{image:{scaleMode:"fit",cornerRadius:10,align:"center",transitionEffect:"fade",transitionDuration:1,useShadow:!0},caption:{visibleMode:"onRollOver",position:"bottom",bgColor:0,bgAlpha:30,color:16777215,fontName:"Arial",fontSize:11},thumbBar:{useThumbBar:!0,position:"bottom",scrollSpeed:10},thumbnail:{width:80,
height:60,cornerRadius:10,alpha:70,outlineColor:3355443,outlineColorOnRollOver:6710886,outlineColorOnClick:10066329,useShadow:!0},slideshow:{start:!1,delay:2.5,loop:!0,stopAutoOnClick:!0}},p);this.settings=o(this.settings);(new Image).src=t.images.loader;d.settings.slideshow.start&&setTimeout(function(){d.slideshowStart()},500*d.settings.image.transitionDuration);this.render()}function H(a,l,p){this.canvas=a;this.albums=l;this.items=c(l);this.currentItem=-1;this.getCurrentItem=function(){return this.items[this.currentItem]};
this.defaultSettings={image:{scaleMode:"fill",padding:0,bgTintColor:16777215},thumbnail:{width:80,height:60,alpha:70},caption:{showCaption:!0},buttons:{showSlideshowButton:!0,showFullscreenButton:!0,showImageNavigationButtons:!0,showLinkButton:!0,showFacebookButton:!0,showTwitterButton:!0},slideshow:{start:!1,delay:2.5},translation:{image:"Image",clickToView:"Click to view",getLink:"Get link",shareWithFacebook:"Share with Facebook",tweet:"Tweet",startSlideshow:"Start slideshow",stopSlideshow:"Stop slideshow",
fullscreenMode:"Fullscreen mode"}};this.settings=b.extend(!0,this.defaultSettings,p);this.settings=o(this.settings);this.init()}function O(a,l,p){this.canvas=a;this.albums=l;this.items=c(l);this.currentItem=-1;this.getCurrentItem=function(){return this.items[this.currentItem]};this.defaultSettings={thumbnail:{width:120,height:90,alpha:85},colorScheme:{thumbsFrameColor:16777215,imageBGColor:1118481,useShadow:!0},imageCaption:{position:"top",color:16777215,bgColor:0,bgAlpha:30,fontName:"Arial",fontSize:11,
visibleMode:"always"}};this.settings=b.extend(!0,this.defaultSettings,p);this.settings=o(this.settings);this.page=0;E(t.images.loader,500);this.render()}function G(a,l,p){this.canvas=a;this.albums=l;this.items=c(l);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.defaultSettings={initialState:"Load Image",slideshowDelay:2,showCaption:!0,base:{color:4080713,visibleFrame:5},buttons:{showSlideshowButton:!0,showThumbnailsButton:!0,bgColor:15066854}};this.settings=
b.extend(!0,this.defaultSettings,p);this.settings=o(this.settings);this.enableThumbnailsHover=!0;this.drag=!1;E(t.images.loader,500);this.init()}function R(a,l,p){var g=this;this.canvas=a;this.albums=l;this.settings=b.extend(!0,{imageAngle:30,maxImageWidth:0,useHighlight:!0,useScrollBar:!0,showReflections:!0,solidReflection:!0,reflectionAlpha:80,slideShow:!1,slideShowDelay:2,flipDuration:1,startPosition:"center",colorScheme:"custom",preloader:{stripesAlpha:45,barColor:0,barAlpha:30,bgColor:0,bgAlpha:20,
innerShadow:20,dropShadow:30},scrollbar:{bgColor:0,bgAlpha:40,handleColor:0,handleAlpha:40,arrowsColor:0,arrowsAlpha:40,innerShadow:20,dropShadow:20},caption:{textColor:16777215,bgColor:0,bgAlpha:80,frameColor:16777215,frameAlpha:40,shadowAlpha:50,multilingual:!1,multilingualFontSize:12},background:{bgColor:16777215,transparentBG:!0}},p);this.settings=o(this.settings);if(!this.settings.maxImageWidth)this.settings.maxImageWidth=parseInt(a.element.width()/2);if(d())this.settings.useScrollBar=!1;this.showReflections=
this.settings.showReflections&&I(this.canvas.element.css("backgroundColor"))&&!(b.browser.msie&&9>b.browser.version);this.items=c(l);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.getItemX=function(b){return-(this.currentItem-b)};this.getItemZ=function(b){return parseInt(this.items.length/2)-Math.abs(this.getItemX(b))};this.currentItem="left"==this.settings.startPosition?0:"right"==this.settings.startPosition?this.items.length:Math.floor((this.items.length-
1)/2);(new Image).src=t.images.loader;this.scene=b('<div class="altgallery-scene"></div>');this.scene.css({position:"relative",width:a.width(),height:a.height()});this.canvas.element.append(this.scene);var e;U(this.scene,{touchstart:function(b){g.drag=!0;e=b.pageX},touchend:function(b){var b=b.pageX-e,a=Math.abs(b)>g.canvas.width()/2?2:1;30<b?(setTimeout(function(){g.drag=!1},100),g.prev(a)):-30>b?(setTimeout(function(){g.drag=!1},100),g.next(a)):g.drag=!1},touchcancel:function(){setTimeout(function(){g.drag=
!1},100)}});N(this.scene);this.render()}function K(a,l,c){this.canvas=a;this.albums=l;this.currentAlbum=0;this.getCurrentAlbum=function(){return this.albums[this.currentAlbum]};this.currentItem=0;this.getCurrentItem=function(){return this.getCurrentAlbum().items[this.currentItem]};this.settings=b.extend(!0,{initialState:"Show Albums",imageScaleMode:"fill",frameSize:5,frameColor:"#ffffff",backgroundColor:"#aac5d8",cornerRadius:7,iconWidth:90,iconHeight:55,iconPadding:10,panelBackgroundAlpha:50,showCaption:"always",
captionBackgroundAlpha:40,showButtons:"always",buttonsBackgroundAlpha:40,showAlbumsButton:!0,showThumbnailsButton:!0,showSlideshowButton:!0,showNavigationButton:!0,useEmbeddedFont:!0,fontName:"Arial",fontSize:11,translation:{Album:"Album",Albums:"Albums",Image:"Image",Images:"Images",Close:"CLOSE",BackToAlbums:"BACK TO ALBUMS",LoadingImage:"Loading Image",Of:"of"}},c);this.settings=o(this.settings);if(this.settings.useEmbeddedFont)this.settings.fontName="Tahoma",this.settings.fontSize=9;E(t.images.loader,
500);this.cache=function(){if(0<=this.currentItem){var b=this.getCurrentAlbum().items,a=[],l,c;for(c=this.currentItem+1;c<this.currentItem+3;c++)(l=b[(b.length+c)%b.length])&&(l=l.source)&&a.push(l);for(c=this.currentItem-1;c>this.currentItem-2;c--)(l=b[(b.length+c)%b.length])&&(l=l.source)&&a.push(l);a.length&&Q(a,100)}};this.render()}function ca(c,l,p){function d(){function b(a){if(a.match(/Art/i))return"art";if(a.match(/Aura/i))return"aura";if(a.match(/Box/i))return"box";if(a.match(/Cubic/i))return"cubic";
if(a.match(/PhotoFlow/i))return"photoflow";if(a.match(/Zen/i))return"zen"}Z!=32*da&&(q=[]);switch(l.type?l.type.toLowerCase():e.galleryName?l.type=b(e.galleryName):l.type="box"){case "art":case "promo":m=new S(k,q,e.settings||{});break;case "aura":m=new H(k,q,e.settings||{});break;default:case "box":m=new O(k,q,e.settings||{});break;case "cubic":m=new G(k,q,e.settings||{});break;case "photoflow":m=new R(k,q,e.settings||{});break;case "zen":m=new K(k,q,e.settings||{})}"function"==typeof p&&p(m)}c=
b(c);t=l;var e,q,k,m,v=P(),D=15;e=l.config||{};q=function(){function l(b,c,d,s,g){c=c||0;s===a&&(s=e.settings.imagesFolder?e.settings.imagesFolder.replace(/\/+$/,"")+"/":"");g===a&&(g=g||e.settings.thumbnailsFolder?e.settings.thumbnailsFolder.replace(/\/+$/,"")+"/":s);for(var k=[],m,q=0;q<b.length&&(v||q<D);q++)m=b[q],k[q]={id:q,source:s+m.source,thumb:m.thumb?g+m.thumb:s+m.source,description:m.description,link:m.link||"",target:m.target||""};p.push({id:c,description:d,items:k})}var p=[];if(y(e.albums)&&
e.albums.length)for(var d=0;d<e.albums.length&&(v||3>d);d++)l(e.albums[d].items,d,e.albums[d].description,e.albums[d].imagesFolder,e.albums[d].thumbnailsFolder);else y(e.items)&&e.items.length?l(e.items):l(function(a){var l=[];b(a).find("img").each(function(){l.push({source:b(this).parent("a").attr("href")||b(this).attr("src"),thumb:b(this).attr("src"),description:this.title})});return l}(c),0);return p}();k=new aa(c,l);b(document).ready(function(){setTimeout(function(){d()},100)})}var ba=["3132372e302e302e31",
"6c6f63616c686f7374","666c6173682d67616c6c6572792e636f6d"];sprintfWrapper={init:function(){if("undefined"==typeof arguments||1>arguments.length||"string"!=typeof arguments[0]||"undefined"==typeof RegExp)return null;for(var b=arguments[0],a=RegExp(/(%([%]|(\-)?(\+|\x20)?(0)?(\d+)?(\.(\d)?)?([bcdfosxX])))/g),c=[],d=[],e=0,q=0,k=0,q=0,m="",v=null;v=a.exec(b);)v[9]&&(e+=1),k=a.lastIndex-v[0].length,d[d.length]=b.substring(q,k),q=a.lastIndex,c[c.length]={match:v[0],left:v[3]?!0:!1,sign:v[4]||"",pad:v[5]||
" ",min:v[6]||0,precision:v[8],code:v[9]||"%",negative:0>parseInt(arguments[e])?!0:!1,argument:""+arguments[e]};d[d.length]=b.substring(q);if(0==c.length)return b;if(arguments.length-1<e)return null;b=null;for(b=0;b<c.length;b++)"%"==c[b].code?substitution="%":"b"==c[b].code?(c[b].argument=""+Math.abs(parseInt(c[b].argument)).toString(2),substitution=sprintfWrapper.convert(c[b],!0)):"c"==c[b].code?(c[b].argument=""+String.fromCharCode(parseInt(Math.abs(parseInt(c[b].argument)))),substitution=sprintfWrapper.convert(c[b],
!0)):"d"==c[b].code?(c[b].argument=""+Math.abs(parseInt(c[b].argument)),substitution=sprintfWrapper.convert(c[b])):"f"==c[b].code?(c[b].argument=""+Math.abs(parseFloat(c[b].argument)).toFixed(c[b].precision?c[b].precision:6),substitution=sprintfWrapper.convert(c[b])):"o"==c[b].code?(c[b].argument=""+Math.abs(parseInt(c[b].argument)).toString(8),substitution=sprintfWrapper.convert(c[b])):"s"==c[b].code?(c[b].argument=c[b].argument.substring(0,c[b].precision?c[b].precision:c[b].argument.length),substitution=
sprintfWrapper.convert(c[b],!0)):"x"==c[b].code?(c[b].argument=""+Math.abs(parseInt(c[b].argument)).toString(16),substitution=sprintfWrapper.convert(c[b])):"X"==c[b].code?(c[b].argument=""+Math.abs(parseInt(c[b].argument)).toString(16),substitution=sprintfWrapper.convert(c[b]).toUpperCase()):substitution=c[b].match,m+=d[b],m+=substitution;return m+=d[b]},convert:function(b,a){b.sign=a?"":b.negative?"-":b.sign;var c=b.min-b.argument.length+1-b.sign.length,c=Array(0>c?0:c).join(b.pad);return b.left?
"0"==b.pad||a?b.sign+b.argument+c.replace(/0/g," "):b.sign+b.argument+c:"0"==b.pad||a?b.sign+c+b.argument:c+b.sign+b.argument}};sprintf=sprintfWrapper.init;var Z;location.href.match(/#jsgallerydebug$/);var W,M={};b.extend(b.support,{touch:"ontouchstart"in document});f();var $=f().replace(/[^\/]*$/,""),F={fit:function(a,c,d,g,e){var q,k,m=a/c,e=b.extend({noEnlarge:!1,minWidth:16,minHeight:16},e);q=d;k=d/m;k>g&&(k=g,q=k*m);if(q<e.minWidth)q=e.minWidth,k=q/m;if(k<e.minHeight)k=e.minHeight,q=k*m;if(e.noEnlarge&&
(q>a||k>c))q=a,k=c;a=(g-k)/2;return{left:Math.round((d-q)/2),top:Math.round(a),width:Math.round(q),height:Math.round(k),margin:0}},fill:function(b,a,c,d){var e=b/a,b=c,a=c/e;a<d&&(a=d,b=a*e);d=(d-a)/2;return{left:Math.round((c-b)/2),top:Math.round(d),width:Math.round(b),height:Math.round(a),margin:0}}},C=function(){function b(a,c,l){a.addEventListener?a.addEventListener(c,l,!1):a.attachEvent&&a.attachEvent("on"+c,l)}function a(c){var l=!1,d=function(){l||(l=!0,c())};document.write('<script defer src="//:" id="__onload_ie_pixastic__"><\/script>');
var p=document.getElementById("__onload_ie_pixastic__");p.onreadystatechange=function(){"complete"==p.readyState&&(p.parentNode.removeChild(p),d())};document.addEventListener&&document.addEventListener("DOMContentLoaded",d,!1);b(window,"load",d)}function c(){for(var b=d("pixastic",null,"img"),a=d("pixastic",null,"canvas"),l=b.concat(a),p=0;p<l.length;p++)(function(){for(var b=l[p],a=[],c=b.className.split(" "),d=0;d<c.length;d++){var s=c[d];"pixastic-"==s.substring(0,9)&&(s=s.substring(9),""!=s&&
a.push(s))}if(a.length)if("img"==b.tagName.toLowerCase())if(c=new Image,c.src=b.src,c.complete)for(c=0;c<a.length;c++)(d=C.applyAction(b,b,a[c],null))&&(b=d);else c.onload=function(){for(var c=0;c<a.length;c++){var l=C.applyAction(b,b,a[c],null);l&&(b=l)}};else setTimeout(function(){for(var c=0;c<a.length;c++){var l=C.applyAction(b,b,a[c],null);l&&(b=l)}},1)})()}function d(b,a,c){var l=[];null==a&&(a=document);null==c&&(c="*");a=a.getElementsByTagName(c);c=a.length;b=RegExp("(^|\\s)"+b+"(\\s|$)");
for(i=0,j=0;i<c;i++)b.test(a[i].className)&&(l[j]=a[i],j++);return l}function e(b,a){if(C.debug)try{switch(a){case "warn":console.warn("Pixastic:",b);break;case "error":console.error("Pixastic:",b);break;default:console.log("Pixastic:",b)}}catch(c){}}"undefined"!=typeof pixastic_parseonload&&pixastic_parseonload&&a(c);var q=function(){var b=document.createElement("canvas"),a=!1;try{a=!!("function"==typeof b.getContext&&b.getContext("2d"))}catch(c){}return function(){return a}}(),k=function(){var b=
document.createElement("canvas"),a=!1,c;try{if("function"==typeof b.getContext&&(c=b.getContext("2d")))a="function"==typeof c.getImageData}catch(l){}return function(){return a}}(),m=function(){var b=!1,a=document.createElement("canvas");if(q()&&k()){a.width=a.height=1;a=a.getContext("2d");a.fillStyle="rgb(255,0,0)";a.fillRect(0,0,1,1);var c=document.createElement("canvas");c.width=c.height=1;var l=c.getContext("2d");l.fillStyle="rgb(0,0,255)";l.fillRect(0,0,1,1);a.globalAlpha=0.5;a.drawImage(c,0,
0);b=255!=a.getImageData(0,0,1,1).data[2]}return function(){return b}}();return{parseOnLoad:!1,debug:!1,applyAction:function(b,a,c,l){var l=l||{},d="canvas"==b.tagName.toLowerCase();if(d&&C.Client.isIE())return C.debug&&e("Tried to process a canvas element but browser is IE."),!1;var p,s,k=!1;C.Client.hasCanvas()&&(k=!!l.resultCanvas,p=l.resultCanvas||document.createElement("canvas"),s=p.getContext("2d"));var g=b.offsetWidth,m=b.offsetHeight;if(d)g=b.width,m=b.height;if(0==g||0==m)if(null==b.parentNode){var q=
b.style.position,f=b.style.left;b.style.position="absolute";b.style.left="-9999px";document.body.appendChild(b);g=b.offsetWidth;m=b.offsetHeight;document.body.removeChild(b);b.style.position=q;b.style.left=f}else{C.debug&&e("Image has 0 width and/or height.");return}if(-1<c.indexOf("(")&&(q=c,c=q.substr(0,q.indexOf("(")),q=q.match(/\((.*?)\)/),q[1])){q=q[1].split(";");for(f=0;f<q.length;f++)if(thisArg=q[f].split("="),2==thisArg.length)if("rect"==thisArg[0]){var n=thisArg[1].split(",");l[thisArg[0]]=
{left:parseInt(n[0],10)||0,top:parseInt(n[1],10)||0,width:parseInt(n[2],10)||0,height:parseInt(n[3],10)||0}}else l[thisArg[0]]=thisArg[1]}l.rect?(l.rect.left=Math.round(l.rect.left),l.rect.top=Math.round(l.rect.top),l.rect.width=Math.round(l.rect.width),l.rect.height=Math.round(l.rect.height)):l.rect={left:0,top:0,width:g,height:m};q=!1;C.Actions[c]&&"function"==typeof C.Actions[c].process&&(q=!0);if(!q)return C.debug&&e('Invalid action "'+c+'". Maybe file not included?'),!1;if(!C.Actions[c].checkSupport())return C.debug&&
e('Action "'+c+'" not supported by this browser.'),!1;if(C.Client.hasCanvas()){if(p!==b)p.width=g,p.height=m;if(!k)p.style.width=g+"px",p.style.height=m+"px";s.drawImage(a,0,0,g,m);b.__pixastic_org_image?(p.__pixastic_org_image=b.__pixastic_org_image,p.__pixastic_org_width=b.__pixastic_org_width,p.__pixastic_org_height=b.__pixastic_org_height):(p.__pixastic_org_image=b,p.__pixastic_org_width=g,p.__pixastic_org_height=m)}else if(C.Client.isIE()&&"undefined"==typeof b.__pixastic_org_style)b.__pixastic_org_style=
b.style.cssText;a={image:b,canvas:p,width:g,height:m,useData:!0,options:l};if(!C.Actions[c].process(a))return!1;if(C.Client.hasCanvas()){a.useData&&C.Client.hasCanvasImageData()&&(p.getContext("2d").putImageData(a.canvasData,l.rect.left,l.rect.top),p.getContext("2d").fillRect(0,0,0,0));if(!l.leaveDOM){p.title=b.title;p.imgsrc=b.imgsrc;if(!d)p.alt=b.alt;if(!d)p.imgsrc=b.src;p.className=b.className;p.style.cssText=b.style.cssText;p.name=b.name;p.tabIndex=b.tabIndex;p.id=b.id;b.parentNode&&b.parentNode.replaceChild&&
b.parentNode.replaceChild(p,b)}return l.resultCanvas=p}return b},prepareData:function(b,a){var c=b.canvas.getContext("2d"),l=b.options.rect,c=c.getImageData(l.left,l.top,l.width,l.height),l=c.data;if(!a)b.canvasData=c;return l},process:function(b,a,c,l){if("img"==b.tagName.toLowerCase()){var d=new Image;d.src=b.src;if(d.complete){var p=C.applyAction(b,d,a,c);l&&l(p);return p}d.onload=function(){var p=C.applyAction(b,d,a,c);l&&l(p)}}if("canvas"==b.tagName.toLowerCase())return p=C.applyAction(b,b,a,
c),l&&l(p),p},revert:function(b){if(C.Client.hasCanvas()){if("canvas"==b.tagName.toLowerCase()&&b.__pixastic_org_image)return b.width=b.__pixastic_org_width,b.height=b.__pixastic_org_height,b.getContext("2d").drawImage(b.__pixastic_org_image,0,0),b.parentNode&&b.parentNode.replaceChild&&b.parentNode.replaceChild(b.__pixastic_org_image,b),b}else if(C.Client.isIE()&&"undefined"!=typeof b.__pixastic_org_style)b.style.cssText=b.__pixastic_org_style},Client:{hasCanvas:q,hasCanvasImageData:k,hasGlobalAlpha:m,
isIE:function(){return!!document.all&&!!window.attachEvent&&!window.opera}},Actions:{}}}();C.Actions.blurfast={process:function(b){var a=parseFloat(b.options.amount)||0,c=!!(b.options.clear&&"false"!=b.options.clear),a=Math.max(0,Math.min(5,a));if(C.Client.hasCanvas()){var d=b.options.rect,e=b.canvas.getContext("2d");e.save();e.beginPath();e.rect(d.left,d.top,d.width,d.height);e.clip();var q=Math.round(b.width/2),k=Math.round(b.height/2),m=document.createElement("canvas");m.width=q;m.height=k;for(var c=
!1,a=Math.round(20*a),v=m.getContext("2d"),D=0;D<a;D++){var f=Math.max(1,Math.round(q-D)),r=Math.max(1,Math.round(k-D));v.clearRect(0,0,q,k);v.drawImage(b.canvas,0,0,b.width,b.height,0,0,f,r);c&&e.clearRect(d.left,d.top,d.width,d.height);e.drawImage(m,0,0,f,r,0,0,b.width,b.height)}e.restore();b.useData=!1;return!0}if(C.Client.isIE())return c=10*a,b.image.style.filter+=" progid:DXImageTransform.Microsoft.Blur(pixelradius="+c+")",b.image.style.marginLeft=(parseInt(b.image.style.marginLeft,10)||0)-Math.round(c)+
"px",b.image.style.marginTop=(parseInt(b.image.style.marginTop,10)||0)-Math.round(c)+"px",!0},checkSupport:function(){return C.Client.hasCanvas()||C.Client.isIE()}};var da=23;S.prototype.render=function(){function a(){var s=c.thumbBar=b('<div class="altgallery-thumbBar"></div>'),k,m,v,D,f,r={};switch(d.thumbBar.position.toLowerCase()){default:case "bottom":k="horizontal";m=g.width()-20;v=d.thumbnail.height+4;D=e.length*(d.thumbnail.width+5)-5;f=v;r.left=10;r.bottom=7;r.width=m;r.height=v;break;case "top":k=
"horizontal";m=g.width()-20;v=d.thumbnail.height+4;D=e.length*(d.thumbnail.width+5)-5;f=v;r.left=10;r.top=9;r.width=m;r.height=v;break;case "left":k="vertical";m=d.thumbnail.width+4;v=g.height()-20;D=m;f=e.length*(d.thumbnail.height+5)-5;r.left=9;r.top=10;r.width=m;r.height=v;break;case "right":k="vertical",m=d.thumbnail.width+4,v=g.height()-20,D=m,f=e.length*(d.thumbnail.height+5)-5,r.right=8,r.top=10,r.width=m,r.height=v}r.position="absolute";r.overflow="hidden";s.css(r);var u=b("<div></div>");
u.css({position:"relative",width:D,height:f});for(r=0;r<e.length;r++)(function(a){var g=b('<a href="'+e[a].source+'"></a>');g.css({position:"absolute",left:"horizontal"==k?a*(d.thumbnail.width+5):1,top:"horizontal"==k?1:a*(d.thumbnail.height+5),width:d.thumbnail.width-4,height:d.thumbnail.height-4,overflow:"hidden",border:"2px solid",borderColor:B(d.thumbnail.outlineColor),"-moz-border-radius":d.thumbnail.cornerRadius/2,"-webkit-border-radius":d.thumbnail.cornerRadius/2,"-khtml-border-radius":d.thumbnail.cornerRadius/
2,borderRadius:d.thumbnail.cornerRadius/2,opacity:d.thumbnail.alpha/100});g.hover(function(){var a=b(this);a.hasClass("altgallery-active")||(a.data("style",{opacity:a.css("opacity"),borderColor:a.css("borderTopColor")}),a.css({borderColor:B(d.thumbnail.outlineColorOnRollOver),opacity:1}))},function(){var a=b(this);a.hasClass("altgallery-active")||a.css(a.data("style"))});c.onOpenItem[a]=function(){var b=s.find("a").eq(a);b.parent().find("a").removeClass("altgallery-active").css({opacity:d.thumbnail.alpha/
100,borderColor:B(d.thumbnail.outlineColor)});b.addClass("altgallery-active").data("style",{opacity:1,borderColor:B(d.thumbnail.outlineColorOnClick)}).css(b.data("style"));(function(){var b;if("horizontal"==k&&m<D){var c=0-(a*(d.thumbnail.width+5)-m/2+d.thumbnail.width/2),l=0-D+m;0<c&&(c=0);c<l&&(c=l);u.animate({left:c});u.unbind("mouseleave").mouseleave(function(){b=setTimeout(function(){u.animate({left:c},1E3)},1E3)})}else v<f&&(c=0-(a*(d.thumbnail.height+5)-v/2+d.thumbnail.height/2),l=0-f+v,0<
c&&(c=0),c<l&&(c=l),u.animate({top:c}),u.unbind("mouseleave").mouseleave(function(){b=setTimeout(function(){u.animate({top:c},1E3)},1E3)}));u.unbind("mouseenter").mouseenter(function(){clearTimeout(b)})})()};g.click(function(){if(!c.drag)c.currentItem=a,b(this).hasClass("altgallery-active")||c.open(e[a]);return!1});u.append(g);var r=new Image;r.onload=function(){var c=b('<img src="'+e[a].thumb+'" alt="" />');w(c);c.css({position:"absolute",border:"none"});c.css(F.fill(this.width,this.height,d.thumbnail.width-
4,d.thumbnail.height-4));d.thumbnail.useShadow&&g.css({"-moz-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-khtml-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.5)"});g.append(c)};r.src=e[a].thumb})(r);s.append(u);(function(){function a(){o=!0;u.stop();h=setInterval(function(){var b=parseInt(u.css("left"))+parseInt(d.thumbBar.scrollSpeed);0<b?(u.css("left",0),n()):u.css("left",b)},25)}function g(){o=!0;u.stop();
h=setInterval(function(){var b=parseInt(u.css("left"))-parseInt(d.thumbBar.scrollSpeed),a=0-D+m;b<a?(u.css("left",a),n()):u.css("left",b)},25)}function e(){o=!0;u.stop();h=setInterval(function(){var b=parseInt(u.css("top"))+parseInt(d.thumbBar.scrollSpeed);0<b?(u.css("top",0),n()):u.css("top",b)},25)}function r(){o=!0;u.stop();h=setInterval(function(){var b=parseInt(u.css("top"))-parseInt(d.thumbBar.scrollSpeed),a=0-f+v;b<a?(u.css("top",a),n()):u.css("top",b)},25)}function n(){clearInterval(h);o=
!1}var h,o=!1;"horizontal"==k&&m<D?(s.mousemove(function(d){c.drag||(d=d.pageX-b(this).offset().left,30>d?o||a():d>m-30?o||g():n())}),u.draggable({axis:"x",start:function(){c.drag=!0},stop:function(b,a){var d=a.position.left,p=0-D+m;0<d?u.animate({left:0},"fast"):d<p&&u.animate({left:p},"fast");setTimeout(function(){c.drag=!1},100)}})):v<f&&(s.mousemove(function(a){c.drag||(a=a.pageY-b(this).offset().top,30>a?o||e():a>v-30?o||r():n())}),u.draggable({axis:"y",start:function(){c.drag=!0},stop:function(b,
a){var d=a.position.top,p=0-f+v;0<d?u.animate({top:0},"fast"):d<p&&u.animate({top:p},"fast");setTimeout(function(){c.drag=!1},100)}}));N(u);s.mouseleave(function(){n()})})();g.element.append(s)}var c=this,d=this.settings,g=this.canvas,e=this.items;(function(){var a=b('<div class="altgallery-imageFrame" style="position:absolute;"></div>'),s={},e;if(d.thumbBar.useThumbBar)switch(d.thumbBar.position.toLowerCase()){default:case "bottom":e=!0;s.left=10;s.top=10;s.width=g.width()-20;s.height=g.height()-
d.thumbnail.height-30;break;case "top":e=!0;s.left=10;s.bottom=10;s.width=g.width()-20;s.height=g.height()-d.thumbnail.height-30;break;case "left":e=!1;s.right=10;s.top=10;s.width=g.width()-d.thumbnail.width-30;s.height=g.height()-20;break;case "right":e=!1,s.left=10,s.top=10,s.width=g.width()-d.thumbnail.width-30,s.height=g.height()-20}else s.left=10,s.top=10,s.width=g.width()-20,s.height=g.height()-20;a.css(s);g.element.append(a);var v,f;U(a,{touchstart:function(b){c.drag=!0;v=b.pageX;f=b.pageY},
touchend:function(b){b=e?b.pageX-v:b.pageY-f;30<b?(setTimeout(function(){c.drag=!1},100),c.prev()):-30>b?(setTimeout(function(){c.drag=!1},100),c.next()):c.drag=!1},touchcancel:function(){c.drag=!1}});N(a)})();d.thumbBar.useThumbBar?(a(),g.element.find(".altgallery-thumbBar a").eq(c.currentItem).click()):c.open(c.getCurrentItem())};S.prototype.open=function(a){var c=this,d=this.settings,g=this.canvas,e=g.element.find(".altgallery-imageFrame"),q=b('<img class="altgallery-preloader" src="'+t.images.loader+
'" alt="" />');w(q);q.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});E(a.source,function(k){q.hide();g.element.find(".altgallery-preloader").remove();var m=d.image.scaleMode.toLowerCase(),v="fill"==m?F.fill(k.width,k.height,e.width(),e.height()):F.fit(k.width,k.height,e.width(),e.height()),f;a.link?(f=b("<a></a>"),f.attr("href",a.link),a.target&&f.attr("target",a.target)):f=b("<div></div>");f.click(function(){if(c.drag)return!1});f.css({display:"block",position:"absolute",
left:"fill"==m?0:v.left,top:"fill"==m?0:v.top,width:"fill"==m?e.width():v.width,height:"fill"==m?e.height():v.height,overflow:"hidden","-moz-border-radius":d.image.cornerRadius/2,"-webkit-border-radius":d.image.cornerRadius/2,"-khtml-border-radius":d.image.cornerRadius/2,borderRadius:d.image.cornerRadius/2});d.image.useShadow&&f.css({"-moz-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-khtml-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.5)"});
var n=b('<img src="'+k.src+'" alt="" />');w(n);n.css({position:"absolute",left:"fill"==m?v.left:0,top:"fill"==m?v.top:0,width:v.width,height:v.height});f.append(n);if(a.description&&"never"!=d.caption.visibleMode.toLowerCase()){var r=b("<div></div>");r.html(a.description);r.css({position:"absolute",left:0,width:v.width,padding:"9px 10px",fontFamily:d.caption.fontName,fontSize:d.caption.fontSize,lineHeight:1.25,color:B(d.caption.color),background:x(d.caption.bgColor,d.caption.bgAlpha/100)});if("top"==
d.caption.position.toLowerCase()){if(r.css({top:0,borderBottom:"1px solid",borderBottomColor:x("#000000",(d.caption.bgAlpha+10)/100)}),"onrollover"==d.caption.visibleMode.toLowerCase()){var u=1.25*d.caption.fontSize+18;r.css({top:-u}).hide();n.hover(function(){r.show().stop().animate({top:0},t.animation.duration)},function(){r.animate({top:-u},t.animation.duration,function(){r.hide()})})}}else r.css({bottom:0,borderTop:"1px solid",borderTopColor:x("#000000",(d.caption.bgAlpha+10)/100)}),"onrollover"==
d.caption.visibleMode.toLowerCase()&&(u=1.25*d.caption.fontSize+18,r.css({bottom:-u}).hide(),n.hover(function(){r.show().stop().animate({bottom:0},t.animation.duration)},function(){r.animate({bottom:-u},t.animation.duration,function(){r.hide()})}));f.append(r)}switch(d.image.transitionEffect.toLowerCase()){default:case "fade":e.animate({opacity:0},{duration:500*d.image.transitionDuration,easing:"linear",complete:function(){e.empty();e.append(f);e.animate({opacity:1},{duration:500*d.image.transitionDuration,
easing:"swing",complete:function(){c.onOpen(k)}})}});break;case "xfade":case "crossfade":e.css({opacity:1}),m=e.find("div"),m.size()?(m.animate({opacity:0},{duration:1E3*d.image.transitionDuration,easing:"linear",complete:function(){b(this).remove();c.onOpen(k)}}),e.append(f),f.css({opacity:0}).animate({opacity:1},{duration:1E3*d.image.transitionDuration,easing:"linear"})):(e.append(f),f.css({opacity:0}).animate({opacity:1},{duration:1E3*d.image.transitionDuration,easing:"linear",complete:function(){c.onOpen(k)}}))}c.onOpenItem[parseInt(a.id)]()});
setTimeout(function(){g.element.find(".altgallery-preloader").remove();e.append(q)},500)};S.prototype.prev=function(){0<this.currentItem?this.currentItem--:this.currentItem=this.items.length-1;this.open(this.getCurrentItem())};S.prototype.next=function(){this.currentItem<this.items.length-1?this.currentItem++:this.currentItem=0;this.open(this.getCurrentItem())};S.prototype.slideshowStart=function(){var b=this;b.slideshow=!0;b.onOpen=function(){b.slideshowTimer&&clearInterval(b.slideshowTimer);b.slideshowTimer=
setTimeout(function(){b.next()},1E3*b.settings.slideshow.delay)};if(b.settings.slideshow.stopAutoOnClick){var a=function(){b.slideshowStop();b.canvas.element.unbind("click",a).find("a").unbind("click",a)};b.canvas.element.bind("click",a).find("a").bind("click",a)}};S.prototype.slideshowStop=function(){this.onOpen=function(){};this.slideshow=!1;clearInterval(this.slideshowTimer)};H.prototype.init=function(){this.initPreloader();this.initImage();this.initNavigation();this.initThumbnails();this.initCaption();
this.initButtons();var b,a=0;if((b=location.hash.match(/#galleryPhotoNumber=(\d+)/))||(b=location.href.match(/[?&]galleryPhotoNumber=(\d+)/)))a=b[1]-1;this.open(this.items[a])};H.prototype.initPreloader=function(){var a=this.canvas;E(t.images.loader,500);var c=this.preloader=b('<img alt="" />');c.attr({src:t.images.loader}).css({position:"absolute",left:"50%",top:"50%",zIndex:100,margin:"-16px 0 0 -16px"});a.append(c)};H.prototype.initImage=function(){var a=this,c=a.canvas,d=a.settings,g=b("<div />");
g.css({position:"absolute",left:0,top:0,width:c.width(),height:c.height()});c.append(g);var e=a.background=b("<div />");e.css({position:"absolute",left:0,top:0,zIndex:0,width:c.width(),height:c.height(),overflow:"hidden",background:B(d.image.bgTintColor)});g.append(e);e=a.imageFrame=b("<div />");e.css({position:"absolute",left:d.image.padding,top:d.image.padding,zIndex:1,width:c.width()-2*d.image.padding,height:c.height()-2*d.image.padding,overflow:"visible"});g.append(e);var q;U(g,{touchstart:function(b){a.drag=
!0;q=b.pageX},touchend:function(b){b=b.pageX-q;30<b?(setTimeout(function(){a.drag=!1},100),a.prev()):-30>b?(setTimeout(function(){a.drag=!1},100),a.next()):a.drag=!1},touchcancel:function(){setTimeout(function(){a.drag=!1},100)}});N(g)};H.prototype.initNavigation=function(){this.initPrevButton();this.initNextButton()};H.prototype.initPrevButton=function(){var a=this,c=a.canvas,d=a.prevButton=b("<div></div>");d.css({position:"absolute",left:-10,top:(c.height()-69)/2,zIndex:1,width:72,height:69,background:"no-repeat center 0",
backgroundImage:z(t.images.folder+"aura-arrows.png"),opacity:0.5,cursor:"pointer"}).hover(function(){b(this).css({opacity:1})},function(){b(this).css({opacity:0.5})}).click(function(){a.prev();return!1});c.append(d)};H.prototype.initNextButton=function(){var a=this,c=a.canvas,d=a.nextButton=b("<div></div>");d.css({position:"absolute",right:-10,top:(c.height()-69)/2,zIndex:1,width:72,height:69,background:"no-repeat center -75px",backgroundImage:z(t.images.folder+"aura-arrows.png"),opacity:0.5,cursor:"pointer"}).hover(function(){b(this).css({opacity:1})},
function(){b(this).css({opacity:0.5})}).click(function(){a.next();return!1});c.append(d)};H.prototype.initThumbnails=function(){function a(){u||(u=!0,r=setInterval(function(){var b=parseInt(f.css("left"))+10;0<b&&(b=0);f.css({left:b})},25))}function c(){u||(u=!0,r=setInterval(function(){var b=parseInt(f.css("left"))-10,a=-(n-e.width()+10);b<a&&(b=a);f.css({left:b})},25))}function d(){u=!1;clearInterval(r)}var g=this,e=g.canvas,q=g.settings,k=g.items,m=b("<div />");e.append(m);var v=g.thumbBar=b("<div />");
v.css({position:"absolute",left:0,bottom:0,zIndex:1,width:e.width(),height:q.thumbnail.height+50,background:"rgba(0,0,0,0.5)"});m=b("<div />");m.css({position:"absolute",left:0,top:29,width:e.width(),height:1,background:"#fff",opacity:0.7});A(m,{boxShadow:"0 1px 0 #000"});v.append(m);var f=b('<div class="altgallery-thumbnails" />');f.css({position:"absolute",left:0,bottom:10});var n=k.length*(q.thumbnail.width+10),r,u=!1;v.mousemove(function(g){g=g.pageX-b(this).offset().left;50>g?a():g>e.width()-
50?c():d()}).mouseleave(function(){d()});e.element.mouseover(function(){v.stop().animate({opacity:1})});e.element.mouseleave(function(){d();v.stop().animate({opacity:0})});f.draggable({axis:"x",start:function(){g.drag=!0},stop:function(b,a){var c=a.position.left,d=-(n-e.width()+10);0<c?f.animate({left:0},"fast"):c<d&&f.animate({left:d},"fast");setTimeout(function(){g.drag=!1},100)}});for(m=0;m<k.length;m++){var h=b("<a></a>");h.attr({href:k[m].source}).css({position:"absolute",left:10+m*(q.thumbnail.width+
10),bottom:0,width:q.thumbnail.width,height:q.thumbnail.height,overflow:"hidden"});(function(a,c){c.hover(function(){A(this,{boxShadow:"0 0 6px #fff"})},function(){a!=g.currentItem&&A(this,{boxShadow:"none"})}).click(function(){g.drag||g.open(k[a],function(){});return!1});E(k[a].thumb,function(a){var d=b('<img alt="" />');d.attr({src:a.src});d.css({position:"absolute"});d.css(F.fill(a.width,a.height,q.thumbnail.width,q.thumbnail.height));c.append(d)},50*a)})(m,h);f.append(h)}v.append(f);e.append(v);
N(v)};H.prototype.initCaption=function(){var a=this.caption=b("<div />");a.css({position:"absolute",left:10,top:10,fontFamily:'"Times New Roman", Times, serif',fontSize:"12px",fontWeight:"bold",color:"#fff",textShadow:"0 1px 0 #000"});this.thumbBar.append(a)};H.prototype.initButtons=function(){function a(){b(this).css({opacity:1})}function c(){b(this).css({opacity:0.5})}var d=this,g=d.settings,e=b("<div />");e.css({position:"absolute",right:5,top:7});var q={cssFloat:"left",width:16,height:16,margin:"0 0 0 4px",
backgroundImage:z(t.images.folder+"aura-buttons.png"),backgroundRepeat:"no-repeat",opacity:0.5,cursor:"pointer"},k=b("<div />");k.prop({title:g.translation.getLink}).css(q).css({backgroundPosition:"0 -40px"}).click(function(){h(d.getCurrentItem().source,"_blank")}).hover(a,c);e.append(k);k=b("<div />");k.prop({title:g.translation.shareWithFacebook}).css(q).css({backgroundPosition:"0 -60px"}).click(function(){h("http://www.facebook.com/sharer.php?u="+location.href+"%23galleryPhotoNumber="+(d.currentItem+
1)+"&t="+d.getCurrentItem().description||"","_blank")}).hover(a,c);e.append(k);k=b("<div />");k.prop({title:g.translation.tweet}).css(q).css({backgroundPosition:"0 -80px"}).click(function(){h("https://twitter.com/intent/tweet?url="+location.href+"%23galleryPhotoNumber="+(d.currentItem+1)+"&text="+d.getCurrentItem().description||"","_blank")}).hover(a,c);e.append(k);k=b("<div />");k.css({cssFloat:"left",width:1,height:14,margin:"0 3px 0 5px",background:"#fff"});e.append(k);k=b("<div />");k.prop({title:g.translation.startSlideshow}).css(q).css({backgroundPosition:"0 0"}).click(function(){d.slideshow?
(d.slideshowStop(),b(this).css({backgroundPosition:"0 0"})):(d.slideshowStart(),b(this).css({backgroundPosition:"0 -20px"}))}).hover(a,c);e.append(k);d.thumbBar.append(e)};H.prototype.update=function(){this.updateThumbnails();this.updateNavigation();this.updateCaption()};H.prototype.updateThumbnails=function(){var a=this,c=0;a.thumbBar.find(".altgallery-thumbnails a").each(function(){var d=b(this);c==a.currentItem?A(d,{boxShadow:"0 0 6px #fff"}):A(d,{boxShadow:"none"});c++})};H.prototype.updateNavigation=
function(){0==this.currentItem?this.prevButton.hide():this.prevButton.show();this.currentItem==this.items.length-1?this.nextButton.hide():this.nextButton.show()};H.prototype.updateCaption=function(b){this.caption.html(b||this.getCurrentItem().description||this.settings.translation.image+" "+(this.currentItem+1)+"/"+this.items.length)};H.prototype.open=function(a,c){var d=this,g=d.canvas,e=d.settings;if(d.currentItem!=a.id){d.currentItem=a.id;var q=setTimeout(function(){d.preloader.show()},500);E(a.source,
function(a){clearTimeout(q);d.preloader.hide();(function(){var c=b('<img alt="" />');c.attr({src:a.src}).css({position:"absolute"});var l,g=d.imageFrame.width(),s=d.imageFrame.height();if("fill"==e.image.scaleMode){l=F.fill(a.width,a.height,g,s);if(l.width>g)l.width=g,l.left=0;if(l.height>s)l.height=s,l.top=0}else l=F.fit(a.width,a.height,g,s);c.css(F.fill(a.width,a.height,l.width,l.height));var q=d.imageFrame.find("div"),g=b("<div />");g.css({position:"absolute",overflow:"hidden"}).css(l).hide();
A(g,{boxShadow:"0 6px 6px rgba(0,0,0,0.6)"});g.append(c);d.imageFrame.append(g);q.animate({opacity:"hide"},t.animation.duration/2);g.animate({opacity:"show"},t.animation.duration/2,function(){q.remove()})})();(function(){var c=b('<img alt="" />');c.attr({src:a.src}).css({position:"absolute"});c.css(F.fill(a.width,a.height,g.width(),g.height()));var l=d.background.find("div"),e=b("<div />");e.css({opacity:0});e.append(c);d.background.append(e);C.process(c.get(0),"blurfast",{amount:1.5});l.animate({opacity:0},
t.animation.duration);e.animate({opacity:0.5},t.animation.duration,function(){l.remove()})})();"function"==typeof c&&c(a);E(d.items[(d.currentItem+1)%d.items.length].source)});d.update()}};H.prototype.prev=function(b){0<this.currentItem?this.open(this.items[this.currentItem-1],b):this.open(this.items[this.items.length-1],b)};H.prototype.next=function(b){this.currentItem<this.items.length-1?this.open(this.items[this.currentItem+1],b):this.open(this.items[0],b)};H.prototype.slideshowStart=function(){var b=
this,a=b.settings;if(!b.slideshow){var c=function(){b.slideshowTimeoutId=setTimeout(function(){b.next(c)},1E3*a.slideshow.delay+2E3)};b.slideshow=!0;setTimeout(function(){b.next(c)},1E3*a.slideshow.delay)}};H.prototype.slideshowStop=function(){if(this.slideshow)this.slideshow=!1,clearTimeout(this.slideshowTimeoutId)};O.prototype.render=function(c){var d=this,p=this.canvas,g=this.items,e=this.settings;if(c===a)c=d.page;p.element.empty();var q=p.width(),k=p.height(),m=parseInt(e.thumbnail.width),f=
parseInt(e.thumbnail.height),n=Math.floor((q-40)/m);1>n&&(n=1);var h=Math.floor((k-40)/f);1>h&&(h=1);c=Math.ceil(g.length/n);h>c&&(h=c);var r=n*h,u=d.pagesCount=Math.ceil(g.length/r),o=Math.floor(e.thumbnail.width)+2,V=Math.floor(e.thumbnail.height)+2,J=Math.floor((q-o*n)/2-8),w=Math.floor((k-V*h)/2-8),y=d.pageWidth=o*n,c=d.pageHeight=V*h,x=b('<div class="altgallery-frame" />'),k={position:"absolute",left:J,top:w,width:Math.floor(q-2*(J+8))+14,height:Math.floor(k-2*(w+8))+14,background:B(e.colorScheme.thumbsFrameColor),
"-moz-border-radius":"4px","-webkit-border-radius":"4px","-khtml-border-radius":"4px",borderRadius:"4px"};e.colorScheme.useShadow&&(k=b.extend(k,{"-moz-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)","-khtml-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)",boxShadow:"0 0 10px rgba(0, 0, 0, 0.5)"}));x.css(k);p.element.append(x);q=b('<div class="altgallery-frameMask" />');k.background="#000";k.opacity=0.6;k.zIndex=20;k["-moz-box-shadow"]="none";k["-webkit-box-shadow"]=
"none";k["-khtml-box-shadow"]="none";k.boxShadow="none";q.css(k).hide();p.element.append(q);p=b("<div />");p.css({position:"absolute",left:8,top:8,width:y-2,height:c-2,overflow:"hidden"});var C=d.imagesContainer=b("<div />");C.css({position:"relative",left:0,top:0,width:o*n*u-2,height:V*h-2});p.append(C);x.append(p);d.drag=!1;var X=0;C.draggable({axis:"x",distance:30,start:function(b,a){X=a.position.left;d.drag=!0},stop:function(b,a){30<Math.abs(Math.abs(X)-Math.abs(a.position.left))?X<a.position.left?
d.prevPage():d.nextPage():d.placePage();setTimeout(function(){d.drag=!1},100)}});N(C);for(p=0;p<g.length;p++)u=p%n*o+Math.floor(p/r)*y,q=Math.floor(p/n)%h*V,function(a,c,p){var k=b("<img />"),s=b("<a />");s.attr({href:g[a].source}).css({display:"block",position:"absolute",left:Math.floor(c),top:Math.floor(p+0.5*f),width:m,height:f,overflow:"hidden",opacity:0,background:B(e.colorScheme.imageBGColor),border:"none",margin:0,padding:0}).click(function(){return!1});C.append(s);var q=function(){s.click(function(){if(!d.drag)d.currentItem=
a,d.open(g[a],{left:a%n*o+J,top:p+w});return!1}).mouseover(function(){k.stop().animate({opacity:1},t.animation.duration/2)}).mouseleave(function(){k.stop().animate({opacity:e.thumbnail.alpha/100},t.animation.duration/2)})};a<r?setTimeout(function(){s.animate({top:p,opacity:1},{duration:t.animation.duration,complete:q})},200*a):(s.css({top:p,opacity:1}),q());E(g[a].thumb,function(b){k.attr({src:b.src}).css({display:"block",position:"absolute",margin:0,padding:0,border:"none",opacity:e.thumbnail.alpha/
100}).css(F.fill(b.width,b.height,parseInt(e.thumbnail.width),parseInt(e.thumbnail.height)));s.append(k)},200*a)}(p,u,q);h=d.prevPageButton=b("<div />");h.css({position:"absolute",left:5,top:c/2-10,width:30,height:30,background:z(t.images.folder+"/left.png"),cursor:"pointer"});A(h,{borderRadius:"4px"});h.click(function(){d.prevPage()});x.append(h);h=d.nextPageButton=b("<div />");h.css({position:"absolute",right:5,top:c/2-10,width:30,height:30,background:z(t.images.folder+"/right.png"),cursor:"pointer"});
A(h,{borderRadius:"4px"});h.click(function(){d.nextPage()});x.append(h);x.mouseover(function(){d.showControls()});x.mouseleave(function(){d.hideControls()});d.hideControls();d.showControls()};O.prototype.hideControls=function(){this.prevPageButton.hide();this.nextPageButton.hide()};O.prototype.showControls=function(){0<this.page&&this.prevPageButton.show();this.page<this.pagesCount-1&&this.nextPageButton.show()};O.prototype.open=function(c,d){var p=this,g=this.settings,e=b('<img class="altgallery-preloader" src="'+
t.images.loader+'" alt="" />');w(e);e.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});var q=b('<img src="'+c.thumb+'" />');E(c.thumb,function(k){b(".altgallery-imageFrame",p.canvas.element).remove();b(".altgallery-frameMask",p.canvas.element).fadeIn(t.animation.duration);var m=document.createElement("div");b(m).addClass("altgallery-imageFrame").css({position:"absolute",padding:8,background:B(g.colorScheme.imageBGColor),zIndex:30});b(m).hide();var f=F.fit(k.width,
k.height,p.canvas.width()-48,p.canvas.height()-48),n={left:f.left+16+f.width/3,top:f.top+16+f.height/3,width:f.width/3,height:f.height/3};if(d!==a){if(d.left!==a)n.left=d.left;if(d.top!==a)n.top=d.top}b(m).css(n);var k=F.fit(k.width,k.height,p.canvas.width()-48,p.canvas.height()-48),h={left:k.left+16+k.width/3,top:k.top+16+k.height/3,width:k.width/3,height:k.height/3,margin:0,padding:0,border:"none",maxWidth:"none",maxHeight:"none",cursor:"pointer"};q.css(h);b(m).append(q);p.canvas.element.append(m);
q.animate(k,t.animation.duration);b(m).animate({opacity:"show",left:f.left+16,top:f.top+16,width:f.width,height:f.height},t.animation.duration,function(){var a=b("<div></div>");a.css({position:"absolute",left:8,top:8,width:f.width,height:f.height,overflow:"hidden",cursor:"pointer"});if(c.description){var d=parseInt(g.imageCaption.fontSize),d=d||p.defaultSettings.imageCaption.fontSize,l=b("<div><div>"+c.description+"</div></div>");l.css({position:"absolute",left:0,width:f.width,fontFamily:g.imageCaption.fontName,
fontSize:d+"px",lineHeight:1.25,color:B(g.imageCaption.color),background:x(g.imageCaption.bgColor,g.imageCaption.bgAlpha/100)});a.append(l);b(m).append(a);"bottom"==g.imageCaption.position.toLowerCase()?(l.css({bottom:"-33px",borderTop:"1px solid "+x(g.imageCaption.bgColor,(g.imageCaption.bgAlpha+10)/100)}),l.children("div").css({padding:"8px 10px 10px"}),l.animate({bottom:0})):(l.css({top:"-33px",borderBottom:"1px solid "+x(g.imageCaption.bgColor,(g.imageCaption.bgAlpha+10)/100)}),l.children("div").css({padding:"10px 10px 8px"}),
l.animate({top:0}))}var k=b('<a class="altgallery-close" style="position:absolute; right:-15px; top:-13px; width:30px; height:30px; z-index:40; background:no-repeat center; cursor:pointer;"></a>');k.css({backgroundImage:z(t.images.close)});k.click(function(){b(this).remove();l&&l.remove();n.opacity="hide";b(m).animate(n,t.animation.duration,function(){b(this).remove()});q.animate(h,t.animation.duration);b(".altgallery-frameMask",p.canvas.element).fadeOut(t.animation.duration)});b(m).append(k);a.click(function(){k.remove();
l&&l.remove();n.opacity="hide";b(m).animate(n,t.animation.duration,function(){b(this).remove();p.next()});q.animate(h,t.animation.duration)});setTimeout(function(){b(m).append(e)},500)})});E(c.source,function(){e.hide();p.canvas.element.find(".altgallery-preloader").remove();b(q).attr("src",c.source)})};O.prototype.prev=function(){this.currentItem--;if(0>this.currentItem)this.currentItem=this.items.length-1;this.open(this.getCurrentItem())};O.prototype.next=function(){this.currentItem++;if(this.currentItem>=
this.items.length)this.currentItem=0;this.open(this.getCurrentItem())};O.prototype.placePage=function(){var b=this;b.hideControls();b.imagesContainer.animate({left:-(b.page*b.pageWidth)},{duration:t.animation.duration,complete:function(){b.showControls()}})};O.prototype.prevPage=function(){this.page--;if(0>this.page)this.page=0;this.placePage()};O.prototype.nextPage=function(){this.page++;if(this.page>=this.pagesCount)this.page=this.pagesCount-1;this.placePage()};G.prototype.init=function(){var b=
this.settings;this.initFrame();this.initNavigation();this.initCaption();this.initButtons();this.initThumbnails();this.initImage();switch(b.initialState.toLowerCase()){case "show thumbnails":this.showThumbnails();break;default:case "load image":case "show image":this.showImage();break;case "start slideshow":this.showImage(),this.slideshowStart()}};G.prototype.initFrame=function(){var a=this.canvas,c=this.settings,d=this.frame=b("<div></div>"),g=a.width()-10,e=a.height()-10;d.css({position:"absolute",
left:5,top:5,width:g,height:e,overflow:"hidden",background:B(c.buttons.bgColor)});A(d,{borderRadius:"5px",boxShadow:"0 0 4px rgba(0, 0, 0, 0.5)"});var f=this.content=b("<div></div>"),g=this.contentWidth=g-18,e=this.contentHeight=e-43;f.css({position:"absolute",left:9,top:9,width:g,height:e,background:B(c.base.color)});A(f,{borderRadius:"4px"});d.append(f);c=this.preloader=b('<img alt="" />');c.attr("src",t.images.loader);c.css({position:"absolute",left:"50%",top:"50%",zIndex:100,margin:"-16px 0 0 -16px"});
f.append(c);a.append(d)};G.prototype.initNavigation=function(){this.initPrevButton();this.initNextButton()};G.prototype.initPrevButton=function(){var a=this.settings,c=b("<div></div>");c.css({position:"absolute",left:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,background:B(a.buttons.bgColor),cursor:"default"});A(c,{borderRadius:"10px",boxShadow:"5px 0 15px rgba(0, 0, 0, 0.5)"});this.frame.append(c);prevOverlay=b("<div></div>");prevOverlay.css({position:"absolute",left:0,top:this.contentHeight/
2-30,zIndex:10,width:9,height:80,background:B(a.buttons.bgColor),cursor:"default"});this.frame.append(prevOverlay);var d=this.prevButton=b('<div><div style="margin:25px 0 0 6px; width:9px; height:9px; background:url('+t.images.folder+'cubic-buttons.png) no-repeat -8px -8px;"></div></div>');d.css({position:"absolute",left:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,cursor:"pointer"});this.frame.append(d);var g;this.canvas.element.hover(function(){clearTimeout(g);c.stop().show().css({opacity:1}).animate({left:0});
d.stop().animate({left:0,opacity:1})},function(){g=setTimeout(function(){c.stop().animate({left:-12},function(){c.fadeOut()});d.stop().animate({left:-12,opacity:0})},100)});this.hidePrevButton=function(){c.css({visibility:"hidden"});prevOverlay.css({visibility:"hidden"});d.css({visibility:"hidden"})};this.showPrevButton=function(){c.css({visibility:"visible"});prevOverlay.css({visibility:"visible"});d.css({visibility:"visible"})}};G.prototype.initNextButton=function(){var a=this.settings,c=b("<div></div>");
c.css({position:"absolute",right:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,background:B(a.buttons.bgColor),cursor:"default"});A(c,{borderRadius:"10px",boxShadow:"-5px 0 15px rgba(0, 0, 0, 0.5)"});this.frame.append(c);nextOverlay=b("<div></div>");nextOverlay.css({position:"absolute",right:0,top:this.contentHeight/2-30,zIndex:10,width:9,height:80,background:B(a.buttons.bgColor),cursor:"default"});this.frame.append(nextOverlay);var d=this.nextButton=b('<div><div style="margin:25px 0 0 6px; width:9px; height:9px; background:url('+
t.images.folder+'cubic-buttons.png) no-repeat -8px -33px;"></div></div>');d.css({position:"absolute",right:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,cursor:"pointer"});this.frame.append(d);var g;this.canvas.element.hover(function(){clearTimeout(g);c.stop().show().css({opacity:1}).animate({right:0});d.stop().animate({right:0,opacity:1})},function(){g=setTimeout(function(){c.stop().animate({right:-12},function(){c.fadeOut()});d.stop().animate({right:-12,opacity:0})},100)});this.hideNextButton=
function(){c.css({visibility:"hidden"});nextOverlay.css({visibility:"hidden"});d.css({visibility:"hidden"})};this.showNextButton=function(){c.css({visibility:"visible"});nextOverlay.css({visibility:"visible"});d.css({visibility:"visible"})}};G.prototype.initCaption=function(){var a=this.caption=b("<div></div>");a.css({position:"absolute",left:10,bottom:10,width:this.contentWidth-60,overflow:"hidden",fontFamily:"Arial, Helvetica, sans-serif",fontSize:"11px",color:"#777"});this.frame.append(a)};G.prototype.initButtons=
function(){var a=this,c=a.settings,d=function(){b(this).css({borderColor:"#fff #bbb #bbb #fff"});A(this,{boxShadow:"0 0 2px rgba(0, 0, 0, 0.2)"})},g=function(){b(this).css({borderColor:"transparent"});A(this,{boxShadow:"none"})};if(c.buttons.showSlideshowButton){var e=a.slideshowButton=b("<div></div>");e.css({position:"absolute",right:c.buttons.showThumbnailsButton?29:5,bottom:5,width:23,height:23,background:z(t.images.folder+"cubic-buttons.png")+" no-repeat 0px -51px",border:"1px solid",borderColor:"transparent",
cursor:"pointer"});A(e,{borderRadius:"3px 4px 3px 4px"});e.hover(d,g);e.click(function(){a.showImage();a.slideshowStart()});a.frame.append(e)}if(c.buttons.showThumbnailsButton)c=a.showThumbnailsButton=b("<div></div>"),c.css({position:"absolute",right:5,bottom:5,width:23,height:23,background:z(t.images.folder+"cubic-buttons.png")+" no-repeat -1px -126px",border:"1px solid",borderColor:"transparent",cursor:"pointer"}).hide(),A(c,{borderRadius:"3px 4px 3px 4px"}),c.hover(d,g),c.click(function(){a.showThumbnails()}),
a.frame.append(c),c=a.showImagesButton=b("<div></div>"),c.css({position:"absolute",right:5,bottom:5,width:23,height:23,background:z(t.images.folder+"cubic-buttons.png")+" no-repeat -1px -101px",border:"1px solid",borderColor:"transparent",cursor:"pointer"}).hide(),A(c,{borderRadius:"3px 4px 3px 4px"}),c.hover(d,g),c.click(function(){a.showImage()}),a.frame.append(c)};G.prototype.initImage=function(){var a=this.imageWidth=this.contentWidth-2*this.settings.base.visibleFrame,c=this.imageHeight=this.contentHeight-
2*this.settings.base.visibleFrame,d=this.imagesFrame=b("<div></div>");d.css({position:"absolute",left:this.settings.base.visibleFrame,top:this.settings.base.visibleFrame,width:a,height:c,overflow:"hidden"}).hide();A(d,{borderRadius:"3px"});this.content.append(d);a=this.imagesContainer=b("<div></div>");a.css({position:"relative",left:0,top:0});d.append(a)};G.prototype.showImage=function(b){var a=this,c=function(){function b(){setTimeout(function(){a.drag=!1},100)}a.cleanup();a.thumbnailsFrame.hide();
a.imagesFrame.show();a.showImagesButton.hide();a.showThumbnailsButton.show();a.showPrevButton();a.showNextButton();a.prevButton.unbind("click").click(function(){a.slideshowStop();a.prev()});a.nextButton.unbind("click").click(function(){a.slideshowStop();a.next()});var c=0;a.imagesContainer.draggable({axis:"x",distance:30,start:function(b,d){a.drag=!0;c=d.position.left},stop:function(d,p){30<Math.abs(Math.abs(c)-Math.abs(p.position.left))?c<p.position.left?a.prev(t.animation.duration,b):a.next(t.animation.duration,
b):a.place(t.animation.duration,b)}});a.imagesContainer.unbind("dblclick").dblclick(function(){a.showThumbnails()});N(a.imagesContainer)};!1!==b?(a.hidePrevButton(),a.hideNextButton(),a.open(a.getCurrentItem(),c)):c()};G.prototype.initThumbnails=function(){function a(){c.cleanup()}var c=this,d=c.canvas,g=c.thumbnailsWidth=c.contentWidth-2*c.settings.base.visibleFrame,e=c.thumbnailsHeight=c.contentHeight-2*c.settings.base.visibleFrame,f=c.thumbnailsFrame=b("<div></div>");f.css({position:"absolute",
left:c.settings.base.visibleFrame,top:c.settings.base.visibleFrame,width:g,height:e,overflow:"hidden"}).hide();A(f,{borderRadius:"3px"});c.content.append(f);var k=c.thumbnailsContainer=b('<div class="thumbnailsContainer"></div>');k.css({position:"relative",left:0,top:0,width:g*Math.ceil(c.items.length/20),height:e});f.append(k);for(var m=Math.round((g-5)/5),n=Math.round((e-4)/4),h=Math.round((g-5*m)/10),o=Math.round((e-4*n)/8),e=0;e<c.items.length;e++)(function(e,f){E(f.thumb,function(q){var t=e%
5,J=Math.floor(e%20/5),T=b('<a class="altgallery-thumbnail altgallery-thumbnail-'+e+'"></a>');w(T);T.attr({href:f.source}).css({display:"block",position:"absolute",left:t*m+Math.floor(e/20)*g+1*t+h,top:J*n+1*J+o,width:m,height:n,overflow:"hidden",cursor:"pointer",zIndex:Math.floor(e%20/5)});A(T,{boxShadow:"0px 3px 3px rgba(0, 0, 0, 0.5)"});T.mouseover(function(){if(c.enableThumbnailsHover&&!c.drag){var h=0;0==t?h=m/8:4==t&&(h=-m/8);var o=0;0==J?o=n/8:3==J&&(o=-n/8);c.updateCaption(f.description||
"Image "+(e+1)+" / "+c.items.length);c.cleanup();d.element.find(".altgallery-thumbnail").css({opacity:0.8});var D=b(this).clone();D.addClass("altgallery-clone");D.css({left:b(this).offset().left-k.offset().left,top:b(this).offset().top-k.offset().top,zIndex:10,opacity:1});A(D,{boxShadow:"5px 15px 13px rgba(0, 0, 0, 0.7)"});k.append(D);var w=D.find("img");D.animate({width:1.25*m,height:1.25*n,marginLeft:-m/8+h,marginTop:-n/8+o},{duration:"fast",easing:"linear",step:function(){w.css(F.fill(q.width,
q.height,D.width(),D.height()))}});D.click(function(){if(!c.drag)c.currentItem=e,D.unbind("mouseleave"),c.canvas.element.unbind("mouseleave",a),A(D,{boxShadow:"none"}),D.animate({left:c.currentPage*g,top:0,width:c.imageWidth,height:c.imageHeight,marginLeft:0,marginTop:0},{duration:"normal",step:function(){w.css(F.fill(q.width,q.height,D.width(),D.height()))},complete:function(){c.showImage()}});return!1});D.mouseleave(function(){c.cleanup();c.updateCaption(" ")})}});T.click(function(){if(!c.drag)c.currentItem=
e,c.showImage();return!1});var z=b("<img />");z.attr({src:f.thumb}).css({display:"block",position:"absolute",border:"none"}).css(F.fill(q.width,q.height,m,n));T.append(z);k.append(T)})})(e,c.items[e]);c.canvas.element.mouseleave(a);c.currentPage=0;c.preloader.hide()};G.prototype.showThumbnails=function(){function b(a,c){e.thumbnailsContainer.stop().animate({left:-e.currentPage*e.thumbnailsWidth},{duration:a||2*t.animation.duration,complete:function(){e.enableThumbnailsHover=!0;"function"==typeof c&&
c()}})}function a(c,d){if(0<e.currentPage)e.currentPage--,e.enableThumbnailsHover=!1,e.cleanup();b(c,d);e.updateNavigation()}function c(a,d){if(e.currentPage<Math.ceil(e.items.length/20)-1)e.currentPage++,e.enableThumbnailsHover=!1,e.cleanup();b(a,d);e.updateNavigation()}function d(){setTimeout(function(){e.drag=!1},100)}var e=this;e.slideshow&&e.slideshowStop();e.updateCaption(" ");e.imagesFrame.hide();e.thumbnailsFrame.show();e.showThumbnailsButton.hide();e.showImagesButton.show();e.prevButton.unbind("click").click(function(){a()});
e.nextButton.unbind("click").click(function(){c()});e.updateNavigation();var f=0;e.thumbnailsContainer.draggable({axis:"x",distance:30,start:function(b,a){e.drag=!0;f=a.position.left;e.cleanup()},stop:function(e,m){30<Math.abs(Math.abs(f)-Math.abs(m.position.left))?f<m.position.left?a(t.animation.duration,d):c(t.animation.duration,d):b(t.animation.duration,d)}});N(e.thumbnailsContainer)};G.prototype.updateNavigation=function(){var b=Math.ceil(this.items.length/20);0<this.currentPage?this.showPrevButton():
this.hidePrevButton();this.currentPage<b-1?this.showNextButton():this.hideNextButton()};G.prototype.updateCaption=function(b){(b=b||this.getCurrentItem().description)?this.caption.html(b):this.caption.html("Image "+(this.currentItem+1)+" / "+this.items.length)};G.prototype.loadImage=function(c,d){var p=this,c=c%p.items.length;p.items[c]!==a&&E(p.items[c].source,function(a){var e="altgallery-image-"+c;if(!p.imagesContainer.find("."+e).size()){e=b('<div class="'+e+'"></div>');e.css({position:"absolute",
left:p.imageWidth*c,top:0,width:p.imageWidth,height:p.imageHeight,overflow:"hidden"});var f=b('<img style="position:absolute;" />');f.attr("src",a.src);f.css(F.fill(a.width,a.height,p.imageWidth,p.imageHeight));e.append(f);p.imagesContainer.append(e)}"function"==typeof d&&d(a)})};G.prototype.open=function(a,c){var d=this,g="altgallery-image-"+d.currentItem;d.imagesContainer.find("."+g).size()?"function"==typeof c&&c():(d.preloader.show(),E(a.source,function(a){var f=b('<div class="'+g+'"></div>');
f.css({position:"absolute",left:d.imageWidth*d.currentItem,top:0,width:d.imageWidth,height:d.imageHeight,overflow:"hidden"});var k=b('<img style="position:absolute;" />');k.attr("src",a.src);k.css(F.fill(a.width,a.height,d.imageWidth,d.imageHeight));f.append(k);d.imagesContainer.append(f);d.preloader.hide();"function"==typeof c&&c()}));d.imagesContainer.stop().css({left:-d.imageWidth*d.currentItem});d.updateCaption();d.loadImage(a.id+1);d.loadImage(a.id-1)};G.prototype.place=function(a,b){this.imagesContainer.stop().animate({left:-this.imageWidth*
this.currentItem},{duration:a||2*t.animation.duration,complete:function(){"function"==typeof b&&b()}})};G.prototype.prev=function(a,b){var c=this;if(0<c.currentItem){c.currentItem--;var d=setTimeout(function(){c.preloader.show()},500);c.loadImage(c.currentItem,function(){clearTimeout(d);c.preloader.hide();c.place(a,b);c.updateCaption();c.loadImage(c.currentItem-1)})}else c.currentItem=c.items.length-1,c.showImage()};G.prototype.next=function(a,b){var c=this;if(c.currentItem<c.items.length-1){c.currentItem++;
var d=setTimeout(function(){c.preloader.show()},500);c.loadImage(c.currentItem,function(){clearTimeout(d);c.preloader.hide();c.place(a,function(){c.slideshow&&c.slideshowStart();"function"==typeof b&&b()});c.updateCaption();c.loadImage(c.currentItem+1)})}else c.currentItem=0,c.showImage(),c.slideshow&&c.slideshowStart()};G.prototype.slideshowStart=function(){var b=this;b.showImage(!1);clearTimeout(b.slideshowTimer);b.slideshow=!0;b.slideshowButton.css({background:z(t.images.folder+"cubic-buttons.png")+
" no-repeat 0px -76px"});b.slideshowButton.unbind("click").click(function(){b.slideshowStop()});b.slideshowTimer=setTimeout(function(){b.next()},1E3*b.settings.slideshowDelay)};G.prototype.slideshowStop=function(){var b=this;b.slideshow=!1;clearTimeout(b.slideshowTimer);b.slideshowButton.css({background:z(t.images.folder+"cubic-buttons.png")+" no-repeat 0px -51px"});b.slideshowButton.unbind("click").click(function(){b.slideshowStart()})};G.prototype.cleanup=function(){this.canvas.element.find(".altgallery-clone").remove();
b(this.canvas.element).find(".altgallery-thumbnail").css({opacity:1})};R.prototype.showScrollbar=function(){var a=this,c=this.settings,d=this.canvas,g=b('<div class="altgallery-scrollbar"></div>'),e=Math.round(0.8*d.width())-36;g.css({position:"absolute",zIndex:1E3,left:(d.width()-e)/2,bottom:5,width:e+36,height:17,background:x(c.scrollbar.bgColor,c.scrollbar.bgAlpha/100),"-moz-border-radius":8,"-webkit-border-radius":8,borderRadius:8});if(b.browser.msie&&9>b.browser.version){var f=sprintf("%02x%s",
255*c.scrollbar.bgAlpha/100,B(c.scrollbar.bgColor).replace("#",""));g.css({filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+f+",endColorstr=#"+f+")"})}var k=b('<div class="altgallery-scrollbar-handle"></div>'),m=e/a.items.length;k.css({position:"absolute",left:Math.round(a.currentItem*m),top:-10,width:Math.floor(m),height:30});var n=b("<div />");n.css({position:"relative",top:10,height:13,background:B(c.scrollbar.handleColor),opacity:c.scrollbar.handleAlpha/100,cursor:"ew-resize"});
n.hover(function(){n.css({opacity:1})},function(){n.css({opacity:c.scrollbar.handleAlpha/100})});k.append(n);k.draggable({axis:"x",containment:"parent",stop:function(b,c){a.currentItem=Math.floor(c.position.left/e*a.items.length);k.css({left:Math.round(a.currentItem*m)});a.animate()}});f=b("<div></div>");f.css({position:"relative",top:2,height:13,margin:"0 18px"});f.click(function(c){c=c.pageX-b(this).offset().left;a.currentItem=Math.floor(c/e*a.items.length);k.css({left:Math.round(a.currentItem*
m)});a.animate()});var h={position:"absolute",top:2,width:16,height:16,fontFamily:"Arial, Helvetica, sans-serif",fontSize:"10px",lineHeight:"14px",textAlign:"center",color:B(c.scrollbar.arrowsColor),opacity:c.scrollbar.arrowsAlpha/100,cursor:"pointer"},o=b("<div>&#9668;</div>");o.css(h);o.css({left:1});o.click(function(){a.prev()});g.append(o);o=b("<div>&#9658;</div>");o.css(h);o.css({right:1});o.click(function(){a.next()});g.append(o);f.append(k);g.append(f);d.element.append(g);N(k)};R.prototype.updateScrollbar=
function(){var b=this.canvas,a=(Math.round(0.8*b.width())-36)/this.items.length;b.element.find(".altgallery-scrollbar-handle").css({left:Math.round(this.currentItem*a)})};R.prototype.getItemStyle=function(b,a){var c=this.settings,d=this.canvas,e,f;e=this.getItemX(a);f=this.getItemZ(a);var k;k=Math.abs(e);var m=F.fit(b.width,b.height,c.maxImageWidth*(1>k?1:2>k?0.55:3>k?0.5:0.6-0.05*k),d.height()-60);return{zIndex:10*f,left:(d.width()-m.width)/2+e*d.width()/8+(e?e/k*c.maxImageWidth/3:0),top:(d.height()-
m.height)/2-30,width:m.width,height:m.height,opacity:e?0.8:1,transform:{rotateY:-(e?e/k:0)*c.imageAngle+"deg"}}};R.prototype.render=function(){function a(d,k){E(e[d].source,function(a){var m=c.getItemStyle(a,d),h=b('<a class="altgallery-item-'+d+'"></a>');e[d].link&&(h.attr("href",e[d].link),e[d].target&&h.attr("target",e[d].target));h.css({display:"block",position:"absolute",zIndex:m.zIndex,left:m.left,top:m.top,width:m.width,height:m.height,overflow:"visible",background:"#000",cursor:"pointer",
outline:"none"});f&&n(h,{rotateY:m.transform.rotateY});var o=b('<img src="" alt="" />');o.attr("src",a.src);w(o);o.css({display:"block",width:m.width,height:m.height,opacity:m.opacity});h.append(o);if(c.showReflections){a=o.clone();a.css({position:"absolute",opacity:p.reflectionAlpha/100,"-moz-transform":"scaleY(-1)","-webkit-transform":"scaleY(-1)","-o-transform":"scaleY(-1)","-ms-transform":"scaleY(-1)",transform:"scaleY(-1)",zIndex:1});var r=b('<div class="altgallery-overlay"></div>');r.css({position:"absolute",
top:m.height,width:m.width,height:m.height,background:g.element.css("backgroundColor"),zIndex:0});var s=b('<div class="altgallery-overlay"></div>');s.css({position:"absolute",top:m.height,width:m.width,height:m.height,zIndex:2});var m=g.element.css("backgroundColor"),v=[x(m,0),x(m,0.5),x(m,1)];b.browser.mozilla?s.css({background:"-moz-linear-gradient(top, "+v[0]+" 0%, "+v[1]+" 15%, "+v[2]+" 50%)"}):b.browser.webkit?s.css({background:"-webkit-linear-gradient(top, "+v[0]+" 0%, "+v[1]+" 15%, "+v[2]+
" 50%)"}):b.browser.opera?s.css({background:"-o-linear-gradient(top, "+v[0]+" 0%, "+v[1]+" 15%, "+v[2]+" 50%)"}):b.browser.msie?(m=B(m).replace("#",""),s.css({filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00"+m+",endColorstr=#ff"+m+",GradientType=0)"})):s.css({background:"linear-gradient(top, "+v[0]+" 0%, "+v[1]+" 15%, "+v[2]+" 50%)"});h.append(a);h.append(r);h.append(s)}h.click(function(){if(!c.drag){c.currentItem+=k;if(0>c.currentItem)c.currentItem=0;else if(c.currentItem>=e.length)c.currentItem=
e.length-1;c.animate()}return!1}).hover(function(){o.css({opacity:1})},function(){o.css({opacity:k?0.8:1})});d==c.currentItem&&h.unbind("click").click(function(){if(c.drag)return!1});c.scene.append(h)})}var c=this,p=this.settings,g=this.canvas,e=this.items,f=!d();c.scene.empty();c.scene.css({"-webkit-perspective":400,"-moz-perspective":400,perspective:400});var k,m,h,o,t,r=0;o=c.currentItem;t=2*Math.max(o,e.length-o);for(m=1;m<=t;m++)k=o+(m%2?parseInt(m/2):-parseInt(m/2)),0<=k&&k<e.length&&function(b){setTimeout(function(){h=
c.getItemX(b);a(b,h)},100*r++)}(k);p.useScrollBar&&c.showScrollbar();b.browser.mozilla&&c.showReflections&&c.animate()};R.prototype.animate=function(){function b(d,k,f){E(g[d].source,function(b){function m(b){function c(a){return q[a]+(s[a]-q[a])*b/1E4}h.css({left:c("left"),top:c("top"),zIndex:parseInt(c("zIndex")),width:c("width"),height:c("height")});o.css({width:c("width"),height:c("height")});a.showReflections&&v.css({top:c("height"),width:c("width"),height:c("height")});e&&n(h,{rotateY:parseFloat(q.transform.rotateY)+
(parseFloat(s.transform.rotateY)-parseFloat(q.transform.rotateY))*b/1E4+"deg"})}var h=a.scene.find(".altgallery-item-"+d),o=h.find("img"),q={left:parseInt(h.css("left")),top:parseInt(h.css("top")),zIndex:parseInt(h.css("z-index")),width:h.width(),height:h.height(),opacity:h.find("img").css("opacity"),transform:n(h)},s=a.getItemStyle(b,d);f||h.show();h.unbind("click").click(function(){if(!a.drag){a.currentItem+=k;if(0>a.currentItem)a.currentItem=0;else if(a.currentItem>=g.length)a.currentItem=g.length-
1;a.animate()}return!1}).unbind("hover").hover(function(){o.first().css({opacity:1})},function(){o.first().css({opacity:k?0.8:1})});o.first().css({opacity:s.opacity});var v=h.find(".altgallery-overlay");h.stop().prop("animate",0);f?m(1E4):h.animate({animate:1E4},{duration:500*c.flipDuration,easing:"linear",step:function(a){m(a)},complete:function(){h.prop("animate",0);d==a.currentItem&&h.unbind("click").click(function(){if(a.drag)return!1})}})})}var a=this,c=this.settings,g=this.items,e=!d(),f,k,
m,h,o;h=a.currentItem;o=2*Math.max(h,g.length-h);for(k=1;k<=o;k++)if(f=h+(k%2?parseInt(k/2):-parseInt(k/2)),0<=f&&f<g.length){var t=Math.abs(a.currentItem-f);m=a.getItemX(f);4>t?b(f,m):(a.scene.find(".altgallery-item-"+f).hide(),b(f,m,!0))}c.useScrollBar&&a.updateScrollbar()};R.prototype.open=function(a){this.currentItem=a.id;this.animate()};R.prototype.prev=function(a){a=this.currentItem-(a||1);0>a&&(a=0);if(this.currentItem!=a)this.currentItem=a,this.animate()};R.prototype.next=function(a){a=this.currentItem+
(a||1);a>=this.items.length&&(a=this.items.length-1);if(this.currentItem!=a)this.currentItem=a,this.animate()};K.prototype.render=function(){var a=this,c=this.settings,d=this.canvas;d.element.css({fontFamily:c.fontName,fontSize:parseInt(c.fontSize)+"px",lineHeight:1.2*parseInt(c.fontSize)+"px"});(function(){var g=b('<div class="altgallery-imageFrame"></div>');g.css({width:d.width()-2*c.frameSize,height:d.height()-2*c.frameSize,padding:c.frameSize,background:B(c.frameColor),borderRadius:c.cornerRadius/
2});var e=b('<div class="altgallery-image"></div>');e.css({position:"relative",width:d.width()-2*c.frameSize,height:d.height()-2*c.frameSize,overflow:"hidden",background:B(c.backgroundColor),borderRadius:c.cornerRadius/2-c.frameSize/4,cursor:"pointer"});var f=b('<img src="" alt="" />');w(e.children("img"));f.css({position:"absolute"});g.click(function(){a.next()});e.append(f);g.append(e);d.element.append(g);a.open(a.getCurrentItem())})();switch(c.initialState.toLowerCase()){default:case "show albums":this.showAlbums();
break;case "show thumbnails":this.showThumbnails();case "load image":case "start slideshow":}};K.prototype.showAlbums=function(){function a(){function e(){var a=r*n+1,b=r*n+n;if(b>c.albums.length)b=c.albums.length;s.html(a+"-"+b+" "+g.translation.Of+" "+c.albums.length);0>=r?(J.css({opacity:0.3,cursor:"default"}),J.unbind("click").click(function(){return!1})):(J.css({opacity:1,cursor:"pointer"}),J.unbind("click").click(A));r>=o-1?(x.css({opacity:0.3,cursor:"default"}),x.unbind("click").click(function(){return!1})):
(x.css({opacity:1,cursor:"pointer"}),x.unbind("click").click(B))}c.hideThumbnails();c.hideButtons();c.hideCaption();c.hideNavigation();var f=b('<div class="altgallery-albums"></div>'),k=d.width()-2*g.frameSize,m=g.iconHeight+115;f.css({position:"absolute",left:g.frameSize,top:(d.height()-m)/2,width:d.width()-2*g.frameSize,height:m,overflow:"hidden",color:"#fff",border:"1px #000",borderStyle:"solid none",zIndex:2});var h=b('<div class="altgallery-albums-overlay"></div>');h.css({position:"absolute",
left:g.frameSize,top:(d.height()-m)/2,width:d.width()-2*g.frameSize,height:m+1,background:"#000",opacity:g.panelBackgroundAlpha/100,zIndex:1});d.element.append(h);m=b("<div></div>");m.css({position:"absolute",top:10,right:20});h=b('<a class="altgallery-close" href="#">'+g.translation.Close+"</a>");h.css({marginRight:0,color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",backgroundImage:z(t.images.folder+"zen-close.png"),paddingLeft:12});
h.click(function(){c.hideAlbums();c.showButtons();c.showCaption();c.showNavigation();return!1});m.append(h);f.append(m);var n=Math.floor((k-20)/(g.iconWidth+g.iconPadding)),n=n>c.albums.length?c.albums.length:n,m=(g.iconWidth+g.iconPadding)*n-g.iconPadding,h=(g.iconWidth+g.iconPadding)*c.albums.length-g.iconPadding,o=Math.ceil(c.albums.length/n),r=0,u=b("<div>"+g.translation.Albums+"</div>");u.css({position:"absolute",left:9,top:0,padding:10,paddingLeft:25,textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.5)",
fontWeight:"bold",background:"no-repeat left center",backgroundImage:z(t.images.folder+"zen-albums.png")});f.append(u);var s=b("<span></span>");s.css({marginLeft:"1em",fontWeight:"normal"});u.append(s);u=b("<div></div>");u.css({position:"absolute",left:(k-m)/2-4,top:42,width:m+4,height:g.iconHeight+70,overflow:"hidden"});var y=b("<div></div>");y.css({position:"relative",left:0,width:h});u.append(y);k=b("<div></div>");k.css({position:"absolute",right:4,bottom:3,height:20,opacity:0.9});var J=b('<a href="#" style="float:left;"></a>');
J.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:z(t.images.folder+"zen-prev.png")});var A=function(){0<r&&r--;var a=(g.iconWidth+g.iconPadding)*n*r;y.stop().animate({left:-a},2*t.animation.duration,"easeOutQuart");e();return!1};J.click(A);k.append(J);f.append(u);var x=b('<a href="#" style="float:left;"></a>');x.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:z(t.images.folder+
"zen-next.png")});var B=function(){r<o-1&&r++;var a=(g.iconWidth+g.iconPadding)*n*r;y.stop().animate({left:-a},2*t.animation.duration,"easeOutQuart");e();return!1};x.click(B);k.append(x);f.append(k);e();for(var C,k=0;k<c.albums.length;k++)(function(a,d){var e=b("<div></div>");e.css({position:"absolute",left:(g.iconWidth+g.iconPadding)*d,top:0,width:g.iconWidth+g.iconPadding+6,overflow:"hidden",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)"});var f=b('<div class="altgallery-thumbnail"></div>');f.css({position:"relative",
width:g.iconWidth-2,height:g.iconHeight-2,overflow:"hidden",border:"1px solid",borderColor:c.currentAlbum==d?"#000":"#fff",margin:"2px",cursor:"pointer"});E(a.items[0].thumb,function(a){var c=b('<img src="" alt="" />');c.attr("src",a.src);w(c);c.css({position:"absolute"});c.css(F.fill(a.width,a.height,g.iconWidth-2,g.iconHeight-2));f.append(c)},50*d);e.append(f);e.append('<div style="padding:7px 2px 2px; font-weight:bold;">'+(a.description||"Album "+(d+1))+"<div>");e.append('<div style="padding:1px 2px;">'+
a.items.length+" "+(1==a.items.length?g.translation.Image:g.translation.Images)+"<div>");e.hover(function(){y.find(".altgallery-thumbnail").css({borderWidth:"1px",margin:"2px"});f.css({borderWidth:"3px",margin:"0px"})},function(){f.css({borderWidth:"1px",margin:"2px"})}).click(function(){if(!C){if(c.currentAlbum!=d)c.currentItem=-1;c.currentAlbum=d;c.showThumbnails()}});y.append(e)})(c.albums[k],k);d.element.append(f);1<o&&(y.draggable({axis:"x",start:function(){C=!0},stop:function(a,b){b.position.left>
b.originalPosition.left?A():B();setTimeout(function(){C=!1},100)}}),N(f))}var c=this,d=this.canvas,g=this.settings;d.element.find(".altgallery-albums").size()||a()};K.prototype.hideAlbums=function(){this.canvas.element.find(".altgallery-albums, .altgallery-albums-overlay").remove()};K.prototype.showThumbnails=function(){function a(){function f(){var a=u*o+1,b=u*o+o;if(b>e.items.length)b=e.items.length;y.html(a+"-"+b+" "+g.translation.Of+" "+e.items.length);0>=u?(A.css({opacity:0.3,cursor:"default"}),
A.unbind("click").click(function(){return!1})):(A.css({opacity:1,cursor:"pointer"}),A.unbind("click").click(B));u>=r-1?(C.css({opacity:0.3,cursor:"default"}),C.unbind("click").click(function(){return!1})):(C.css({opacity:1,cursor:"pointer"}),C.unbind("click").click(G))}c.hideAlbums();c.hideButtons();c.hideCaption();c.hideNavigation();var k=b('<div class="altgallery-images"></div>'),m=d.width()-2*g.frameSize,h=g.iconHeight+75;k.css({position:"absolute",left:g.frameSize,top:(d.height()-h)/2,width:d.width()-
2*g.frameSize,height:h,overflow:"hidden",color:"#fff",border:"1px #000",borderStyle:"solid none",zIndex:2});var n=b('<div class="altgallery-images-overlay"></div>');n.css({position:"absolute",left:g.frameSize,top:(d.height()-h)/2,width:d.width()-2*g.frameSize,height:h+1,background:"#000",opacity:g.panelBackgroundAlpha/100,zIndex:1});d.element.append(n);h=b("<div></div>");h.css({position:"absolute",top:10,right:20});1<c.albums.length&&(n=b('<a class="altgallery-back" href="#">'+g.translation.BackToAlbums+
"</a>"),n.css({marginRight:"1.5em",color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",backgroundImage:z(t.images.folder+"zen-backToAlbums.png"),paddingLeft:14}),n.click(function(){c.showAlbums();return!1}),h.append(n));n=b('<a class="altgallery-close" href="#">'+g.translation.Close+"</a>");n.css({marginRight:0,color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",
backgroundImage:z(t.images.folder+"zen-close.png"),paddingLeft:12});n.click(function(){c.hideThumbnails();c.showButtons();c.showCaption();c.showNavigation();return!1});h.append(n);k.append(h);var o=Math.floor((m-20)/(g.iconWidth+g.iconPadding)),o=o>e.items.length?e.items.length:o,h=(g.iconWidth+g.iconPadding)*o-g.iconPadding,n=(g.iconWidth+g.iconPadding)*e.items.length-g.iconPadding,r=Math.ceil(e.items.length/o),u=0,s=b("<div>"+g.translation.Images+"</div>");s.css({position:"absolute",left:9,top:0,
padding:10,paddingLeft:25,textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.5)",fontWeight:"bold",background:"no-repeat left center",backgroundImage:z(t.images.folder+"zen-thumbnails.png")});k.append(s);var y=b("<span></span>");y.css({marginLeft:"1em",fontWeight:"normal"});s.append(y);s=b("<div></div>");s.css({position:"absolute",left:(m-h)/2-4,top:42,width:h+4,height:g.iconHeight+4,overflow:"hidden"});var x=b("<div></div>");x.css({position:"relative",left:0,width:n});s.append(x);k.append(s);m=b("<div></div>");
m.css({position:"absolute",right:4,bottom:3,height:20,opacity:0.9});var A=b('<a href="#" style="float:left;"></a>');A.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:z(t.images.folder+"zen-prev.png")});var B=function(){0<u&&u--;var a=(g.iconWidth+g.iconPadding)*o*u;x.stop().animate({left:-a},2*t.animation.duration,"easeOutQuart");f();return!1};A.click(B);m.append(A);var C=b('<a href="#" style="float:left;"></a>');C.css({display:"block",
cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:z(t.images.folder+"zen-next.png")});var G=function(){u<r-1&&u++;var a=(g.iconWidth+g.iconPadding)*o*u;x.stop().animate({left:-a},2*t.animation.duration,"easeOutQuart");f();return!1};C.click(G);m.append(C);k.append(m);f();for(var H=!1,m=0;m<e.items.length;m++)(function(a,d){var e=b("<div></div>");e.css({position:"absolute",left:(g.iconWidth+g.iconPadding)*d,top:0,width:g.iconWidth+g.iconPadding+6,overflow:"hidden",
textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)"});var f=b('<div class="altgallery-thumbnail"></div>');f.css({position:"relative",width:g.iconWidth-2,height:g.iconHeight-2,overflow:"hidden",border:"1px solid",borderColor:c.currentItem==d?"#000":"#fff",margin:"2px",cursor:"pointer"});E(a.thumb,function(a){var c=b('<img src="" alt="" />');c.attr("src",a.src);w(c);c.css({position:"absolute"});c.css(F.fill(a.width,a.height,g.iconWidth-2,g.iconHeight-2));f.append(c)},50*d);e.append(f);e.hover(function(){x.find(".altgallery-thumbnail").css({borderWidth:"1px",
margin:"2px"});f.css({borderWidth:"3px",margin:"0px"})},function(){f.css({borderWidth:"1px",margin:"2px"})}).click(function(){if(!H)c.currentItem=d,c.open(c.getCurrentItem())});x.append(e)})(e.items[m],m);d.element.append(k);1<r&&(x.draggable({axis:"x",start:function(){H=!0},stop:function(a,b){b.position.left>b.originalPosition.left?B():G();setTimeout(function(){H=!1},100)}}),N(k))}var c=this,d=this.canvas,g=this.settings,e=this.getCurrentAlbum();d.element.find(".altgallery-images").size()||a()};
K.prototype.hideThumbnails=function(){this.canvas.element.find(".altgallery-images, .altgallery-images-overlay").remove()};K.prototype.showButtons=function(){function a(){var d=b('<div class="altgallery-buttons"></div>');d.css({position:"absolute",right:c.settings.frameSize,top:25+c.settings.frameSize,padding:"3px 3px 3px 1px",background:"rgba(0, 0, 0, "+c.settings.buttonsBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderRight:"none","-moz-border-top-left-radius":"3px","-moz-border-bottom-left-radius":"3px",
"-webkit-border-top-left-radius":"3px","-webkit-border-bottom-left-radius":"3px","border-top-left-radius":"3px","border-bottom-left-radius":"3px"});if(b.browser.msie&&9>b.browser.version){var g=Math.round(255*parseInt(c.settings.buttonsBackgroundAlpha)/100),g=16>g?"0"+g.toString(16):g.toString(16);d.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+g+"000000,endColorstr=#"+g+"000000)"})}c.settings.showAlbumsButton&&1<c.albums.length&&(g=b('<a href="#" style="float:left;"></a>'),
g.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:z(t.images.folder+"zen-albums.png"),opacity:0.8}),g.click(function(){c.showAlbums();return!1}),d.append(g));c.settings.showThumbnailsButton&&(g=b('<a href="#" style="float:left;"></a>'),g.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:z(t.images.folder+"zen-thumbnails.png"),opacity:0.8}),g.click(function(){c.showThumbnails();
return!1}),d.append(g));c.canvas.element.append(d)}var c=this;if("never"!=c.settings.showButtons.toLowerCase()&&(c.settings.showAlbumsButton||c.settings.showThumbnailsButton))c.canvas.element.find(".altgallery-buttons").size()||a()};K.prototype.hideButtons=function(){this.canvas.element.find(".altgallery-buttons").remove()};K.prototype.showCaption=function(){this.hideCaption();if("never"!=this.settings.showCaption.toLowerCase()&&(this.getCurrentAlbum()&&this.getCurrentAlbum().description||this.getCurrentItem()&&
this.getCurrentItem().description)){var a=b('<div class="altgallery-caption"></div>');a.css({position:"absolute",left:this.settings.frameSize,top:25+this.settings.frameSize,padding:"4px 10px 5px 7px",color:"#fff",textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.3)",background:"rgba(0, 0, 0, "+this.settings.captionBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderLeft:"none","-moz-border-top-right-radius":"3px","-moz-border-bottom-right-radius":"3px","-webkit-border-top-right-radius":"3px",
"-webkit-border-bottom-right-radius":"3px","border-top-right-radius":"3px","border-bottom-right-radius":"3px"});if(b.browser.msie&&9>b.browser.version){var c=Math.round(255*parseInt(this.settings.captionBackgroundAlpha)/100),c=16>c?"0"+c.toString(16):c.toString(16);a.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+c+"000000,endColorstr=#"+c+"000000)"})}this.getCurrentAlbum().description&&a.append('<div style="font-weight:bold;">'+this.getCurrentAlbum().description+
"</div>");this.getCurrentItem().description&&a.append('<div style="">'+this.getCurrentItem().description+"</div>");this.canvas.element.append(a)}};K.prototype.hideCaption=function(){this.canvas.element.find(".altgallery-caption").remove()};K.prototype.showNavigation=function(){function a(){var d=b('<div class="altgallery-navigation"></div>');d.css({position:"absolute",right:c.settings.frameSize,bottom:25+c.settings.frameSize,padding:"3px 3px 3px 1px",background:"rgba(0, 0, 0, "+c.settings.buttonsBackgroundAlpha/
100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderRight:"none","-moz-border-top-left-radius":"3px","-moz-border-bottom-left-radius":"3px","-webkit-border-top-left-radius":"3px","-webkit-border-bottom-left-radius":"3px","border-top-left-radius":"3px","border-bottom-left-radius":"3px"});if(b.browser.msie&&9>b.browser.version){var g=Math.round(255*parseInt(c.settings.buttonsBackgroundAlpha)/100),g=16>g?"0"+g.toString(16):g.toString(16);d.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+
g+"000000,endColorstr=#"+g+"000000)"})}c.settings.showNavigationButton&&(g=b('<a href="#" style="float:left;"></a>'),g.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:z(t.images.folder+"zen-prev.png"),opacity:0.8}),g.click(function(){c.prev();return!1}),d.append(g),g=b('<a href="#" style="float:left;"></a>'),g.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:z(t.images.folder+
"zen-next.png"),opacity:0.8}),g.click(function(){c.next();return!1}),d.append(g));c.canvas.element.append(d)}var c=this;"never"!=c.settings.showButtons.toLowerCase()&&c.settings.showNavigationButton&&(c.canvas.element.find(".altgallery-navigation").size()||a())};K.prototype.hideNavigation=function(){this.canvas.element.find(".altgallery-navigation").remove()};K.prototype.open=function(a){var c=this,d=this.canvas,g=this.settings;c.hideAlbums();c.hideThumbnails();c.showButtons();c.showCaption();c.showNavigation();
d.element.find(".altgallery-image img").hide();var e=d.element.find(".altgallery-imageFrame"),f=b('<img class="altgallery-preloader" src="'+t.images.loader+'" alt="" />');w(f);f.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});E(a.source,function(b){f.hide();d.element.find(".altgallery-preloader").remove();var e=d.element.find(".altgallery-image img");"fit"==g.imageScaleMode?e.css(F.fit(b.width,b.height,d.width()-2*g.frameSize,d.height()-2*g.frameSize)):e.css(F.fill(b.width,
b.height,d.width()-2*g.frameSize,d.height()-2*g.frameSize));e.attr("src",a.source).fadeIn(2*t.animation.duration);c.cache()});setTimeout(function(){d.element.find(".altgallery-preloader").remove();e.append(f)},500)};K.prototype.prev=function(){0<this.currentItem?this.currentItem--:this.currentItem=this.getCurrentAlbum().items.length-1;this.open(this.getCurrentItem())};K.prototype.next=function(){this.currentItem<this.getCurrentAlbum().items.length-1?this.currentItem++:this.currentItem=0;this.open(this.getCurrentItem())};
var t={};b.fn.altgallery=function(c,d){function f(){g.each(function(){ca(this,c,d)})}var g=this,c=b.extend(!0,{width:"550px",height:"400px",background:"none",images:{folder:$+"img/",left:"left.png",right:"right.png",close:"close.png",loader:"loader.png"},animation:{duration:500},config:{settings:{}}},c);if(c.images.folder){c.images.folder=c.images.folder.replace(/\/+$/,"")+"/";for(var e in c.images)"folder"!=e&&!c.images[e].match("/")&&(c.images[e]=c.images.folder+c.images[e])}if("string"==typeof c.config){g.css({visibility:"hidden"});
var h={load:function(b,c,d){if(c!==a)switch(c.toLowerCase()){case "xml":this.loadXML(b,d);break;default:case "json":this.loadJSON(b,d)}else b.match(/(xml)$/i)?this.loadXML(b,d):this.loadJSON(b,d)},loadJSON:function(a,c){b.ajax({url:a,dataType:"json",success:function(a){a=h.parse(a);"function"==typeof c&&c(a)},error:function(){"function"==typeof c&&c({})}})},loadXML:function(a,c){function d(a){var b;"undefined"==typeof b&&(b=function(){});b.ObjTree=function(){return this};b.ObjTree.prototype.attr_prefix=
"";b.ObjTree.prototype.parseDOM=function(a){if(a){this.__force_array={};if(this.force_array)for(var b=0;b<this.force_array.length;b++)this.__force_array[this.force_array[b]]=1;b=this.parseElement(a);this.__force_array[a.nodeName]&&(b=[b]);if(11!=a.nodeType){var c={};c[a.nodeName]=b;b=c}return b}};b.ObjTree.prototype.parseElement=function(a){if(7!=a.nodeType){if(3==a.nodeType||4==a.nodeType)return null==a.nodeValue.match(/[^\x00-\x20]/)?void 0:a.nodeValue;var b,c={};if(a.attributes&&a.attributes.length){b=
{};for(var d=0;d<a.attributes.length;d++){var e=a.attributes[d].nodeName;if("string"==typeof e){var f=a.attributes[d].nodeValue;f&&(e=this.attr_prefix+e,"undefined"==typeof c[e]&&(c[e]=0),c[e]++,this.addNode(b,e,c[e],f))}}}if(a.childNodes&&a.childNodes.length){e=!0;b&&(e=!1);for(d=0;d<a.childNodes.length&&e;d++)f=a.childNodes[d].nodeType,3==f||4==f||(e=!1);if(e){b||(b="");for(d=0;d<a.childNodes.length;d++)b+=a.childNodes[d].nodeValue}else{b||(b={});for(d=0;d<a.childNodes.length;d++)if(e=a.childNodes[d].nodeName,
"string"==typeof e&&(f=this.parseElement(a.childNodes[d])))"undefined"==typeof c[e]&&(c[e]=0),c[e]++,this.addNode(b,e,c[e],f)}}return b}};b.ObjTree.prototype.addNode=function(a,b,c,d){this.__force_array[b]?(1==c&&(a[b]=[]),a[b][a[b].length]=d):1==c?a[b]=d:2==c?a[b]=[a[b],d]:a[b][a[b].length]=d};b=new b.ObjTree;b.attr_prefix="";return b.parseDOM(a)["#document"]}b.ajax({url:a,dataType:"xml",success:function(a){a=d(a);a=h.parse(a);"function"==typeof c&&c(a)},error:function(){"function"==typeof c&&c({})}})},
parse:function(a){if(a.gallery){if(a.galleryName)a.gallery.galleryName=a.galleryName;a=a.gallery;if(a.items&&a.items.item)a.items=a.items.item.length?a.items.item:[a.items.item];if(a.albums){if(a.albums.album)a.albums=a.albums.album.length?a.albums.album:[a.albums.album];for(var b=0;b<a.albums.length;b++)if(a.albums[b].items.item)a.albums[b].items=a.albums[b].items.item.length?a.albums[b].items.item:[a.albums[b].items.item]}}return a}};h.load(c.config,c.configType,function(a){g.css({visibility:"visible"});
c.config=a;f()})}else f();return this};b.altbox=function(a,c){if(d!=top)var d=top,f=d.document;c=b.extend(!0,{frame:{color:"#000",borderRadius:0},mask:{color:"#000",opacity:0.7},images:{folder:$+"img/",close:"close.png",loader:"loader.gif"},animation:{duration:700}},c);if(c.images.folder){c.images.folder=c.images.folder.replace(/\/+$/,"")+"/";for(var e in c.images)"folder"!=e&&!c.images[e].match("/")&&(c.images[e]=c.images.folder+c.images[e])}var h=b('<div style="position:fixed; z-index:999; left:0; top:0; width:100%; height:100%; background:no-repeat center;"></div>');
h.css({opacity:0,backgroundColor:c.mask.color,backgroundImage:z(c.images.loader)});b(f.body).append(h);h.animate({opacity:c.mask.opacity},c.animation.duration);var k=new Image;k.onload=function(){function e(){h.remove();w.remove()}function n(){y.remove();r.opacity="hide";w.animate(r,0.67*c.animation.duration);x.animate({width:r.width-20,height:r.height-20},0.67*c.animation.duration);h.fadeOut(c.animation.duration,function(){e()});return!1}var o=b(d).width()-100,t=b(d).height()-100,r=F.fit(k.width/
4,k.height/4,o,t,{noEnlarge:!0,minWidth:100,minHeight:100});r.left+=50;r.top+=50;var u=F.fit(k.width+20,k.height+20,o,t,{noEnlarge:!0,minWidth:120,minHeight:120});u.left+=50;u.top+=50;var w=b('<div style="position:fixed; z-index:1000;"></div>');w.css(r);w.css({backgroundColor:c.frame.color,borderRadius:c.frame.borderRadius,MozUserSelect:"none",webkitUserSelect:"none",userSelect:"none"});w.hide();var x=b('<img src="'+a+'" alt="" style="display:block;" />');x.css({margin:"10px",width:r.width-20,height:r.height-
20,borderRadius:8<c.frame.borderRadius?c.frame.borderRadius-8:0});var y=b('<a href="#" style="display:block; position:absolute; right:-12px; top:-10px; width:30px; height:30px; background:no-repeat center;"></a>');y.css({backgroundImage:z(c.images.close)});w.append(x);b(f.body).append(w);(function(){h.css({backgroundImage:"none"});x.animate({width:u.width-20,height:u.height-20,margin:"10px"},c.animation.duration,"easeOutBack");u.opacity="show";w.animate(u,c.animation.duration,"easeOutBack",function(){w.append(y)})})();
b(d).resize(function(){o=b(d).width()-100;t=b(d).height()-100;r=F.fit(k.width/4,k.height/4,o,t,{noEnlarge:!0,minWidth:100,minHeight:100});r.left+=50;r.top+=50;u=F.fit(k.width+20,k.height+20,o,t,{noEnlarge:!0,minWidth:120,minHeight:120});u.left+=50;u.top+=50;w.css(u);x.css({width:u.width-20,height:u.height-20})});h.click(e);y.click(n);w.dblclick(n)};k.src=a}})(jQuery);
