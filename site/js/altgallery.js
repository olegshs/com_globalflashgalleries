/**
 * altgallery, jQuery Plugin
 *
 * @version 0.6.2
 * @copyright 2011-2012 Flash-Gallery.com
 */

if(void 0===JSON){var JSON;JSON||(JSON={});(function(){function a(a){return 10>a?"0"+a:a}function b(a){p.lastIndex=0;return p.test(a)?'"'+a.replace(p,function(a){var b=l[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(a,c){var p,A,w,L,l=g,y,B=c[a];B&&("object"===typeof B&&"function"===typeof B.toJSON)&&(B=B.toJSON(a));"function"===typeof u&&(B=u.call(c,a,B));switch(typeof B){case "string":return b(B);case "number":return isFinite(B)?
String(B):"null";case "boolean":case "null":return String(B);case "object":if(!B)return"null";g+=v;y=[];if("[object Array]"===Object.prototype.toString.apply(B)){L=B.length;for(p=0;p<L;p+=1)y[p]=d(p,B)||"null";w=0===y.length?"[]":g?"[\n"+g+y.join(",\n"+g)+"\n"+l+"]":"["+y.join(",")+"]";g=l;return w}if(u&&"object"===typeof u){L=u.length;for(p=0;p<L;p+=1)"string"===typeof u[p]&&(A=u[p],(w=d(A,B))&&y.push(b(A)+(g?": ":":")+w))}else for(A in B)Object.prototype.hasOwnProperty.call(B,A)&&(w=d(A,B))&&y.push(b(A)+
(g?": ":":")+w);w=0===y.length?"{}":g?"{\n"+g+y.join(",\n"+g)+"\n"+l+"}":"{"+y.join(",")+"}";g=l;return w}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
p=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,v,l={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},u;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,b,p){var c;v=g="";if(typeof p==="number")for(c=0;c<p;c=c+1)v=v+" ";else typeof p==="string"&&(v=p);if((u=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");return d("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function p(a,g){var c,d,A=a[g];if(A&&typeof A==="object")for(c in A)if(Object.prototype.hasOwnProperty.call(A,c)){d=p(A,c);d!==void 0?A[c]=d:delete A[c]}return b.call(a,g,A)}var g,a=String(a);c.lastIndex=0;c.test(a)&&(a=a.replace(c,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){g=eval("("+a+")");return typeof b==="function"?p({"":g},""):g}throw new SyntaxError("JSON.parse");})})()}
(function(a,b){function d(b,g){var d=b.nodeName.toLowerCase();if("area"===d){var d=b.parentNode,l=d.name;if(!b.href||!l||"map"!==d.nodeName.toLowerCase())return!1;d=a("img[usemap=#"+l+"]")[0];return!!d&&c(d)}return(/input|select|textarea|button|object/.test(d)?!b.disabled:"a"==d?b.href||g:g)&&c(b)}function c(b){return!a(b).parents().andSelf().filter(function(){return"hidden"===a.curCSS(this,"visibility")||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,{version:"1.8.23",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,d){return"number"===typeof b?this.each(function(){var c=
this;setTimeout(function(){a(c).focus();d&&d.call(c)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,
"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(d){if(d!==b)return this.css("zIndex",d);if(this.length)for(var d=a(this[0]),c;d.length&&d[0]!==document;){c=d.css("position");if("absolute"===c||"relative"===c||"fixed"===c)if(c=parseInt(d.css("zIndex"),10),!isNaN(c)&&0!==c)return c;d=d.parent()}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(d,c){function v(b,c,d,w){a.each(l,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0;d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0);w&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)});return c}var l="Width"===c?["Left","Right"]:["Top","Bottom"],u=c.toLowerCase(),z={innerWidth:a.fn.innerWidth,
innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(d){return d===b?z["inner"+c].call(this):this.each(function(){a(this).css(u,v(this,d)+"px")})};a.fn["outer"+c]=function(b,d){return"number"!==typeof b?z["outer"+c].call(this,b):this.each(function(){a(this).css(u,v(this,b,!0,d)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,
d[3])},focusable:function(b){return d(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var c=a.attr(b,"tabindex"),v=isNaN(c);return(v||0<=c)&&d(b,!v)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight;a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=100===c.offsetHeight;a.support.selectstart="onselectstart"in c;b.removeChild(c).style.display="none"}),a.curCSS||(a.curCSS=a.css),a.extend(a.ui,{plugin:{add:function(b,
c,d){var b=a.ui[b].prototype,l;for(l in d){b.plugins[l]=b.plugins[l]||[];b.plugins[l].push([c,d[l]])}},call:function(a,b,c){if((b=a.plugins[b])&&a.element[0].parentNode)for(var d=0;d<b.length;d++)a.options[b[d][0]]&&b[d][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return false;var d=c&&c==="left"?"scrollLeft":"scrollTop",l=false;if(b[d]>0)return true;
b[d]=1;l=b[d]>0;b[d]=0;return l},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,l,u,z){return a.ui.isOverAxis(b,d,u)&&a.ui.isOverAxis(c,l,z)}}))})(jQuery);
(function(a,b){if(a.cleanData){var d=a.cleanData;a.cleanData=function(b){for(var c=0,v;null!=(v=b[c]);c++)try{a(v).triggerHandler("remove")}catch(l){}d(b)}}else{var c=a.fn.remove;a.fn.remove=function(b,d){return this.each(function(){d||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}});return c.call(a(this),b,d)})}}a.widget=function(b,c,d){var l=b.split(".")[0],u,b=b.split(".")[1];u=l+"-"+b;d||(d=c,c=a.Widget);a.expr[":"][u]=
function(c){return!!a.data(c,b)};a[l]=a[l]||{};a[l][b]=function(a,b){arguments.length&&this._createWidget(a,b)};c=new c;c.options=a.extend(!0,{},c.options);a[l][b].prototype=a.extend(!0,c,{namespace:l,widgetName:b,widgetEventPrefix:a[l][b].prototype.widgetEventPrefix||b,widgetBaseClass:u},d);a.widget.bridge(b,a[l][b])};a.widget.bridge=function(c,d){a.fn[c]=function(v){var l="string"===typeof v,u=Array.prototype.slice.call(arguments,1),z=this,v=!l&&u.length?a.extend.apply(null,[!0,v].concat(u)):v;
if(l&&"_"===v.charAt(0))return z;l?this.each(function(){var d=a.data(this,c),g=d&&a.isFunction(d[v])?d[v].apply(d,u):d;if(g!==d&&g!==b)return z=g,!1}):this.each(function(){var b=a.data(this,c);b?b.option(v||{})._init():a.data(this,c,new d(v,this))});return z}};a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this);this.element=a(c);this.options=a.extend(!0,
{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var v=c;if(0===arguments.length)return a.extend({},this.options);if("string"===typeof c){if(d===b)return this.options[c];v={};v[c]=d}this._setOptions(v);return this},_setOptions:function(b){var c=this;a.each(b,function(a,b){c._setOption(a,b)});return this},_setOption:function(a,b){this.options[a]=b;"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
b);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var l,u=this.options[b],d=d||{},c=a.Event(c);c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();c.target=this.element[0];if(b=c.originalEvent)for(l in b)l in c||(c[l]=b[l]);this.element.trigger(c,d);return!(a.isFunction(u)&&!1===u.call(this.element[0],c,d)||c.isDefaultPrevented())}}})(jQuery);
(function(a){var b=!1;a(document).mouseup(function(){b=!1});a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName);this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(d){if(!b){this._mouseStarted&&this._mouseUp(d);this._mouseDownEvent=d;var c=this,p=1==d.which,g="string"==typeof this.options.cancel&&d.target.nodeName?a(d.target).closest(this.options.cancel).length:!1;if(!p||g||!this._mouseCapture(d))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=
setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=!1!==this._mouseStart(d),!this._mouseStarted))return d.preventDefault(),!0;!0===a.data(d.target,this.widgetName+".preventClickEvent")&&a.removeData(d.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return c._mouseMove(a)};this._mouseUpDelegate=function(a){return c._mouseUp(a)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+
this.widgetName,this._mouseUpDelegate);d.preventDefault();return b=!0}},_mouseMove:function(b){if(a.browser.msie&&!(9<=document.documentMode)&&!b.button)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+
this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&
(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(b){var d=this.options;if(this.helper||d.disabled||a(b.target).is(".ui-resizable-handle"))return!1;
this.handle=this._getHandle(b);if(!this.handle)return!1;d.iframeFix&&a(!0===d.iframeFix?"iframe":d.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")});return!0},_mouseStart:function(b){var d=this.options;this.helper=this._createHelper(b);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();
a.ui.ddmanager&&(a.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b);
this.originalPageX=b.pageX;this.originalPageY=b.pageY;d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);d.containment&&this._setContainment();if(!1===this._trigger("start",b))return this._clear(),!1;this._cacheHelperProportions();a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this._mouseDrag(b,!0);a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b);return!0},_mouseDrag:function(b,d){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");
if(!d){var c=this._uiHash();if(!1===this._trigger("drag",b,c))return this._mouseUp({}),!1;this.position=c.position}if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var d=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b));this.dropped&&(d=this.dropped,this.dropped=
!1);for(var c=this.element[0],p=!1;c&&(c=c.parentNode);)c==document&&(p=!0);if(!p&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!d||"valid"==this.options.revert&&d||!0===this.options.revert||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)){var g=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){g._trigger("stop",b)!==false&&g._clear()})}else!1!==this._trigger("stop",b)&&this._clear();return!1},
_mouseUp:function(b){!0===this.options.iframeFix&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b);return a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(b){var d=!this.options.handle||!a(this.options.handle,this.element).length?!0:!1;a(this.options.handle,this.element).find("*").andSelf().each(function(){this==
b.target&&(d=!0)});return d},_createHelper:function(b){var d=this.options,b=a.isFunction(d.helper)?a(d.helper.apply(this.element[0],[b])):"clone"==d.helper?this.element.clone().removeAttr("id"):this.element;b.parents("body").length||b.appendTo("parent"==d.appendTo?this.element[0].parentNode:d.appendTo);b[0]!=this.element[0]&&!/(fixed|absolute)/.test(b.css("position"))&&b.css("position","absolute");return b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b=
{left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&(this.scrollParent[0]!=document&&
a.ui.contains(this.scrollParent[0],this.offsetParent[0]))&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=
this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+
a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var b=a(b.containment),d=b[0];if(d){b.offset();var c="hidden"!=a(d).css("overflow");this.containment=[(parseInt(a(d).css("borderLeftWidth"),
10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(c?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(c?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-
this.margins.top-this.margins.bottom];this.relative_container=b}}else b.containment.constructor==Array&&(this.containment=b.containment)},_convertPositionTo:function(b,d){d||(d=this.position);var c="absolute"==b?1:-1,p="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(p[0].tagName);return{top:d.top+this.offset.relative.top*c+this.offset.parent.top*c-(a.browser.safari&&
526>a.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():g?0:p.scrollTop())*c),left:d.left+this.offset.relative.left*c+this.offset.parent.left*c-(a.browser.safari&&526>a.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():g?0:p.scrollLeft())*c)}},_generatePosition:function(b){var d=this.options,c="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],
this.offsetParent[0]))?this.offsetParent:this.scrollParent,p=/(html|body)/i.test(c[0].tagName),g=b.pageX,v=b.pageY;if(this.originalPosition){var l;this.containment&&(this.relative_container?(l=this.relative_container.offset(),l=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]):l=this.containment,b.pageX-this.offset.click.left<l[0]&&(g=l[0]+this.offset.click.left),b.pageY-this.offset.click.top<l[1]&&(v=l[1]+this.offset.click.top),b.pageX-this.offset.click.left>
l[2]&&(g=l[2]+this.offset.click.left),b.pageY-this.offset.click.top>l[3]&&(v=l[3]+this.offset.click.top));d.grid&&(v=d.grid[1]?this.originalPageY+Math.round((v-this.originalPageY)/d.grid[1])*d.grid[1]:this.originalPageY,v=l?!(v-this.offset.click.top<l[1]||v-this.offset.click.top>l[3])?v:!(v-this.offset.click.top<l[1])?v-d.grid[1]:v+d.grid[1]:v,g=d.grid[0]?this.originalPageX+Math.round((g-this.originalPageX)/d.grid[0])*d.grid[0]:this.originalPageX,g=l?!(g-this.offset.click.left<l[0]||g-this.offset.click.left>
l[2])?g:!(g-this.offset.click.left<l[0])?g-d.grid[0]:g+d.grid[0]:g)}return{top:v-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&526>a.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():p?0:c.scrollTop()),left:g-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&526>a.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():
p?0:c.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(b,d,c){c=c||this._uiHash();a.ui.plugin.call(this,b,[d,c]);"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute"));return a.Widget.prototype._trigger.call(this,b,d,c)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,
offset:this.positionAbs}}});a.extend(a.ui.draggable,{version:"1.8.23"});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,d){var c=a(this).data("draggable"),p=c.options,g=a.extend({},d,{item:c.element});c.sortables=[];a(p.connectToSortable).each(function(){var d=a.data(this,"sortable");d&&!d.options.disabled&&(c.sortables.push({instance:d,shouldRevert:d.options.revert}),d.refreshPositions(),d._trigger("activate",b,g))})},stop:function(b,d){var c=a(this).data("draggable"),p=a.extend({},
d,{item:c.element});a.each(c.sortables,function(){this.instance.isOver?(this.instance.isOver=0,c.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==c.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,p))})},drag:function(b,d){var c=a(this).data("draggable"),
p=this;a.each(c.sortables,function(){this.instance.positionAbs=c.positionAbs;this.instance.helperProportions=c.helperProportions;this.instance.offset.click=c.offset.click;this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(p).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return d.helper[0]},
b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=c.offset.click.top,this.instance.offset.click.left=c.offset.click.left,this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top,c._trigger("toSortable",b),c.dropped=this.instance.element,c.currentItem=c.element,this.instance.fromOutside=c),this.instance.currentItem&&
this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),c._trigger("fromSortable",b),c.dropped=!1)})}});a.ui.plugin.add("draggable","cursor",{start:function(){var b=
a("body"),d=a(this).data("draggable").options;b.css("cursor")&&(d._cursor=b.css("cursor"));b.css("cursor",d.cursor)},stop:function(){var b=a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(b,d){var c=a(d.helper),p=a(this).data("draggable").options;c.css("opacity")&&(p._opacity=c.css("opacity"));c.css("opacity",p.opacity)},stop:function(b,d){var c=a(this).data("draggable").options;c._opacity&&a(d.helper).css("opacity",
c._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("draggable");b.scrollParent[0]!=document&&"HTML"!=b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var d=a(this).data("draggable"),c=d.options,p=!1;if(d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName){if(!c.axis||"x"!=c.axis)d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?d.scrollParent[0].scrollTop=p=d.scrollParent[0].scrollTop+
c.scrollSpeed:b.pageY-d.overflowOffset.top<c.scrollSensitivity&&(d.scrollParent[0].scrollTop=p=d.scrollParent[0].scrollTop-c.scrollSpeed);if(!c.axis||"y"!=c.axis)d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?d.scrollParent[0].scrollLeft=p=d.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-d.overflowOffset.left<c.scrollSensitivity&&(d.scrollParent[0].scrollLeft=p=d.scrollParent[0].scrollLeft-c.scrollSpeed)}else{if(!c.axis||"x"!=c.axis)b.pageY-a(document).scrollTop()<
c.scrollSensitivity?p=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(p=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed));if(!c.axis||"y"!=c.axis)b.pageX-a(document).scrollLeft()<c.scrollSensitivity?p=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(p=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))}!1!==
p&&(a.ui.ddmanager&&!c.dropBehaviour)&&a.ui.ddmanager.prepareOffsets(d,b)}});a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("draggable"),d=b.options;b.snapElements=[];a(d.snap.constructor!=String?d.snap.items||":data(draggable)":d.snap).each(function(){var c=a(this),d=c.offset();this!=b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,d){for(var c=a(this).data("draggable"),p=c.options,g=p.snapTolerance,
v=d.offset.left,l=v+c.helperProportions.width,u=d.offset.top,z=u+c.helperProportions.height,F=c.snapElements.length-1;0<=F;F--){var I=c.snapElements[F].left,A=I+c.snapElements[F].width,w=c.snapElements[F].top,L=w+c.snapElements[F].height;if(I-g<v&&v<A+g&&w-g<u&&u<L+g||I-g<v&&v<A+g&&w-g<z&&z<L+g||I-g<l&&l<A+g&&w-g<u&&u<L+g||I-g<l&&l<A+g&&w-g<z&&z<L+g){if("inner"!=p.snapMode){var U=Math.abs(w-z)<=g,y=Math.abs(L-u)<=g,B=Math.abs(I-l)<=g,Q=Math.abs(A-v)<=g;U&&(d.position.top=c._convertPositionTo("relative",
{top:w-c.helperProportions.height,left:0}).top-c.margins.top);y&&(d.position.top=c._convertPositionTo("relative",{top:L,left:0}).top-c.margins.top);B&&(d.position.left=c._convertPositionTo("relative",{top:0,left:I-c.helperProportions.width}).left-c.margins.left);Q&&(d.position.left=c._convertPositionTo("relative",{top:0,left:A}).left-c.margins.left)}var N=U||y||B||Q;if("outer"!=p.snapMode&&(U=Math.abs(w-u)<=g,y=Math.abs(L-z)<=g,B=Math.abs(I-v)<=g,Q=Math.abs(A-l)<=g,U&&(d.position.top=c._convertPositionTo("relative",
{top:w,left:0}).top-c.margins.top),y&&(d.position.top=c._convertPositionTo("relative",{top:L-c.helperProportions.height,left:0}).top-c.margins.top),B&&(d.position.left=c._convertPositionTo("relative",{top:0,left:I}).left-c.margins.left),Q))d.position.left=c._convertPositionTo("relative",{top:0,left:A-c.helperProportions.width}).left-c.margins.left;!c.snapElements[F].snapping&&(U||y||B||Q||N)&&c.options.snap.snap&&c.options.snap.snap.call(c.element,b,a.extend(c._uiHash(),{snapItem:c.snapElements[F].item}));
c.snapElements[F].snapping=U||y||B||Q||N}else c.snapElements[F].snapping&&c.options.snap.release&&c.options.snap.release.call(c.element,b,a.extend(c._uiHash(),{snapItem:c.snapElements[F].item})),c.snapElements[F].snapping=!1}}});a.ui.plugin.add("draggable","stack",{start:function(){var b=a(this).data("draggable").options,b=a.makeArray(a(b.stack)).sort(function(b,d){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(d).css("zIndex"),10)||0)});if(b.length){var d=parseInt(b[0].style.zIndex)||0;a(b).each(function(a){this.style.zIndex=
d+a});this[0].style.zIndex=d+b.length}}});a.ui.plugin.add("draggable","zIndex",{start:function(b,d){var c=a(d.helper),p=a(this).data("draggable").options;c.css("zIndex")&&(p._zIndex=c.css("zIndex"));c.css("zIndex",p.zIndex)},stop:function(b,d){var c=a(this).data("draggable").options;c._zIndex&&a(d.helper).css("zIndex",c._zIndex)}})})(jQuery);
jQuery.effects||function(a,b){function d(b){var c;return b&&b.constructor==Array&&3==b.length?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],
16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(b)?u.transparent:u[a.trim(b).toLowerCase()]}function c(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]])for(var g=a.length;g--;)c=a[g],"string"==typeof a[c]&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c]);else for(c in a)"string"===
typeof a[c]&&(b[c]=a[c]);return b}function p(b){var c,d;for(c in b)d=b[c],(null==d||a.isFunction(d)||c in F||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function g(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function v(b,c,d,g){"object"==typeof b&&(g=c,d=null,c=b,b=c.effect);a.isFunction(c)&&(g=c,d=null,c={});if("number"==typeof c||a.fx.speeds[c])g=d,d=c,c={};a.isFunction(d)&&(g=d,d=null);c=c||{};d=d||c.duration;d=a.fx.off?0:"number"==typeof d?
d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default;g=g||c.complete;return[b,c,d,g]}function l(b){return!b||("number"===typeof b||a.fx.speeds[b])||"string"===typeof b&&!a.effects[b]?!0:!1}a.effects={};a.each("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor borderColor color outlineColor".split(" "),function(b,c){a.fx.step[c]=function(b){if(!b.colorInit){var A;A=b.elem;var g=c,l;do{l=(a.curCSS||a.css)(A,g);if(l!=""&&l!="transparent"||a.nodeName(A,"body"))break;
g="backgroundColor"}while(A=A.parentNode);A=d(l);b.start=A;b.end=d(b.end);b.colorInit=true}b.elem.style[c]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var u={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,
0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,
255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},z=["add","remove","toggle"],F={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,d,l,u){a.isFunction(l)&&(u=l,l=null);return this.queue(function(){var y=
a(this),v=y.attr("style")||" ",F=p(c.call(this)),I,ea=y.attr("class")||"";a.each(z,function(a,c){if(b[c])y[c+"Class"](b[c])});I=p(c.call(this));y.attr("class",ea);y.animate(g(F,I),{queue:false,duration:d,easing:l,complete:function(){a.each(z,function(a,c){if(b[c])y[c+"Class"](b[c])});if(typeof y.attr("style")=="object"){y.attr("style").cssText="";y.attr("style").cssText=v}else y.attr("style",v);u&&u.apply(this,arguments);a.dequeue(this)}})})};a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,
c,d,g){return c?a.effects.animateClass.apply(this,[{add:b},c,d,g]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,g){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,g]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,g,l,p){return"boolean"==typeof d||d===b?g?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},g,l,p]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,g,l])},switchClass:function(b,c,d,g,l){return a.effects.animateClass.apply(this,
[{add:c,remove:b},d,g,l])}});a.extend(a.effects,{version:"1.8.23",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){"toggle"==b&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case "left":d=
0;break;case "center":d=0.5;break;case "right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),g=document.activeElement;try{g.id}catch(l){g=document.body}b.wrap(d);(b[0]===g||a.contains(b[0],g))&&a(g).focus();
d=b.parent();"static"==b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d);isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));return d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===
d||a.contains(b[0],d))&&a(d).focus(),c):b},setTransition:function(b,c,d,g){g=g||{};a.each(c,function(a,c){var l=b.cssUnit(c);0<l[0]&&(g[c]=l[0]*d+l[1])});return g}});a.fn.extend({effect:function(b,c,d,g){var l=v.apply(this,arguments),p={options:l[1],duration:l[2],callback:l[3]},l=p.options.mode,u=a.effects[b];return a.fx.off||!u?l?this[l](p.duration,p.callback):this.each(function(){p.callback&&p.callback.call(this)}):u.call(this,p)},_show:a.fn.show,show:function(a){if(l(a))return this._show.apply(this,
arguments);var b=v.apply(this,arguments);b[1].mode="show";return this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(l(a))return this._hide.apply(this,arguments);var b=v.apply(this,arguments);b[1].mode="hide";return this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(l(b)||"boolean"===typeof b||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=v.apply(this,arguments);c[1].mode="toggle";return this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),
d=[];a.each(["em","px","%","pt"],function(a,b){0<c.indexOf(b)&&(d=[parseFloat(c),b])});return d}});var I={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,b){I[b]=function(b){return Math.pow(b,a+2)}});a.extend(I,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,
--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}});a.each(I,function(b,c){a.easing["easeIn"+b]=c;a.easing["easeOut"+b]=function(a){return 1-c(1-a)};a.easing["easeInOut"+b]=function(a){return 0.5>a?c(2*a)/2:c(-2*a+2)/-2+1}})}(jQuery);var altgallery,altbox;
(function(a,b){function d(a){var e=[],f,b;for(f=0;f<a.length;f++)for(b=0;b<a[f].items.length;b++)e.push(a[f].items[b]);return e}function c(){return navigator.userAgent.match(/(iPhone|iPod|Android 2)/i)?!0:!1}function p(a){return"object"==typeof a&&a.length!==b}function g(o){a(o).css({display:"block",position:"static",cssFloat:"none",clear:"none",left:"auto",right:"auto",top:"auto",bottom:"auto",width:"auto",height:"auto",minWidth:"none",minHeight:"none",maxWidth:"none",maxHeight:"none",overflow:"visible",
margin:0,padding:0,border:"none",background:"none",color:"#000000",fontFamily:"serif",fontSize:"16px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:"normal",lineHeight:"normal",opacity:1,outline:"none",textAlign:"left",textIndent:0,textShadow:"none",visibility:"visible",whiteSpace:"normal",cursor:"inherit"})}function v(a,e){"object"==typeof a&&(e=a.target,a=a.link);e||(e="_self");switch(e){case "_blank":window.open(a);break;case "_parent":parent.location.href=a;break;case "_self":location.href=
a;break;case "_top":top.location.href=a;break;default:top.frames[e].location.href=a}}function l(){var a=document.getElementsByTagName("script");return a[a.length-1].src||location.href}function u(a){return'url("'+a+'")'}function z(a){if("number"==typeof a)return"#"+sprintf("%06x",a);if("string"==typeof a){var e;return(e=a.match(/[0-9a-f]{3,6}$/i))?3==e[0].length?"#"+e[0]+e[0]+e[1]+e[1]+e[2]+e[2]:"#"+e[0]:(e=a.match(/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i))?"#"+sprintf("%02x",e[1])+sprintf("%02x",
e[2])+sprintf("%02x",e[3]):a}}function F(a,e){var a=z(a),f=a.match(/#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i);if(f){for(var c=[],d=1;3>=d;d++)c.push(parseInt(f[d],16));return e!==b?"rgba("+c[0]+", "+c[1]+", "+c[2]+", "+e+")":"rgb("+c[0]+", "+c[1]+", "+c[2]+")"}return"transparent"}function I(a){for(var e in a)"object"==typeof a[e]?a[e]=I(a[e]):"true"==a[e]?a[e]=!0:"false"==a[e]?a[e]=!1:a[e]==parseInt(a[e])&&(a[e]=parseInt(a[e]));return a}function A(a){var e="",f,b=a.length;for(f=0;f<b;f++)e+=a.charCodeAt(f).toString(16);
return e}function w(o,e){function f(a,o,f){for(var e in a)e.match("-")?a[o+e]=a[e]:a[f+e.charAt(0).toUpperCase()+e.slice(1)]=a[e]}a.browser.mozilla?f(e,"-moz-","Moz"):a.browser.webkit?f(e,"-webkit-","webkit"):a.browser.opera?f(e,"-o-","O"):a.browser.msie&&f(e,"-ms-","ms");a(o).css(e)}function L(o,e){if(e===b)return e={},a(o).data("transform")||{};a(o).each(function(){var o=[],b;for(b in e)o.push(b+"("+e[b]+")");o=o.join(" ");a(this).data("transform",e).css({"-moz-transform":o,"-webkit-transform":o,
"-khtml-transform":o,"-o-transform":o,"-ms-transform":o,transform:o})});return a(o)}function U(){if(fa===b){var o=location.hostname.toString().replace(/^www\./i,"");fa=!location.hostname||-1!=a.inArray(A(o),pa)}return fa}function y(a,e,f){f===b&&"number"==typeof e&&(f=e,e=b);f=f||10;if(a&&O[a]===b){var c=new Image;O[a]=c;O[a].loaded=!1;O[a].callbacks=[];"function"==typeof e&&O[a].callbacks.push(e);setTimeout(function(){c.onload=function(){O[a].loaded=true;for(var f=0;f<O[a].callbacks.length;f++)O[a].callbacks[f](O[a])};
c.src=a},f)}else O[a].loaded?"function"==typeof e&&e(O[a]):"function"==typeof e&&O[a].callbacks.push(e)}function B(o,e,f,c){f===b&&"number"==typeof e&&(f=e,e=b);f=f||10;if("string"==typeof o)return y(o,e,f);if(p(o)){var c=c||[],d=o.slice();setTimeout(function(){var o=d.shift(),o=typeof o=="string"?o:o.source||o.src||a(o).attr("src");y(o,function(a){if(d.length){c.push(a);B(d,e,f,c)}else typeof e=="function"&&e(c)})},f)}}function Q(o,e){e=e||{};a(o).each(function(){var o=!1,b=!1;a(this).mousedown(function(){o=
!0;return!1}).mousemove(function(a){o&&(b?"function"==typeof e.touchmove&&e.touchmove(a):(b=!0,"function"==typeof e.touchstart&&e.touchstart(a)));return!1}).mouseup(function(a){o=!1;b&&(b=!1,"function"==typeof e.touchend&&e.touchend(a));return!1}).mouseleave(function(a){o=!1;b&&(b=!1,"function"==typeof e.touchcancel&&e.touchcancel(a))})})}function N(o){function e(a){n||(n=!0,k=a.changedTouches[0],r=window.setTimeout(function(){n=!1;var a=k,o=document.createEvent("MouseEvent");o.initMouseEvent("mouseup",
!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(o);o=document.createEvent("MouseEvent");o.initMouseEvent("mousedown",!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,2,null);a.target.dispatchEvent(o);o=document.createEvent("MouseEvent");o.initMouseEvent("contextmenu",!0,!0,window,1,a.screenX+50,a.screenY+5,a.clientX+50,a.clientY+5,!1,!1,!1,!1,2,null);a.target.dispatchEvent(o);q=!0;k=null},800))}function f(){n&&(window.clearTimeout(r),
n=!1,k=null)}function b(o){var D="";if(!(1<o.touches.length)){switch(o.type){case "touchstart":if(a(o.changedTouches[0].target).is("select"))return;var D=o.changedTouches[0],n="mouseover",k=document.createEvent("MouseEvent");k.initMouseEvent(n,!0,!0,window,1,D.screenX,D.screenY,D.clientX,D.clientY,!1,!1,!1,!1,0,null);D.target.dispatchEvent(k);n="mousedown";k=document.createEvent("MouseEvent");k.initMouseEvent(n,!0,!0,window,1,D.screenX,D.screenY,D.clientX,D.clientY,!1,!1,!1,!1,0,null);D.target.dispatchEvent(k);
d?(window.clearTimeout(h),D.target==c?(c=null,d=!1,n="click",k=document.createEvent("MouseEvent"),k.initMouseEvent(n,!0,!0,window,1,D.screenX,D.screenY,D.clientX,D.clientY,!1,!1,!1,!1,0,null),D.target.dispatchEvent(k),n="dblclick",k=document.createEvent("MouseEvent"),k.initMouseEvent(n,!0,!0,window,1,D.screenX,D.screenY,D.clientX,D.clientY,!1,!1,!1,!1,0,null),D.target.dispatchEvent(k)):(c=D.target,d=!0,h=window.setTimeout(function(){d=!1},600),e(o))):(c=D.target,d=!0,h=window.setTimeout(function(){d=
!1},600),e(o));o.preventDefault();return!1;case "touchmove":f();D="mousemove";o.preventDefault();break;case "touchend":if(q)return q=!1,o.preventDefault(),!1;f();D="mouseup";break;default:return}o=o.changedTouches[0];n=document.createEvent("MouseEvent");n.initMouseEvent(D,!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null);o.target.dispatchEvent(n);"mouseup"==D&&(d&&o.target==c)&&(n=document.createEvent("MouseEvent"),n.initMouseEvent("click",!0,!0,window,1,o.screenX,o.screenY,
o.clientX,o.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(n))}}var c=null,d=!1,h=null,n=!1,k=null,r=null,q=!1;a.support.touch&&a(o).each(function(){this.addEventListener("touchstart",b,!1);this.addEventListener("touchmove",b,!1);this.addEventListener("touchend",b,!1);this.addEventListener("touchcancel",b,!1)})}function ea(o,e){this.init=function(){var f=a('<div class="altgallery-canvas"></div>');g(f);f.css({display:"block",position:"relative",width:e.width,height:e.height,cursor:"default"});
w(f,{userSelect:"none"});this.element=a("<div></div>");this.element.css({display:"block",position:"relative",width:e.width,height:e.height,overflow:"hidden",margin:0,padding:0,background:e.background});f.append(this.element);var b=a('<a href="http://www.flash-gallery.com/" target="_blank" style="display:block;position:absolute;left:0;top:0;z-index:9999;width:90px;height:20px;overflow:hidden;font-family:Tahoma,Arial,Helvetica,sans-serif;font-size:9px;line-height:12px;text-align:left;text-decoration:none;text-shadow:none;color:#fff;background:rgba(0,0,0,0.7);opacity:0.7;border-radius:4px;"><span style="display:block;padding:4px 10px;text-transform:uppercase;font-size:8px;font-weight:bold;white-space:nowrap;">Photo Gallery</span><span style="display:block;padding:5px 10px 10px;font-size:9px;background:rgba(0,0,0,0.5);border-bottom-left-radius:4px;border-bottom-right-radius:4px;opacity:0;">Download free version of this gallery from Flash-Gallery.com</span></a>');
ha=736;if(!U()){var c=b.width();a.browser.opera&&b.css({width:100}).find("span:first").css({letterSpacing:"-1px"});a.browser.msie&&9>a.browser.version?(b.css({background:"#444"}).find("span:last").css({background:"#222"}),b.hover(function(){a(this).stop().animate({width:120},"fast",function(){a(this).animate({height:70},"fast",function(){a(this).find("span:last").show()})})},function(){a(this).find("span:last").hide();a(this).stop().animate({height:20},"fast",function(){a(this).animate({width:c},
"fast")})})):b.hover(function(){a(this).stop().animate({width:120},"fast",function(){a(this).animate({height:70,opacity:1},"fast",function(){a(this).find("span:last").animate({opacity:1},"slow")})})},function(){a(this).find("span:last").animate({opacity:0},"fast");a(this).stop().animate({height:20},"fast",function(){a(this).animate({width:c,opacity:0.7},"fast")})});f.append(b)}a(o).empty().append(f)};this.init();this.empty=function(){this.element.empty()};this.width=function(a){return a===b?this.element.width():
this.element.width(a)};this.height=function(a){return a===b?this.element.height():this.element.height(a)};this.append=function(a){return this.element.append(a)};this.drawImage=function(o,e,c){var e=a.extend({left:0,top:0,width:120,height:90,scaleMode:"fill",background:"none"},e),c=c===b?this.element:a(c,this.element),d=new Image;d.onload=function(){var b=document.createElement("a");a(b).attr({href:o.source});a(b).css({display:"block",position:"absolute",left:e.x,top:e.y,zIndex:e.z,width:e.width,height:e.height,
overflow:"hidden",background:e.background});a(b).click(e.onclick);a(b).hover(e.onmouseover,e.onmouseout);var n=document.createElement("img");n.src=d.src;var k;"fit"==e.scaleMode?k=H.fit(this.width,this.height,e.width,e.height):"fill"==e.scaleMode&&(k=H.fill(this.width,this.height,e.width,e.height));a(n).css({marginTop:k.top,marginRight:0,marginBottom:0,marginLeft:k.left,width:k.width,height:k.height,padding:0,border:"none",maxWidth:"none",maxHeight:"none",opacity:e.opacity});a(b).append(n);c.append(b)};
d.src=o.thumb}}function W(o,e,f){var b=this;this.canvas=o;this.albums=e;this.items=d(e);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.onOpen=function(){};b.onOpenItem={};this.settings=a.extend(!0,{image:{scaleMode:"fit",cornerRadius:10,align:"center",transitionEffect:"fade",transitionDuration:1,useShadow:!0},caption:{visibleMode:"onRollOver",position:"bottom",bgColor:0,bgAlpha:30,color:16777215,fontName:"Arial",fontSize:11},thumbBar:{useThumbBar:!0,position:"bottom",
scrollSpeed:10},thumbnail:{width:80,height:60,cornerRadius:10,alpha:70,outlineColor:3355443,outlineColorOnRollOver:6710886,outlineColorOnClick:10066329,useShadow:!0},slideshow:{start:!1,delay:2.5,loop:!0,stopAutoOnClick:!0}},f);this.settings=I(this.settings);(new Image).src=s.images.loader;b.settings.slideshow.start&&setTimeout(function(){b.slideshowStart()},500*b.settings.image.transitionDuration);this.render()}function K(o,e,f){this.canvas=o;this.albums=e;this.items=d(e);this.currentItem=-1;this.getCurrentItem=
function(){return this.items[this.currentItem]};this.defaultSettings={image:{scaleMode:"fill",padding:0,bgTintColor:16777215},thumbnail:{width:80,height:60,alpha:70},caption:{showCaption:!0},buttons:{showImageNavigationButtons:!0,showLinkButton:!0,showFacebookButton:!0,showTwitterButton:!0,showSlideshowButton:!0,showFullscreenButton:!0},slideshow:{start:!1,delay:2.5},translation:{image:"Image",clickToView:"Click to view",getLink:"Get link",shareWithFacebook:"Share with Facebook",tweet:"Tweet",startSlideshow:"Start slideshow",
stopSlideshow:"Stop slideshow",fullscreenMode:"Fullscreen mode"}};this.settings=a.extend(!0,this.defaultSettings,f);this.settings=I(this.settings);this.init()}function S(o,e,f){this.canvas=o;this.albums=e;this.items=d(e);this.currentItem=-1;this.getCurrentItem=function(){return this.items[this.currentItem]};this.defaultSettings={thumbnail:{width:120,height:90,alpha:85},colorScheme:{thumbsFrameColor:16777215,imageBGColor:1118481,useShadow:!0},imageCaption:{position:"top",color:16777215,bgColor:0,bgAlpha:30,
fontName:"Arial",fontSize:11,visibleMode:"always"}};this.settings=a.extend(!0,this.defaultSettings,f);this.settings=I(this.settings);this.page=0;y(s.images.loader,500);this.render()}function J(o,e,f){this.canvas=o;this.albums=e;this.items=d(e);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.defaultSettings={initialState:"Load Image",slideshowDelay:2,showCaption:!0,base:{color:4080713,visibleFrame:5},buttons:{showSlideshowButton:!0,showThumbnailsButton:!0,
bgColor:15066854}};this.settings=a.extend(!0,this.defaultSettings,f);this.settings=I(this.settings);this.enableThumbnailsHover=!0;this.drag=!1;y(s.images.loader,500);this.init()}function V(o,e,f){var b=this;this.canvas=o;this.albums=e;this.settings=a.extend(!0,{imageAngle:30,maxImageWidth:0,useHighlight:!0,useScrollBar:!0,showReflections:!0,solidReflection:!0,reflectionAlpha:80,slideShow:!1,slideShowDelay:2,flipDuration:1,startPosition:"center",colorScheme:"custom",preloader:{stripesAlpha:45,barColor:0,
barAlpha:30,bgColor:0,bgAlpha:20,innerShadow:20,dropShadow:30},scrollbar:{bgColor:0,bgAlpha:40,handleColor:0,handleAlpha:40,arrowsColor:0,arrowsAlpha:40,innerShadow:20,dropShadow:20},caption:{textColor:16777215,bgColor:0,bgAlpha:80,frameColor:16777215,frameAlpha:40,shadowAlpha:50,multilingual:!1,multilingualFontSize:12},background:{bgColor:16777215,transparentBG:!0}},f);this.settings=I(this.settings);this.settings.maxImageWidth||(this.settings.maxImageWidth=parseInt(o.element.width()/2));c()&&(this.settings.useScrollBar=
!1);if(f=this.settings.showReflections)f=this.canvas.element.css("backgroundColor"),f=(z(f).match(/[0-9a-f]{6}$/i)?!0:!1)&&!(a.browser.msie&&9>a.browser.version);this.showReflections=f;this.items=d(e);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.getItemX=function(a){return-(this.currentItem-a)};this.getItemZ=function(a){return parseInt(this.items.length/2)-Math.abs(this.getItemX(a))};this.currentItem="left"==this.settings.startPosition?0:"right"==this.settings.startPosition?
this.items.length:Math.floor((this.items.length-1)/2);(new Image).src=s.images.loader;this.scene=a('<div class="altgallery-scene"></div>');this.scene.css({position:"relative",width:o.width(),height:o.height()});this.canvas.element.append(this.scene);var G;Q(this.scene,{touchstart:function(a){b.drag=true;G=a.pageX},touchend:function(a){var a=a.pageX-G,o=Math.abs(a)>b.canvas.width()/2?2:1;if(a>30){setTimeout(function(){b.drag=false},100);b.prev(o)}else if(a<-30){setTimeout(function(){b.drag=false},
100);b.next(o)}else b.drag=false},touchcancel:function(){setTimeout(function(){b.drag=false},100)}});N(this.scene);this.render()}function M(o,e,f){this.canvas=o;this.albums=e;this.currentAlbum=0;this.getCurrentAlbum=function(){return this.albums[this.currentAlbum]};this.currentItem=0;this.getCurrentItem=function(){return this.getCurrentAlbum().items[this.currentItem]};this.settings=a.extend(!0,{initialState:"Show Albums",imageScaleMode:"fill",frameSize:5,frameColor:"#ffffff",backgroundColor:"#aac5d8",
cornerRadius:7,iconWidth:90,iconHeight:55,iconPadding:10,panelBackgroundAlpha:50,showCaption:"always",captionBackgroundAlpha:40,showButtons:"always",buttonsBackgroundAlpha:40,showAlbumsButton:!0,showThumbnailsButton:!0,showSlideshowButton:!0,showNavigationButton:!0,useEmbeddedFont:!0,fontName:"Arial",fontSize:11,translation:{Album:"Album",Albums:"Albums",Image:"Image",Images:"Images",Close:"CLOSE",BackToAlbums:"BACK TO ALBUMS",LoadingImage:"Loading Image",Of:"of"}},f);this.settings=I(this.settings);
this.settings.useEmbeddedFont&&(this.settings.fontName="Tahoma",this.settings.fontSize=9);y(s.images.loader,500);this.cache=function(){if(this.currentItem>=0){var a=this.getCurrentAlbum().items,o=[],e,f;for(f=this.currentItem+1;f<this.currentItem+3;f++)(e=a[(a.length+f)%a.length])&&(e=e.source)&&o.push(e);for(f=this.currentItem-1;f>this.currentItem-2;f--)(e=a[(a.length+f)%a.length])&&(e=e.source)&&o.push(e);o.length&&B(o,100)}};this.render()}window.altgallery_id=window.altgallery_id||0;var pa=["3132372e302e302e31",
"6c6f63616c686f7374","666c6173682d67616c6c6572792e636f6d"];sprintfWrapper={init:function(){if("undefined"==typeof arguments||1>arguments.length||"string"!=typeof arguments[0]||"undefined"==typeof RegExp)return null;for(var a=arguments[0],e=RegExp(/(%([%]|(\-)?(\+|\x20)?(0)?(\d+)?(\.(\d)?)?([bcdfosxX])))/g),f=[],b=[],c=0,d=0,h=0,d=0,n="",k=null;k=e.exec(a);)k[9]&&(c+=1),h=e.lastIndex-k[0].length,b[b.length]=a.substring(d,h),d=e.lastIndex,f[f.length]={match:k[0],left:k[3]?!0:!1,sign:k[4]||"",pad:k[5]||
" ",min:k[6]||0,precision:k[8],code:k[9]||"%",negative:0>parseInt(arguments[c])?!0:!1,argument:String(arguments[c])};b[b.length]=a.substring(d);if(0==f.length)return a;if(arguments.length-1<c)return null;a=null;for(a=0;a<f.length;a++)"%"==f[a].code?substitution="%":"b"==f[a].code?(f[a].argument=String(Math.abs(parseInt(f[a].argument)).toString(2)),substitution=sprintfWrapper.convert(f[a],!0)):"c"==f[a].code?(f[a].argument=String(String.fromCharCode(parseInt(Math.abs(parseInt(f[a].argument))))),substitution=
sprintfWrapper.convert(f[a],!0)):"d"==f[a].code?(f[a].argument=String(Math.abs(parseInt(f[a].argument))),substitution=sprintfWrapper.convert(f[a])):"f"==f[a].code?(f[a].argument=String(Math.abs(parseFloat(f[a].argument)).toFixed(f[a].precision?f[a].precision:6)),substitution=sprintfWrapper.convert(f[a])):"o"==f[a].code?(f[a].argument=String(Math.abs(parseInt(f[a].argument)).toString(8)),substitution=sprintfWrapper.convert(f[a])):"s"==f[a].code?(f[a].argument=f[a].argument.substring(0,f[a].precision?
f[a].precision:f[a].argument.length),substitution=sprintfWrapper.convert(f[a],!0)):"x"==f[a].code?(f[a].argument=String(Math.abs(parseInt(f[a].argument)).toString(16)),substitution=sprintfWrapper.convert(f[a])):"X"==f[a].code?(f[a].argument=String(Math.abs(parseInt(f[a].argument)).toString(16)),substitution=sprintfWrapper.convert(f[a]).toUpperCase()):substitution=f[a].match,n+=b[a],n+=substitution;return n+=b[a]},convert:function(a,e){a.sign=e?"":a.negative?"-":a.sign;var f=a.min-a.argument.length+
1-a.sign.length,f=Array(0>f?0:f).join(a.pad);return a.left?"0"==a.pad||e?a.sign+a.argument+f.replace(/0/g," "):a.sign+a.argument+f:"0"==a.pad||e?a.sign+f+a.argument:f+a.sign+a.argument}};sprintf=sprintfWrapper.init;var ha;location.href.match(/#jsgallerydebug$/);var fa,O={};a.extend(a.support,{touch:"ontouchstart"in document});l();var ia=l().replace(/[^\/]*$/,""),H={fit:function(o,e,f,b,c){var d,h,n=o/e,c=a.extend({noEnlarge:!1,minWidth:16,minHeight:16},c);d=f;h=f/n;h>b&&(h=b,d=h*n);d<c.minWidth&&
(d=c.minWidth,h=d/n);h<c.minHeight&&(h=c.minHeight,d=h*n);if(c.noEnlarge&&(d>o||h>e))d=o,h=e;o=(b-h)/2;return{left:Math.round((f-d)/2),top:Math.round(o),width:Math.round(d),height:Math.round(h),margin:0}},fill:function(a,e,f,b){var c=a/e,a=f,e=f/c;e<b&&(e=b,a=e*c);b=(b-e)/2;return{left:Math.round((f-a)/2),top:Math.round(b),width:Math.round(a),height:Math.round(e),margin:0}}},C,ja=function(a,e,f){var b=[];null==e&&(e=document);null==f&&(f="*");e=e.getElementsByTagName(f);f=e.length;a=RegExp("(^|\\s)"+
a+"(\\s|$)");for(j=i=0;i<f;i++)a.test(e[i].className)&&(b[j]=e[i],j++);return b},aa=function(a,e){if(C.debug)try{switch(e){case "warn":console.warn("Pixastic:",a);break;case "error":console.error("Pixastic:",a);break;default:console.log("Pixastic:",a)}}catch(f){}};if("undefined"!=typeof pixastic_parseonload&&pixastic_parseonload){var ka=!1,ba=function(){if(!ka){ka=!0;for(var a=ja("pixastic",null,"img"),e=ja("pixastic",null,"canvas"),f=a.concat(e),b=0;b<f.length;b++)(function(){for(var a=f[b],o=[],
e=a.className.split(" "),c=0;c<e.length;c++){var d=e[c];"pixastic-"==d.substring(0,9)&&(d=d.substring(9),""!=d&&o.push(d))}if(o.length)if("img"==a.tagName.toLowerCase())if(e=new Image,e.src=a.src,e.complete)for(e=0;e<o.length;e++)(c=C.applyAction(a,a,o[e],null))&&(a=c);else e.onload=function(){for(var e=0;e<o.length;e++){var f=C.applyAction(a,a,o[e],null);f&&(a=f)}};else setTimeout(function(){for(var e=0;e<o.length;e++){var f=C.applyAction(a,a,o[e],null);f&&(a=f)}},1)})()}};document.write('<script defer src="//:" id="__onload_ie_pixastic__"><\/script>');
var ca=document.getElementById("__onload_ie_pixastic__");ca.onreadystatechange=function(){"complete"==ca.readyState&&(ca.parentNode.removeChild(ca),ba())};document.addEventListener&&document.addEventListener("DOMContentLoaded",ba,!1);var T=window;T.addEventListener?T.addEventListener("load",ba,!1):T.attachEvent&&T.attachEvent("onload",ba)}var T=document.createElement("canvas"),la=!1;try{la=!!("function"==typeof T.getContext&&T.getContext("2d"))}catch(ra){}var T=function(){return la},Z,P=document.createElement("canvas"),
ma=!1;try{if("function"==typeof P.getContext&&(Z=P.getContext("2d")))ma="function"==typeof Z.getImageData}catch(sa){}Z=function(){return ma};var na=!1,P=document.createElement("canvas");if(T()&&Z()){P.width=P.height=1;P=P.getContext("2d");P.fillStyle="rgb(255,0,0)";P.fillRect(0,0,1,1);var da=document.createElement("canvas");da.width=da.height=1;var oa=da.getContext("2d");oa.fillStyle="rgb(0,0,255)";oa.fillRect(0,0,1,1);P.globalAlpha=0.5;P.drawImage(da,0,0);na=255!=P.getImageData(0,0,1,1).data[2]}C=
{parseOnLoad:!1,debug:!1,applyAction:function(a,e,f,b){var b=b||{},c="canvas"==a.tagName.toLowerCase();if(c&&C.Client.isIE())return C.debug&&aa("Tried to process a canvas element but browser is IE."),!1;var d,h,n=!1;C.Client.hasCanvas()&&(n=!!b.resultCanvas,d=b.resultCanvas||document.createElement("canvas"),h=d.getContext("2d"));var k=a.offsetWidth,r=a.offsetHeight;c&&(k=a.width,r=a.height);if(0==k||0==r)if(null==a.parentNode){var q=a.style.position,t=a.style.left;a.style.position="absolute";a.style.left=
"-9999px";document.body.appendChild(a);k=a.offsetWidth;r=a.offsetHeight;document.body.removeChild(a);a.style.position=q;a.style.left=t}else{C.debug&&aa("Image has 0 width and/or height.");return}if(-1<f.indexOf("(")&&(q=f,f=q.substr(0,q.indexOf("(")),q=q.match(/\((.*?)\)/),q[1])){q=q[1].split(";");for(t=0;t<q.length;t++)if(thisArg=q[t].split("="),2==thisArg.length)if("rect"==thisArg[0]){var E=thisArg[1].split(",");b[thisArg[0]]={left:parseInt(E[0],10)||0,top:parseInt(E[1],10)||0,width:parseInt(E[2],
10)||0,height:parseInt(E[3],10)||0}}else b[thisArg[0]]=thisArg[1]}b.rect?(b.rect.left=Math.round(b.rect.left),b.rect.top=Math.round(b.rect.top),b.rect.width=Math.round(b.rect.width),b.rect.height=Math.round(b.rect.height)):b.rect={left:0,top:0,width:k,height:r};q=!1;C.Actions[f]&&"function"==typeof C.Actions[f].process&&(q=!0);if(!q)return C.debug&&aa('Invalid action "'+f+'". Maybe file not included?'),!1;if(!C.Actions[f].checkSupport())return C.debug&&aa('Action "'+f+'" not supported by this browser.'),
!1;C.Client.hasCanvas()?(d!==a&&(d.width=k,d.height=r),n||(d.style.width=k+"px",d.style.height=r+"px"),h.drawImage(e,0,0,k,r),a.__pixastic_org_image)?(d.__pixastic_org_image=a.__pixastic_org_image,d.__pixastic_org_width=a.__pixastic_org_width,d.__pixastic_org_height=a.__pixastic_org_height):(d.__pixastic_org_image=a,d.__pixastic_org_width=k,d.__pixastic_org_height=r):C.Client.isIE()&&"undefined"==typeof a.__pixastic_org_style&&(a.__pixastic_org_style=a.style.cssText);e={image:a,canvas:d,width:k,height:r,
useData:!0,options:b};return!C.Actions[f].process(e)?!1:C.Client.hasCanvas()?(e.useData&&C.Client.hasCanvasImageData()&&(d.getContext("2d").putImageData(e.canvasData,b.rect.left,b.rect.top),d.getContext("2d").fillRect(0,0,0,0)),b.leaveDOM||(d.title=a.title,d.imgsrc=a.imgsrc,c||(d.alt=a.alt),c||(d.imgsrc=a.src),d.className=a.className,d.style.cssText=a.style.cssText,d.name=a.name,d.tabIndex=a.tabIndex,d.id=a.id,a.parentNode&&a.parentNode.replaceChild&&a.parentNode.replaceChild(d,a)),b.resultCanvas=
d):a},prepareData:function(a,e){var b=a.canvas.getContext("2d"),c=a.options.rect,b=b.getImageData(c.left,c.top,c.width,c.height),c=b.data;e||(a.canvasData=b);return c},process:function(a,e,b,c){if("img"==a.tagName.toLowerCase()){var d=new Image;d.src=a.src;if(d.complete){var m=C.applyAction(a,d,e,b);c&&c(m);return m}d.onload=function(){var h=C.applyAction(a,d,e,b);c&&c(h)}}if("canvas"==a.tagName.toLowerCase())return m=C.applyAction(a,a,e,b),c&&c(m),m},revert:function(a){if(C.Client.hasCanvas()){if("canvas"==
a.tagName.toLowerCase()&&a.__pixastic_org_image)return a.width=a.__pixastic_org_width,a.height=a.__pixastic_org_height,a.getContext("2d").drawImage(a.__pixastic_org_image,0,0),a.parentNode&&a.parentNode.replaceChild&&a.parentNode.replaceChild(a.__pixastic_org_image,a),a}else C.Client.isIE()&&"undefined"!=typeof a.__pixastic_org_style&&(a.style.cssText=a.__pixastic_org_style)},Client:{hasCanvas:T,hasCanvasImageData:Z,hasGlobalAlpha:function(){return na},isIE:function(){return!!document.all&&!!window.attachEvent&&
!window.opera}},Actions:{}};C.Actions.blurfast={process:function(a){var e=parseFloat(a.options.amount)||0,b=!!(a.options.clear&&"false"!=a.options.clear),e=Math.max(0,Math.min(5,e));if(C.Client.hasCanvas()){var c=a.options.rect,d=a.canvas.getContext("2d");d.save();d.beginPath();d.rect(c.left,c.top,c.width,c.height);d.clip();var m=Math.round(a.width/2),h=Math.round(a.height/2),n=document.createElement("canvas");n.width=m;n.height=h;for(var b=!1,e=Math.round(20*e),k=n.getContext("2d"),r=0;r<e;r++){var q=
Math.max(1,Math.round(m-r)),t=Math.max(1,Math.round(h-r));k.clearRect(0,0,m,h);k.drawImage(a.canvas,0,0,a.width,a.height,0,0,q,t);b&&d.clearRect(c.left,c.top,c.width,c.height);d.drawImage(n,0,0,q,t,0,0,a.width,a.height)}d.restore();a.useData=!1;return!0}if(C.Client.isIE())return b=10*e,a.image.style.filter+=" progid:DXImageTransform.Microsoft.Blur(pixelradius="+b+")",a.image.style.marginLeft=(parseInt(a.image.style.marginLeft,10)||0)-Math.round(b)+"px",a.image.style.marginTop=(parseInt(a.image.style.marginTop,
10)||0)-Math.round(b)+"px",!0},checkSupport:function(){return C.Client.hasCanvas()||C.Client.isIE()}};var qa=23;W.prototype.render=function(){var b=this,e=this.settings,f=this.canvas,c=this.items,d=a('<div class="altgallery-imageFrame" style="position:absolute;"></div>'),m={},h;if(e.thumbBar.useThumbBar)switch(e.thumbBar.position.toLowerCase()){default:case "bottom":h=!0;m.left=10;m.top=10;m.width=f.width()-20;m.height=f.height()-e.thumbnail.height-30;break;case "top":h=!0;m.left=10;m.bottom=10;m.width=
f.width()-20;m.height=f.height()-e.thumbnail.height-30;break;case "left":h=!1;m.right=10;m.top=10;m.width=f.width()-e.thumbnail.width-30;m.height=f.height()-20;break;case "right":h=!1,m.left=10,m.top=10,m.width=f.width()-e.thumbnail.width-30,m.height=f.height()-20}else m.left=10,m.top=10,m.width=f.width()-20,m.height=f.height()-20;d.css(m);f.element.append(d);var n,k;Q(d,{touchstart:function(a){b.drag=!0;n=a.pageX;k=a.pageY},touchend:function(a){a=h?a.pageX-n:a.pageY-k;30<a?(setTimeout(function(){b.drag=
!1},100),b.prev()):-30>a?(setTimeout(function(){b.drag=!1},100),b.next()):b.drag=!1},touchcancel:function(){b.drag=!1}});N(d);if(e.thumbBar.useThumbBar){var r=b.thumbBar=a('<div class="altgallery-thumbBar"></div>'),q,t,E,R,l,d={};switch(e.thumbBar.position.toLowerCase()){default:case "bottom":q="horizontal";t=f.width()-20;E=e.thumbnail.height+4;R=c.length*(e.thumbnail.width+5)-5;l=E;d.left=10;d.bottom=7;d.width=t;d.height=E;break;case "top":q="horizontal";t=f.width()-20;E=e.thumbnail.height+4;R=c.length*
(e.thumbnail.width+5)-5;l=E;d.left=10;d.top=9;d.width=t;d.height=E;break;case "left":q="vertical";t=e.thumbnail.width+4;E=f.height()-20;R=t;l=c.length*(e.thumbnail.height+5)-5;d.left=9;d.top=10;d.width=t;d.height=E;break;case "right":q="vertical",t=e.thumbnail.width+4,E=f.height()-20,R=t,l=c.length*(e.thumbnail.height+5)-5,d.right=8,d.top=10,d.width=t,d.height=E}d.position="absolute";d.overflow="hidden";r.css(d);var x=a("<div></div>");x.css({position:"relative",width:R,height:l});for(d=0;d<c.length;d++)(function(f){var d=
a('<a href="'+c[f].source+'"></a>');d.css({position:"absolute",left:"horizontal"==q?f*(e.thumbnail.width+5):1,top:"horizontal"==q?1:f*(e.thumbnail.height+5),width:e.thumbnail.width-4,height:e.thumbnail.height-4,overflow:"hidden",border:"2px solid",borderColor:z(e.thumbnail.outlineColor),"-moz-border-radius":e.thumbnail.cornerRadius/2,"-webkit-border-radius":e.thumbnail.cornerRadius/2,"-khtml-border-radius":e.thumbnail.cornerRadius/2,borderRadius:e.thumbnail.cornerRadius/2,opacity:e.thumbnail.alpha/
100});d.hover(function(){var b=a(this);b.hasClass("altgallery-active")||(b.data("style",{opacity:b.css("opacity"),borderColor:b.css("borderTopColor")}),b.css({borderColor:z(e.thumbnail.outlineColorOnRollOver),opacity:1}))},function(){var b=a(this);b.hasClass("altgallery-active")||b.css(b.data("style"))});b.onOpenItem[f]=function(){var a=r.find("a").eq(f);a.parent().find("a").removeClass("altgallery-active").css({opacity:e.thumbnail.alpha/100,borderColor:z(e.thumbnail.outlineColor)});a.addClass("altgallery-active").data("style",
{opacity:1,borderColor:z(e.thumbnail.outlineColorOnClick)}).css(a.data("style"));var b;if("horizontal"==q&&t<R){var c=0-(f*(e.thumbnail.width+5)-t/2+e.thumbnail.width/2),a=0-R+t;0<c&&(c=0);c<a&&(c=a);x.animate({left:c});x.unbind("mouseleave").mouseleave(function(){b=setTimeout(function(){x.animate({left:c},1E3)},1E3)})}else E<l&&(c=0-(f*(e.thumbnail.height+5)-E/2+e.thumbnail.height/2),a=0-l+E,0<c&&(c=0),c<a&&(c=a),x.animate({top:c}),x.unbind("mouseleave").mouseleave(function(){b=setTimeout(function(){x.animate({top:c},
1E3)},1E3)}));x.unbind("mouseenter").mouseenter(function(){clearTimeout(b)})};d.click(function(){b.drag||(b.currentItem=f,a(this).hasClass("altgallery-active")||b.open(c[f]));return!1});x.append(d);var n=new Image;n.onload=function(){var b=a('<img src="'+c[f].thumb+'" alt="" />');g(b);b.css({position:"absolute",border:"none"});b.css(H.fill(this.width,this.height,e.thumbnail.width-4,e.thumbnail.height-4));e.thumbnail.useShadow&&d.css({"-moz-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)",
"-khtml-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.5)"});d.append(b)};n.src=c[f].thumb})(d);r.append(x);var p=function(){clearInterval(s);u=!1},s,u=!1;"horizontal"==q&&t<R?(r.mousemove(function(f){b.drag||(f=f.pageX-a(this).offset().left,30>f?u||(u=!0,x.stop(),s=setInterval(function(){var a=parseInt(x.css("left"))+parseInt(e.thumbBar.scrollSpeed);0<a?(x.css("left",0),p()):x.css("left",a)},25)):f>t-30?u||(u=!0,x.stop(),s=setInterval(function(){var a=parseInt(x.css("left"))-
parseInt(e.thumbBar.scrollSpeed),b=0-R+t;a<b?(x.css("left",b),p()):x.css("left",a)},25)):p())}),x.draggable({axis:"x",start:function(){b.drag=!0},stop:function(a,e){var f=e.position.left,c=0-R+t;0<f?x.animate({left:0},"fast"):f<c&&x.animate({left:c},"fast");setTimeout(function(){b.drag=!1},100)}})):E<l&&(r.mousemove(function(f){b.drag||(f=f.pageY-a(this).offset().top,30>f?u||(u=!0,x.stop(),s=setInterval(function(){var a=parseInt(x.css("top"))+parseInt(e.thumbBar.scrollSpeed);0<a?(x.css("top",0),p()):
x.css("top",a)},25)):f>E-30?u||(u=!0,x.stop(),s=setInterval(function(){var a=parseInt(x.css("top"))-parseInt(e.thumbBar.scrollSpeed),b=0-l+E;a<b?(x.css("top",b),p()):x.css("top",a)},25)):p())}),x.draggable({axis:"y",start:function(){b.drag=!0},stop:function(a,e){var f=e.position.top,c=0-l+E;0<f?x.animate({top:0},"fast"):f<c&&x.animate({top:c},"fast");setTimeout(function(){b.drag=!1},100)}}));N(x);r.mouseleave(function(){p()});f.element.append(r);f.element.find(".altgallery-thumbBar a").eq(b.currentItem).click()}else b.open(b.getCurrentItem())};
W.prototype.open=function(b){var e=this,f=this.settings,c=this.canvas,d=c.element.find(".altgallery-imageFrame"),m=a('<img class="altgallery-preloader" src="'+s.images.loader+'" alt="" />');g(m);m.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});y(b.source,function(h){m.hide();c.element.find(".altgallery-preloader").remove();var n=f.image.scaleMode.toLowerCase(),k="fill"==n?H.fill(h.width,h.height,d.width(),d.height()):H.fit(h.width,h.height,d.width(),d.height()),
r;b.link?(r=a("<a></a>"),r.attr("href",b.link),b.target&&r.attr("target",b.target)):r=a("<div></div>");r.click(function(){if(e.drag)return false});r.css({display:"block",position:"absolute",left:"fill"==n?0:k.left,top:"fill"==n?0:k.top,width:"fill"==n?d.width():k.width,height:"fill"==n?d.height():k.height,overflow:"hidden","-moz-border-radius":f.image.cornerRadius/2,"-webkit-border-radius":f.image.cornerRadius/2,"-khtml-border-radius":f.image.cornerRadius/2,borderRadius:f.image.cornerRadius/2});f.image.useShadow&&
r.css({"-moz-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-khtml-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.5)"});var q=a('<img src="'+h.src+'" alt="" />');g(q);q.css({position:"absolute",left:"fill"==n?k.left:0,top:"fill"==n?k.top:0,width:k.width,height:k.height});r.append(q);if(b.description&&"never"!=f.caption.visibleMode.toLowerCase()){var t=a("<div></div>");t.html(b.description.replace("\n","<br/>"));
t.css({position:"absolute",left:0,width:k.width-20,padding:"9px 10px",fontFamily:f.caption.fontName,fontSize:f.caption.fontSize,lineHeight:1.25,color:z(f.caption.color),background:F(f.caption.bgColor,f.caption.bgAlpha/100)});"top"==f.caption.position.toLowerCase()?(t.css({top:0,borderBottom:"1px solid",borderBottomColor:F("#000000",(f.caption.bgAlpha+10)/100)}),"onrollover"==f.caption.visibleMode.toLowerCase()&&(t.hide(),r.hover(function(){t.css({top:-(t.height()+18)});t.show().stop().animate({top:0},
s.animation.duration)},function(){t.animate({top:-(t.height()+18)},s.animation.duration,function(){t.hide()})}))):(t.css({bottom:0,borderTop:"1px solid",borderTopColor:F("#000000",(f.caption.bgAlpha+10)/100)}),"onrollover"==f.caption.visibleMode.toLowerCase()&&(t.hide(),r.hover(function(){t.css({bottom:-(t.height()+18)});t.show().stop().animate({bottom:0},s.animation.duration)},function(){t.animate({bottom:-(t.height()+18)},s.animation.duration,function(){t.hide()})})));r.append(t)}switch(f.image.transitionEffect.toLowerCase()){default:case "fade":d.animate({opacity:0},
{duration:500*f.image.transitionDuration,easing:"linear",complete:function(){d.empty();d.append(r);d.animate({opacity:1},{duration:f.image.transitionDuration*500,easing:"swing",complete:function(){e.onOpen(h)}})}});break;case "xfade":case "crossfade":d.css({opacity:1}),n=d.find("div"),n.size()?(n.animate({opacity:0},{duration:1E3*f.image.transitionDuration,easing:"linear",complete:function(){a(this).remove();e.onOpen(h)}}),d.append(r),r.css({opacity:0}).animate({opacity:1},{duration:1E3*f.image.transitionDuration,
easing:"linear"})):(d.append(r),r.css({opacity:0}).animate({opacity:1},{duration:1E3*f.image.transitionDuration,easing:"linear",complete:function(){e.onOpen(h)}}))}e.onOpenItem[parseInt(b.id)]()});setTimeout(function(){c.element.find(".altgallery-preloader").remove();d.append(m)},500)};W.prototype.prev=function(){0<this.currentItem?this.currentItem--:this.currentItem=this.items.length-1;this.open(this.getCurrentItem())};W.prototype.next=function(){this.currentItem<this.items.length-1?this.currentItem++:
this.currentItem=0;this.open(this.getCurrentItem())};W.prototype.slideshowStart=function(){var a=this;a.slideshow=!0;a.onOpen=function(){a.slideshowTimer&&clearInterval(a.slideshowTimer);a.slideshowTimer=setTimeout(function(){a.next()},1E3*a.settings.slideshow.delay)};if(a.settings.slideshow.stopAutoOnClick){var b=function(){a.slideshowStop();a.canvas.element.unbind("click",b).find("a").unbind("click",b)};a.canvas.element.bind("click",b).find("a").bind("click",b)}};W.prototype.slideshowStop=function(){this.onOpen=
function(){};this.slideshow=!1;clearInterval(this.slideshowTimer)};K.prototype.init=function(){var a=this,b=a.settings;a.initPreloader();a.initImage();a.initNavigation();a.initThumbnails();a.initCaption();a.initButtons();var f,c=0;if((f=location.hash.match(/#galleryPhotoNumber=(\d+)/))||(f=location.href.match(/[?&]galleryPhotoNumber=(\d+)/)))c=f[1]-1;a.open(a.items[c],function(){b.slideshow.start&&a.slideshowStart()})};K.prototype.initPreloader=function(){var b=this.canvas;y(s.images.loader,500);
var e=this.preloader=a('<img alt="" />');e.attr({src:s.images.loader}).css({position:"absolute",left:"50%",top:"50%",zIndex:100,margin:"-16px 0 0 -16px"});b.append(e)};K.prototype.initImage=function(){var b=this,e=b.canvas,f=b.settings;0==f.image.padding&&(b.zeroPadding=!0,f.image.padding=10);var c=a("<div />");c.css({position:"absolute",left:0,top:0,width:e.width(),height:e.height()});e.append(c);if(!b.zeroPadding){var d=b.background=a("<div />");d.css({position:"absolute",left:0,top:0,zIndex:0,
width:e.width(),height:e.height(),overflow:"hidden",background:z(f.image.bgTintColor)});c.append(d)}d=b.imageFrame=a("<div />");d.css({position:"absolute",left:f.image.padding,top:f.image.padding,zIndex:1,width:e.width()-2*f.image.padding,height:e.height()-2*f.image.padding,overflow:"visible"});c.append(d);var m;Q(c,{touchstart:function(a){b.drag=true;m=a.pageX},touchend:function(a){a=a.pageX-m;if(a>30){setTimeout(function(){b.drag=false},100);b.prev()}else if(a<-30){setTimeout(function(){b.drag=
false},100);b.next()}else b.drag=false},touchcancel:function(){setTimeout(function(){b.drag=false},100)}});N(c)};K.prototype.initNavigation=function(){this.settings.buttons.showImageNavigationButtons&&(this.initPrevButton(),this.initNextButton())};K.prototype.initPrevButton=function(){var b=this,e=b.canvas,f=b.prevButton=a("<div></div>");f.css({position:"absolute",left:-10,top:(e.height()-69)/2,zIndex:1,width:72,height:69,background:"no-repeat center 0",backgroundImage:u(s.images.folder+"aura-arrows.png"),
opacity:0.5,cursor:"pointer"}).hover(function(){a(this).css({opacity:1})},function(){a(this).css({opacity:0.5})}).click(function(){b.prev();return!1});e.append(f)};K.prototype.initNextButton=function(){var b=this,e=b.canvas,f=b.nextButton=a("<div></div>");f.css({position:"absolute",right:-10,top:(e.height()-69)/2,zIndex:1,width:72,height:69,background:"no-repeat center -75px",backgroundImage:u(s.images.folder+"aura-arrows.png"),opacity:0.5,cursor:"pointer"}).hover(function(){a(this).css({opacity:1})},
function(){a(this).css({opacity:0.5})}).click(function(){b.next();return!1});e.append(f)};K.prototype.initThumbnails=function(){var b=this,e=b.canvas,f=b.settings,c=b.items,d=e.width(),m=b.thumbBar=a("<div />");m.css({position:"absolute",left:0,bottom:0,zIndex:1,width:d,height:f.thumbnail.height+50,background:"rgba(0,0,0,0.5)"});var h=a("<div />");h.css({position:"absolute",left:0,top:29,width:e.width(),height:1,background:"#fff",opacity:0.7});w(h,{boxShadow:"0 1px 0 #000"});m.append(h);var n=a('<div class="altgallery-thumbnails" />');
n.css({position:"absolute",left:0,bottom:10});var k=c.length*(f.thumbnail.width+10),h=Math.ceil(k/d),d=1<h?0:(d-k)/2-5,r,q=!1;e.element.mouseover(function(){m.stop().animate({opacity:1})});e.element.mouseleave(function(){q=!1;clearInterval(r);m.stop().animate({opacity:0})});1<h&&(m.mousemove(function(b){b=b.pageX-a(this).offset().left;50>b?q||(q=!0,r=setInterval(function(){var a=parseInt(n.css("left"))+10;0<a&&(a=0);n.css({left:a})},25)):b>e.width()-50?q||(q=!0,r=setInterval(function(){var a=parseInt(n.css("left"))-
10,b=-(k-e.width()+10);a<b&&(a=b);n.css({left:a})},25)):(q=!1,clearInterval(r))}).mouseleave(function(){q=!1;clearInterval(r)}),n.draggable({axis:"x",start:function(){b.drag=!0},stop:function(a,f){var c=f.position.left,d=-(k-e.width()+10);0<c?n.animate({left:0},"fast"):c<d&&n.animate({left:d},"fast");setTimeout(function(){b.drag=!1},100)}}));for(h=0;h<c.length;h++){var t=a("<a></a>");t.attr({href:c[h].source}).css({position:"absolute",left:10+h*(f.thumbnail.width+10)+d,bottom:0,width:f.thumbnail.width,
height:f.thumbnail.height,overflow:"hidden",opacity:parseInt(f.thumbnail.alpha)/100});(function(e,d){d.hover(function(){a(this).css({opacity:1});w(this,{boxShadow:"0 0 6px #fff"})},function(){if(e!=b.currentItem){a(this).css({opacity:parseInt(f.thumbnail.alpha)/100});w(this,{boxShadow:"none"})}}).click(function(){b.drag||b.open(c[e],function(){});return false});y(c[e].thumb,function(b){var e=a('<img alt="" />');e.attr({src:b.src});e.css({position:"absolute"});e.css(H.fill(b.width,b.height,f.thumbnail.width,
f.thumbnail.height));d.append(e)},e*50)})(h,t);n.append(t)}m.append(n);e.append(m);N(m)};K.prototype.initCaption=function(){var b=this.canvas,e=this.caption=a("<div />");this.settings.caption.showCaption&&(e.css({position:"absolute",left:10,top:8,width:b.width()-100,height:"16px",lineHeight:"16px",overflow:"hidden",fontFamily:'"Times New Roman", Times, serif',fontSize:"12px",fontWeight:"bold",color:"#fff",textShadow:"0 1px 0 #000"}),this.thumbBar.append(e))};K.prototype.initButtons=function(){function b(){a(this).css({opacity:1})}
function e(){a(this).css({opacity:0.5})}var f=this,c=f.settings,d=a("<div />");d.css({position:"absolute",right:5,top:7});var m={cssFloat:"left",width:16,height:16,margin:"0 0 0 4px",backgroundImage:u(s.images.folder+"aura-buttons.png"),backgroundRepeat:"no-repeat",opacity:0.5,cursor:"pointer"},h=f.linkButton=a("<div />");c.buttons.showLinkButton&&(h.prop({title:c.translation.getLink}).css(m).css({backgroundPosition:"0 -40px"}).click(function(){var a=f.getCurrentItem();a.link&&v(a.link,a.target||
"_blank")}).hover(b,e),d.append(h));c.buttons.showFacebookButton&&(h=a("<div />"),h.prop({title:c.translation.shareWithFacebook}).css(m).css({backgroundPosition:"0 -60px"}).click(function(){v("http://www.facebook.com/sharer.php?u="+location.href+"%23galleryPhotoNumber="+(f.currentItem+1)+"&t="+f.getCurrentItem().description||"","_blank")}).hover(b,e),d.append(h));c.buttons.showTwitterButton&&(h=a("<div />"),h.prop({title:c.translation.tweet}).css(m).css({backgroundPosition:"0 -80px"}).click(function(){v("https://twitter.com/intent/tweet?url="+
location.href+"%23galleryPhotoNumber="+(f.currentItem+1)+"&text="+f.getCurrentItem().description||"","_blank")}).hover(b,e),d.append(h));if(c.buttons.showLinkButton||c.buttons.showFacebookButton||c.buttons.showTwitterButton)h=a("<div />"),h.css({cssFloat:"left",width:1,height:14,margin:"0 3px 0 5px",background:"#fff"}),d.append(h);c.buttons.showSlideshowButton&&(h=a("<div />"),h.prop({title:c.translation.startSlideshow}).css(m).css({backgroundPosition:"0 0"}).click(function(){if(f.slideshow){f.slideshowStop();
a(this).css({backgroundPosition:"0 0"})}else{f.slideshowStart();a(this).css({backgroundPosition:"0 -20px"})}}).hover(b,e),d.append(h));f.thumbBar.append(d)};K.prototype.update=function(){this.updateThumbnails();this.updateNavigation();this.updateCaption()};K.prototype.updateThumbnails=function(){var b=this,e=0;b.thumbBar.find(".altgallery-thumbnails a").each(function(){var f=a(this);e==b.currentItem?(f.css({opacity:1}),w(f,{boxShadow:"0 0 6px #fff"})):(f.css({opacity:parseInt(b.settings.thumbnail.alpha)/
100}),w(f,{boxShadow:"none"}));e++})};K.prototype.updateNavigation=function(){this.settings.buttons.showImageNavigationButtons&&(0==this.currentItem?this.prevButton.hide():this.prevButton.show(),this.currentItem==this.items.length-1?this.nextButton.hide():this.nextButton.show())};K.prototype.updateCaption=function(a){a=a||this.getCurrentItem().description||this.settings.translation.image+" "+(this.currentItem+1)+"/"+this.items.length;this.caption.html(a.replace("\n","<br/>"))};K.prototype.open=function(b,
e){var f=this,c=f.canvas,d=f.settings;if(f.currentItem!=b.id){f.currentItem=b.id;f.getCurrentItem().link?f.linkButton.show():f.linkButton.hide();var m=setTimeout(function(){f.preloader.show()},500);y(b.source,function(b){clearTimeout(m);f.preloader.hide();var o=a('<img alt="" />');o.attr({src:b.src}).css({position:"absolute"});var k,r=f.imageFrame.width(),q=f.imageFrame.height();if("fill"==d.image.scaleMode){if(k=H.fill(b.width,b.height,r,q),k.width>r&&(k.width=r,k.left=0),k.height>q)k.height=q,k.top=
0}else k=H.fit(b.width,b.height,r,q);o.css(H.fill(b.width,b.height,k.width,k.height));var t=f.imageFrame.find("div"),r=a("<div />");r.css({position:"absolute",overflow:"hidden"}).css(k).hide();w(r,{boxShadow:"0 6px 6px rgba(0,0,0,0.6)"});r.append(o);f.imageFrame.append(r);t.animate({opacity:"hide"},s.animation.duration);r.animate({opacity:"show"},s.animation.duration,function(){t.remove()});if(!f.zeroPadding){o=a('<img alt="" />');o.attr({src:b.src}).css({position:"absolute"});o.css(H.fill(b.width,
b.height,c.width(),c.height()));var g=f.background.find("div");k=a("<div />");k.css({opacity:0});k.append(o);f.background.append(k);C.process(o.get(0),"blurfast",{amount:1.5});g.animate({opacity:0},2*s.animation.duration);k.animate({opacity:0.5},2*s.animation.duration,function(){g.remove()})}"function"==typeof e&&e(b);y(f.items[(f.currentItem+1)%f.items.length].source)});f.update()}};K.prototype.prev=function(a){0<this.currentItem?this.open(this.items[this.currentItem-1],a):this.open(this.items[this.items.length-
1],a)};K.prototype.next=function(a){this.currentItem<this.items.length-1?this.open(this.items[this.currentItem+1],a):this.open(this.items[0],a)};K.prototype.slideshowStart=function(){var a=this,b=a.settings;if(!a.slideshow){var f=function(){a.slideshowTimeoutId=setTimeout(function(){a.next(f)},1E3*b.slideshow.delay+2E3)};a.slideshow=!0;setTimeout(function(){a.next(f)},1E3*b.slideshow.delay)}};K.prototype.slideshowStop=function(){this.slideshow&&(this.slideshow=!1,clearTimeout(this.slideshowTimeoutId))};
S.prototype.render=function(c){var e=this,f=this.canvas,d=this.items,G=this.settings;c===b&&(c=e.page);f.element.empty();var m=f.width(),h=f.height(),n=parseInt(G.thumbnail.width),k=parseInt(G.thumbnail.height),r=Math.floor((m-40)/n);1>r&&(r=1);var q=Math.floor((h-40)/k);1>q&&(q=1);c=Math.ceil(d.length/r);q>c&&(q=c);var t=r*q,g=e.pagesCount=Math.ceil(d.length/t),l=Math.floor(G.thumbnail.width)+2,p=Math.floor(G.thumbnail.height)+2,x=Math.floor((m-l*r)/2-8),v=Math.floor((h-p*q)/2-8),A=e.pageWidth=l*
r,c=e.pageHeight=p*q,Y=a('<div class="altgallery-frame" />'),h={position:"absolute",left:x,top:v,width:Math.floor(m-2*(x+8))+14,height:Math.floor(h-2*(v+8))+14,background:z(G.colorScheme.thumbsFrameColor),"-moz-border-radius":"4px","-webkit-border-radius":"4px","-khtml-border-radius":"4px",borderRadius:"4px"};G.colorScheme.useShadow&&(h=a.extend(h,{"-moz-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)","-khtml-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)",boxShadow:"0 0 10px rgba(0, 0, 0, 0.5)"}));
Y.css(h);f.element.append(Y);m=a('<div class="altgallery-frameMask" />');h.background="#000";h.opacity=0.6;h.zIndex=20;h["-moz-box-shadow"]="none";h["-webkit-box-shadow"]="none";h["-khtml-box-shadow"]="none";h.boxShadow="none";m.css(h).hide();f.element.append(m);f=a("<div />");f.css({position:"absolute",left:8,top:8,width:A-2,height:c-2,overflow:"hidden"});var $=e.imagesContainer=a("<div />");$.css({position:"relative",left:0,top:0,width:l*r*g-2,height:p*q-2});f.append($);Y.append(f);e.drag=!1;var ga=
0;$.draggable({axis:"x",distance:30,start:function(a,b){ga=b.position.left;e.drag=true},stop:function(a,b){Math.abs(Math.abs(ga)-Math.abs(b.position.left))>30?ga<b.position.left?e.prevPage():e.nextPage():e.placePage();setTimeout(function(){e.drag=false},100)}});N($);for(f=0;f<d.length;f++)g=f%r*l+Math.floor(f/t)*A,m=Math.floor(f/r)%q*p,function(b,f,c){var o=a("<img />"),h=a("<a />");h.attr({href:d[b].source}).css({display:"block",position:"absolute",left:Math.floor(f),top:Math.floor(c+k*0.5),width:n,
height:k,overflow:"hidden",opacity:0,background:z(G.colorScheme.imageBGColor),border:"none",margin:0,padding:0}).click(function(){return false});$.append(h);var m=function(){h.click(function(){if(!e.drag){e.currentItem=b;e.open(d[b],{left:b%r*l+x,top:c+v})}return false}).mouseover(function(){o.stop().animate({opacity:1},s.animation.duration/2)}).mouseleave(function(){o.stop().animate({opacity:G.thumbnail.alpha/100},s.animation.duration/2)})};if(b<t)setTimeout(function(){h.animate({top:c,opacity:1},
{duration:s.animation.duration,complete:m})},b*200);else{h.css({top:c,opacity:1});m()}y(d[b].thumb,function(a){o.attr({src:a.src}).css({display:"block",position:"absolute",margin:0,padding:0,border:"none",opacity:G.thumbnail.alpha/100}).css(H.fill(a.width,a.height,parseInt(G.thumbnail.width),parseInt(G.thumbnail.height)));h.append(o)},b*200)}(f,g,m);q=e.prevPageButton=a("<div />");q.css({position:"absolute",left:5,top:c/2-10,width:30,height:30,background:u(s.images.folder+"/left.png"),cursor:"pointer"});
w(q,{borderRadius:"4px"});q.click(function(){e.prevPage()});Y.append(q);q=e.nextPageButton=a("<div />");q.css({position:"absolute",right:5,top:c/2-10,width:30,height:30,background:u(s.images.folder+"/right.png"),cursor:"pointer"});w(q,{borderRadius:"4px"});q.click(function(){e.nextPage()});Y.append(q);Y.mouseover(function(){e.showControls()});Y.mouseleave(function(){e.hideControls()});e.hideControls();e.showControls()};S.prototype.hideControls=function(){this.prevPageButton.hide();this.nextPageButton.hide()};
S.prototype.showControls=function(){0<this.page&&this.prevPageButton.show();this.page<this.pagesCount-1&&this.nextPageButton.show()};S.prototype.open=function(c,e){var f=this,d=this.settings,G=a('<img class="altgallery-preloader" src="'+s.images.loader+'" alt="" />');g(G);G.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});var m=a('<img src="'+c.thumb+'" />');y(c.thumb,function(h){a(".altgallery-imageFrame",f.canvas.element).remove();a(".altgallery-frameMask",f.canvas.element).fadeIn(s.animation.duration);
var n=document.createElement("div");a(n).addClass("altgallery-imageFrame").css({position:"absolute",padding:8,background:z(d.colorScheme.imageBGColor),zIndex:30});a(n).hide();var k=H.fit(h.width,h.height,f.canvas.width()-48,f.canvas.height()-48),g={left:k.left+16+k.width/3,top:k.top+16+k.height/3,width:k.width/3,height:k.height/3};if(e!==b&&(e.left!==b&&(g.left=e.left),e.top!==b))g.top=e.top;a(n).css(g);var h=H.fit(h.width,h.height,f.canvas.width()-48,f.canvas.height()-48),q={left:h.left+16+h.width/
3,top:h.top+16+h.height/3,width:h.width/3,height:h.height/3,margin:0,padding:0,border:"none",maxWidth:"none",maxHeight:"none",cursor:"pointer"};m.css(q);a(n).append(m);f.canvas.element.append(n);m.animate(h,s.animation.duration);a(n).animate({opacity:"show",left:k.left+16,top:k.top+16,width:k.width,height:k.height},s.animation.duration,function(){var b=a('<div class="captionContainer"></div>');b.css({position:"absolute",left:8,top:8,width:k.width,height:k.height,overflow:"hidden",cursor:"pointer"});
a(n).append(b);if(c.description){var e=parseInt(d.imageCaption.fontSize),e=e||f.defaultSettings.imageCaption.fontSize,h=a("<div><div>"+c.description.replace("\n","<br/>")+"</div></div>");h.css({position:"absolute",left:0,width:k.width,fontFamily:d.imageCaption.fontName,fontSize:e+"px",lineHeight:1.25,color:z(d.imageCaption.color),background:F(d.imageCaption.bgColor,d.imageCaption.bgAlpha/100)});b.append(h);"bottom"==d.imageCaption.position.toLowerCase()?(h.css({bottom:"-33px",borderTop:"1px solid "+
F(d.imageCaption.bgColor,(d.imageCaption.bgAlpha+10)/100)}),h.children("div").css({padding:"8px 10px 10px"}),h.animate({bottom:0})):(h.css({top:"-33px",borderBottom:"1px solid "+F(d.imageCaption.bgColor,(d.imageCaption.bgAlpha+10)/100)}),h.children("div").css({padding:"10px 10px 8px"}),h.animate({top:0}))}var l=a('<a class="altgallery-close" style="position:absolute; right:-15px; top:-13px; width:30px; height:30px; z-index:40; background:no-repeat center; cursor:pointer;"></a>');l.css({backgroundImage:u(s.images.close)});
l.click(function(){a(this).remove();h&&h.remove();g.opacity="hide";a(n).animate(g,s.animation.duration,function(){a(this).remove()});m.animate(q,s.animation.duration);a(".altgallery-frameMask",f.canvas.element).fadeOut(s.animation.duration)});a(n).append(l);b.click(function(){l.remove();h&&h.remove();g.opacity="hide";a(n).animate(g,s.animation.duration,function(){a(this).remove();f.next()});m.animate(q,s.animation.duration)});setTimeout(function(){a(n).append(G)},500)})});y(c.source,function(){G.hide();
f.canvas.element.find(".altgallery-preloader").remove();a(m).attr("src",c.source)})};S.prototype.prev=function(){this.currentItem--;0>this.currentItem&&(this.currentItem=this.items.length-1);this.open(this.getCurrentItem())};S.prototype.next=function(){this.currentItem++;this.currentItem>=this.items.length&&(this.currentItem=0);this.open(this.getCurrentItem())};S.prototype.placePage=function(){var a=this;a.hideControls();a.imagesContainer.animate({left:-(a.page*a.pageWidth)},{duration:s.animation.duration,
complete:function(){a.showControls()}})};S.prototype.prevPage=function(){this.page--;0>this.page&&(this.page=0);this.placePage()};S.prototype.nextPage=function(){this.page++;this.page>=this.pagesCount&&(this.page=this.pagesCount-1);this.placePage()};J.prototype.init=function(){var a=this.settings;this.initFrame();this.initNavigation();this.initCaption();this.initButtons();this.initThumbnails();this.initImage();switch(a.initialState.toLowerCase()){case "show thumbnails":this.showThumbnails();break;
default:case "load image":case "show image":this.showImage();break;case "start slideshow":this.showImage(),this.slideshowStart()}};J.prototype.initFrame=function(){var b=this.canvas,e=this.settings,f=this.frame=a("<div></div>"),c=b.width()-10,d=b.height()-10;f.css({position:"absolute",left:5,top:5,width:c,height:d,overflow:"hidden",background:z(e.buttons.bgColor)});w(f,{borderRadius:"5px",boxShadow:"0 0 4px rgba(0, 0, 0, 0.5)"});var m=this.content=a("<div></div>"),c=this.contentWidth=c-18,d=this.contentHeight=
d-43;m.css({position:"absolute",left:9,top:9,width:c,height:d,background:z(e.base.color)});w(m,{borderRadius:"4px"});f.append(m);e=this.preloader=a('<img alt="" />');e.attr("src",s.images.loader);e.css({position:"absolute",left:"50%",top:"50%",zIndex:100,margin:"-16px 0 0 -16px"});m.append(e);b.append(f)};J.prototype.initNavigation=function(){this.initPrevButton();this.initNextButton()};J.prototype.initPrevButton=function(){var b=this.settings,e=a("<div></div>");e.css({position:"absolute",left:0,
top:this.contentHeight/2-20,zIndex:10,width:21,height:60,background:z(b.buttons.bgColor),cursor:"default"});w(e,{borderRadius:"10px",boxShadow:"5px 0 15px rgba(0, 0, 0, 0.5)"});this.frame.append(e);prevOverlay=a("<div></div>");prevOverlay.css({position:"absolute",left:0,top:this.contentHeight/2-30,zIndex:10,width:9,height:80,background:z(b.buttons.bgColor),cursor:"default"});this.frame.append(prevOverlay);var f=this.prevButton=a('<div><div style="margin:25px 0 0 6px; width:9px; height:9px; background:url('+
s.images.folder+'cubic-buttons.png) no-repeat -8px -8px;"></div></div>');f.css({position:"absolute",left:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,cursor:"pointer"});this.frame.append(f);var c;this.canvas.element.hover(function(){clearTimeout(c);e.stop().show().css({opacity:1}).animate({left:0});f.stop().animate({left:0,opacity:1})},function(){c=setTimeout(function(){e.stop().animate({left:-12},function(){e.fadeOut()});f.stop().animate({left:-12,opacity:0})},100)});this.hidePrevButton=
function(){e.css({visibility:"hidden"});prevOverlay.css({visibility:"hidden"});f.css({visibility:"hidden"})};this.showPrevButton=function(){e.css({visibility:"visible"});prevOverlay.css({visibility:"visible"});f.css({visibility:"visible"})}};J.prototype.initNextButton=function(){var b=this.settings,e=a("<div></div>");e.css({position:"absolute",right:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,background:z(b.buttons.bgColor),cursor:"default"});w(e,{borderRadius:"10px",boxShadow:"-5px 0 15px rgba(0, 0, 0, 0.5)"});
this.frame.append(e);nextOverlay=a("<div></div>");nextOverlay.css({position:"absolute",right:0,top:this.contentHeight/2-30,zIndex:10,width:9,height:80,background:z(b.buttons.bgColor),cursor:"default"});this.frame.append(nextOverlay);var c=this.nextButton=a('<div><div style="margin:25px 0 0 6px; width:9px; height:9px; background:url('+s.images.folder+'cubic-buttons.png) no-repeat -8px -33px;"></div></div>');c.css({position:"absolute",right:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,
cursor:"pointer"});this.frame.append(c);var d;this.canvas.element.hover(function(){clearTimeout(d);e.stop().show().css({opacity:1}).animate({right:0});c.stop().animate({right:0,opacity:1})},function(){d=setTimeout(function(){e.stop().animate({right:-12},function(){e.fadeOut()});c.stop().animate({right:-12,opacity:0})},100)});this.hideNextButton=function(){e.css({visibility:"hidden"});nextOverlay.css({visibility:"hidden"});c.css({visibility:"hidden"})};this.showNextButton=function(){e.css({visibility:"visible"});
nextOverlay.css({visibility:"visible"});c.css({visibility:"visible"})}};J.prototype.initCaption=function(){var b=this.caption=a("<div></div>");b.css({position:"absolute",left:10,bottom:10,width:this.contentWidth-60,height:"14px",lineHeight:"14px",overflow:"hidden",fontFamily:"Arial, Helvetica, sans-serif",fontSize:"11px",color:"#777"});this.frame.append(b)};J.prototype.initButtons=function(){var b=this,e=b.settings,c=function(){a(this).css({borderColor:"#fff #bbb #bbb #fff"});w(this,{boxShadow:"0 0 2px rgba(0, 0, 0, 0.2)"})},
d=function(){a(this).css({borderColor:"transparent"});w(this,{boxShadow:"none"})};if(e.buttons.showSlideshowButton){var g=b.slideshowButton=a("<div></div>");g.css({position:"absolute",right:e.buttons.showThumbnailsButton?29:5,bottom:5,width:23,height:23,background:u(s.images.folder+"cubic-buttons.png")+" no-repeat 0px -51px",border:"1px solid",borderColor:"transparent",cursor:"pointer"});w(g,{borderRadius:"3px 4px 3px 4px"});g.hover(c,d);g.click(function(){b.showImage();b.slideshowStart()});b.frame.append(g)}e.buttons.showThumbnailsButton&&
(e=b.showThumbnailsButton=a("<div></div>"),e.css({position:"absolute",right:5,bottom:5,width:23,height:23,background:u(s.images.folder+"cubic-buttons.png")+" no-repeat -1px -126px",border:"1px solid",borderColor:"transparent",cursor:"pointer"}).hide(),w(e,{borderRadius:"3px 4px 3px 4px"}),e.hover(c,d),e.click(function(){b.showThumbnails()}),b.frame.append(e),e=b.showImagesButton=a("<div></div>"),e.css({position:"absolute",right:5,bottom:5,width:23,height:23,background:u(s.images.folder+"cubic-buttons.png")+
" no-repeat -1px -101px",border:"1px solid",borderColor:"transparent",cursor:"pointer"}).hide(),w(e,{borderRadius:"3px 4px 3px 4px"}),e.hover(c,d),e.click(function(){b.showImage()}),b.frame.append(e))};J.prototype.initImage=function(){var b=this.imageWidth=this.contentWidth-2*this.settings.base.visibleFrame,e=this.imageHeight=this.contentHeight-2*this.settings.base.visibleFrame,c=this.imagesFrame=a("<div></div>");c.css({position:"absolute",left:this.settings.base.visibleFrame,top:this.settings.base.visibleFrame,
width:b,height:e,overflow:"hidden"}).hide();w(c,{borderRadius:"3px"});this.content.append(c);b=this.imagesContainer=a("<div></div>");b.css({position:"relative",left:0,top:0});c.append(b)};J.prototype.showImage=function(a){var b=this,c=function(){function a(){setTimeout(function(){b.drag=!1},100)}b.cleanup();b.thumbnailsFrame.hide();b.imagesFrame.show();b.showImagesButton.hide();b.showThumbnailsButton.show();b.showPrevButton();b.showNextButton();b.prevButton.unbind("click").click(function(){b.slideshowStop();
b.prev()});b.nextButton.unbind("click").click(function(){b.slideshowStop();b.next()});var c=0;b.imagesContainer.draggable({axis:"x",distance:30,start:function(a,f){b.drag=!0;c=f.position.left},stop:function(f,d){30<Math.abs(Math.abs(c)-Math.abs(d.position.left))?c<d.position.left?b.prev(s.animation.duration,a):b.next(s.animation.duration,a):b.place(s.animation.duration,a)}});b.imagesContainer.unbind("dblclick").dblclick(function(){b.showThumbnails()});N(b.imagesContainer)};!1!==a?(b.hidePrevButton(),
b.hideNextButton(),b.open(b.getCurrentItem(),c)):c()};J.prototype.initThumbnails=function(){function b(){c.cleanup()}var c=this,f=c.canvas,d=c.thumbnailsWidth=c.contentWidth-2*c.settings.base.visibleFrame,l=c.thumbnailsHeight=c.contentHeight-2*c.settings.base.visibleFrame,m=c.thumbnailsFrame=a("<div></div>");m.css({position:"absolute",left:c.settings.base.visibleFrame,top:c.settings.base.visibleFrame,width:d,height:l,overflow:"hidden"}).hide();w(m,{borderRadius:"3px"});c.content.append(m);var h=c.thumbnailsContainer=
a('<div class="thumbnailsContainer"></div>');h.css({position:"relative",left:0,top:0,width:d*Math.ceil(c.items.length/20),height:l});m.append(h);for(var n=Math.round((d-5)/5),k=Math.round((l-4)/4),r=Math.round((d-5*n)/10),q=Math.round((l-4*k)/8),l=0;l<c.items.length;l++)(function(t,m){y(m.thumb,function(l){var G=t%5,x=Math.floor(t%20/5),p=a('<a class="altgallery-thumbnail altgallery-thumbnail-'+t+'"></a>');g(p);p.attr({href:m.source}).css({display:"block",position:"absolute",left:G*n+Math.floor(t/
20)*d+1*G+r,top:x*k+1*x+q,width:n,height:k,overflow:"hidden",cursor:"pointer",zIndex:Math.floor(t%20/5)});w(p,{boxShadow:"0px 3px 3px rgba(0, 0, 0, 0.5)"});p.mouseover(function(){if(c.enableThumbnailsHover&&!c.drag){var q=0;0==G?q=n/8:4==G&&(q=-n/8);var g=0;0==x?g=k/8:3==x&&(g=-k/8);c.updateCaption(m.description||"Image "+(t+1)+" / "+c.items.length);c.cleanup();f.element.find(".altgallery-thumbnail").css({opacity:0.8});var r=a(this).clone();r.addClass("altgallery-clone");r.css({left:a(this).offset().left-
h.offset().left,top:a(this).offset().top-h.offset().top,zIndex:10,opacity:1});w(r,{boxShadow:"5px 15px 13px rgba(0, 0, 0, 0.7)"});h.append(r);var p=r.find("img");r.animate({width:1.25*n,height:1.25*k,marginLeft:-n/8+q,marginTop:-k/8+g},{duration:"fast",easing:"linear",step:function(){p.css(H.fill(l.width,l.height,r.width(),r.height()))}});r.click(function(){c.drag||(c.currentItem=t,r.unbind("mouseleave"),c.canvas.element.unbind("mouseleave",b),w(r,{boxShadow:"none"}),r.animate({left:c.currentPage*
d,top:0,width:c.imageWidth,height:c.imageHeight,marginLeft:0,marginTop:0},{duration:"normal",step:function(){p.css(H.fill(l.width,l.height,r.width(),r.height()))},complete:function(){c.showImage()}}));return!1});r.mouseleave(function(){c.cleanup();c.updateCaption(" ")})}});p.click(function(){c.drag||(c.currentItem=t,c.showImage());return!1});var u=a("<img />");u.attr({src:m.thumb}).css({display:"block",position:"absolute",border:"none"}).css(H.fill(l.width,l.height,n,k));p.append(u);h.append(p)})})(l,
c.items[l]);c.canvas.element.mouseleave(b);c.currentPage=0;c.preloader.hide()};J.prototype.showThumbnails=function(){function a(b,c){g.thumbnailsContainer.stop().animate({left:-g.currentPage*g.thumbnailsWidth},{duration:b||2*s.animation.duration,complete:function(){g.enableThumbnailsHover=!0;"function"==typeof c&&c()}})}function b(c,f){0<g.currentPage&&(g.currentPage--,g.enableThumbnailsHover=!1,g.cleanup());a(c,f);g.updateNavigation()}function c(b,f){g.currentPage<Math.ceil(g.items.length/20)-1&&
(g.currentPage++,g.enableThumbnailsHover=!1,g.cleanup());a(b,f);g.updateNavigation()}function d(){setTimeout(function(){g.drag=!1},100)}var g=this;g.slideshow&&g.slideshowStop();g.updateCaption(" ");g.imagesFrame.hide();g.thumbnailsFrame.show();g.showThumbnailsButton.hide();g.showImagesButton.show();g.prevButton.unbind("click").click(function(){b()});g.nextButton.unbind("click").click(function(){c()});g.updateNavigation();var m=0;g.thumbnailsContainer.draggable({axis:"x",distance:30,start:function(a,
b){g.drag=!0;m=b.position.left;g.cleanup()},stop:function(h,n){30<Math.abs(Math.abs(m)-Math.abs(n.position.left))?m<n.position.left?b(s.animation.duration,d):c(s.animation.duration,d):a(s.animation.duration,d)}});N(g.thumbnailsContainer)};J.prototype.updateNavigation=function(){var a=Math.ceil(this.items.length/20);0<this.currentPage?this.showPrevButton():this.hidePrevButton();this.currentPage<a-1?this.showNextButton():this.hideNextButton()};J.prototype.updateCaption=function(a){(a=a||this.getCurrentItem().description)?
this.caption.html(a.replace("\n","<br/>")):this.caption.html("Image "+(this.currentItem+1)+" / "+this.items.length)};J.prototype.loadImage=function(c,e){var f=this,c=c%f.items.length;f.items[c]!==b&&y(f.items[c].source,function(b){var d="altgallery-image-"+c;if(!f.imagesContainer.find("."+d).size()){d=a('<div class="'+d+'"></div>');d.css({position:"absolute",left:f.imageWidth*c,top:0,width:f.imageWidth,height:f.imageHeight,overflow:"hidden"});var g=a('<img style="position:absolute;" />');g.attr("src",
b.src);g.css(H.fill(b.width,b.height,f.imageWidth,f.imageHeight));d.append(g);f.imagesContainer.append(d)}"function"==typeof e&&e(b)})};J.prototype.open=function(b,c){var f=this,d="altgallery-image-"+f.currentItem;f.imagesContainer.find("."+d).size()?"function"==typeof c&&c():(f.preloader.show(),y(b.source,function(b){var o=a('<div class="'+d+'"></div>');o.css({position:"absolute",left:f.imageWidth*f.currentItem,top:0,width:f.imageWidth,height:f.imageHeight,overflow:"hidden"});var h=a('<img style="position:absolute;" />');
h.attr("src",b.src);h.css(H.fill(b.width,b.height,f.imageWidth,f.imageHeight));o.append(h);f.imagesContainer.append(o);f.preloader.hide();"function"==typeof c&&c()}));f.imagesContainer.stop().css({left:-f.imageWidth*f.currentItem});f.updateCaption();f.loadImage(b.id+1);f.loadImage(b.id-1)};J.prototype.place=function(a,b){this.imagesContainer.stop().animate({left:-this.imageWidth*this.currentItem},{duration:a||2*s.animation.duration,complete:function(){"function"==typeof b&&b()}})};J.prototype.prev=
function(a,b){var c=this;if(0<c.currentItem){c.currentItem--;var d=setTimeout(function(){c.preloader.show()},500);c.loadImage(c.currentItem,function(){clearTimeout(d);c.preloader.hide();c.place(a,b);c.updateCaption();c.loadImage(c.currentItem-1)})}else c.currentItem=c.items.length-1,c.showImage()};J.prototype.next=function(a,b){var c=this;if(c.currentItem<c.items.length-1){c.currentItem++;var d=setTimeout(function(){c.preloader.show()},500);c.loadImage(c.currentItem,function(){clearTimeout(d);c.preloader.hide();
c.place(a,function(){c.slideshow&&c.slideshowStart();"function"==typeof b&&b()});c.updateCaption();c.loadImage(c.currentItem+1)})}else c.currentItem=0,c.showImage(),c.slideshow&&c.slideshowStart()};J.prototype.slideshowStart=function(){var a=this;a.showImage(!1);clearTimeout(a.slideshowTimer);a.slideshow=!0;a.slideshowButton.css({background:u(s.images.folder+"cubic-buttons.png")+" no-repeat 0px -76px"});a.slideshowButton.unbind("click").click(function(){a.slideshowStop()});a.slideshowTimer=setTimeout(function(){a.next()},
1E3*a.settings.slideshowDelay)};J.prototype.slideshowStop=function(){var a=this;a.slideshow=!1;clearTimeout(a.slideshowTimer);a.slideshowButton.css({background:u(s.images.folder+"cubic-buttons.png")+" no-repeat 0px -51px"});a.slideshowButton.unbind("click").click(function(){a.slideshowStart()})};J.prototype.cleanup=function(){this.canvas.element.find(".altgallery-clone").remove();a(this.canvas.element).find(".altgallery-thumbnail").css({opacity:1})};V.prototype.showScrollbar=function(){var b=this,
c=this.settings,d=this.canvas,g=a('<div class="altgallery-scrollbar"></div>'),l=Math.round(0.8*d.width())-36;g.css({position:"absolute",zIndex:1E3,left:(d.width()-l)/2,bottom:5,width:l+36,height:17,background:F(c.scrollbar.bgColor,c.scrollbar.bgAlpha/100),"-moz-border-radius":8,"-webkit-border-radius":8,borderRadius:8});if(a.browser.msie&&9>a.browser.version){var m=sprintf("%02x%s",255*c.scrollbar.bgAlpha/100,z(c.scrollbar.bgColor).replace("#",""));g.css({filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+
m+",endColorstr=#"+m+")"})}var h=a('<div class="altgallery-scrollbar-handle"></div>'),n=l/b.items.length;h.css({position:"absolute",left:Math.round(b.currentItem*n),top:-10,width:Math.floor(n),height:30});var k=a("<div />");k.css({position:"relative",top:10,height:13,background:z(c.scrollbar.handleColor),opacity:c.scrollbar.handleAlpha/100,cursor:"ew-resize"});k.hover(function(){k.css({opacity:1})},function(){k.css({opacity:c.scrollbar.handleAlpha/100})});h.append(k);h.draggable({axis:"x",containment:"parent",
stop:function(a,c){b.currentItem=Math.floor(c.position.left/l*b.items.length);h.css({left:Math.round(b.currentItem*n)});b.animate()}});m=a("<div></div>");m.css({position:"relative",top:2,height:13,margin:"0 18px"});m.click(function(c){c=c.pageX-a(this).offset().left;b.currentItem=Math.floor(c/l*b.items.length);h.css({left:Math.round(b.currentItem*n)});b.animate()});var r={position:"absolute",top:2,width:16,height:16,fontFamily:"Arial, Helvetica, sans-serif",fontSize:"10px",lineHeight:"14px",textAlign:"center",
color:z(c.scrollbar.arrowsColor),opacity:c.scrollbar.arrowsAlpha/100,cursor:"pointer"},q=a("<div>&#9668;</div>");q.css(r);q.css({left:1});q.click(function(){b.prev()});g.append(q);q=a("<div>&#9658;</div>");q.css(r);q.css({right:1});q.click(function(){b.next()});g.append(q);m.append(h);g.append(m);d.element.append(g);N(h)};V.prototype.updateScrollbar=function(){var a=this.canvas,b=(Math.round(0.8*a.width())-36)/this.items.length;a.element.find(".altgallery-scrollbar-handle").css({left:Math.round(this.currentItem*
b)})};V.prototype.getItemStyle=function(a,b){var c=this.settings,d=this.canvas,g,m;g=this.getItemX(b);m=this.getItemZ(b);var h;h=Math.abs(g);var n=H.fit(a.width,a.height,c.maxImageWidth*(1>h?1:2>h?0.55:3>h?0.5:0.6-0.05*h),d.height()-60);return{zIndex:10*m,left:(d.width()-n.width)/2+g*d.width()/8+(g?g/h*c.maxImageWidth/3:0),top:(d.height()-n.height)/2-30,width:n.width,height:n.height,opacity:g?0.8:1,transform:{rotateY:-(g?g/h:0)*c.imageAngle+"deg"}}};V.prototype.render=function(){var b=this,d=this.settings,
f=this.canvas,l=this.items,p=!c();b.scene.empty();b.scene.css({"-webkit-perspective":400,"-moz-perspective":400,perspective:400});var m,h,n,k,r,q=0;k=b.currentItem;r=2*Math.max(k,l.length-k);for(h=1;h<=r;h++)m=k+(h%2?parseInt(h/2):-parseInt(h/2)),0<=m&&m<l.length&&function(c){setTimeout(function(){n=b.getItemX(c);y(l[c].source,function(h){var k=b.getItemStyle(h,c),q=a('<a class="altgallery-item-'+c+'"></a>');l[c].link&&(q.attr("href",l[c].link),l[c].target&&q.attr("target",l[c].target));q.css({display:"block",
position:"absolute",zIndex:k.zIndex,left:k.left,top:k.top,width:k.width,height:k.height,overflow:"visible",background:"#000",cursor:"pointer",outline:"none"});p&&L(q,{rotateY:k.transform.rotateY});var m=a('<img src="" alt="" />');m.attr("src",h.src);g(m);m.css({display:"block",width:k.width,height:k.height,opacity:k.opacity});q.append(m);if(b.showReflections){h=m.clone();h.css({position:"absolute",opacity:d.reflectionAlpha/100,"-moz-transform":"scaleY(-1)","-webkit-transform":"scaleY(-1)","-o-transform":"scaleY(-1)",
"-ms-transform":"scaleY(-1)",transform:"scaleY(-1)",zIndex:1});var r=a('<div class="altgallery-overlay"></div>');r.css({position:"absolute",top:k.height,width:k.width,height:k.height,background:f.element.css("backgroundColor"),zIndex:0});var u=a('<div class="altgallery-overlay"></div>');u.css({position:"absolute",top:k.height,width:k.width,height:k.height,zIndex:2});var k=f.element.css("backgroundColor"),s=[F(k,0),F(k,0.5),F(k,1)];a.browser.mozilla?u.css({background:"-moz-linear-gradient(top, "+s[0]+
" 0%, "+s[1]+" 15%, "+s[2]+" 50%)"}):a.browser.webkit?u.css({background:"-webkit-linear-gradient(top, "+s[0]+" 0%, "+s[1]+" 15%, "+s[2]+" 50%)"}):a.browser.opera?u.css({background:"-o-linear-gradient(top, "+s[0]+" 0%, "+s[1]+" 15%, "+s[2]+" 50%)"}):a.browser.msie?(k=z(k).replace("#",""),u.css({filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00"+k+",endColorstr=#ff"+k+",GradientType=0)"})):u.css({background:"linear-gradient(top, "+s[0]+" 0%, "+s[1]+" 15%, "+s[2]+" 50%)"});q.append(h);
q.append(r);q.append(u)}q.click(function(){if(!b.drag){b.currentItem=b.currentItem+n;if(b.currentItem<0)b.currentItem=0;else if(b.currentItem>=l.length)b.currentItem=l.length-1;b.animate()}return false}).hover(function(){m.css({opacity:1})},function(){m.css({opacity:n?0.8:1})});c==b.currentItem&&q.unbind("click").click(function(){if(b.drag)return false});b.scene.append(q)})},100*q++)}(m);d.useScrollBar&&b.showScrollbar();a.browser.mozilla&&b.showReflections&&b.animate()};V.prototype.animate=function(){function a(c,
o,h){y(g[c].source,function(a){function n(a){function c(b){return m[b]+(r[b]-m[b])*a/1E4}k.css({left:c("left"),top:c("top"),zIndex:parseInt(c("zIndex")),width:c("width"),height:c("height")});q.css({width:c("width"),height:c("height")});b.showReflections&&p.css({top:c("height"),width:c("width"),height:c("height")});l&&L(k,{rotateY:parseFloat(m.transform.rotateY)+(parseFloat(r.transform.rotateY)-parseFloat(m.transform.rotateY))*a/1E4+"deg"})}var k=b.scene.find(".altgallery-item-"+c),q=k.find("img"),
m={left:parseInt(k.css("left")),top:parseInt(k.css("top")),zIndex:parseInt(k.css("z-index")),width:k.width(),height:k.height(),opacity:k.find("img").css("opacity"),transform:L(k)},r=b.getItemStyle(a,c);h||k.show();k.unbind("click").click(function(){b.drag||(b.currentItem+=o,0>b.currentItem?b.currentItem=0:b.currentItem>=g.length&&(b.currentItem=g.length-1),b.animate());return!1}).unbind("hover").hover(function(){q.first().css({opacity:1})},function(){q.first().css({opacity:o?0.8:1})});q.first().css({opacity:r.opacity});
var p=k.find(".altgallery-overlay");k.stop().prop("animate",0);h?n(1E4):k.animate({animate:1E4},{duration:500*d.flipDuration,easing:"linear",step:function(a){n(a)},complete:function(){k.prop("animate",0);c==b.currentItem&&k.unbind("click").click(function(){if(b.drag)return!1})}})})}var b=this,d=this.settings,g=this.items,l=!c(),m,h,n,k,r;k=b.currentItem;r=2*Math.max(k,g.length-k);for(h=1;h<=r;h++)if(m=k+(h%2?parseInt(h/2):-parseInt(h/2)),0<=m&&m<g.length){var q=Math.abs(b.currentItem-m);n=b.getItemX(m);
4>q?a(m,n):(b.scene.find(".altgallery-item-"+m).hide(),a(m,n,!0))}d.useScrollBar&&b.updateScrollbar()};V.prototype.open=function(a){this.currentItem=a.id;this.animate()};V.prototype.prev=function(a){a=this.currentItem-(a||1);0>a&&(a=0);this.currentItem!=a&&(this.currentItem=a,this.animate())};V.prototype.next=function(a){a=this.currentItem+(a||1);a>=this.items.length&&(a=this.items.length-1);this.currentItem!=a&&(this.currentItem=a,this.animate())};M.prototype.render=function(){var b=this,c=this.settings,
d=this.canvas;d.element.css({fontFamily:c.fontName,fontSize:parseInt(c.fontSize)+"px",lineHeight:1.2*parseInt(c.fontSize)+"px"});var l=a('<div class="altgallery-imageFrame"></div>');l.css({width:d.width()-2*c.frameSize,height:d.height()-2*c.frameSize,padding:c.frameSize,background:z(c.frameColor),borderRadius:c.cornerRadius/2});var p=a('<div class="altgallery-image"></div>');p.css({position:"relative",width:d.width()-2*c.frameSize,height:d.height()-2*c.frameSize,overflow:"hidden",background:z(c.backgroundColor),
borderRadius:c.cornerRadius/2-c.frameSize/4,cursor:"pointer"});var m=a('<img src="" alt="" />');g(p.children("img"));m.css({position:"absolute"});l.click(function(){b.next()});p.append(m);l.append(p);d.element.append(l);b.open(b.getCurrentItem());switch(c.initialState.toLowerCase()){default:case "show albums":this.showAlbums();break;case "show thumbnails":this.showThumbnails();case "load image":case "start slideshow":}};M.prototype.showAlbums=function(){var b=this,c=this.canvas,d=this.settings;if(!c.element.find(".altgallery-albums").size()){var l=
function(){var a=q*k+1,c=q*k+k;c>b.albums.length&&(c=b.albums.length);E.html(a+"-"+c+" "+d.translation.Of+" "+b.albums.length);0>=q?(X.css({opacity:0.3,cursor:"default"}),X.unbind("click").click(function(){return false})):(X.css({opacity:1,cursor:"pointer"}),X.unbind("click").click(x));q>=r-1?(w.css({opacity:0.3,cursor:"default"}),w.unbind("click").click(function(){return false})):(w.css({opacity:1,cursor:"pointer"}),w.unbind("click").click(z))};b.hideThumbnails();b.hideButtons();b.hideCaption();
b.hideNavigation();var p=a('<div class="altgallery-albums"></div>'),m=c.width()-2*d.frameSize,h=d.iconHeight+115;p.css({position:"absolute",left:d.frameSize,top:(c.height()-h)/2,width:c.width()-2*d.frameSize,height:h,overflow:"hidden",color:"#fff",border:"1px #000",borderStyle:"solid none",zIndex:2});var n=a('<div class="altgallery-albums-overlay"></div>');n.css({position:"absolute",left:d.frameSize,top:(c.height()-h)/2,width:c.width()-2*d.frameSize,height:h+1,background:"#000",opacity:d.panelBackgroundAlpha/
100,zIndex:1});c.element.append(n);h=a("<div></div>");h.css({position:"absolute",top:10,right:20});n=a('<a class="altgallery-close" href="#">'+d.translation.Close+"</a>");n.css({marginRight:0,color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",backgroundImage:u(s.images.folder+"zen-close.png"),paddingLeft:12});n.click(function(){b.hideAlbums();b.showButtons();b.showCaption();b.showNavigation();return!1});h.append(n);p.append(h);
var k=Math.floor((m-20)/(d.iconWidth+d.iconPadding)),k=k>b.albums.length?b.albums.length:k,h=(d.iconWidth+d.iconPadding)*k-d.iconPadding,n=(d.iconWidth+d.iconPadding)*b.albums.length-d.iconPadding,r=Math.ceil(b.albums.length/k),q=0,t=a("<div>"+d.translation.Albums+"</div>");t.css({position:"absolute",left:9,top:0,padding:10,paddingLeft:25,textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.5)",fontWeight:"bold",background:"no-repeat left center",backgroundImage:u(s.images.folder+"zen-albums.png")});p.append(t);
var E=a("<span></span>");E.css({marginLeft:"1em",fontWeight:"normal"});t.append(E);t=a("<div></div>");t.css({position:"absolute",left:(m-h)/2-4,top:42,width:h+4,height:d.iconHeight+70,overflow:"hidden"});var v=a("<div></div>");v.css({position:"relative",left:0,width:n});t.append(v);m=a("<div></div>");m.css({position:"absolute",right:4,bottom:3,height:20,opacity:0.9});var X=a('<a href="#" style="float:left;"></a>');X.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",
backgroundImage:u(s.images.folder+"zen-prev.png")});var x=function(){0<q&&q--;var a=(d.iconWidth+d.iconPadding)*k*q;v.stop().animate({left:-a},2*s.animation.duration,"easeOutQuart");l();return!1};X.click(x);m.append(X);p.append(t);var w=a('<a href="#" style="float:left;"></a>');w.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:u(s.images.folder+"zen-next.png")});var z=function(){q<r-1&&q++;var a=(d.iconWidth+d.iconPadding)*k*q;v.stop().animate({left:-a},
2*s.animation.duration,"easeOutQuart");l();return!1};w.click(z);m.append(w);p.append(m);l();for(var A,m=0;m<b.albums.length;m++)(function(c,e){var h=a("<div></div>");h.css({position:"absolute",left:(d.iconWidth+d.iconPadding)*e,top:0,width:d.iconWidth+d.iconPadding+6,overflow:"hidden",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)"});var k=a('<div class="altgallery-thumbnail"></div>');k.css({position:"relative",width:d.iconWidth-2,height:d.iconHeight-2,overflow:"hidden",border:"1px solid",borderColor:b.currentAlbum==
e?"#000":"#fff",margin:"2px",cursor:"pointer"});y(c.items[0].thumb,function(b){var c=a('<img src="" alt="" />');c.attr("src",b.src);g(c);c.css({position:"absolute"});c.css(H.fill(b.width,b.height,d.iconWidth-2,d.iconHeight-2));k.append(c)},50*e);h.append(k);h.append('<div style="padding:7px 2px 2px; font-weight:bold;">'+(c.description||"Album "+(e+1))+"<div>");h.append('<div style="padding:1px 2px;">'+c.items.length+" "+(1==c.items.length?d.translation.Image:d.translation.Images)+"<div>");h.hover(function(){v.find(".altgallery-thumbnail").css({borderWidth:"1px",
margin:"2px"});k.css({borderWidth:"3px",margin:"0px"})},function(){k.css({borderWidth:"1px",margin:"2px"})}).click(function(){A||(b.currentAlbum!=e&&(b.currentItem=-1),b.currentAlbum=e,b.showThumbnails())});v.append(h)})(b.albums[m],m);c.element.append(p);1<r&&(v.draggable({axis:"x",start:function(){A=!0},stop:function(a,b){b.position.left>b.originalPosition.left?x():z();setTimeout(function(){A=!1},100)}}),N(p))}};M.prototype.hideAlbums=function(){this.canvas.element.find(".altgallery-albums, .altgallery-albums-overlay").remove()};
M.prototype.showThumbnails=function(){var b=this,c=this.canvas,d=this.settings,l=this.getCurrentAlbum();if(!c.element.find(".altgallery-images").size()){var p=function(){var a=t*r+1,b=t*r+r;b>l.items.length&&(b=l.items.length);v.html(a+"-"+b+" "+d.translation.Of+" "+l.items.length);0>=t?(x.css({opacity:0.3,cursor:"default"}),x.unbind("click").click(function(){return false})):(x.css({opacity:1,cursor:"pointer"}),x.unbind("click").click(z));t>=q-1?(A.css({opacity:0.3,cursor:"default"}),A.unbind("click").click(function(){return false})):
(A.css({opacity:1,cursor:"pointer"}),A.unbind("click").click(B))};b.hideAlbums();b.hideButtons();b.hideCaption();b.hideNavigation();var m=a('<div class="altgallery-images"></div>'),h=c.width()-2*d.frameSize,n=d.iconHeight+75;m.css({position:"absolute",left:d.frameSize,top:(c.height()-n)/2,width:c.width()-2*d.frameSize,height:n,overflow:"hidden",color:"#fff",border:"1px #000",borderStyle:"solid none",zIndex:2});var k=a('<div class="altgallery-images-overlay"></div>');k.css({position:"absolute",left:d.frameSize,
top:(c.height()-n)/2,width:c.width()-2*d.frameSize,height:n+1,background:"#000",opacity:d.panelBackgroundAlpha/100,zIndex:1});c.element.append(k);n=a("<div></div>");n.css({position:"absolute",top:10,right:20});1<b.albums.length&&(k=a('<a class="altgallery-back" href="#">'+d.translation.BackToAlbums+"</a>"),k.css({marginRight:"1.5em",color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",backgroundImage:u(s.images.folder+"zen-backToAlbums.png"),
paddingLeft:14}),k.click(function(){b.showAlbums();return!1}),n.append(k));k=a('<a class="altgallery-close" href="#">'+d.translation.Close+"</a>");k.css({marginRight:0,color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",backgroundImage:u(s.images.folder+"zen-close.png"),paddingLeft:12});k.click(function(){b.hideThumbnails();b.showButtons();b.showCaption();b.showNavigation();return false});n.append(k);m.append(n);var r=Math.floor((h-
20)/(d.iconWidth+d.iconPadding)),r=r>l.items.length?l.items.length:r,n=(d.iconWidth+d.iconPadding)*r-d.iconPadding,k=(d.iconWidth+d.iconPadding)*l.items.length-d.iconPadding,q=Math.ceil(l.items.length/r),t=0,E=a("<div>"+d.translation.Images+"</div>");E.css({position:"absolute",left:9,top:0,padding:10,paddingLeft:25,textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.5)",fontWeight:"bold",background:"no-repeat left center",backgroundImage:u(s.images.folder+"zen-thumbnails.png")});m.append(E);var v=a("<span></span>");
v.css({marginLeft:"1em",fontWeight:"normal"});E.append(v);E=a("<div></div>");E.css({position:"absolute",left:(h-n)/2-4,top:42,width:n+4,height:d.iconHeight+4,overflow:"hidden"});var w=a("<div></div>");w.css({position:"relative",left:0,width:k});E.append(w);m.append(E);h=a("<div></div>");h.css({position:"absolute",right:4,bottom:3,height:20,opacity:0.9});var x=a('<a href="#" style="float:left;"></a>');x.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",
backgroundImage:u(s.images.folder+"zen-prev.png")});var z=function(){t>0&&t--;var a=(d.iconWidth+d.iconPadding)*r*t;w.stop().animate({left:-a},s.animation.duration*2,"easeOutQuart");p();return false};x.click(z);h.append(x);var A=a('<a href="#" style="float:left;"></a>');A.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:u(s.images.folder+"zen-next.png")});var B=function(){t<q-1&&t++;var a=(d.iconWidth+d.iconPadding)*r*t;w.stop().animate({left:-a},
s.animation.duration*2,"easeOutQuart");p();return false};A.click(B);h.append(A);m.append(h);p();for(var C=!1,h=0;h<l.items.length;h++)(function(c,e){var h=a("<div></div>");h.css({position:"absolute",left:(d.iconWidth+d.iconPadding)*e,top:0,width:d.iconWidth+d.iconPadding+6,overflow:"hidden",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)"});var k=a('<div class="altgallery-thumbnail"></div>');k.css({position:"relative",width:d.iconWidth-2,height:d.iconHeight-2,overflow:"hidden",border:"1px solid",borderColor:b.currentItem==
e?"#000":"#fff",margin:"2px",cursor:"pointer"});y(c.thumb,function(b){var c=a('<img src="" alt="" />');c.attr("src",b.src);g(c);c.css({position:"absolute"});c.css(H.fill(b.width,b.height,d.iconWidth-2,d.iconHeight-2));k.append(c)},e*50);h.append(k);h.hover(function(){w.find(".altgallery-thumbnail").css({borderWidth:"1px",margin:"2px"});k.css({borderWidth:"3px",margin:"0px"})},function(){k.css({borderWidth:"1px",margin:"2px"})}).click(function(){if(!C){b.currentItem=e;b.open(b.getCurrentItem())}});
w.append(h)})(l.items[h],h);c.element.append(m);1<q&&(w.draggable({axis:"x",start:function(){C=true},stop:function(a,b){b.position.left>b.originalPosition.left?z():B();setTimeout(function(){C=false},100)}}),N(m))}};M.prototype.hideThumbnails=function(){this.canvas.element.find(".altgallery-images, .altgallery-images-overlay").remove()};M.prototype.showButtons=function(){var b=this;if("never"!=b.settings.showButtons.toLowerCase()&&(b.settings.showAlbumsButton||b.settings.showThumbnailsButton)&&!b.canvas.element.find(".altgallery-buttons").size()){var c=
a('<div class="altgallery-buttons"></div>');c.css({position:"absolute",right:b.settings.frameSize,top:25+b.settings.frameSize,padding:"3px 3px 3px 1px",background:"rgba(0, 0, 0, "+b.settings.buttonsBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderRight:"none","-moz-border-top-left-radius":"3px","-moz-border-bottom-left-radius":"3px","-webkit-border-top-left-radius":"3px","-webkit-border-bottom-left-radius":"3px","border-top-left-radius":"3px","border-bottom-left-radius":"3px"});
if(a.browser.msie&&9>a.browser.version){var d=Math.round(255*parseInt(b.settings.buttonsBackgroundAlpha)/100),d=16>d?"0"+d.toString(16):d.toString(16);c.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+d+"000000,endColorstr=#"+d+"000000)"})}b.settings.showAlbumsButton&&1<b.albums.length&&(d=a('<a href="#" style="float:left;"></a>'),d.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:u(s.images.folder+
"zen-albums.png"),opacity:0.8}),d.click(function(){b.showAlbums();return!1}),c.append(d));b.settings.showThumbnailsButton&&(d=a('<a href="#" style="float:left;"></a>'),d.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:u(s.images.folder+"zen-thumbnails.png"),opacity:0.8}),d.click(function(){b.showThumbnails();return false}),c.append(d));b.canvas.element.append(c)}};M.prototype.hideButtons=function(){this.canvas.element.find(".altgallery-buttons").remove()};
M.prototype.showCaption=function(){this.hideCaption();if("never"!=this.settings.showCaption.toLowerCase()&&(this.getCurrentAlbum()&&this.getCurrentAlbum().description||this.getCurrentItem()&&this.getCurrentItem().description)){var b=a('<div class="altgallery-caption"></div>');b.css({position:"absolute",left:this.settings.frameSize,top:25+this.settings.frameSize,maxWidth:this.canvas.width()-100,padding:"4px 10px 5px 7px",color:"#fff",textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.3)",background:"rgba(0, 0, 0, "+
this.settings.captionBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderLeft:"none","-moz-border-top-right-radius":"3px","-moz-border-bottom-right-radius":"3px","-webkit-border-top-right-radius":"3px","-webkit-border-bottom-right-radius":"3px","border-top-right-radius":"3px","border-bottom-right-radius":"3px"});if(a.browser.msie&&9>a.browser.version){var c=Math.round(255*parseInt(this.settings.captionBackgroundAlpha)/100),c=16>c?"0"+c.toString(16):c.toString(16);b.css({borderColor:"#000",
filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+c+"000000,endColorstr=#"+c+"000000)"})}this.getCurrentAlbum().description&&b.append('<div style="font-weight:bold;">'+this.getCurrentAlbum().description.replace("\n","<br/>")+"</div>");this.getCurrentItem().description&&b.append('<div style="">'+this.getCurrentItem().description.replace("\n","<br/>")+"</div>");this.canvas.element.append(b)}};M.prototype.hideCaption=function(){this.canvas.element.find(".altgallery-caption").remove()};
M.prototype.showNavigation=function(){var b=this;if("never"!=b.settings.showButtons.toLowerCase()&&b.settings.showNavigationButton&&!b.canvas.element.find(".altgallery-navigation").size()){var c=a('<div class="altgallery-navigation"></div>');c.css({position:"absolute",right:b.settings.frameSize,bottom:25+b.settings.frameSize,padding:"3px 3px 3px 1px",background:"rgba(0, 0, 0, "+b.settings.buttonsBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderRight:"none","-moz-border-top-left-radius":"3px",
"-moz-border-bottom-left-radius":"3px","-webkit-border-top-left-radius":"3px","-webkit-border-bottom-left-radius":"3px","border-top-left-radius":"3px","border-bottom-left-radius":"3px"});if(a.browser.msie&&9>a.browser.version){var d=Math.round(255*parseInt(b.settings.buttonsBackgroundAlpha)/100),d=16>d?"0"+d.toString(16):d.toString(16);c.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+d+"000000,endColorstr=#"+d+"000000)"})}b.settings.showNavigationButton&&
(d=a('<a href="#" style="float:left;"></a>'),d.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:u(s.images.folder+"zen-prev.png"),opacity:0.8}),d.click(function(){b.prev();return!1}),c.append(d),d=a('<a href="#" style="float:left;"></a>'),d.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:u(s.images.folder+"zen-next.png"),opacity:0.8}),d.click(function(){b.next();
return!1}),c.append(d));b.canvas.element.append(c)}};M.prototype.hideNavigation=function(){this.canvas.element.find(".altgallery-navigation").remove()};M.prototype.open=function(b){var c=this,d=this.canvas,l=this.settings;c.hideAlbums();c.hideThumbnails();c.showButtons();c.showCaption();c.showNavigation();d.element.find(".altgallery-image img").hide();var p=d.element.find(".altgallery-imageFrame"),m=a('<img class="altgallery-preloader" src="'+s.images.loader+'" alt="" />');g(m);m.css({position:"absolute",
left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});y(b.source,function(a){m.hide();d.element.find(".altgallery-preloader").remove();var g=d.element.find(".altgallery-image img");"fit"==l.imageScaleMode?g.css(H.fit(a.width,a.height,d.width()-2*l.frameSize,d.height()-2*l.frameSize)):g.css(H.fill(a.width,a.height,d.width()-2*l.frameSize,d.height()-2*l.frameSize));g.attr("src",b.source).fadeIn(2*s.animation.duration);c.cache()});setTimeout(function(){d.element.find(".altgallery-preloader").remove();
p.append(m)},500)};M.prototype.prev=function(){0<this.currentItem?this.currentItem--:this.currentItem=this.getCurrentAlbum().items.length-1;this.open(this.getCurrentItem())};M.prototype.next=function(){this.currentItem<this.getCurrentAlbum().items.length-1?this.currentItem++:this.currentItem=0;this.open(this.getCurrentItem())};var s={};a.altgallery=altgallery=function(c,d,f){function g(){l.each(function(){var f,k=c,h=d;f=a(this);s=k;var g,l,m,u=U();l=new ea(f,k);g=k.config||{};var v=function(b){a(document).ready(function(){setTimeout(function(){var a=
function(a){if(a.match(/Art/i))return"art";if(a.match(/Aura/i))return"aura";if(a.match(/Box/i))return"box";if(a.match(/Cubic/i))return"cubic";if(a.match(/PhotoFlow/i))return"photoflow";if(a.match(/Zen/i))return"zen"};ha!=32*qa&&(b=[]);switch(k.type?k.type.toLowerCase():g.galleryName?k.type=a(g.galleryName):k.type="box"){case "art":case "promo":m=new W(l,b,g.settings||{});break;case "aura":m=new K(l,b,g.settings||{});break;default:case "box":m=new S(l,b,g.settings||{});break;case "cubic":m=new J(l,
b,g.settings||{});break;case "photoflow":m=new V(l,b,g.settings||{});break;case "zen":m=new M(l,b,g.settings||{})}"function"==typeof h&&h(m)},100)})},x=function(b,c){var d=this;this.user=b;this.albumId=c;this.data={};this.title="";this.items=[];this.getData=function(b){a.ajax({url:"https://picasaweb.google.com/data/feed/base/user/"+this.user+"/albumid/"+this.albumId+"?alt=json",dataType:"json",success:function(a){d.data=a;if(a.feed&&(a.feed.title&&(d.title=a.feed.title.$t),a.feed.entry)){d.items=
[];for(var c=0;c<a.feed.entry.length;c++)d.items.push({source:a.feed.entry[c].content.src,thumb:a.feed.entry[c].media$group.media$thumbnail[1].url,description:a.feed.entry[c].media$group.media$description.$t})}"function"==typeof b&&b(d.data)},error:function(){"function"==typeof b&&b()}})}},w=function(){"function"==typeof v&&v(y)},z=function(a,b,c,d){c=c||"";d=d||"";a.items=a.items||[];for(var e=a.items.length,f=0;f<b.length&&(u||15>f);f++)a.items[e]={id:e,source:c+b[f].source,thumb:b[f].thumb?d+b[f].thumb:
c+b[f].source,description:b[f].description||"",link:b[f].link||"",target:b[f].target||""},e++},A=function(a,c,d,e,f){e===b&&(e=g.settings.imagesFolder?g.settings.imagesFolder.replace(/\/+$/,"")+"/":"");f===b&&(f=f||g.settings.thumbnailsFolder?g.settings.thumbnailsFolder.replace(/\/+$/,"")+"/":e);y[a]={id:a,description:d};z(y[a],c,e,f)},y=[];if(p(g.albums)&&g.albums.length){var B=0;for(f=0;f<g.albums.length&&(u||3>f);f++)A(f,g.albums[f].items||[],g.albums[f].description,g.albums[f].imagesFolder,g.albums[f].thumbnailsFolder),
g.albums[f].picasa&&(g.albums[f].picasa.user&&g.albums[f].picasa.albumID)&&(B++,function(a){setTimeout(function(){var b=new x(g.albums[a].picasa.user,g.albums[a].picasa.albumID);b.getData(function(){b.items.length&&z(y[a],b.items);B--})},10*B)}(f));if(B)var C=setInterval(function(){1>B&&(clearInterval(C),w())},100);else w()}else if(p(g.items)&&g.items.length)if(A(0,g.items),g.settings&&g.settings.picasa&&g.settings.picasa.user&&g.settings.picasa.albumID){var D=new x(g.settings.picasa.user,g.settings.picasa.albumID);
D.getData(function(){z(y[0],D.items);w()})}else w();else if(g.settings&&g.settings.picasa&&g.settings.picasa.user&&g.settings.picasa.albumID)A(0,[]),D=new x(g.settings.picasa.user,g.settings.picasa.albumID),D.getData(function(){z(y[0],D.items);w()});else{var G=[];a(f).find("img").each(function(){G.push({source:a(this).parent("a").attr("href")||a(this).attr("src"),thumb:a(this).attr("src"),description:this.title})});A(0,G);w()}})}f===b&&"function"!=typeof d&&(f=d,d=b);var l;f===b?(window.altgallery_id++,
f="altgallery-"+window.altgallery_id,document.write('<div id="'+f+'"></div>'),l=a(document.getElementById(f))):l=a(f);c=a.extend(!0,{width:"550px",height:"400px",background:"none",images:{folder:ia+"img/",left:"left.png",right:"right.png",close:"close.png",loader:"loader.png"},animation:{duration:500},config:{settings:{}}},c);if(c.images.folder){c.images.folder=c.images.folder.replace(/\/+$/,"")+"/";for(var m in c.images)"folder"!=m&&!c.images[m].match("/")&&(c.images[m]=c.images.folder+c.images[m])}if("string"==
typeof c.config){l.css({visibility:"hidden"});var h={load:function(a,c,d){if(c!==b)switch(c.toLowerCase()){case "xml":this.loadXML(a,d);break;default:case "json":this.loadJSON(a,d)}else a.match(/(xml)$/i)?this.loadXML(a,d):this.loadJSON(a,d)},loadJSON:function(b,c){a.ajax({url:b,dataType:"json",success:function(a){h.parse(a,c)},error:function(){typeof c=="function"&&c({})}})},loadXML:function(b,c){a.ajax({url:b,dataType:"xml",success:function(a){var b;typeof b=="undefined"&&(b=function(){});b.ObjTree=
function(){return this};b.ObjTree.prototype.attr_prefix="";b.ObjTree.prototype.parseDOM=function(a){if(a){this.__force_array={};if(this.force_array)for(var b=0;b<this.force_array.length;b++)this.__force_array[this.force_array[b]]=1;b=this.parseElement(a);this.__force_array[a.nodeName]&&(b=[b]);if(a.nodeType!=11){var c={};c[a.nodeName]=b;b=c}return b}};b.ObjTree.prototype.parseElement=function(a){if(a.nodeType!=7){if(a.nodeType==3||a.nodeType==4)return a.nodeValue.match(/[^\x00-\x20]/)==null?void 0:
a.nodeValue;var b,c={};if(a.attributes&&a.attributes.length){b={};for(var d=0;d<a.attributes.length;d++){var e=a.attributes[d].nodeName;if(typeof e=="string"){var f=a.attributes[d].nodeValue;if(f){e=this.attr_prefix+e;typeof c[e]=="undefined"&&(c[e]=0);c[e]++;this.addNode(b,e,c[e],f)}}}}if(a.childNodes&&a.childNodes.length){e=true;b&&(e=false);for(d=0;d<a.childNodes.length&&e;d++){f=a.childNodes[d].nodeType;f==3||f==4||(e=false)}if(e){b||(b="");for(d=0;d<a.childNodes.length;d++)b=b+a.childNodes[d].nodeValue}else{b||
(b={});for(d=0;d<a.childNodes.length;d++){e=a.childNodes[d].nodeName;if(typeof e=="string")if(f=this.parseElement(a.childNodes[d])){typeof c[e]=="undefined"&&(c[e]=0);c[e]++;this.addNode(b,e,c[e],f)}}}}return b}};b.ObjTree.prototype.addNode=function(a,b,c,d){if(this.__force_array[b]){c==1&&(a[b]=[]);a[b][a[b].length]=d}else c==1?a[b]=d:c==2?a[b]=[a[b],d]:a[b][a[b].length]=d};b=new b.ObjTree;b.attr_prefix="";a=b.parseDOM(a)["#document"];h.parse(a,c)},error:function(){typeof c=="function"&&c({})}})},
parse:function(a,b){if(a.gallery){if(a.galleryName)a.gallery.galleryName=a.galleryName;a=a.gallery;if(a.items&&a.items.item)a.items=a.items.item.length?a.items.item:[a.items.item];if(a.albums){if(a.albums.album)a.albums=a.albums.album.length?a.albums.album:[a.albums.album];for(var c=0;c<a.albums.length;c++)if(a.albums[c].items&&a.albums[c].items.item)a.albums[c].items=a.albums[c].items.item.length?a.albums[c].items.item:[a.albums[c].items.item]}}typeof b=="function"&&b(a)}};h.load(c.config,c.configType,
function(a){l.css({visibility:"visible"});c.config=a;g()})}else g();return l};a.fn.altgallery=function(b,c){a.altgallery(b,c,this);return this};a.altbox=altbox=function(b,c){if(d!=top)var d=top,g=d.document;c=a.extend(!0,{frame:{color:"#000",borderRadius:0},mask:{color:"#000",opacity:0.7},images:{folder:ia+"img/",close:"close.png",loader:"loader.gif"},animation:{duration:700}},c);if(c.images.folder){c.images.folder=c.images.folder.replace(/\/+$/,"")+"/";for(var l in c.images)"folder"!=l&&!c.images[l].match("/")&&
(c.images[l]=c.images.folder+c.images[l])}var m=a('<div style="position:fixed; z-index:999; left:0; top:0; width:100%; height:100%; background:no-repeat center;"></div>');m.css({opacity:0,backgroundColor:c.mask.color,backgroundImage:u(c.images.loader)});a(g.body).append(m);m.animate({opacity:c.mask.opacity},c.animation.duration);var h=new Image;h.onload=function(){function l(){m.remove();v.remove()}function k(){x.remove();t.opacity="hide";v.animate(t,0.67*c.animation.duration);w.animate({width:t.width-
20,height:t.height-20},0.67*c.animation.duration);m.fadeOut(c.animation.duration,function(){l()});return!1}var p=a(d).width()-100,q=a(d).height()-100,t=H.fit(h.width/4,h.height/4,p,q,{noEnlarge:!0,minWidth:100,minHeight:100});t.left+=50;t.top+=50;var s=H.fit(h.width+20,h.height+20,p,q,{noEnlarge:!0,minWidth:120,minHeight:120});s.left+=50;s.top+=50;var v=a('<div style="position:fixed; z-index:1000;"></div>');v.css(t);v.css({backgroundColor:c.frame.color,borderRadius:c.frame.borderRadius,MozUserSelect:"none",
webkitUserSelect:"none",userSelect:"none"});v.hide();var w=a('<img src="'+b+'" alt="" style="display:block;" />');w.css({margin:"10px",width:t.width-20,height:t.height-20,borderRadius:8<c.frame.borderRadius?c.frame.borderRadius-8:0});var x=a('<a href="#" style="display:block; position:absolute; right:-12px; top:-10px; width:30px; height:30px; background:no-repeat center;"></a>');x.css({backgroundImage:u(c.images.close)});v.append(w);a(g.body).append(v);m.css({backgroundImage:"none"});w.animate({width:s.width-
20,height:s.height-20,margin:"10px"},c.animation.duration,"easeOutBack");s.opacity="show";v.animate(s,c.animation.duration,"easeOutBack",function(){v.append(x)});a(d).resize(function(){p=a(d).width()-100;q=a(d).height()-100;t=H.fit(h.width/4,h.height/4,p,q,{noEnlarge:!0,minWidth:100,minHeight:100});t.left+=50;t.top+=50;s=H.fit(h.width+20,h.height+20,p,q,{noEnlarge:!0,minWidth:120,minHeight:120});s.left+=50;s.top+=50;v.css(s);w.css({width:s.width-20,height:s.height-20})});m.click(l);x.click(k);v.dblclick(k)};
h.src=b}})(jQuery);
